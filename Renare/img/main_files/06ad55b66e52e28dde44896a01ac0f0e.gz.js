/*
Licenses and credits:
---------------------
The MIT License (MIT)
---------------------
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

jQuery - http://www.jquery.com/
jQueryUI - http://www.jqueryui.com/
JCrop - http://deepliquid.com
Wordpress Audioplayer - http://wpaudioplayer.com/
SWFObject - http://code.google.com/p/swfobject/
Color picker - Stefan Petre www.eyecon.ro
Backstretch - http://srobbin.com/jquery-plugins/backstretch/ Copyright (c) 2013 Scott Robbin

----------------------------------------------
GNU Lesser General Public License, version 2.1
http://www.gnu.org/licenses/lgpl-2.1.html
----------------------------------------------
TinyMCE - http://www.tinymce.com/

------------------------------------
GNU General Public License
http://www.gnu.org/copyleft/gpl.html
------------------------------------
Farbtastic - http://acko.net/
CKEditor - http://ckeditor.com/ - http://edit.hemsida24.se/public/js/ckeditor-edit-mode/LICENSE.md

-------------------------------------
GNU General Public License, version 2
http://www.gnu.org/licenses/gpl-2.0.html
-------------------------------------
DataTables - http://datatables.net/

------------------------------
The GNU General Public License
http://www.gnu.org/licenses/
------------------------------
FLIR - http://drupal.org/project/flir
jQuery Tools (Flowplayer etc) - http://flowplayer.org/

-----
Other
-----
jQuery Form(s) - http://jquery.malsup.com/form/
JSON2 - http://www.json.org/
Superfish - http://users.tpg.com.au/j_birch/plugins/superfish/
*/

/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 2.7.1
 *
 * Copyright 2017 Nick Downie
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=t()}}(function(){return function t(e,n,i){function a(r,l){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!l&&s)return s(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return a(n||t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){},{}],2:[function(t,e,n){function i(t){if(t){var e=[0,0,0],n=1,i=t.match(/^#([a-fA-F0-9]{3})$/i);if(i){i=i[1];for(a=0;a<e.length;a++)e[a]=parseInt(i[a]+i[a],16)}else if(i=t.match(/^#([a-fA-F0-9]{6})$/i)){i=i[1];for(a=0;a<e.length;a++)e[a]=parseInt(i.slice(2*a,2*a+2),16)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(i[a+1]);n=parseFloat(i[4])}else if(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(i[a+1]));n=parseFloat(i[4])}else if(i=t.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(e=c[i[1]]))return}for(var a=0;a<e.length;a++)e[a]=u(e[a],0,255);return n=n||0==n?u(n,0,1):1,e[3]=n,e}}function a(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[u(parseInt(e[1]),0,360),u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}}}function o(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[u(parseInt(e[1]),0,360),u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}}}function r(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function l(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function s(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function u(t,e,n){return Math.min(Math.max(e,t),n)}function d(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var c=t(6);e.exports={getRgba:i,getHsla:a,getRgb:function(t){var e=i(t);return e&&e.slice(0,3)},getHsl:function(t){var e=a(t);return e&&e.slice(0,3)},getHwb:o,getAlpha:function(t){var e=i(t);return e?e[3]:(e=a(t))?e[3]:(e=o(t))?e[3]:void 0},hexString:function(t){return"#"+d(t[0])+d(t[1])+d(t[2])},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?r(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:r,percentString:function(t,e){return e<1||t[3]&&t[3]<1?l(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:l,hslString:function(t,e){return e<1||t[3]&&t[3]<1?s(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:s,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return h[t.slice(0,3)]}};var h={};for(var f in c)h[c[f]]=f},{6:6}],3:[function(t,e,n){var i=t(5),a=t(2),o=function(t){if(t instanceof o)return t;if(!(this instanceof o))return new o(t);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;"string"==typeof t?(e=a.getRgba(t))?this.setValues("rgb",e):(e=a.getHsla(t))?this.setValues("hsl",e):(e=a.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e))};o.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return a.hexString(this.values.rgb)},rgbString:function(){return a.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return a.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return a.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return a.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return a.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return a.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return a.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=this,i=t,a=void 0===e?.5:e,o=2*a-1,r=n.alpha()-i.alpha(),l=((o*r==-1?o:(o+r)/(1+o*r))+1)/2,s=1-l;return this.rgb(l*n.red()+s*i.red(),l*n.green()+s*i.green(),l*n.blue()+s*i.blue()).alpha(n.alpha()*a+i.alpha()*(1-a))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new o,i=this.values,a=n.values;for(var r in i)i.hasOwnProperty(r)&&(t=i[r],"[object Array]"===(e={}.toString.call(t))?a[r]=t.slice(0):"[object Number]"===e?a[r]=t:console.error("unexpected color value:",t));return n}},o.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},o.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},o.prototype.getValues=function(t){for(var e=this.values,n={},i=0;i<t.length;i++)n[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(n.a=e.alpha),n},o.prototype.setValues=function(t,e){var n,a=this.values,o=this.spaces,r=this.maxes,l=1;if(this.valid=!0,"alpha"===t)l=e;else if(e.length)a[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)a[t][n]=e[t.charAt(n)];l=e.a}else if(void 0!==e[o[t][0]]){var s=o[t];for(n=0;n<t.length;n++)a[t][n]=e[s[n]];l=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===l?a.alpha:l)),"alpha"===t)return!1;var u;for(n=0;n<t.length;n++)u=Math.max(0,Math.min(r[t][n],a[t][n])),a[t][n]=Math.round(u);for(var d in o)d!==t&&(a[d]=i[t][d](a[t]));return!0},o.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},o.prototype.setChannel=function(t,e,n){var i=this.values[t];return void 0===n?i[e]:n===i[e]?this:(i[e]=n,this.setValues(t,i),this)},"undefined"!=typeof window&&(window.Color=o),e.exports=o},{2:2,5:5}],4:[function(t,e,n){function i(t){var e,n,i,a=t[0]/255,o=t[1]/255,r=t[2]/255,l=Math.min(a,o,r),s=Math.max(a,o,r),u=s-l;return s==l?e=0:a==s?e=(o-r)/u:o==s?e=2+(r-a)/u:r==s&&(e=4+(a-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),i=(l+s)/2,n=s==l?0:i<=.5?u/(s+l):u/(2-s-l),[e,100*n,100*i]}function a(t){var e,n,i,a=t[0],o=t[1],r=t[2],l=Math.min(a,o,r),s=Math.max(a,o,r),u=s-l;return n=0==s?0:u/s*1e3/10,s==l?e=0:a==s?e=(o-r)/u:o==s?e=2+(r-a)/u:r==s&&(e=4+(a-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),i=s/255*1e3/10,[e,n,i]}function o(t){var e=t[0],n=t[1],a=t[2];return[i(t)[0],100*(1/255*Math.min(e,Math.min(n,a))),100*(a=1-1/255*Math.max(e,Math.max(n,a)))]}function l(t){var e,n,i,a,o=t[0]/255,r=t[1]/255,l=t[2]/255;return a=Math.min(1-o,1-r,1-l),e=(1-o-a)/(1-a)||0,n=(1-r-a)/(1-a)||0,i=(1-l-a)/(1-a)||0,[100*e,100*n,100*i,100*a]}function s(t){return C[JSON.stringify(t)]}function u(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]}function d(t){var e,n,i,a=u(t),o=a[0],r=a[1],l=a[2];return o/=95.047,r/=100,l/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,e=116*r-16,n=500*(o-r),i=200*(r-l),[e,n,i]}function c(t){var e,n,i,a,o,r=t[0]/360,l=t[1]/100,s=t[2]/100;if(0==l)return o=255*s,[o,o,o];e=2*s-(n=s<.5?s*(1+l):s+l-s*l),a=[0,0,0];for(var u=0;u<3;u++)(i=r+1/3*-(u-1))<0&&i++,i>1&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,a[u]=255*o;return a}function h(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),r=255*i*(1-n),l=255*i*(1-n*o),s=255*i*(1-n*(1-o)),i=255*i;switch(a){case 0:return[i,s,r];case 1:return[l,i,r];case 2:return[r,i,s];case 3:return[r,l,i];case 4:return[s,r,i];case 5:return[i,r,l]}}function f(t){var e,n,i,a,o=t[0]/360,l=t[1]/100,s=t[2]/100,u=l+s;switch(u>1&&(l/=u,s/=u),e=Math.floor(6*o),n=1-s,i=6*o-e,0!=(1&e)&&(i=1-i),a=l+i*(n-l),e){default:case 6:case 0:r=n,g=a,b=l;break;case 1:r=a,g=n,b=l;break;case 2:r=l,g=n,b=a;break;case 3:r=l,g=a,b=n;break;case 4:r=a,g=l,b=n;break;case 5:r=n,g=l,b=a}return[255*r,255*g,255*b]}function p(t){var e,n,i,a=t[0]/100,o=t[1]/100,r=t[2]/100,l=t[3]/100;return e=1-Math.min(1,a*(1-l)+l),n=1-Math.min(1,o*(1-l)+l),i=1-Math.min(1,r*(1-l)+l),[255*e,255*n,255*i]}function v(t){var e,n,i,a=t[0]/100,o=t[1]/100,r=t[2]/100;return e=3.2406*a+-1.5372*o+-.4986*r,n=-.9689*a+1.8758*o+.0415*r,i=.0557*a+-.204*o+1.057*r,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,e=Math.min(Math.max(0,e),1),n=Math.min(Math.max(0,n),1),i=Math.min(Math.max(0,i),1),[255*e,255*n,255*i]}function m(t){var e,n,i,a=t[0],o=t[1],r=t[2];return a/=95.047,o/=100,r/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,e=116*o-16,n=500*(a-o),i=200*(o-r),[e,n,i]}function x(t){var e,n,i,a,o=t[0],r=t[1],l=t[2];return o<=8?a=(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),a=Math.pow(n/100,1/3)),e=e/95.047<=.008856?e=95.047*(r/500+a-16/116)/7.787:95.047*Math.pow(r/500+a,3),i=i/108.883<=.008859?i=108.883*(a-l/200-16/116)/7.787:108.883*Math.pow(a-l/200,3),[e,n,i]}function y(t){var e,n,i,a=t[0],o=t[1],r=t[2];return e=Math.atan2(r,o),(n=360*e/2/Math.PI)<0&&(n+=360),i=Math.sqrt(o*o+r*r),[a,i,n]}function k(t){return v(x(t))}function w(t){var e,n,i,a=t[0],o=t[1];return i=t[2]/360*2*Math.PI,e=o*Math.cos(i),n=o*Math.sin(i),[a,e,n]}function M(t){return S[t]}e.exports={rgb2hsl:i,rgb2hsv:a,rgb2hwb:o,rgb2cmyk:l,rgb2keyword:s,rgb2xyz:u,rgb2lab:d,rgb2lch:function(t){return y(d(t))},hsl2rgb:c,hsl2hsv:function(t){var e,n,i=t[0],a=t[1]/100,o=t[2]/100;return 0===o?[0,0,0]:(o*=2,a*=o<=1?o:2-o,n=(o+a)/2,e=2*a/(o+a),[i,100*e,100*n])},hsl2hwb:function(t){return o(c(t))},hsl2cmyk:function(t){return l(c(t))},hsl2keyword:function(t){return s(c(t))},hsv2rgb:h,hsv2hsl:function(t){var e,n,i=t[0],a=t[1]/100,o=t[2]/100;return n=(2-a)*o,e=a*o,e/=n<=1?n:2-n,e=e||0,n/=2,[i,100*e,100*n]},hsv2hwb:function(t){return o(h(t))},hsv2cmyk:function(t){return l(h(t))},hsv2keyword:function(t){return s(h(t))},hwb2rgb:f,hwb2hsl:function(t){return i(f(t))},hwb2hsv:function(t){return a(f(t))},hwb2cmyk:function(t){return l(f(t))},hwb2keyword:function(t){return s(f(t))},cmyk2rgb:p,cmyk2hsl:function(t){return i(p(t))},cmyk2hsv:function(t){return a(p(t))},cmyk2hwb:function(t){return o(p(t))},cmyk2keyword:function(t){return s(p(t))},keyword2rgb:M,keyword2hsl:function(t){return i(M(t))},keyword2hsv:function(t){return a(M(t))},keyword2hwb:function(t){return o(M(t))},keyword2cmyk:function(t){return l(M(t))},keyword2lab:function(t){return d(M(t))},keyword2xyz:function(t){return u(M(t))},xyz2rgb:v,xyz2lab:m,xyz2lch:function(t){return y(m(t))},lab2xyz:x,lab2rgb:k,lab2lch:y,lch2lab:w,lch2xyz:function(t){return x(w(t))},lch2rgb:function(t){return k(w(t))}};var S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={};for(var _ in S)C[JSON.stringify(S[_])]=_},{}],5:[function(t,e,n){var i=t(4),a=function(){return new u};for(var o in i){a[o+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),i[t](e)}}(o);var r=/(\w+)2(\w+)/.exec(o),l=r[1],s=r[2];(a[l]=a[l]||{})[s]=a[o]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var n=i[t](e);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(o)}var u=function(){this.convs={}};u.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},u.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},u.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,i=this.convs[n];e=a[n][t](i),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){u.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),e.exports=a},{4:4}],6:[function(t,e,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(t,e,n){var i=t(29)();i.helpers=t(45),t(27)(i),i.defaults=t(25),i.Element=t(26),i.elements=t(40),i.Interaction=t(28),i.platform=t(48),t(31)(i),t(22)(i),t(23)(i),t(24)(i),t(30)(i),t(33)(i),t(32)(i),t(35)(i),t(54)(i),t(52)(i),t(53)(i),t(55)(i),t(56)(i),t(57)(i),t(15)(i),t(16)(i),t(17)(i),t(18)(i),t(19)(i),t(20)(i),t(21)(i),t(8)(i),t(9)(i),t(10)(i),t(11)(i),t(12)(i),t(13)(i),t(14)(i);var a=[];a.push(t(49)(i),t(50)(i),t(51)(i)),i.plugins.register(a),i.platform.initialize(),e.exports=i,"undefined"!=typeof window&&(window.Chart=i),i.canvasHelpers=i.helpers.canvas},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,35:35,40:40,45:45,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,8:8,9:9}],8:[function(t,e,n){"use strict";e.exports=function(t){t.Bar=function(e,n){return n.type="bar",new t(e,n)}}},{}],9:[function(t,e,n){"use strict";e.exports=function(t){t.Bubble=function(e,n){return n.type="bubble",new t(e,n)}}},{}],10:[function(t,e,n){"use strict";e.exports=function(t){t.Doughnut=function(e,n){return n.type="doughnut",new t(e,n)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t){t.Line=function(e,n){return n.type="line",new t(e,n)}}},{}],12:[function(t,e,n){"use strict";e.exports=function(t){t.PolarArea=function(e,n){return n.type="polarArea",new t(e,n)}}},{}],13:[function(t,e,n){"use strict";e.exports=function(t){t.Radar=function(e,n){return n.type="radar",new t(e,n)}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t){t.Scatter=function(e,n){return n.type="scatter",new t(e,n)}}},{}],15:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),i._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(t,e){var n="";return t.length>0&&(t[0].yLabel?n=t[0].yLabel:e.labels.length>0&&t[0].index<e.labels.length&&(n=e.labels[t[0].index])),n},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.xLabel}},mode:"index",axis:"y"}}),e.exports=function(t){t.controllers.bar=t.DatasetController.extend({dataElementType:a.Rectangle,initialize:function(){var e,n=this;t.DatasetController.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0},update:function(t){var e,n,i=this,a=i.getMeta().data;for(i._ruler=i.getRuler(),e=0,n=a.length;e<n;++e)i.updateElement(a[e],e,t)},updateElement:function(t,e,n){var i=this,a=i.chart,r=i.getMeta(),l=i.getDataset(),s=t.custom||{},u=a.options.elements.rectangle;t._xScale=i.getScaleForId(r.xAxisID),t._yScale=i.getScaleForId(r.yAxisID),t._datasetIndex=i.index,t._index=e,t._model={datasetLabel:l.label,label:a.data.labels[e],borderSkipped:s.borderSkipped?s.borderSkipped:u.borderSkipped,backgroundColor:s.backgroundColor?s.backgroundColor:o.valueAtIndexOrDefault(l.backgroundColor,e,u.backgroundColor),borderColor:s.borderColor?s.borderColor:o.valueAtIndexOrDefault(l.borderColor,e,u.borderColor),borderWidth:s.borderWidth?s.borderWidth:o.valueAtIndexOrDefault(l.borderWidth,e,u.borderWidth)},i.updateElementGeometry(t,e,n),t.pivot()},updateElementGeometry:function(t,e,n){var i=this,a=t._model,o=i.getValueScale(),r=o.getBasePixel(),l=o.isHorizontal(),s=i._ruler||i.getRuler(),u=i.calculateBarValuePixels(i.index,e),d=i.calculateBarIndexPixels(i.index,e,s);a.horizontal=l,a.base=n?r:u.base,a.x=l?n?r:u.head:d.center,a.y=l?d.center:n?r:u.head,a.height=l?d.size:void 0,a.width=l?void 0:d.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(t){var e,n,i=this,a=i.chart,o=i.getIndexScale().options.stacked,r=void 0===t?a.data.datasets.length:t+1,l=[];for(e=0;e<r;++e)(n=a.getDatasetMeta(e)).bar&&a.isDatasetVisible(e)&&(!1===o||!0===o&&-1===l.indexOf(n.stack)||void 0===o&&(void 0===n.stack||-1===l.indexOf(n.stack)))&&l.push(n.stack);return l.length},getStackIndex:function(t){return this.getStackCount(t)-1},getRuler:function(){var t,e,n=this,i=n.getIndexScale(),a=n.getStackCount(),o=n.index,r=[],l=i.isHorizontal(),s=l?i.left:i.top,u=s+(l?i.width:i.height);for(t=0,e=n.getMeta().data.length;t<e;++t)r.push(i.getPixelForValue(null,t,o));return{pixels:r,start:s,end:u,stackCount:a,scale:i}},calculateBarValuePixels:function(t,e){var n,i,a,o,r,l,s=this,u=s.chart,d=s.getMeta(),c=s.getValueScale(),h=u.data.datasets,f=c.getRightValue(h[t].data[e]),g=c.options.stacked,p=d.stack,v=0;if(g||void 0===g&&void 0!==p)for(n=0;n<t;++n)(i=u.getDatasetMeta(n)).bar&&i.stack===p&&i.controller.getValueScaleId()===c.id&&u.isDatasetVisible(n)&&(a=c.getRightValue(h[n].data[e]),(f<0&&a<0||f>=0&&a>0)&&(v+=a));return o=c.getPixelForValue(v),r=c.getPixelForValue(v+f),l=(r-o)/2,{size:l,base:o,head:r,center:r+l/2}},calculateBarIndexPixels:function(t,e,n){var i,a,r,l,s,u,d=this,c=n.scale.options,h=d.getStackIndex(t),f=n.pixels,g=f[e],p=f.length,v=n.start,m=n.end;return 1===p?(i=g>v?g-v:m-g,a=g<m?m-g:g-v):(e>0&&(i=(g-f[e-1])/2,e===p-1&&(a=i)),e<p-1&&(a=(f[e+1]-g)/2,0===e&&(i=a))),r=i*c.categoryPercentage,l=a*c.categoryPercentage,s=(r+l)/n.stackCount,u=s*c.barPercentage,u=Math.min(o.valueOrDefault(c.barThickness,u),o.valueOrDefault(c.maxBarThickness,1/0)),g-=r,g+=s*h,g+=(s-u)/2,{size:u,base:g,head:g+u,center:g+u/2}},draw:function(){var t=this,e=t.chart,n=t.getValueScale(),i=t.getMeta().data,a=t.getDataset(),r=i.length,l=0;for(o.canvas.clipArea(e.ctx,e.chartArea);l<r;++l)isNaN(n.getRightValue(a.data[l]))||i[l].draw();o.canvas.unclipArea(e.ctx)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},a=t._model;a.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:o.valueAtIndexOrDefault(e.hoverBackgroundColor,n,o.getHoverColor(a.backgroundColor)),a.borderColor=i.hoverBorderColor?i.hoverBorderColor:o.valueAtIndexOrDefault(e.hoverBorderColor,n,o.getHoverColor(a.borderColor)),a.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:o.valueAtIndexOrDefault(e.hoverBorderWidth,n,a.borderWidth)},removeHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},a=t._model,r=this.chart.options.elements.rectangle;a.backgroundColor=i.backgroundColor?i.backgroundColor:o.valueAtIndexOrDefault(e.backgroundColor,n,r.backgroundColor),a.borderColor=i.borderColor?i.borderColor:o.valueAtIndexOrDefault(e.borderColor,n,r.borderColor),a.borderWidth=i.borderWidth?i.borderWidth:o.valueAtIndexOrDefault(e.borderWidth,n,r.borderWidth)}}),t.controllers.horizontalBar=t.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{25:25,40:40,45:45}],16:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",i=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+i.r+")"}}}}),e.exports=function(t){t.controllers.bubble=t.DatasetController.extend({dataElementType:a.Point,update:function(t){var e=this,n=e.getMeta().data;o.each(n,function(n,i){e.updateElement(n,i,t)})},updateElement:function(t,e,n){var i=this,a=i.getMeta(),o=t.custom||{},r=i.getScaleForId(a.xAxisID),l=i.getScaleForId(a.yAxisID),s=i._resolveElementOptions(t,e),u=i.getDataset().data[e],d=i.index,c=n?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof u?u:NaN,e,d),h=n?l.getBasePixel():l.getPixelForValue(u,e,d);t._xScale=r,t._yScale=l,t._options=s,t._datasetIndex=d,t._index=e,t._model={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth,hitRadius:s.hitRadius,pointStyle:s.pointStyle,radius:n?0:s.radius,skip:o.skip||isNaN(c)||isNaN(h),x:c,y:h},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options;e.backgroundColor=o.valueOrDefault(n.hoverBackgroundColor,o.getHoverColor(n.backgroundColor)),e.borderColor=o.valueOrDefault(n.hoverBorderColor,o.getHoverColor(n.borderColor)),e.borderWidth=o.valueOrDefault(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},removeHoverStyle:function(t){var e=t._model,n=t._options;e.backgroundColor=n.backgroundColor,e.borderColor=n.borderColor,e.borderWidth=n.borderWidth,e.radius=n.radius},_resolveElementOptions:function(t,e){var n,i,a,r=this,l=r.chart,s=l.data.datasets[r.index],u=t.custom||{},d=l.options.elements.point,c=o.options.resolve,h=s.data[e],f={},g={chart:l,dataIndex:e,dataset:s,datasetIndex:r.index},p=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(n=0,i=p.length;n<i;++n)f[a=p[n]]=c([u[a],s[a],d[a]],g,e);return f.radius=c([u.radius,h?h.r:void 0,s.radius,d.radius],g,e),f}})}},{25:25,40:40,45:45}],17:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,i=n.datasets,a=n.labels;if(i.length)for(var o=0;o<i[0].data.length;++o)e.push('<li><span style="background-color:'+i[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(n,i){var a=t.getDatasetMeta(0),r=e.datasets[0],l=a.data[i],s=l&&l.custom||{},u=o.valueAtIndexOrDefault,d=t.options.elements.arc;return{text:n,fillStyle:s.backgroundColor?s.backgroundColor:u(r.backgroundColor,i,d.backgroundColor),strokeStyle:s.borderColor?s.borderColor:u(r.borderColor,i,d.borderColor),lineWidth:s.borderWidth?s.borderWidth:u(r.borderWidth,i,d.borderWidth),hidden:isNaN(r.data[i])||a.data[i].hidden,index:i}}):[]}},onClick:function(t,e){var n,i,a,o=e.index,r=this.chart;for(n=0,i=(r.data.datasets||[]).length;n<i;++n)(a=r.getDatasetMeta(n)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],i=": "+e.datasets[t.datasetIndex].data[t.index];return o.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}}),i._set("pie",o.clone(i.doughnut)),i._set("pie",{cutoutPercentage:0}),e.exports=function(t){t.controllers.doughnut=t.controllers.pie=t.DatasetController.extend({dataElementType:a.Arc,linkScales:o.noop,getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e=this,n=e.chart,i=n.chartArea,a=n.options,r=a.elements.arc,l=i.right-i.left-r.borderWidth,s=i.bottom-i.top-r.borderWidth,u=Math.min(l,s),d={x:0,y:0},c=e.getMeta(),h=a.cutoutPercentage,f=a.circumference;if(f<2*Math.PI){var g=a.rotation%(2*Math.PI),p=(g+=2*Math.PI*(g>=Math.PI?-1:g<-Math.PI?1:0))+f,v={x:Math.cos(g),y:Math.sin(g)},m={x:Math.cos(p),y:Math.sin(p)},b=g<=0&&p>=0||g<=2*Math.PI&&2*Math.PI<=p,x=g<=.5*Math.PI&&.5*Math.PI<=p||g<=2.5*Math.PI&&2.5*Math.PI<=p,y=g<=-Math.PI&&-Math.PI<=p||g<=Math.PI&&Math.PI<=p,k=g<=.5*-Math.PI&&.5*-Math.PI<=p||g<=1.5*Math.PI&&1.5*Math.PI<=p,w=h/100,M={x:y?-1:Math.min(v.x*(v.x<0?1:w),m.x*(m.x<0?1:w)),y:k?-1:Math.min(v.y*(v.y<0?1:w),m.y*(m.y<0?1:w))},S={x:b?1:Math.max(v.x*(v.x>0?1:w),m.x*(m.x>0?1:w)),y:x?1:Math.max(v.y*(v.y>0?1:w),m.y*(m.y>0?1:w))},C={width:.5*(S.x-M.x),height:.5*(S.y-M.y)};u=Math.min(l/C.width,s/C.height),d={x:-.5*(S.x+M.x),y:-.5*(S.y+M.y)}}n.borderWidth=e.getMaxBorderWidth(c.data),n.outerRadius=Math.max((u-n.borderWidth)/2,0),n.innerRadius=Math.max(h?n.outerRadius/100*h:0,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),n.offsetX=d.x*n.outerRadius,n.offsetY=d.y*n.outerRadius,c.total=e.calculateTotal(),e.outerRadius=n.outerRadius-n.radiusLength*e.getRingIndex(e.index),e.innerRadius=Math.max(e.outerRadius-n.radiusLength,0),o.each(c.data,function(n,i){e.updateElement(n,i,t)})},updateElement:function(t,e,n){var i=this,a=i.chart,r=a.chartArea,l=a.options,s=l.animation,u=(r.left+r.right)/2,d=(r.top+r.bottom)/2,c=l.rotation,h=l.rotation,f=i.getDataset(),g=n&&s.animateRotate?0:t.hidden?0:i.calculateCircumference(f.data[e])*(l.circumference/(2*Math.PI)),p=n&&s.animateScale?0:i.innerRadius,v=n&&s.animateScale?0:i.outerRadius,m=o.valueAtIndexOrDefault;o.extend(t,{_datasetIndex:i.index,_index:e,_model:{x:u+a.offsetX,y:d+a.offsetY,startAngle:c,endAngle:h,circumference:g,outerRadius:v,innerRadius:p,label:m(f.label,e,a.data.labels[e])}});var b=t._model;this.removeHoverStyle(t),n&&s.animateRotate||(b.startAngle=0===e?l.rotation:i.getMeta().data[e-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},calculateTotal:function(){var t,e=this.getDataset(),n=this.getMeta(),i=0;return o.each(n.data,function(n,a){t=e.data[a],isNaN(t)||n.hidden||(i+=Math.abs(t))}),i},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(t/e):0},getMaxBorderWidth:function(t){for(var e,n,i=0,a=this.index,o=t.length,r=0;r<o;r++)e=t[r]._model?t[r]._model.borderWidth:0,i=(n=t[r]._chart?t[r]._chart.config.data.datasets[a].hoverBorderWidth:0)>(i=e>i?e:i)?n:i;return i}})}},{25:25,40:40,45:45}],18:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),e.exports=function(t){function e(t,e){return o.valueOrDefault(t.showLine,e.showLines)}t.controllers.line=t.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,update:function(t){var n,i,a,r=this,l=r.getMeta(),s=l.dataset,u=l.data||[],d=r.chart.options,c=d.elements.line,h=r.getScaleForId(l.yAxisID),f=r.getDataset(),g=e(f,d);for(g&&(a=s.custom||{},void 0!==f.tension&&void 0===f.lineTension&&(f.lineTension=f.tension),s._scale=h,s._datasetIndex=r.index,s._children=u,s._model={spanGaps:f.spanGaps?f.spanGaps:d.spanGaps,tension:a.tension?a.tension:o.valueOrDefault(f.lineTension,c.tension),backgroundColor:a.backgroundColor?a.backgroundColor:f.backgroundColor||c.backgroundColor,borderWidth:a.borderWidth?a.borderWidth:f.borderWidth||c.borderWidth,borderColor:a.borderColor?a.borderColor:f.borderColor||c.borderColor,borderCapStyle:a.borderCapStyle?a.borderCapStyle:f.borderCapStyle||c.borderCapStyle,borderDash:a.borderDash?a.borderDash:f.borderDash||c.borderDash,borderDashOffset:a.borderDashOffset?a.borderDashOffset:f.borderDashOffset||c.borderDashOffset,borderJoinStyle:a.borderJoinStyle?a.borderJoinStyle:f.borderJoinStyle||c.borderJoinStyle,fill:a.fill?a.fill:void 0!==f.fill?f.fill:c.fill,steppedLine:a.steppedLine?a.steppedLine:o.valueOrDefault(f.steppedLine,c.stepped),cubicInterpolationMode:a.cubicInterpolationMode?a.cubicInterpolationMode:o.valueOrDefault(f.cubicInterpolationMode,c.cubicInterpolationMode)},s.pivot()),n=0,i=u.length;n<i;++n)r.updateElement(u[n],n,t);for(g&&0!==s._model.tension&&r.updateBezierControlPoints(),n=0,i=u.length;n<i;++n)u[n].pivot()},getPointBackgroundColor:function(t,e){var n=this.chart.options.elements.point.backgroundColor,i=this.getDataset(),a=t.custom||{};return a.backgroundColor?n=a.backgroundColor:i.pointBackgroundColor?n=o.valueAtIndexOrDefault(i.pointBackgroundColor,e,n):i.backgroundColor&&(n=i.backgroundColor),n},getPointBorderColor:function(t,e){var n=this.chart.options.elements.point.borderColor,i=this.getDataset(),a=t.custom||{};return a.borderColor?n=a.borderColor:i.pointBorderColor?n=o.valueAtIndexOrDefault(i.pointBorderColor,e,n):i.borderColor&&(n=i.borderColor),n},getPointBorderWidth:function(t,e){var n=this.chart.options.elements.point.borderWidth,i=this.getDataset(),a=t.custom||{};return isNaN(a.borderWidth)?!isNaN(i.pointBorderWidth)||o.isArray(i.pointBorderWidth)?n=o.valueAtIndexOrDefault(i.pointBorderWidth,e,n):isNaN(i.borderWidth)||(n=i.borderWidth):n=a.borderWidth,n},updateElement:function(t,e,n){var i,a,r=this,l=r.getMeta(),s=t.custom||{},u=r.getDataset(),d=r.index,c=u.data[e],h=r.getScaleForId(l.yAxisID),f=r.getScaleForId(l.xAxisID),g=r.chart.options.elements.point;void 0!==u.radius&&void 0===u.pointRadius&&(u.pointRadius=u.radius),void 0!==u.hitRadius&&void 0===u.pointHitRadius&&(u.pointHitRadius=u.hitRadius),i=f.getPixelForValue("object"==typeof c?c:NaN,e,d),a=n?h.getBasePixel():r.calculatePointY(c,e,d),t._xScale=f,t._yScale=h,t._datasetIndex=d,t._index=e,t._model={x:i,y:a,skip:s.skip||isNaN(i)||isNaN(a),radius:s.radius||o.valueAtIndexOrDefault(u.pointRadius,e,g.radius),pointStyle:s.pointStyle||o.valueAtIndexOrDefault(u.pointStyle,e,g.pointStyle),backgroundColor:r.getPointBackgroundColor(t,e),borderColor:r.getPointBorderColor(t,e),borderWidth:r.getPointBorderWidth(t,e),tension:l.dataset._model?l.dataset._model.tension:0,steppedLine:!!l.dataset._model&&l.dataset._model.steppedLine,hitRadius:s.hitRadius||o.valueAtIndexOrDefault(u.pointHitRadius,e,g.hitRadius)}},calculatePointY:function(t,e,n){var i,a,o,r=this,l=r.chart,s=r.getMeta(),u=r.getScaleForId(s.yAxisID),d=0,c=0;if(u.options.stacked){for(i=0;i<n;i++)if(a=l.data.datasets[i],"line"===(o=l.getDatasetMeta(i)).type&&o.yAxisID===u.id&&l.isDatasetVisible(i)){var h=Number(u.getRightValue(a.data[e]));h<0?c+=h||0:d+=h||0}var f=Number(u.getRightValue(t));return f<0?u.getPixelForValue(c+f):u.getPixelForValue(d+f)}return u.getPixelForValue(t)},updateBezierControlPoints:function(){function t(t,e,n){return Math.max(Math.min(t,n),e)}var e,n,i,a,r=this,l=r.getMeta(),s=r.chart.chartArea,u=l.data||[];if(l.dataset._model.spanGaps&&(u=u.filter(function(t){return!t._model.skip})),"monotone"===l.dataset._model.cubicInterpolationMode)o.splineCurveMonotone(u);else for(e=0,n=u.length;e<n;++e)i=u[e]._model,a=o.splineCurve(o.previousItem(u,e)._model,i,o.nextItem(u,e)._model,l.dataset._model.tension),i.controlPointPreviousX=a.previous.x,i.controlPointPreviousY=a.previous.y,i.controlPointNextX=a.next.x,i.controlPointNextY=a.next.y;if(r.chart.options.elements.line.capBezierPoints)for(e=0,n=u.length;e<n;++e)(i=u[e]._model).controlPointPreviousX=t(i.controlPointPreviousX,s.left,s.right),i.controlPointPreviousY=t(i.controlPointPreviousY,s.top,s.bottom),i.controlPointNextX=t(i.controlPointNextX,s.left,s.right),i.controlPointNextY=t(i.controlPointNextY,s.top,s.bottom)},draw:function(){var t=this,n=t.chart,i=t.getMeta(),a=i.data||[],r=n.chartArea,l=a.length,s=0;for(o.canvas.clipArea(n.ctx,r),e(t.getDataset(),n.options)&&i.dataset.draw(),o.canvas.unclipArea(n.ctx);s<l;++s)a[s].draw(r)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},a=t._model;a.radius=i.hoverRadius||o.valueAtIndexOrDefault(e.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),a.backgroundColor=i.hoverBackgroundColor||o.valueAtIndexOrDefault(e.pointHoverBackgroundColor,n,o.getHoverColor(a.backgroundColor)),a.borderColor=i.hoverBorderColor||o.valueAtIndexOrDefault(e.pointHoverBorderColor,n,o.getHoverColor(a.borderColor)),a.borderWidth=i.hoverBorderWidth||o.valueAtIndexOrDefault(e.pointHoverBorderWidth,n,a.borderWidth)},removeHoverStyle:function(t){var e=this,n=e.chart.data.datasets[t._datasetIndex],i=t._index,a=t.custom||{},r=t._model;void 0!==n.radius&&void 0===n.pointRadius&&(n.pointRadius=n.radius),r.radius=a.radius||o.valueAtIndexOrDefault(n.pointRadius,i,e.chart.options.elements.point.radius),r.backgroundColor=e.getPointBackgroundColor(t,i),r.borderColor=e.getPointBorderColor(t,i),r.borderWidth=e.getPointBorderWidth(t,i)}})}},{25:25,40:40,45:45}],19:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,i=n.datasets,a=n.labels;if(i.length)for(var o=0;o<i[0].data.length;++o)e.push('<li><span style="background-color:'+i[0].backgroundColor[o]+'"></span>'),a[o]&&e.push(a[o]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map(function(n,i){var a=t.getDatasetMeta(0),r=e.datasets[0],l=a.data[i].custom||{},s=o.valueAtIndexOrDefault,u=t.options.elements.arc;return{text:n,fillStyle:l.backgroundColor?l.backgroundColor:s(r.backgroundColor,i,u.backgroundColor),strokeStyle:l.borderColor?l.borderColor:s(r.borderColor,i,u.borderColor),lineWidth:l.borderWidth?l.borderWidth:s(r.borderWidth,i,u.borderWidth),hidden:isNaN(r.data[i])||a.data[i].hidden,index:i}}):[]}},onClick:function(t,e){var n,i,a,o=e.index,r=this.chart;for(n=0,i=(r.data.datasets||[]).length;n<i;++n)(a=r.getDatasetMeta(n)).data[o].hidden=!a.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}}),e.exports=function(t){t.controllers.polarArea=t.DatasetController.extend({dataElementType:a.Arc,linkScales:o.noop,update:function(t){var e=this,n=e.chart,i=n.chartArea,a=e.getMeta(),r=n.options,l=r.elements.arc,s=Math.min(i.right-i.left,i.bottom-i.top);n.outerRadius=Math.max((s-l.borderWidth/2)/2,0),n.innerRadius=Math.max(r.cutoutPercentage?n.outerRadius/100*r.cutoutPercentage:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),e.outerRadius=n.outerRadius-n.radiusLength*e.index,e.innerRadius=e.outerRadius-n.radiusLength,a.count=e.countVisibleElements(),o.each(a.data,function(n,i){e.updateElement(n,i,t)})},updateElement:function(t,e,n){for(var i=this,a=i.chart,r=i.getDataset(),l=a.options,s=l.animation,u=a.scale,d=a.data.labels,c=i.calculateCircumference(r.data[e]),h=u.xCenter,f=u.yCenter,g=0,p=i.getMeta(),v=0;v<e;++v)isNaN(r.data[v])||p.data[v].hidden||++g;var m=l.startAngle,b=t.hidden?0:u.getDistanceFromCenterForValue(r.data[e]),x=m+c*g,y=x+(t.hidden?0:c),k=s.animateScale?0:u.getDistanceFromCenterForValue(r.data[e]);o.extend(t,{_datasetIndex:i.index,_index:e,_scale:u,_model:{x:h,y:f,innerRadius:0,outerRadius:n?k:b,startAngle:n&&s.animateRotate?m:x,endAngle:n&&s.animateRotate?m:y,label:o.valueAtIndexOrDefault(d,e,d[e])}}),i.removeHoverStyle(t),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),n=0;return o.each(e.data,function(e,i){isNaN(t.data[i])||e.hidden||n++}),n},calculateCircumference:function(t){var e=this.getMeta().count;return e>0&&!isNaN(t)?2*Math.PI/e:0}})}},{25:25,40:40,45:45}],20:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),e.exports=function(t){t.controllers.radar=t.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,linkScales:o.noop,update:function(t){var e=this,n=e.getMeta(),i=n.dataset,a=n.data,r=i.custom||{},l=e.getDataset(),s=e.chart.options.elements.line,u=e.chart.scale;void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o.extend(n.dataset,{_datasetIndex:e.index,_scale:u,_children:a,_loop:!0,_model:{tension:r.tension?r.tension:o.valueOrDefault(l.lineTension,s.tension),backgroundColor:r.backgroundColor?r.backgroundColor:l.backgroundColor||s.backgroundColor,borderWidth:r.borderWidth?r.borderWidth:l.borderWidth||s.borderWidth,borderColor:r.borderColor?r.borderColor:l.borderColor||s.borderColor,fill:r.fill?r.fill:void 0!==l.fill?l.fill:s.fill,borderCapStyle:r.borderCapStyle?r.borderCapStyle:l.borderCapStyle||s.borderCapStyle,borderDash:r.borderDash?r.borderDash:l.borderDash||s.borderDash,borderDashOffset:r.borderDashOffset?r.borderDashOffset:l.borderDashOffset||s.borderDashOffset,borderJoinStyle:r.borderJoinStyle?r.borderJoinStyle:l.borderJoinStyle||s.borderJoinStyle}}),n.dataset.pivot(),o.each(a,function(n,i){e.updateElement(n,i,t)},e),e.updateBezierControlPoints()},updateElement:function(t,e,n){var i=this,a=t.custom||{},r=i.getDataset(),l=i.chart.scale,s=i.chart.options.elements.point,u=l.getPointPositionForValue(e,r.data[e]);void 0!==r.radius&&void 0===r.pointRadius&&(r.pointRadius=r.radius),void 0!==r.hitRadius&&void 0===r.pointHitRadius&&(r.pointHitRadius=r.hitRadius),o.extend(t,{_datasetIndex:i.index,_index:e,_scale:l,_model:{x:n?l.xCenter:u.x,y:n?l.yCenter:u.y,tension:a.tension?a.tension:o.valueOrDefault(r.lineTension,i.chart.options.elements.line.tension),radius:a.radius?a.radius:o.valueAtIndexOrDefault(r.pointRadius,e,s.radius),backgroundColor:a.backgroundColor?a.backgroundColor:o.valueAtIndexOrDefault(r.pointBackgroundColor,e,s.backgroundColor),borderColor:a.borderColor?a.borderColor:o.valueAtIndexOrDefault(r.pointBorderColor,e,s.borderColor),borderWidth:a.borderWidth?a.borderWidth:o.valueAtIndexOrDefault(r.pointBorderWidth,e,s.borderWidth),pointStyle:a.pointStyle?a.pointStyle:o.valueAtIndexOrDefault(r.pointStyle,e,s.pointStyle),hitRadius:a.hitRadius?a.hitRadius:o.valueAtIndexOrDefault(r.pointHitRadius,e,s.hitRadius)}}),t._model.skip=a.skip?a.skip:isNaN(t._model.x)||isNaN(t._model.y)},updateBezierControlPoints:function(){var t=this.chart.chartArea,e=this.getMeta();o.each(e.data,function(n,i){var a=n._model,r=o.splineCurve(o.previousItem(e.data,i,!0)._model,a,o.nextItem(e.data,i,!0)._model,a.tension);a.controlPointPreviousX=Math.max(Math.min(r.previous.x,t.right),t.left),a.controlPointPreviousY=Math.max(Math.min(r.previous.y,t.bottom),t.top),a.controlPointNextX=Math.max(Math.min(r.next.x,t.right),t.left),a.controlPointNextY=Math.max(Math.min(r.next.y,t.bottom),t.top),n.pivot()})},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t.custom||{},i=t._index,a=t._model;a.radius=n.hoverRadius?n.hoverRadius:o.valueAtIndexOrDefault(e.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius),a.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:o.valueAtIndexOrDefault(e.pointHoverBackgroundColor,i,o.getHoverColor(a.backgroundColor)),a.borderColor=n.hoverBorderColor?n.hoverBorderColor:o.valueAtIndexOrDefault(e.pointHoverBorderColor,i,o.getHoverColor(a.borderColor)),a.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:o.valueAtIndexOrDefault(e.pointHoverBorderWidth,i,a.borderWidth)},removeHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t.custom||{},i=t._index,a=t._model,r=this.chart.options.elements.point;a.radius=n.radius?n.radius:o.valueAtIndexOrDefault(e.pointRadius,i,r.radius),a.backgroundColor=n.backgroundColor?n.backgroundColor:o.valueAtIndexOrDefault(e.pointBackgroundColor,i,r.backgroundColor),a.borderColor=n.borderColor?n.borderColor:o.valueAtIndexOrDefault(e.pointBorderColor,i,r.borderColor),a.borderWidth=n.borderWidth?n.borderWidth:o.valueAtIndexOrDefault(e.pointBorderWidth,i,r.borderWidth)}})}},{25:25,40:40,45:45}],21:[function(t,e,n){"use strict";t(25)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),e.exports=function(t){t.controllers.scatter=t.controllers.line}},{25:25}],22:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:o.noop,onComplete:o.noop}}),e.exports=function(t){t.Animation=a.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),t.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(t,e,n,i){var a,o,r=this.animations;for(e.chart=t,i||(t.animating=!0),a=0,o=r.length;a<o;++a)if(r[a].chart===t)return void(r[a]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=o.findIndex(this.animations,function(e){return e.chart===t});-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=o.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){var t=this,e=Date.now(),n=0;t.dropFrames>1&&(n=Math.floor(t.dropFrames),t.dropFrames=t.dropFrames%1),t.advance(1+n);var i=Date.now();t.dropFrames+=(i-e)/t.frameDuration,t.animations.length>0&&t.requestAnimationFrame()},advance:function(t){for(var e,n,i=this.animations,a=0;a<i.length;)n=(e=i[a]).chart,e.currentStep=(e.currentStep||0)+t,e.currentStep=Math.min(e.currentStep,e.numSteps),o.callback(e.render,[n,e],n),o.callback(e.onAnimationProgress,[e],n),e.currentStep>=e.numSteps?(o.callback(e.onAnimationComplete,[e],n),n.animating=!1,i.splice(a,1)):++a}},Object.defineProperty(t.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(t.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}})}},{25:25,26:26,45:45}],23:[function(t,e,n){"use strict";var i=t(25),a=t(45),o=t(28),r=t(48);e.exports=function(t){function e(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=a.configMerge(i.global,i[t.type],t.options||{}),t}function n(t){var e=t.options;e.scale?t.scale.options=e.scale:e.scales&&e.scales.xAxes.concat(e.scales.yAxes).forEach(function(e){t.scales[e.id].options=e}),t.tooltip._options=e.tooltips}function l(t){return"top"===t||"bottom"===t}var s=t.plugins;t.types={},t.instances={},t.controllers={},a.extend(t.prototype,{construct:function(n,i){var o=this;i=e(i);var l=r.acquireContext(n,i),s=l&&l.canvas,u=s&&s.height,d=s&&s.width;o.id=a.uid(),o.ctx=l,o.canvas=s,o.config=i,o.width=d,o.height=u,o.aspectRatio=u?d/u:null,o.options=i.options,o._bufferedRender=!1,o.chart=o,o.controller=o,t.instances[o.id]=o,Object.defineProperty(o,"data",{get:function(){return o.config.data},set:function(t){o.config.data=t}}),l&&s?(o.initialize(),o.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return s.notify(t,"beforeInit"),a.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.ensureScalesHaveIDs(),t.buildScales(),t.initToolTip(),s.notify(t,"afterInit"),t},clear:function(){return a.canvas.clear(this),this},stop:function(){return t.animationService.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,i=e.canvas,o=n.maintainAspectRatio&&e.aspectRatio||null,r=Math.max(0,Math.floor(a.getMaximumWidth(i))),l=Math.max(0,Math.floor(o?r/o:a.getMaximumHeight(i)));if((e.width!==r||e.height!==l)&&(i.width=e.width=r,i.height=e.height=l,i.style.width=r+"px",i.style.height=l+"px",a.retinaScale(e,n.devicePixelRatio),!t)){var u={width:r,height:l};s.notify(e,"resize",[u]),e.options.onResize&&e.options.onResize(e,u),e.stop(),e.update(e.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;a.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),a.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),n&&(n.id=n.id||"scale")},buildScales:function(){var e=this,n=e.options,i=e.scales={},o=[];n.scales&&(o=o.concat((n.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(n.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),n.scale&&o.push({options:n.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),a.each(o,function(n){var o=n.options,r=a.valueOrDefault(o.type,n.dtype),s=t.scaleService.getScaleConstructor(r);if(s){l(o.position)!==l(n.dposition)&&(o.position=n.dposition);var u=new s({id:o.id,options:o,ctx:e.ctx,chart:e});i[u.id]=u,u.mergeTicksOptions(),n.isDefault&&(e.scale=u)}}),t.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,n=[],i=[];return a.each(e.data.datasets,function(a,o){var r=e.getDatasetMeta(o),l=a.type||e.config.type;if(r.type&&r.type!==l&&(e.destroyDatasetMeta(o),r=e.getDatasetMeta(o)),r.type=l,n.push(r.type),r.controller)r.controller.updateIndex(o);else{var s=t.controllers[r.type];if(void 0===s)throw new Error('"'+r.type+'" is not a chart type.');r.controller=new s(e,o),i.push(r.controller)}},e),i},resetElements:function(){var t=this;a.each(t.data.datasets,function(e,n){t.getDatasetMeta(n).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),n(e),!1!==s.notify(e,"beforeUpdate")){e.tooltip._data=e.data;var i=e.buildOrUpdateControllers();a.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.buildOrUpdateElements()},e),e.updateLayout(),a.each(i,function(t){t.reset()}),e.updateDatasets(),e.tooltip.initialize(),e.lastActive=[],s.notify(e,"afterUpdate"),e._bufferedRender?e._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:e.render(t)}},updateLayout:function(){var e=this;!1!==s.notify(e,"beforeLayout")&&(t.layoutService.update(this,this.width,this.height),s.notify(e,"afterScaleUpdate"),s.notify(e,"afterLayout"))},updateDatasets:function(){var t=this;if(!1!==s.notify(t,"beforeDatasetsUpdate")){for(var e=0,n=t.data.datasets.length;e<n;++e)t.updateDataset(e);s.notify(t,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this,n=e.getDatasetMeta(t),i={meta:n,index:t};!1!==s.notify(e,"beforeDatasetUpdate",[i])&&(n.controller.update(),s.notify(e,"afterDatasetUpdate",[i]))},render:function(e){var n=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var i=e.duration,o=e.lazy;if(!1!==s.notify(n,"beforeRender")){var r=n.options.animation,l=function(t){s.notify(n,"afterRender"),a.callback(r&&r.onComplete,[t],n)};if(r&&(void 0!==i&&0!==i||void 0===i&&0!==r.duration)){var u=new t.Animation({numSteps:(i||r.duration)/16.66,easing:e.easing||r.easing,render:function(t,e){var n=a.easing.effects[e.easing],i=e.currentStep,o=i/e.numSteps;t.draw(n(o),o,i)},onAnimationProgress:r.onProgress,onAnimationComplete:l});t.animationService.addAnimation(n,u,i,o)}else n.draw(),l(new t.Animation({numSteps:0,chart:n}));return n}},draw:function(t){var e=this;e.clear(),a.isNullOrUndef(t)&&(t=1),e.transition(t),!1!==s.notify(e,"beforeDraw",[t])&&(a.each(e.boxes,function(t){t.draw(e.chartArea)},e),e.scale&&e.scale.draw(),e.drawDatasets(t),e._drawTooltip(t),s.notify(e,"afterDraw",[t]))},transition:function(t){for(var e=this,n=0,i=(e.data.datasets||[]).length;n<i;++n)e.isDatasetVisible(n)&&e.getDatasetMeta(n).controller.transition(t);e.tooltip.transition(t)},drawDatasets:function(t){var e=this;if(!1!==s.notify(e,"beforeDatasetsDraw",[t])){for(var n=(e.data.datasets||[]).length-1;n>=0;--n)e.isDatasetVisible(n)&&e.drawDataset(n,t);s.notify(e,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n=this,i=n.getDatasetMeta(t),a={meta:i,index:t,easingValue:e};!1!==s.notify(n,"beforeDatasetDraw",[a])&&(i.controller.draw(e),s.notify(n,"afterDatasetDraw",[a]))},_drawTooltip:function(t){var e=this,n=e.tooltip,i={tooltip:n,easingValue:t};!1!==s.notify(e,"beforeTooltipDraw",[i])&&(n.draw(),s.notify(e,"afterTooltipDraw",[i]))},getElementAtEvent:function(t){return o.modes.single(this,t)},getElementsAtEvent:function(t){return o.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return o.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var i=o.modes[e];return"function"==typeof i?i(this,t,n):[]},getDatasetAtEvent:function(t){return o.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this,n=e.data.datasets[t];n._meta||(n._meta={});var i=n._meta[e.id];return i||(i=n._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],i=n._meta&&n._meta[e];i&&(i.controller.destroy(),delete n._meta[e])},destroy:function(){var e,n,i=this,o=i.canvas;for(i.stop(),e=0,n=i.data.datasets.length;e<n;++e)i.destroyDatasetMeta(e);o&&(i.unbindEvents(),a.canvas.clear(i),r.releaseContext(i.ctx),i.canvas=null,i.ctx=null),s.notify(i,"destroy"),delete t.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new t.Tooltip({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var t=this,e=t._listeners={},n=function(){t.eventHandler.apply(t,arguments)};a.each(t.options.events,function(i){r.addEventListener(t,i,n),e[i]=n}),t.options.responsive&&(n=function(){t.resize()},r.addEventListener(t,"resize",n),e.resize=n)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,a.each(e,function(e,n){r.removeEventListener(t,n,e)}))},updateHoverStyle:function(t,e,n){var i,a,o,r=n?"setHoverStyle":"removeHoverStyle";for(a=0,o=t.length;a<o;++a)(i=t[a])&&this.getDatasetMeta(i._datasetIndex).controller[r](i)},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==s.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var i=e.handleEvent(t);i|=n&&n.handleEvent(t),s.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):i&&!e.animating&&(e.stop(),e.render(e.options.hover.animationDuration,!0)),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e=this,n=e.options||{},i=n.hover,o=!1;return e.lastActive=e.lastActive||[],"mouseout"===t.type?e.active=[]:e.active=e.getElementsAtEventForMode(t,i.mode,i),a.callback(n.onHover||n.hover.onHover,[t.native,e.active],e),"mouseup"!==t.type&&"click"!==t.type||n.onClick&&n.onClick.call(e,t.native,e.active),e.lastActive.length&&e.updateHoverStyle(e.lastActive,i.mode,!1),e.active.length&&i.mode&&e.updateHoverStyle(e.active,i.mode,!0),o=!a.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,o}}),t.Controller=t}},{25:25,28:28,45:45,48:48}],24:[function(t,e,n){"use strict";var i=t(45);e.exports=function(t){function e(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),a.forEach(function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),a=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),o=a.apply(this,e);return i.each(t._chartjs.listeners,function(t){"function"==typeof t[n]&&t[n].apply(t,e)}),o}})}))}function n(t,e){var n=t._chartjs;if(n){var i=n.listeners,o=i.indexOf(e);-1!==o&&i.splice(o,1),i.length>0||(a.forEach(function(e){delete t[e]}),delete t._chartjs)}}var a=["push","pop","shift","splice","unshift"];t.DatasetController=function(t,e){this.initialize(t,e)},i.extend(t.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),n=t.getDataset();null===e.xAxisID&&(e.xAxisID=n.xAxisID||t.chart.options.scales.xAxes[0].id),null===e.yAxisID&&(e.yAxisID=n.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},reset:function(){this.update(!0)},destroy:function(){this._data&&n(this._data,this)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,n=e.dataElementType;return n&&new n({_chart:e.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,n=this,i=n.getMeta(),a=n.getDataset().data||[],o=i.data;for(t=0,e=a.length;t<e;++t)o[t]=o[t]||n.createMetaData(t);i.dataset=i.dataset||n.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t=this,i=t.getDataset(),a=i.data||(i.data=[]);t._data!==a&&(t._data&&n(t._data,t),e(a,t),t._data=a),t.resyncElements()},update:i.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],i=n.length,a=0;a<i;++a)n[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,i=0;for(t.dataset&&t.dataset.draw();i<n;++i)e[i].draw()},removeHoverStyle:function(t,e){var n=this.chart.data.datasets[t._datasetIndex],a=t._index,o=t.custom||{},r=i.valueAtIndexOrDefault,l=t._model;l.backgroundColor=o.backgroundColor?o.backgroundColor:r(n.backgroundColor,a,e.backgroundColor),l.borderColor=o.borderColor?o.borderColor:r(n.borderColor,a,e.borderColor),l.borderWidth=o.borderWidth?o.borderWidth:r(n.borderWidth,a,e.borderWidth)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,a=t.custom||{},o=i.valueAtIndexOrDefault,r=i.getHoverColor,l=t._model;l.backgroundColor=a.hoverBackgroundColor?a.hoverBackgroundColor:o(e.hoverBackgroundColor,n,r(l.backgroundColor)),l.borderColor=a.hoverBorderColor?a.hoverBorderColor:o(e.hoverBorderColor,n,r(l.borderColor)),l.borderWidth=a.hoverBorderWidth?a.hoverBorderWidth:o(e.hoverBorderWidth,n,l.borderWidth)},resyncElements:function(){var t=this,e=t.getMeta(),n=t.getDataset().data,i=e.data.length,a=n.length;a<i?e.data.splice(a,i-a):a>i&&t.insertElements(i,a-i)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),t.DatasetController.extend=i.inherits}},{45:45}],25:[function(t,e,n){"use strict";var i=t(45);e.exports={_set:function(t,e){return i.merge(this[t]||(this[t]={}),e)}}},{45:45}],26:[function(t,e,n){"use strict";function i(t,e,n,i){var o,r,l,s,u,d,c,h,f,g=Object.keys(n);for(o=0,r=g.length;o<r;++o)if(l=g[o],d=n[l],e.hasOwnProperty(l)||(e[l]=d),(s=e[l])!==d&&"_"!==l[0]){if(t.hasOwnProperty(l)||(t[l]=s),u=t[l],(c=typeof d)===typeof u)if("string"===c){if((h=a(u)).valid&&(f=a(d)).valid){e[l]=f.mix(h,i).rgbString();continue}}else if("number"===c&&isFinite(u)&&isFinite(d)){e[l]=u+(d-u)*i;continue}e[l]=d}}var a=t(3),o=t(45),r=function(t){o.extend(this,t),this.initialize.apply(this,arguments)};o.extend(r.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=o.clone(t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,a=e._start,o=e._view;return n&&1!==t?(o||(o=e._view={}),a||(a=e._start={}),i(a,o,n,t),e):(e._view=n,e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return o.isNumber(this._model.x)&&o.isNumber(this._model.y)}}),r.extend=o.inherits,e.exports=r},{3:3,45:45}],27:[function(t,e,n){"use strict";var i=t(3),a=t(25),o=t(45);e.exports=function(t){function e(t,e,n){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function n(t){return void 0!==t&&null!==t&&"none"!==t}function r(t,i,a){var o=document.defaultView,r=t.parentNode,l=o.getComputedStyle(t)[i],s=o.getComputedStyle(r)[i],u=n(l),d=n(s),c=Number.POSITIVE_INFINITY;return u||d?Math.min(u?e(l,t,a):c,d?e(s,r,a):c):"none"}o.configMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(e,n,i,a){var r=n[e]||{},l=i[e];"scales"===e?n[e]=o.scaleMerge(r,l):"scale"===e?n[e]=o.merge(r,[t.scaleService.getScaleDefaults(l.type),l]):o._merger(e,n,i,a)}})},o.scaleMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(e,n,i,a){if("xAxes"===e||"yAxes"===e){var r,l,s,u=i[e].length;for(n[e]||(n[e]=[]),r=0;r<u;++r)s=i[e][r],l=o.valueOrDefault(s.type,"xAxes"===e?"category":"linear"),r>=n[e].length&&n[e].push({}),!n[e][r].type||s.type&&s.type!==n[e][r].type?o.merge(n[e][r],[t.scaleService.getScaleDefaults(l),s]):o.merge(n[e][r],s)}else o._merger(e,n,i,a)}})},o.where=function(t,e){if(o.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return o.each(t,function(t){e(t)&&n.push(t)}),n},o.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var i=0,a=t.length;i<a;++i)if(e.call(n,t[i],i,t))return i;return-1},o.findNextWhere=function(t,e,n){o.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<t.length;i++){var a=t[i];if(e(a))return a}},o.findPreviousWhere=function(t,e,n){o.isNullOrUndef(n)&&(n=t.length);for(var i=n-1;i>=0;i--){var a=t[i];if(e(a))return a}},o.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},o.almostEquals=function(t,e,n){return Math.abs(t-e)<n},o.almostWhole=function(t,e){var n=Math.round(t);return n-e<t&&n+e>t},o.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},o.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},o.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},o.log10=Math.log10?function(t){return Math.log10(t)}:function(t){return Math.log(t)/Math.LN10},o.toRadians=function(t){return t*(Math.PI/180)},o.toDegrees=function(t){return t*(180/Math.PI)},o.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i),o=Math.atan2(i,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},o.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},o.aliasPixel=function(t){return t%2==0?0:.5},o.splineCurve=function(t,e,n,i){var a=t.skip?e:t,o=e,r=n.skip?e:n,l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),u=l/(l+s),d=s/(l+s),c=i*(u=isNaN(u)?0:u),h=i*(d=isNaN(d)?0:d);return{previous:{x:o.x-c*(r.x-a.x),y:o.y-c*(r.y-a.y)},next:{x:o.x+h*(r.x-a.x),y:o.y+h*(r.y-a.y)}}},o.EPSILON=Number.EPSILON||1e-14,o.splineCurveMonotone=function(t){var e,n,i,a,r=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),l=r.length;for(e=0;e<l;++e)if(!(i=r[e]).model.skip){if(n=e>0?r[e-1]:null,(a=e<l-1?r[e+1]:null)&&!a.model.skip){var s=a.model.x-i.model.x;i.deltaK=0!==s?(a.model.y-i.model.y)/s:0}!n||n.model.skip?i.mK=i.deltaK:!a||a.model.skip?i.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(n.deltaK+i.deltaK)/2}var u,d,c,h;for(e=0;e<l-1;++e)i=r[e],a=r[e+1],i.model.skip||a.model.skip||(o.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=a.mK=0:(u=i.mK/i.deltaK,d=a.mK/i.deltaK,(h=Math.pow(u,2)+Math.pow(d,2))<=9||(c=3/Math.sqrt(h),i.mK=u*c*i.deltaK,a.mK=d*c*i.deltaK)));var f;for(e=0;e<l;++e)(i=r[e]).model.skip||(n=e>0?r[e-1]:null,a=e<l-1?r[e+1]:null,n&&!n.model.skip&&(f=(i.model.x-n.model.x)/3,i.model.controlPointPreviousX=i.model.x-f,i.model.controlPointPreviousY=i.model.y-f*i.mK),a&&!a.model.skip&&(f=(a.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+f,i.model.controlPointNextY=i.model.y+f*i.mK))},o.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},o.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},o.niceNum=function(t,e){var n=Math.floor(o.log10(t)),i=t/Math.pow(10,n);return(e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},o.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},o.getRelativePosition=function(t,e){var n,i,a=t.originalEvent||t,r=t.currentTarget||t.srcElement,l=r.getBoundingClientRect(),s=a.touches;s&&s.length>0?(n=s[0].clientX,i=s[0].clientY):(n=a.clientX,i=a.clientY);var u=parseFloat(o.getStyle(r,"padding-left")),d=parseFloat(o.getStyle(r,"padding-top")),c=parseFloat(o.getStyle(r,"padding-right")),h=parseFloat(o.getStyle(r,"padding-bottom")),f=l.right-l.left-u-c,g=l.bottom-l.top-d-h;return n=Math.round((n-l.left-u)/f*r.width/e.currentDevicePixelRatio),i=Math.round((i-l.top-d)/g*r.height/e.currentDevicePixelRatio),{x:n,y:i}},o.getConstraintWidth=function(t){return r(t,"max-width","clientWidth")},o.getConstraintHeight=function(t){return r(t,"max-height","clientHeight")},o.getMaximumWidth=function(t){var e=t.parentNode;if(!e)return t.clientWidth;var n=parseInt(o.getStyle(e,"padding-left"),10),i=parseInt(o.getStyle(e,"padding-right"),10),a=e.clientWidth-n-i,r=o.getConstraintWidth(t);return isNaN(r)?a:Math.min(a,r)},o.getMaximumHeight=function(t){var e=t.parentNode;if(!e)return t.clientHeight;var n=parseInt(o.getStyle(e,"padding-top"),10),i=parseInt(o.getStyle(e,"padding-bottom"),10),a=e.clientHeight-n-i,r=o.getConstraintHeight(t);return isNaN(r)?a:Math.min(a,r)},o.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},o.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||window.devicePixelRatio||1;if(1!==n){var i=t.canvas,a=t.height,o=t.width;i.height=a*n,i.width=o*n,t.ctx.scale(n,n),i.style.height=a+"px",i.style.width=o+"px"}},o.fontString=function(t,e,n){return e+" "+t+"px "+n},o.longestText=function(t,e,n,i){var a=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(a=i.data={},r=i.garbageCollect=[],i.font=e),t.font=e;var l=0;o.each(n,function(e){void 0!==e&&null!==e&&!0!==o.isArray(e)?l=o.measureText(t,a,r,l,e):o.isArray(e)&&o.each(e,function(e){void 0===e||null===e||o.isArray(e)||(l=o.measureText(t,a,r,l,e))})});var s=r.length/2;if(s>n.length){for(var u=0;u<s;u++)delete a[r[u]];r.splice(0,s)}return l},o.measureText=function(t,e,n,i,a){var o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>i&&(i=o),i},o.numberOfLabelLines=function(t){var e=1;return o.each(t,function(t){o.isArray(t)&&t.length>e&&(e=t.length)}),e},o.color=i?function(t){return t instanceof CanvasGradient&&(t=a.global.defaultColor),i(t)}:function(t){return console.error("Color.js not found!"),t},o.getHoverColor=function(t){return t instanceof CanvasPattern?t:o.color(t).saturate(.5).darken(.1).rgbString()}}},{25:25,3:3,45:45}],28:[function(t,e,n){"use strict";function i(t,e){return t.native?{x:t.x,y:t.y}:u.getRelativePosition(t,e)}function a(t,e){var n,i,a,o,r;for(i=0,o=t.data.datasets.length;i<o;++i)if(t.isDatasetVisible(i))for(a=0,r=(n=t.getDatasetMeta(i)).data.length;a<r;++a){var l=n.data[a];l._view.skip||e(l)}}function o(t,e){var n=[];return a(t,function(t){t.inRange(e.x,e.y)&&n.push(t)}),n}function r(t,e,n,i){var o=Number.POSITIVE_INFINITY,r=[];return a(t,function(t){if(!n||t.inRange(e.x,e.y)){var a=t.getCenterPoint(),l=i(e,a);l<o?(r=[t],o=l):l===o&&r.push(t)}}),r}function l(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){var a=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function s(t,e,n){var a=i(e,t);n.axis=n.axis||"x";var s=l(n.axis),u=n.intersect?o(t,a):r(t,a,!1,s),d=[];return u.length?(t.data.datasets.forEach(function(e,n){if(t.isDatasetVisible(n)){var i=t.getDatasetMeta(n).data[u[0]._index];i&&!i._view.skip&&d.push(i)}}),d):[]}var u=t(45);e.exports={modes:{single:function(t,e){var n=i(e,t),o=[];return a(t,function(t){if(t.inRange(n.x,n.y))return o.push(t),o}),o.slice(0,1)},label:s,index:s,dataset:function(t,e,n){var a=i(e,t);n.axis=n.axis||"xy";var s=l(n.axis),u=n.intersect?o(t,a):r(t,a,!1,s);return u.length>0&&(u=t.getDatasetMeta(u[0]._datasetIndex).data),u},"x-axis":function(t,e){return s(t,e,{intersect:!1})},point:function(t,e){return o(t,i(e,t))},nearest:function(t,e,n){var a=i(e,t);n.axis=n.axis||"xy";var o=l(n.axis),s=r(t,a,n.intersect,o);return s.length>1&&s.sort(function(t,e){var n=t.getArea()-e.getArea();return 0===n&&(n=t._datasetIndex-e._datasetIndex),n}),s.slice(0,1)},x:function(t,e,n){var o=i(e,t),r=[],l=!1;return a(t,function(t){t.inXRange(o.x)&&r.push(t),t.inRange(o.x,o.y)&&(l=!0)}),n.intersect&&!l&&(r=[]),r},y:function(t,e,n){var o=i(e,t),r=[],l=!1;return a(t,function(t){t.inYRange(o.y)&&r.push(t),t.inRange(o.x,o.y)&&(l=!0)}),n.intersect&&!l&&(r=[]),r}}}},{45:45}],29:[function(t,e,n){"use strict";t(25)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),e.exports=function(){var t=function(t,e){return this.construct(t,e),this};return t.Chart=t,t}},{25:25}],30:[function(t,e,n){"use strict";var i=t(45);e.exports=function(t){function e(t,e){return i.where(t,function(t){return t.position===e})}function n(t,e){t.forEach(function(t,e){return t._tmpIndex_=e,t}),t.sort(function(t,n){var i=e?n:t,a=e?t:n;return i.weight===a.weight?i._tmpIndex_-a._tmpIndex_:i.weight-a.weight}),t.forEach(function(t){delete t._tmpIndex_})}t.layoutService={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var i,a=["fullWidth","position","weight"],o=a.length,r=0;r<o;++r)i=a[r],n.hasOwnProperty(i)&&(e[i]=n[i])},update:function(t,a,o){function r(t){var e=i.findNextWhere(_,function(e){return e.box===t});if(e)if(t.isHorizontal()){var n={left:Math.max(T,D),right:Math.max(F,I),top:0,bottom:0};t.update(t.fullWidth?x:S,y/2,n)}else t.update(e.minSize.width,C)}function l(t){t.isHorizontal()?(t.left=t.fullWidth?d:T,t.right=t.fullWidth?a-c:T+S,t.top=V,t.bottom=V+t.height,V=t.bottom):(t.left=N,t.right=N+t.width,t.top=O,t.bottom=O+C,N=t.right)}if(t){var s=t.options.layout||{},u=i.options.toPadding(s.padding),d=u.left,c=u.right,h=u.top,f=u.bottom,g=e(t.boxes,"left"),p=e(t.boxes,"right"),v=e(t.boxes,"top"),m=e(t.boxes,"bottom"),b=e(t.boxes,"chartArea");n(g,!0),n(p,!1),n(v,!0),n(m,!1);var x=a-d-c,y=o-h-f,k=y/2,w=(a-x/2)/(g.length+p.length),M=(o-k)/(v.length+m.length),S=x,C=y,_=[];i.each(g.concat(p,v,m),function(t){var e,n=t.isHorizontal();n?(e=t.update(t.fullWidth?x:S,M),C-=e.height):(e=t.update(w,k),S-=e.width),_.push({horizontal:n,minSize:e,box:t})});var D=0,I=0,P=0,A=0;i.each(v.concat(m),function(t){if(t.getPadding){var e=t.getPadding();D=Math.max(D,e.left),I=Math.max(I,e.right)}}),i.each(g.concat(p),function(t){if(t.getPadding){var e=t.getPadding();P=Math.max(P,e.top),A=Math.max(A,e.bottom)}});var T=d,F=c,O=h,R=f;i.each(g.concat(p),r),i.each(g,function(t){T+=t.width}),i.each(p,function(t){F+=t.width}),i.each(v.concat(m),r),i.each(v,function(t){O+=t.height}),i.each(m,function(t){R+=t.height}),i.each(g.concat(p),function(t){var e=i.findNextWhere(_,function(e){return e.box===t}),n={left:0,right:0,top:O,bottom:R};e&&t.update(e.minSize.width,C,n)}),T=d,F=c,O=h,R=f,i.each(g,function(t){T+=t.width}),i.each(p,function(t){F+=t.width}),i.each(v,function(t){O+=t.height}),i.each(m,function(t){R+=t.height});var L=Math.max(D-T,0);T+=L,F+=Math.max(I-F,0);var z=Math.max(P-O,0);O+=z,R+=Math.max(A-R,0);var B=o-O-R,W=a-T-F;W===S&&B===C||(i.each(g,function(t){t.height=B}),i.each(p,function(t){t.height=B}),i.each(v,function(t){t.fullWidth||(t.width=W)}),i.each(m,function(t){t.fullWidth||(t.width=W)}),C=B,S=W);var N=d+L,V=h+z;i.each(g.concat(v),l),N+=S,V+=C,i.each(p,l),i.each(m,l),t.chartArea={left:T,top:O,right:T+S,bottom:O+C},i.each(b,function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(S,C)})}}}}},{45:45}],31:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{plugins:{}}),e.exports=function(t){t.plugins={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var i,a,o,r,l,s=this.descriptors(t),u=s.length;for(i=0;i<u;++i)if(a=s[i],o=a.plugin,"function"==typeof(l=o[e])&&((r=[t].concat(n||[])).push(a.options),!1===l.apply(o,r)))return!1;return!0},descriptors:function(t){var e=t._plugins||(t._plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],a=[],r=t&&t.config||{},l=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach(function(t){if(-1===n.indexOf(t)){var e=t.id,r=l[e];!1!==r&&(!0===r&&(r=o.clone(i.global.plugins[e])),n.push(t),a.push({plugin:t,options:r||{}}))}}),e.descriptors=a,e.id=this._cacheId,a}},t.pluginService=t.plugins,t.PluginBase=a.extend({})}},{25:25,26:26,45:45}],32:[function(t,e,n){"use strict";function i(t){var e,n,i=[];for(e=0,n=t.length;e<n;++e)i.push(t[e].label);return i}function a(t,e,n){var i=t.getPixelForTick(e);return n&&(i-=0===e?(t.getPixelForTick(1)-i)/2:(i-t.getPixelForTick(e-1))/2),i}var o=t(25),r=t(26),l=t(45),s=t(34);o._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:s.formatters.values,minor:{},major:{}}}),e.exports=function(t){function e(t,e,n){return l.isArray(e)?l.longestText(t,n,e):t.measureText(e).width}function n(t){var e=l.valueOrDefault,n=o.global,i=e(t.fontSize,n.defaultFontSize),a=e(t.fontStyle,n.defaultFontStyle),r=e(t.fontFamily,n.defaultFontFamily);return{size:i,style:a,family:r,font:l.fontString(i,a,r)}}function s(t){return l.options.toLineHeight(l.valueOrDefault(t.lineHeight,1.2),l.valueOrDefault(t.fontSize,o.global.defaultFontSize))}t.Scale=r.extend({getPadding:function(){var t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1});for(var e in t)"major"!==e&&"minor"!==e&&(void 0===t.minor[e]&&(t.minor[e]=t[e]),void 0===t.major[e]&&(t.major[e]=t[e]))},beforeUpdate:function(){l.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var i,a,o,r,s,u,d=this;for(d.beforeUpdate(),d.maxWidth=t,d.maxHeight=e,d.margins=l.extend({left:0,right:0,top:0,bottom:0},n),d.longestTextCache=d.longestTextCache||{},d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeDataLimits(),d.determineDataLimits(),d.afterDataLimits(),d.beforeBuildTicks(),s=d.buildTicks()||[],d.afterBuildTicks(),d.beforeTickToLabelConversion(),o=d.convertTicksToLabels(s)||d.ticks,d.afterTickToLabelConversion(),d.ticks=o,i=0,a=o.length;i<a;++i)r=o[i],(u=s[i])?u.label=r:s.push(u={label:r,major:!1});return d._ticks=s,d.beforeCalculateTickRotation(),d.calculateTickRotation(),d.afterCalculateTickRotation(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:function(){l.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){l.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){l.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){l.callback(this.options.beforeDataLimits,[this])},determineDataLimits:l.noop,afterDataLimits:function(){l.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){l.callback(this.options.beforeBuildTicks,[this])},buildTicks:l.noop,afterBuildTicks:function(){l.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){l.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){l.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){l.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this,e=t.ctx,a=t.options.ticks,o=i(t._ticks),r=n(a);e.font=r.font;var s=a.minRotation||0;if(o.length&&t.options.display&&t.isHorizontal())for(var u,d=l.longestText(e,r.font,o,t.longestTextCache),c=d,h=t.getPixelForTick(1)-t.getPixelForTick(0)-6;c>h&&s<a.maxRotation;){var f=l.toRadians(s);if(u=Math.cos(f),Math.sin(f)*d>t.maxHeight){s--;break}s++,c=u*d}t.labelRotation=s},afterCalculateTickRotation:function(){l.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){l.callback(this.options.beforeFit,[this])},fit:function(){var t=this,a=t.minSize={width:0,height:0},o=i(t._ticks),r=t.options,u=r.ticks,d=r.scaleLabel,c=r.gridLines,h=r.display,f=t.isHorizontal(),g=n(u),p=r.gridLines.tickMarkLength;if(a.width=f?t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:h&&c.drawTicks?p:0,a.height=f?h&&c.drawTicks?p:0:t.maxHeight,d.display&&h){var v=s(d)+l.options.toPadding(d.padding).height;f?a.height+=v:a.width+=v}if(u.display&&h){var m=l.longestText(t.ctx,g.font,o,t.longestTextCache),b=l.numberOfLabelLines(o),x=.5*g.size,y=t.options.ticks.padding;if(f){t.longestLabelWidth=m;var k=l.toRadians(t.labelRotation),w=Math.cos(k),M=Math.sin(k)*m+g.size*b+x*(b-1)+x;a.height=Math.min(t.maxHeight,a.height+M+y),t.ctx.font=g.font;var S=e(t.ctx,o[0],g.font),C=e(t.ctx,o[o.length-1],g.font);0!==t.labelRotation?(t.paddingLeft="bottom"===r.position?w*S+3:w*x+3,t.paddingRight="bottom"===r.position?w*x+3:w*C+3):(t.paddingLeft=S/2+3,t.paddingRight=C/2+3)}else u.mirror?m=0:m+=y+x,a.width=Math.min(t.maxWidth,a.width+m),t.paddingTop=g.size/2,t.paddingBottom=g.size/2}t.handleMargins(),t.width=a.width,t.height=a.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))},afterFit:function(){l.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(l.isNullOrUndef(t))return NaN;if("number"==typeof t&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:l.noop,getPixelForValue:l.noop,getValueForPixel:l.noop,getPixelForTick:function(t){var e=this,n=e.options.offset;if(e.isHorizontal()){var i=(e.width-(e.paddingLeft+e.paddingRight))/Math.max(e._ticks.length-(n?0:1),1),a=i*t+e.paddingLeft;n&&(a+=i/2);var o=e.left+Math.round(a);return o+=e.isFullWidth()?e.margins.left:0}var r=e.height-(e.paddingTop+e.paddingBottom);return e.top+t*(r/(e._ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft,i=e.left+Math.round(n);return i+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this,e=t.min,n=t.max;return t.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0},_autoSkip:function(t){var e,n,i,a,o=this,r=o.isHorizontal(),s=o.options.ticks.minor,u=t.length,d=l.toRadians(o.labelRotation),c=Math.cos(d),h=o.longestLabelWidth*c,f=[];for(s.maxTicksLimit&&(a=s.maxTicksLimit),r&&(e=!1,(h+s.autoSkipPadding)*u>o.width-(o.paddingLeft+o.paddingRight)&&(e=1+Math.floor((h+s.autoSkipPadding)*u/(o.width-(o.paddingLeft+o.paddingRight)))),a&&u>a&&(e=Math.max(e,Math.floor(u/a)))),n=0;n<u;n++)i=t[n],(e>1&&n%e>0||n%e==0&&n+e>=u)&&n!==u-1&&delete i.label,f.push(i);return f},draw:function(t){var e=this,i=e.options;if(i.display){var r=e.ctx,u=o.global,d=i.ticks.minor,c=i.ticks.major||d,h=i.gridLines,f=i.scaleLabel,g=0!==e.labelRotation,p=e.isHorizontal(),v=d.autoSkip?e._autoSkip(e.getTicks()):e.getTicks(),m=l.valueOrDefault(d.fontColor,u.defaultFontColor),b=n(d),x=l.valueOrDefault(c.fontColor,u.defaultFontColor),y=n(c),k=h.drawTicks?h.tickMarkLength:0,w=l.valueOrDefault(f.fontColor,u.defaultFontColor),M=n(f),S=l.options.toPadding(f.padding),C=l.toRadians(e.labelRotation),_=[],D="right"===i.position?e.left:e.right-k,I="right"===i.position?e.left+k:e.right,P="bottom"===i.position?e.top:e.bottom-k,A="bottom"===i.position?e.top+k:e.bottom;if(l.each(v,function(n,o){if(!l.isNullOrUndef(n.label)){var r,s,c,f,m=n.label;o===e.zeroLineIndex&&i.offset===h.offsetGridLines?(r=h.zeroLineWidth,s=h.zeroLineColor,c=h.zeroLineBorderDash,f=h.zeroLineBorderDashOffset):(r=l.valueAtIndexOrDefault(h.lineWidth,o),s=l.valueAtIndexOrDefault(h.color,o),c=l.valueOrDefault(h.borderDash,u.borderDash),f=l.valueOrDefault(h.borderDashOffset,u.borderDashOffset));var b,x,y,w,M,S,T,F,O,R,L="middle",z="middle",B=d.padding;if(p){var W=k+B;"bottom"===i.position?(z=g?"middle":"top",L=g?"right":"center",R=e.top+W):(z=g?"middle":"bottom",L=g?"left":"center",R=e.bottom-W);var N=a(e,o,h.offsetGridLines&&v.length>1);N<e.left&&(s="rgba(0,0,0,0)"),N+=l.aliasPixel(r),O=e.getPixelForTick(o)+d.labelOffset,b=y=M=T=N,x=P,w=A,S=t.top,F=t.bottom}else{var V,E="left"===i.position;d.mirror?(L=E?"left":"right",V=B):(L=E?"right":"left",V=k+B),O=E?e.right-V:e.left+V;var H=a(e,o,h.offsetGridLines&&v.length>1);H<e.top&&(s="rgba(0,0,0,0)"),H+=l.aliasPixel(r),R=e.getPixelForTick(o)+d.labelOffset,b=D,y=I,M=t.left,T=t.right,x=w=S=F=H}_.push({tx1:b,ty1:x,tx2:y,ty2:w,x1:M,y1:S,x2:T,y2:F,labelX:O,labelY:R,glWidth:r,glColor:s,glBorderDash:c,glBorderDashOffset:f,rotation:-1*C,label:m,major:n.major,textBaseline:z,textAlign:L})}}),l.each(_,function(t){if(h.display&&(r.save(),r.lineWidth=t.glWidth,r.strokeStyle=t.glColor,r.setLineDash&&(r.setLineDash(t.glBorderDash),r.lineDashOffset=t.glBorderDashOffset),r.beginPath(),h.drawTicks&&(r.moveTo(t.tx1,t.ty1),r.lineTo(t.tx2,t.ty2)),h.drawOnChartArea&&(r.moveTo(t.x1,t.y1),r.lineTo(t.x2,t.y2)),r.stroke(),r.restore()),d.display){r.save(),r.translate(t.labelX,t.labelY),r.rotate(t.rotation),r.font=t.major?y.font:b.font,r.fillStyle=t.major?x:m,r.textBaseline=t.textBaseline,r.textAlign=t.textAlign;var e=t.label;if(l.isArray(e))for(var n=0,i=0;n<e.length;++n)r.fillText(""+e[n],0,i),i+=1.5*b.size;else r.fillText(e,0,0);r.restore()}}),f.display){var T,F,O=0,R=s(f)/2;if(p)T=e.left+(e.right-e.left)/2,F="bottom"===i.position?e.bottom-R-S.bottom:e.top+R+S.top;else{var L="left"===i.position;T=L?e.left+R+S.top:e.right-R-S.top,F=e.top+(e.bottom-e.top)/2,O=L?-.5*Math.PI:.5*Math.PI}r.save(),r.translate(T,F),r.rotate(O),r.textAlign="center",r.textBaseline="middle",r.fillStyle=w,r.font=M.font,r.fillText(f.labelString,0,0),r.restore()}if(h.drawBorder){r.lineWidth=l.valueAtIndexOrDefault(h.lineWidth,0),r.strokeStyle=l.valueAtIndexOrDefault(h.color,0);var z=e.left,B=e.right,W=e.top,N=e.bottom,V=l.aliasPixel(r.lineWidth);p?(W=N="top"===i.position?e.bottom:e.top,W+=V,N+=V):(z=B="left"===i.position?e.right:e.left,z+=V,B+=V),r.beginPath(),r.moveTo(z,W),r.lineTo(B,N),r.stroke()}}}})}},{25:25,26:26,34:34,45:45}],33:[function(t,e,n){"use strict";var i=t(25),a=t(45);e.exports=function(t){t.scaleService={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=a.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?a.merge({},[i.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){var n=this;n.defaults.hasOwnProperty(t)&&(n.defaults[t]=a.extend(n.defaults[t],e))},addScalesToLayout:function(e){a.each(e.scales,function(n){n.fullWidth=n.options.fullWidth,n.position=n.options.position,n.weight=n.options.weight,t.layoutService.addBox(e,n)})}}}},{25:25,45:45}],34:[function(t,e,n){"use strict";var i=t(45);e.exports={generators:{linear:function(t,e){var n,a=[];if(t.stepSize&&t.stepSize>0)n=t.stepSize;else{var o=i.niceNum(e.max-e.min,!1);n=i.niceNum(o/(t.maxTicks-1),!0)}var r=Math.floor(e.min/n)*n,l=Math.ceil(e.max/n)*n;t.min&&t.max&&t.stepSize&&i.almostWhole((t.max-t.min)/t.stepSize,n/1e3)&&(r=t.min,l=t.max);var s=(l-r)/n;s=i.almostEquals(s,Math.round(s),n/1e3)?Math.round(s):Math.ceil(s),a.push(void 0!==t.min?t.min:r);for(var u=1;u<s;++u)a.push(r+u*n);return a.push(void 0!==t.max?t.max:l),a},logarithmic:function(t,e){var n,a,o=[],r=i.valueOrDefault,l=r(t.min,Math.pow(10,Math.floor(i.log10(e.min)))),s=Math.floor(i.log10(e.max)),u=Math.ceil(e.max/Math.pow(10,s));0===l?(n=Math.floor(i.log10(e.minNotZero)),a=Math.floor(e.minNotZero/Math.pow(10,n)),o.push(l),l=a*Math.pow(10,n)):(n=Math.floor(i.log10(l)),a=Math.floor(l/Math.pow(10,n)));do{o.push(l),10===++a&&(a=1,++n),l=a*Math.pow(10,n)}while(n<s||n===s&&a<u);var d=r(t.max,l);return o.push(d),o}},formatters:{values:function(t){return i.isArray(t)?t:""+t},linear:function(t,e,n){var a=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(a)>1&&t!==Math.floor(t)&&(a=t-Math.floor(t));var o=i.log10(Math.abs(a)),r="";if(0!==t){var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),r=t.toFixed(l)}else r="0";return r},logarithmic:function(t,e,n){var a=t/Math.pow(10,Math.floor(i.log10(t)));return 0===t?"0":1===a||2===a||5===a||0===e||e===n.length-1?t.toExponential():""}}}},{45:45}],35:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:o.noop,title:function(t,e){var n="",i=e.labels,a=i?i.length:0;if(t.length>0){var o=t[0];o.xLabel?n=o.xLabel:a>0&&o.index<a&&(n=i[o.index])}return n},afterTitle:o.noop,beforeBody:o.noop,beforeLabel:o.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),n+=t.yLabel},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:o.noop,afterBody:o.noop,beforeFooter:o.noop,footer:o.noop,afterFooter:o.noop}}}),e.exports=function(t){function e(t,e){var n=o.color(t);return n.alpha(e*n.alpha()).rgbaString()}function n(t,e){return e&&(o.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function r(t){var e=t._xScale,n=t._yScale||t._scale,i=t._index,a=t._datasetIndex;return{xLabel:e?e.getLabelForIndex(i,a):"",yLabel:n?n.getLabelForIndex(i,a):"",index:i,datasetIndex:a,x:t._model.x,y:t._model.y}}function l(t){var e=i.global,n=o.valueOrDefault;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,bodyFontColor:t.bodyFontColor,_bodyFontFamily:n(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:n(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:n(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:n(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:n(t.titleFontStyle,e.defaultFontStyle),titleFontSize:n(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:n(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:n(t.footerFontStyle,e.defaultFontStyle),footerFontSize:n(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function s(t,e){var n=t._chart.ctx,i=2*e.yPadding,a=0,r=e.body,l=r.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);l+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,u=e.footer.length,d=e.titleFontSize,c=e.bodyFontSize,h=e.footerFontSize;i+=s*d,i+=s?(s-1)*e.titleSpacing:0,i+=s?e.titleMarginBottom:0,i+=l*c,i+=l?(l-1)*e.bodySpacing:0,i+=u?e.footerMarginTop:0,i+=u*h,i+=u?(u-1)*e.footerSpacing:0;var f=0,g=function(t){a=Math.max(a,n.measureText(t).width+f)};return n.font=o.fontString(d,e._titleFontStyle,e._titleFontFamily),o.each(e.title,g),n.font=o.fontString(c,e._bodyFontStyle,e._bodyFontFamily),o.each(e.beforeBody.concat(e.afterBody),g),f=e.displayColors?c+2:0,o.each(r,function(t){o.each(t.before,g),o.each(t.lines,g),o.each(t.after,g)}),f=0,n.font=o.fontString(h,e._footerFontStyle,e._footerFontFamily),o.each(e.footer,g),a+=2*e.xPadding,{width:a,height:i}}function u(t,e){var n=t._model,i=t._chart,a=t._chart.chartArea,o="center",r="center";n.y<e.height?r="top":n.y>i.height-e.height&&(r="bottom");var l,s,u,d,c,h=(a.left+a.right)/2,f=(a.top+a.bottom)/2;"center"===r?(l=function(t){return t<=h},s=function(t){return t>h}):(l=function(t){return t<=e.width/2},s=function(t){return t>=i.width-e.width/2}),u=function(t){return t+e.width>i.width},d=function(t){return t-e.width<0},c=function(t){return t<=f?"top":"bottom"},l(n.x)?(o="left",u(n.x)&&(o="center",r=c(n.y))):s(n.x)&&(o="right",d(n.x)&&(o="center",r=c(n.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:o,yAlign:g.yAlign?g.yAlign:r}}function d(t,e,n){var i=t.x,a=t.y,o=t.caretSize,r=t.caretPadding,l=t.cornerRadius,s=n.xAlign,u=n.yAlign,d=o+r,c=l+r;return"right"===s?i-=e.width:"center"===s&&(i-=e.width/2),"top"===u?a+=d:a-="bottom"===u?e.height+d:e.height/2,"center"===u?"left"===s?i+=d:"right"===s&&(i-=d):"left"===s?i-=c:"right"===s&&(i+=c),{x:i,y:a}}t.Tooltip=a.extend({initialize:function(){this._model=l(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options.callbacks,i=e.beforeTitle.apply(t,arguments),a=e.title.apply(t,arguments),o=e.afterTitle.apply(t,arguments),r=[];return r=n(r,i),r=n(r,a),r=n(r,o)},getBeforeBody:function(){var t=this._options.callbacks.beforeBody.apply(this,arguments);return o.isArray(t)?t:void 0!==t?[t]:[]},getBody:function(t,e){var i=this,a=i._options.callbacks,r=[];return o.each(t,function(t){var o={before:[],lines:[],after:[]};n(o.before,a.beforeLabel.call(i,t,e)),n(o.lines,a.label.call(i,t,e)),n(o.after,a.afterLabel.call(i,t,e)),r.push(o)}),r},getAfterBody:function(){var t=this._options.callbacks.afterBody.apply(this,arguments);return o.isArray(t)?t:void 0!==t?[t]:[]},getFooter:function(){var t=this,e=t._options.callbacks,i=e.beforeFooter.apply(t,arguments),a=e.footer.apply(t,arguments),o=e.afterFooter.apply(t,arguments),r=[];return r=n(r,i),r=n(r,a),r=n(r,o)},update:function(e){var n,i,a=this,c=a._options,h=a._model,f=a._model=l(c),g=a._active,p=a._data,v={xAlign:h.xAlign,yAlign:h.yAlign},m={x:h.x,y:h.y},b={width:h.width,height:h.height},x={x:h.caretX,y:h.caretY};if(g.length){f.opacity=1;var y=[],k=[];x=t.Tooltip.positioners[c.position].call(a,g,a._eventPosition);var w=[];for(n=0,i=g.length;n<i;++n)w.push(r(g[n]));c.filter&&(w=w.filter(function(t){return c.filter(t,p)})),c.itemSort&&(w=w.sort(function(t,e){return c.itemSort(t,e,p)})),o.each(w,function(t){y.push(c.callbacks.labelColor.call(a,t,a._chart)),k.push(c.callbacks.labelTextColor.call(a,t,a._chart))}),f.title=a.getTitle(w,p),f.beforeBody=a.getBeforeBody(w,p),f.body=a.getBody(w,p),f.afterBody=a.getAfterBody(w,p),f.footer=a.getFooter(w,p),f.x=Math.round(x.x),f.y=Math.round(x.y),f.caretPadding=c.caretPadding,f.labelColors=y,f.labelTextColors=k,f.dataPoints=w,m=d(f,b=s(this,f),v=u(this,b))}else f.opacity=0;return f.xAlign=v.xAlign,f.yAlign=v.yAlign,f.x=m.x,f.y=m.y,f.width=b.width,f.height=b.height,f.caretX=x.x,f.caretY=x.y,a._model=f,e&&c.custom&&c.custom.call(a,f),a},drawCaret:function(t,e){var n=this._chart.ctx,i=this._view,a=this.getCaretPosition(t,e,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,n){var i,a,o,r,l,s,u=n.caretSize,d=n.cornerRadius,c=n.xAlign,h=n.yAlign,f=t.x,g=t.y,p=e.width,v=e.height;if("center"===h)l=g+v/2,"left"===c?(a=(i=f)-u,o=i,r=l+u,s=l-u):(a=(i=f+p)+u,o=i,r=l-u,s=l+u);else if("left"===c?(i=(a=f+d+u)-u,o=a+u):"right"===c?(i=(a=f+p-d-u)-u,o=a+u):(i=(a=f+p/2)-u,o=a+u),"top"===h)l=(r=g)-u,s=r;else{l=(r=g+v)+u,s=r;var m=o;o=i,i=m}return{x1:i,x2:a,x3:o,y1:r,y2:l,y3:s}},drawTitle:function(t,n,i,a){var r=n.title;if(r.length){i.textAlign=n._titleAlign,i.textBaseline="top";var l=n.titleFontSize,s=n.titleSpacing;i.fillStyle=e(n.titleFontColor,a),i.font=o.fontString(l,n._titleFontStyle,n._titleFontFamily);var u,d;for(u=0,d=r.length;u<d;++u)i.fillText(r[u],t.x,t.y),t.y+=l+s,u+1===r.length&&(t.y+=n.titleMarginBottom-s)}},drawBody:function(t,n,i,a){var r=n.bodyFontSize,l=n.bodySpacing,s=n.body;i.textAlign=n._bodyAlign,i.textBaseline="top",i.font=o.fontString(r,n._bodyFontStyle,n._bodyFontFamily);var u=0,d=function(e){i.fillText(e,t.x+u,t.y),t.y+=r+l};i.fillStyle=e(n.bodyFontColor,a),o.each(n.beforeBody,d);var c=n.displayColors;u=c?r+2:0,o.each(s,function(l,s){var u=e(n.labelTextColors[s],a);i.fillStyle=u,o.each(l.before,d),o.each(l.lines,function(o){c&&(i.fillStyle=e(n.legendColorBackground,a),i.fillRect(t.x,t.y,r,r),i.lineWidth=1,i.strokeStyle=e(n.labelColors[s].borderColor,a),i.strokeRect(t.x,t.y,r,r),i.fillStyle=e(n.labelColors[s].backgroundColor,a),i.fillRect(t.x+1,t.y+1,r-2,r-2),i.fillStyle=u),d(o)}),o.each(l.after,d)}),u=0,o.each(n.afterBody,d),t.y-=l},drawFooter:function(t,n,i,a){var r=n.footer;r.length&&(t.y+=n.footerMarginTop,i.textAlign=n._footerAlign,i.textBaseline="top",i.fillStyle=e(n.footerFontColor,a),i.font=o.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),o.each(r,function(e){i.fillText(e,t.x,t.y),t.y+=n.footerFontSize+n.footerSpacing}))},drawBackground:function(t,n,i,a,o){i.fillStyle=e(n.backgroundColor,o),i.strokeStyle=e(n.borderColor,o),i.lineWidth=n.borderWidth;var r=n.xAlign,l=n.yAlign,s=t.x,u=t.y,d=a.width,c=a.height,h=n.cornerRadius;i.beginPath(),i.moveTo(s+h,u),"top"===l&&this.drawCaret(t,a),i.lineTo(s+d-h,u),i.quadraticCurveTo(s+d,u,s+d,u+h),"center"===l&&"right"===r&&this.drawCaret(t,a),i.lineTo(s+d,u+c-h),i.quadraticCurveTo(s+d,u+c,s+d-h,u+c),"bottom"===l&&this.drawCaret(t,a),i.lineTo(s+h,u+c),i.quadraticCurveTo(s,u+c,s,u+c-h),"center"===l&&"left"===r&&this.drawCaret(t,a),i.lineTo(s,u+h),i.quadraticCurveTo(s,u,s+h,u),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},i={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&o&&(this.drawBackground(i,e,t,n,a),i.x+=e.xPadding,i.y+=e.yPadding,this.drawTitle(i,e,t,a),this.drawBody(i,e,t,a),this.drawFooter(i,e,t,a))}},handleEvent:function(t){var e=this,n=e._options,i=!1;if(e._lastActive=e._lastActive||[],"mouseout"===t.type?e._active=[]:e._active=e._chart.getElementsAtEventForMode(t,n.mode,n),!(i=!o.arrayEquals(e._active,e._lastActive)))return!1;if(e._lastActive=e._active,n.enabled||n.custom){e._eventPosition={x:t.x,y:t.y};var a=e._model;e.update(!0),e.pivot(),i|=a.x!==e._model.x||a.y!==e._model.y}return i}}),t.Tooltip.positioners={average:function(t){if(!t.length)return!1;var e,n,i=0,a=0,o=0;for(e=0,n=t.length;e<n;++e){var r=t[e];if(r&&r.hasValue()){var l=r.tooltipPosition();i+=l.x,a+=l.y,++o}}return{x:Math.round(i/o),y:Math.round(a/o)}},nearest:function(t,e){var n,i,a,r=e.x,l=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){var u=t[n];if(u&&u.hasValue()){var d=u.getCenterPoint(),c=o.distanceBetweenPoints(e,d);c<s&&(s=c,a=u)}}if(a){var h=a.tooltipPosition();r=h.x,l=h.y}return{x:r,y:l}}}}},{25:25,26:26,45:45}],36:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{elements:{arc:{backgroundColor:i.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),e.exports=a.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var i=o.getAngleFromPoint(n,{x:t,y:e}),a=i.angle,r=i.distance,l=n.startAngle,s=n.endAngle;s<l;)s+=2*Math.PI;for(;a>s;)a-=2*Math.PI;for(;a<l;)a+=2*Math.PI;var u=a>=l&&a<=s,d=r>=n.innerRadius&&r<=n.outerRadius;return u&&d}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t=this._chart.ctx,e=this._view,n=e.startAngle,i=e.endAngle;t.beginPath(),t.arc(e.x,e.y,e.outerRadius,n,i),t.arc(e.x,e.y,e.innerRadius,i,n,!0),t.closePath(),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}})},{25:25,26:26,45:45}],37:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45),r=i.global;i._set("global",{elements:{line:{tension:.4,backgroundColor:r.defaultColor,borderWidth:3,borderColor:r.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),e.exports=a.extend({draw:function(){var t,e,n,i,a=this,l=a._view,s=a._chart.ctx,u=l.spanGaps,d=a._children.slice(),c=r.elements.line,h=-1;for(a._loop&&d.length&&d.push(d[0]),s.save(),s.lineCap=l.borderCapStyle||c.borderCapStyle,s.setLineDash&&s.setLineDash(l.borderDash||c.borderDash),s.lineDashOffset=l.borderDashOffset||c.borderDashOffset,s.lineJoin=l.borderJoinStyle||c.borderJoinStyle,s.lineWidth=l.borderWidth||c.borderWidth,s.strokeStyle=l.borderColor||r.defaultColor,s.beginPath(),h=-1,t=0;t<d.length;++t)e=d[t],n=o.previousItem(d,t),i=e._view,0===t?i.skip||(s.moveTo(i.x,i.y),h=t):(n=-1===h?n:d[h],i.skip||(h!==t-1&&!u||-1===h?s.moveTo(i.x,i.y):o.canvas.lineTo(s,n._view,e._view),h=t));s.stroke(),s.restore()}})},{25:25,26:26,45:45}],38:[function(t,e,n){"use strict";function i(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hitRadius,2)}var a=t(25),o=t(26),r=t(45),l=a.global.defaultColor;a._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:l,borderColor:l,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),e.exports=o.extend({inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:i,inXRange:i,inYRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.y,2)<Math.pow(e.radius+e.hitRadius,2)},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._model,i=this._chart.ctx,o=e.pointStyle,s=e.radius,u=e.x,d=e.y,c=r.color,h=0;e.skip||(i.strokeStyle=e.borderColor||l,i.lineWidth=r.valueOrDefault(e.borderWidth,a.global.elements.point.borderWidth),i.fillStyle=e.backgroundColor||l,void 0!==t&&(n.x<t.left||1.01*t.right<n.x||n.y<t.top||1.01*t.bottom<n.y)&&(n.x<t.left?h=(u-n.x)/(t.left-n.x):1.01*t.right<n.x?h=(n.x-u)/(n.x-t.right):n.y<t.top?h=(d-n.y)/(t.top-n.y):1.01*t.bottom<n.y&&(h=(n.y-d)/(n.y-t.bottom)),h=Math.round(100*h)/100,i.strokeStyle=c(i.strokeStyle).alpha(h).rgbString(),i.fillStyle=c(i.fillStyle).alpha(h).rgbString()),r.canvas.drawPoint(i,o,s,u,d))}})},{25:25,26:26,45:45}],39:[function(t,e,n){"use strict";function i(t){return void 0!==t._view.width}function a(t){var e,n,a,o,r=t._view;if(i(t)){var l=r.width/2;e=r.x-l,n=r.x+l,a=Math.min(r.y,r.base),o=Math.max(r.y,r.base)}else{var s=r.height/2;e=Math.min(r.x,r.base),n=Math.max(r.x,r.base),a=r.y-s,o=r.y+s}return{left:e,top:a,right:n,bottom:o}}var o=t(25),r=t(26);o._set("global",{elements:{rectangle:{backgroundColor:o.global.defaultColor,borderColor:o.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),e.exports=r.extend({draw:function(){function t(t){return m[(b+t)%4]}var e,n,i,a,o,r,l,s=this._chart.ctx,u=this._view,d=u.borderWidth;if(u.horizontal?(e=u.base,n=u.x,i=u.y-u.height/2,a=u.y+u.height/2,o=n>e?1:-1,r=1,l=u.borderSkipped||"left"):(e=u.x-u.width/2,n=u.x+u.width/2,i=u.y,o=1,r=(a=u.base)>i?1:-1,l=u.borderSkipped||"bottom"),d){var c=Math.min(Math.abs(e-n),Math.abs(i-a)),h=(d=d>c?c:d)/2,f=e+("left"!==l?h*o:0),g=n+("right"!==l?-h*o:0),p=i+("top"!==l?h*r:0),v=a+("bottom"!==l?-h*r:0);f!==g&&(i=p,a=v),p!==v&&(e=f,n=g)}s.beginPath(),s.fillStyle=u.backgroundColor,s.strokeStyle=u.borderColor,s.lineWidth=d;var m=[[e,a],[e,i],[n,i],[n,a]],b=["bottom","left","top","right"].indexOf(l,0);-1===b&&(b=0);var x=t(0);s.moveTo(x[0],x[1]);for(var y=1;y<4;y++)x=t(y),s.lineTo(x[0],x[1]);s.fill(),d&&s.stroke()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){var n=!1;if(this._view){var i=a(this);n=t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom}return n},inLabelRange:function(t,e){var n=this;if(!n._view)return!1;var o=a(n);return i(n)?t>=o.left&&t<=o.right:e>=o.top&&e<=o.bottom},inXRange:function(t){var e=a(this);return t>=e.left&&t<=e.right},inYRange:function(t){var e=a(this);return t>=e.top&&t<=e.bottom},getCenterPoint:function(){var t,e,n=this._view;return i(this)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return t.width*Math.abs(t.y-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}})},{25:25,26:26}],40:[function(t,e,n){"use strict";e.exports={},e.exports.Arc=t(36),e.exports.Line=t(37),e.exports.Point=t(38),e.exports.Rectangle=t(39)},{36:36,37:37,38:38,39:39}],41:[function(t,e,n){"use strict";var i=t(42),n=e.exports={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,i,a,o){if(o){var r=Math.min(o,i/2),l=Math.min(o,a/2);t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+l),t.lineTo(e+i,n+a-l),t.quadraticCurveTo(e+i,n+a,e+i-r,n+a),t.lineTo(e+r,n+a),t.quadraticCurveTo(e,n+a,e,n+a-l),t.lineTo(e,n+l),t.quadraticCurveTo(e,n,e+r,n)}else t.rect(e,n,i,a)},drawPoint:function(t,e,n,i,a){var o,r,l,s,u,d;if(!e||"object"!=typeof e||"[object HTMLImageElement]"!==(o=e.toString())&&"[object HTMLCanvasElement]"!==o){if(!(isNaN(n)||n<=0)){switch(e){default:t.beginPath(),t.arc(i,a,n,0,2*Math.PI),t.closePath(),t.fill();break;case"triangle":t.beginPath(),u=(r=3*n/Math.sqrt(3))*Math.sqrt(3)/2,t.moveTo(i-r/2,a+u/3),t.lineTo(i+r/2,a+u/3),t.lineTo(i,a-2*u/3),t.closePath(),t.fill();break;case"rect":d=1/Math.SQRT2*n,t.beginPath(),t.fillRect(i-d,a-d,2*d,2*d),t.strokeRect(i-d,a-d,2*d,2*d);break;case"rectRounded":var c=n/Math.SQRT2,h=i-c,f=a-c,g=Math.SQRT2*n;t.beginPath(),this.roundedRect(t,h,f,g,g,n/2),t.closePath(),t.fill();break;case"rectRot":d=1/Math.SQRT2*n,t.beginPath(),t.moveTo(i-d,a),t.lineTo(i,a+d),t.lineTo(i+d,a),t.lineTo(i,a-d),t.closePath(),t.fill();break;case"cross":t.beginPath(),t.moveTo(i,a+n),t.lineTo(i,a-n),t.moveTo(i-n,a),t.lineTo(i+n,a),t.closePath();break;case"crossRot":t.beginPath(),l=Math.cos(Math.PI/4)*n,s=Math.sin(Math.PI/4)*n,t.moveTo(i-l,a-s),t.lineTo(i+l,a+s),t.moveTo(i-l,a+s),t.lineTo(i+l,a-s),t.closePath();break;case"star":t.beginPath(),t.moveTo(i,a+n),t.lineTo(i,a-n),t.moveTo(i-n,a),t.lineTo(i+n,a),l=Math.cos(Math.PI/4)*n,s=Math.sin(Math.PI/4)*n,t.moveTo(i-l,a-s),t.lineTo(i+l,a+s),t.moveTo(i-l,a+s),t.lineTo(i+l,a-s),t.closePath();break;case"line":t.beginPath(),t.moveTo(i-n,a),t.lineTo(i+n,a),t.closePath();break;case"dash":t.beginPath(),t.moveTo(i,a),t.lineTo(i+n,a),t.closePath()}t.stroke()}}else t.drawImage(e,i-e.width/2,a-e.height/2,e.width,e.height)},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,i){if(n.steppedLine)return"after"===n.steppedLine&&!i||"after"!==n.steppedLine&&i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y),void t.lineTo(n.x,n.y);n.tension?t.bezierCurveTo(i?e.controlPointPreviousX:e.controlPointNextX,i?e.controlPointPreviousY:e.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}};i.clear=n.clear,i.drawRoundedRectangle=function(t){t.beginPath(),n.roundedRect.apply(n,arguments),t.closePath()}},{42:42}],42:[function(t,e,n){"use strict";var i={noop:function(){},uid:function(){var t=0;return function(){return t++}}(),isNullOrUndef:function(t){return null===t||void 0===t},isArray:Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,n){return i.valueOrDefault(i.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)},each:function(t,e,n,a){var o,r,l;if(i.isArray(t))if(r=t.length,a)for(o=r-1;o>=0;o--)e.call(n,t[o],o);else for(o=0;o<r;o++)e.call(n,t[o],o);else if(i.isObject(t))for(r=(l=Object.keys(t)).length,o=0;o<r;o++)e.call(n,t[l[o]],l[o])},arrayEquals:function(t,e){var n,a,o,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;++n)if(o=t[n],r=e[n],o instanceof Array&&r instanceof Array){if(!i.arrayEquals(o,r))return!1}else if(o!==r)return!1;return!0},clone:function(t){if(i.isArray(t))return t.map(i.clone);if(i.isObject(t)){for(var e={},n=Object.keys(t),a=n.length,o=0;o<a;++o)e[n[o]]=i.clone(t[n[o]]);return e}return t},_merger:function(t,e,n,a){var o=e[t],r=n[t];i.isObject(o)&&i.isObject(r)?i.merge(o,r,a):e[t]=i.clone(r)},_mergerIf:function(t,e,n){var a=e[t],o=n[t];i.isObject(a)&&i.isObject(o)?i.mergeIf(a,o):e.hasOwnProperty(t)||(e[t]=i.clone(o))},merge:function(t,e,n){var a,o,r,l,s,u=i.isArray(e)?e:[e],d=u.length;if(!i.isObject(t))return t;for(a=(n=n||{}).merger||i._merger,o=0;o<d;++o)if(e=u[o],i.isObject(e))for(s=0,l=(r=Object.keys(e)).length;s<l;++s)a(r[s],t,e,n);return t},mergeIf:function(t,e){return i.merge(t,e,{merger:i._mergerIf})},extend:function(t){for(var e=1,n=arguments.length;e<n;++e)i.each(arguments[e],function(e,n){t[n]=e});return t},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},a=function(){this.constructor=n};return a.prototype=e.prototype,n.prototype=new a,n.extend=i.inherits,t&&i.extend(n.prototype,t),n.__super__=e.prototype,n}};e.exports=i,i.callCallback=i.callback,i.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},i.getValueOrDefault=i.valueOrDefault,i.getValueAtIndexOrDefault=i.valueAtIndexOrDefault},{}],43:[function(t,e,n){"use strict";var i=t(42),a={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.45),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-a.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*a.easeInBounce(2*t):.5*a.easeOutBounce(2*t-1)+.5}};e.exports={effects:a},i.easingEffects=a},{42:42}],44:[function(t,e,n){"use strict";var i=t(42);e.exports={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,a,o;return i.isObject(t)?(e=+t.top||0,n=+t.right||0,a=+t.bottom||0,o=+t.left||0):e=n=a=o=+t||0,{top:e,right:n,bottom:a,left:o,height:e+a,width:o+n}},resolve:function(t,e,n){var a,o,r;for(a=0,o=t.length;a<o;++a)if(void 0!==(r=t[a])&&(void 0!==e&&"function"==typeof r&&(r=r(e)),void 0!==n&&i.isArray(r)&&(r=r[n]),void 0!==r))return r}}},{42:42}],45:[function(t,e,n){"use strict";e.exports=t(42),e.exports.easing=t(43),e.exports.canvas=t(41),e.exports.options=t(44)},{41:41,42:42,43:43,44:44}],46:[function(t,e,n){e.exports={acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}}},{}],47:[function(t,e,n){"use strict";function i(t,e){var n=v.getStyle(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}function a(t,e){var n=t.style,a=t.getAttribute("height"),o=t.getAttribute("width");if(t[m]={initial:{height:a,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===o||""===o){var r=i(t,"width");void 0!==r&&(t.width=r)}if(null===a||""===a)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var l=i(t,"height");void 0!==r&&(t.height=l)}return t}function o(t,e,n){t.addEventListener(e,n,M)}function r(t,e,n){t.removeEventListener(e,n,M)}function l(t,e,n,i,a){return{type:t,chart:e,native:a||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}function s(t,e){var n=w[t.type]||t.type,i=v.getRelativePosition(t,e);return l(n,e,i.x,i.y,t)}function u(t,e){var n=!1,i=[];return function(){i=Array.prototype.slice.call(arguments),e=e||this,n||(n=!0,v.requestAnimFrame.call(window,function(){n=!1,t.apply(e,i)}))}}function d(t){var e=document.createElement("div"),n=b+"size-monitor",i="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";e.style.cssText=i,e.className=n,e.innerHTML='<div class="'+n+'-expand" style="'+i+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+n+'-shrink" style="'+i+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var a=e.childNodes[0],r=e.childNodes[1];e._reset=function(){a.scrollLeft=1e6,a.scrollTop=1e6,r.scrollLeft=1e6,r.scrollTop=1e6};var l=function(){e._reset(),t()};return o(a,"scroll",l.bind(a,"expand")),o(r,"scroll",l.bind(r,"shrink")),e}function c(t,e){var n=t[m]||(t[m]={}),i=n.renderProxy=function(t){t.animationName===y&&e()};v.each(k,function(e){o(t,e,i)}),n.reflow=!!t.offsetParent,t.classList.add(x)}function h(t){var e=t[m]||{},n=e.renderProxy;n&&(v.each(k,function(e){r(t,e,n)}),delete e.renderProxy),t.classList.remove(x)}function f(t,e,n){var i=t[m]||(t[m]={}),a=i.resizer=d(u(function(){if(i.resizer)return e(l("resize",n))}));c(t,function(){if(i.resizer){var e=t.parentNode;e&&e!==a.parentNode&&e.insertBefore(a,e.firstChild),a._reset()}})}function g(t){var e=t[m]||{},n=e.resizer;delete e.resizer,h(t),n&&n.parentNode&&n.parentNode.removeChild(n)}function p(t,e){var n=t._style||document.createElement("style");t._style||(t._style=n,e="/* Chart.js */\n"+e,n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(e))}var v=t(45),m="$chartjs",b="chartjs-",x=b+"render-monitor",y=b+"render-animation",k=["animationstart","webkitAnimationStart"],w={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},M=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};e.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var t="from{opacity:0.99}to{opacity:1}";p(this,"@-webkit-keyframes "+y+"{"+t+"}@keyframes "+y+"{"+t+"}."+x+"{-webkit-animation:"+y+" 0.001s;animation:"+y+" 0.001s;}")},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(a(t,e),n):null},releaseContext:function(t){var e=t.canvas;if(e[m]){var n=e[m].initial;["height","width"].forEach(function(t){var i=n[t];v.isNullOrUndef(i)?e.removeAttribute(t):e.setAttribute(t,i)}),v.each(n.style||{},function(t,n){e.style[n]=t}),e.width=e.width,delete e[m]}},addEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var a=n[m]||(n[m]={});o(i,e,(a.proxies||(a.proxies={}))[t.id+"_"+e]=function(e){n(s(e,t))})}else f(i,n,t)},removeEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var a=((n[m]||{}).proxies||{})[t.id+"_"+e];a&&r(i,e,a)}else g(i)}},v.addEvent=o,v.removeEvent=r},{45:45}],48:[function(t,e,n){"use strict";var i=t(45),a=t(46),o=t(47),r=o._enabled?o:a;e.exports=i.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},r)},{45:45,46:46,47:47}],49:[function(t,e,n){"use strict";var i=t(25),a=t(40),o=t(45);i._set("global",{plugins:{filler:{propagate:!0}}}),e.exports=function(){function t(t,e,n){var i,a=t._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(i=parseFloat(o,10),isFinite(i)&&Math.floor(i)===i)return"-"!==o[0]&&"+"!==o[0]||(i=e+i),!(i===e||i<0||i>=n)&&i;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function e(t){var e,n=t.el._model||{},i=t.el._scale||{},a=t.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===a?o=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:i.getBasePosition?o=i.getBasePosition():i.getBasePixel&&(o=i.getBasePixel()),void 0!==o&&null!==o){if(void 0!==o.x&&void 0!==o.y)return o;if("number"==typeof o&&isFinite(o))return e=i.isHorizontal(),{x:e?o:null,y:e?null:o}}return null}function n(t,e,n){var i,a=t[e].fill,o=[e];if(!n)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(i=t[a]))return!1;if(i.visible)return a;o.push(a),a=i.fill}return!1}function r(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),d[n](t))}function l(t){return t&&!t.skip}function s(t,e,n,i,a){var r;if(i&&a){for(t.moveTo(e[0].x,e[0].y),r=1;r<i;++r)o.canvas.lineTo(t,e[r-1],e[r]);for(t.lineTo(n[a-1].x,n[a-1].y),r=a-1;r>0;--r)o.canvas.lineTo(t,n[r],n[r-1],!0)}}function u(t,e,n,i,a,o){var r,u,d,c,h,f,g,p=e.length,v=i.spanGaps,m=[],b=[],x=0,y=0;for(t.beginPath(),r=0,u=p+!!o;r<u;++r)h=n(c=e[d=r%p]._view,d,i),f=l(c),g=l(h),f&&g?(x=m.push(c),y=b.push(h)):x&&y&&(v?(f&&m.push(c),g&&b.push(h)):(s(t,m,b,x,y),x=y=0,m=[],b=[]));s(t,m,b,x,y),t.closePath(),t.fillStyle=a,t.fill()}var d={dataset:function(t){var e=t.fill,n=t.chart,i=n.getDatasetMeta(e),a=i&&n.isDatasetVisible(e)&&i.dataset._children||[],o=a.length||0;return o?function(t,e){return e<o&&a[e]._view||null}:null},boundary:function(t){var e=t.boundary,n=e?e.x:null,i=e?e.y:null;return function(t){return{x:null===n?t.x:n,y:null===i?t.y:i}}}};return{id:"filler",afterDatasetsUpdate:function(i,o){var l,s,u,d,c=(i.data.datasets||[]).length,h=o.propagate,f=[];for(s=0;s<c;++s)d=null,(u=(l=i.getDatasetMeta(s)).dataset)&&u._model&&u instanceof a.Line&&(d={visible:i.isDatasetVisible(s),fill:t(u,s,c),chart:i,el:u}),l.$filler=d,f.push(d);for(s=0;s<c;++s)(d=f[s])&&(d.fill=n(f,s,h),d.boundary=e(d),d.mapper=r(d))},beforeDatasetDraw:function(t,e){var n=e.meta.$filler;if(n){var a=t.ctx,r=n.el,l=r._view,s=r._children||[],d=n.mapper,c=l.backgroundColor||i.global.defaultColor;d&&c&&s.length&&(o.canvas.clipArea(a,t.chartArea),u(a,s,d,l,c,r._loop),o.canvas.unclipArea(a))}}}}},{25:25,40:40,45:45}],50:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,i=this.chart,a=i.getDatasetMeta(n);a.hidden=null===a.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return o.isArray(e.datasets)?e.datasets.map(function(e,n){return{text:e.label,fillStyle:o.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(n),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:n}},this):[]}}},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var n=0;n<t.data.datasets.length;n++)e.push('<li><span style="background-color:'+t.data.datasets[n].backgroundColor+'"></span>'),t.data.datasets[n].label&&e.push(t.data.datasets[n].label),e.push("</li>");return e.push("</ul>"),e.join("")}}),e.exports=function(t){function e(t,e){return t.usePointStyle?e*Math.SQRT2:t.boxWidth}function n(e,n){var i=new t.Legend({ctx:e.ctx,options:n,chart:e});r.configure(e,i,n),r.addBox(e,i),e.legend=i}var r=t.layoutService,l=o.noop;return t.Legend=a.extend({initialize:function(t){o.extend(this,t),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:l,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:l,beforeSetDimensions:l,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:l,beforeBuildLabels:l,buildLabels:function(){var t=this,e=t.options.labels||{},n=o.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter(function(n){return e.filter(n,t.chart.data)})),t.options.reverse&&n.reverse(),t.legendItems=n},afterBuildLabels:l,beforeFit:l,fit:function(){var t=this,n=t.options,a=n.labels,r=n.display,l=t.ctx,s=i.global,u=o.valueOrDefault,d=u(a.fontSize,s.defaultFontSize),c=u(a.fontStyle,s.defaultFontStyle),h=u(a.fontFamily,s.defaultFontFamily),f=o.fontString(d,c,h),g=t.legendHitBoxes=[],p=t.minSize,v=t.isHorizontal();if(v?(p.width=t.maxWidth,p.height=r?10:0):(p.width=r?10:0,p.height=t.maxHeight),r)if(l.font=f,v){var m=t.lineWidths=[0],b=t.legendItems.length?d+a.padding:0;l.textAlign="left",l.textBaseline="top",o.each(t.legendItems,function(n,i){var o=e(a,d)+d/2+l.measureText(n.text).width;m[m.length-1]+o+a.padding>=t.width&&(b+=d+a.padding,m[m.length]=t.left),g[i]={left:0,top:0,width:o,height:d},m[m.length-1]+=o+a.padding}),p.height+=b}else{var x=a.padding,y=t.columnWidths=[],k=a.padding,w=0,M=0,S=d+x;o.each(t.legendItems,function(t,n){var i=e(a,d)+d/2+l.measureText(t.text).width;M+S>p.height&&(k+=w+a.padding,y.push(w),w=0,M=0),w=Math.max(w,i),M+=S,g[n]={left:0,top:0,width:i,height:d}}),k+=w,y.push(w),p.width+=k}t.width=p.width,t.height=p.height},afterFit:l,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,n=t.options,a=n.labels,r=i.global,l=r.elements.line,s=t.width,u=t.lineWidths;if(n.display){var d,c=t.ctx,h=o.valueOrDefault,f=h(a.fontColor,r.defaultFontColor),g=h(a.fontSize,r.defaultFontSize),p=h(a.fontStyle,r.defaultFontStyle),v=h(a.fontFamily,r.defaultFontFamily),m=o.fontString(g,p,v);c.textAlign="left",c.textBaseline="middle",c.lineWidth=.5,c.strokeStyle=f,c.fillStyle=f,c.font=m;var b=e(a,g),x=t.legendHitBoxes,y=function(t,e,i){if(!(isNaN(b)||b<=0)){c.save(),c.fillStyle=h(i.fillStyle,r.defaultColor),c.lineCap=h(i.lineCap,l.borderCapStyle),c.lineDashOffset=h(i.lineDashOffset,l.borderDashOffset),c.lineJoin=h(i.lineJoin,l.borderJoinStyle),c.lineWidth=h(i.lineWidth,l.borderWidth),c.strokeStyle=h(i.strokeStyle,r.defaultColor);var a=0===h(i.lineWidth,l.borderWidth);if(c.setLineDash&&c.setLineDash(h(i.lineDash,l.borderDash)),n.labels&&n.labels.usePointStyle){var s=g*Math.SQRT2/2,u=s/Math.SQRT2,d=t+u,f=e+u;o.canvas.drawPoint(c,i.pointStyle,s,d,f)}else a||c.strokeRect(t,e,b,g),c.fillRect(t,e,b,g);c.restore()}},k=function(t,e,n,i){var a=g/2,o=b+a+t,r=e+a;c.fillText(n.text,o,r),n.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(o,r),c.lineTo(o+i,r),c.stroke())},w=t.isHorizontal();d=w?{x:t.left+(s-u[0])/2,y:t.top+a.padding,line:0}:{x:t.left+a.padding,y:t.top+a.padding,line:0};var M=g+a.padding;o.each(t.legendItems,function(e,n){var i=c.measureText(e.text).width,o=b+g/2+i,r=d.x,l=d.y;w?r+o>=s&&(l=d.y+=M,d.line++,r=d.x=t.left+(s-u[d.line])/2):l+M>t.bottom&&(r=d.x=r+t.columnWidths[d.line]+a.padding,l=d.y=t.top+a.padding,d.line++),y(r,l,e),x[n].left=r,x[n].top=l,k(r,l,e,i),w?d.x+=o+a.padding:d.y+=M})}},handleEvent:function(t){var e=this,n=e.options,i="mouseup"===t.type?"click":t.type,a=!1;if("mousemove"===i){if(!n.onHover)return}else{if("click"!==i)return;if(!n.onClick)return}var o=t.x,r=t.y;if(o>=e.left&&o<=e.right&&r>=e.top&&r<=e.bottom)for(var l=e.legendHitBoxes,s=0;s<l.length;++s){var u=l[s];if(o>=u.left&&o<=u.left+u.width&&r>=u.top&&r<=u.top+u.height){if("click"===i){n.onClick.call(e,t.native,e.legendItems[s]),a=!0;break}if("mousemove"===i){n.onHover.call(e,t.native,e.legendItems[s]),a=!0;break}}}return a}}),{id:"legend",beforeInit:function(t){var e=t.options.legend;e&&n(t,e)},beforeUpdate:function(t){var e=t.options.legend,a=t.legend;e?(o.mergeIf(e,i.global.legend),a?(r.configure(t,a,e),a.options=e):n(t,e)):a&&(r.removeBox(t,a),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}}}},{25:25,26:26,45:45}],51:[function(t,e,n){"use strict";var i=t(25),a=t(26),o=t(45);i._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}}),e.exports=function(t){function e(e,i){var a=new t.Title({ctx:e.ctx,options:i,chart:e});n.configure(e,a,i),n.addBox(e,a),e.titleBlock=a}var n=t.layoutService,r=o.noop;return t.Title=a.extend({initialize:function(t){var e=this;o.extend(e,t),e.legendHitBoxes=[]},beforeUpdate:r,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:r,beforeSetDimensions:r,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:r,beforeBuildLabels:r,buildLabels:r,afterBuildLabels:r,beforeFit:r,fit:function(){var t=this,e=o.valueOrDefault,n=t.options,a=n.display,r=e(n.fontSize,i.global.defaultFontSize),l=t.minSize,s=o.isArray(n.text)?n.text.length:1,u=o.options.toLineHeight(n.lineHeight,r),d=a?s*u+2*n.padding:0;t.isHorizontal()?(l.width=t.maxWidth,l.height=d):(l.width=d,l.height=t.maxHeight),t.width=l.width,t.height=l.height},afterFit:r,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=o.valueOrDefault,a=t.options,r=i.global;if(a.display){var l,s,u,d=n(a.fontSize,r.defaultFontSize),c=n(a.fontStyle,r.defaultFontStyle),h=n(a.fontFamily,r.defaultFontFamily),f=o.fontString(d,c,h),g=o.options.toLineHeight(a.lineHeight,d),p=g/2+a.padding,v=0,m=t.top,b=t.left,x=t.bottom,y=t.right;e.fillStyle=n(a.fontColor,r.defaultFontColor),e.font=f,t.isHorizontal()?(s=b+(y-b)/2,u=m+p,l=y-b):(s="left"===a.position?b+p:y-p,u=m+(x-m)/2,l=x-m,v=Math.PI*("left"===a.position?-.5:.5)),e.save(),e.translate(s,u),e.rotate(v),e.textAlign="center",e.textBaseline="middle";var k=a.text;if(o.isArray(k))for(var w=0,M=0;M<k.length;++M)e.fillText(k[M],0,w,l),w+=g;else e.fillText(k,0,0,l);e.restore()}}}),{id:"title",beforeInit:function(t){var n=t.options.title;n&&e(t,n)},beforeUpdate:function(a){var r=a.options.title,l=a.titleBlock;r?(o.mergeIf(r,i.global.title),l?(n.configure(a,l,r),l.options=r):e(a,r)):l&&(t.layoutService.removeBox(a,l),delete a.titleBlock)}}}},{25:25,26:26,45:45}],52:[function(t,e,n){"use strict";e.exports=function(t){var e=t.Scale.extend({getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t=this,e=t.getLabels();t.minIndex=0,t.maxIndex=e.length-1;var n;void 0!==t.options.ticks.min&&(n=e.indexOf(t.options.ticks.min),t.minIndex=-1!==n?n:t.minIndex),void 0!==t.options.ticks.max&&(n=e.indexOf(t.options.ticks.max),t.maxIndex=-1!==n?n:t.maxIndex),t.min=e[t.minIndex],t.max=e[t.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var n=this,i=n.chart.data,a=n.isHorizontal();return i.yLabels&&!a?n.getRightValue(i.datasets[e].data[t]):n.ticks[t-n.minIndex]},getPixelForValue:function(t,e){var n,i=this,a=i.options.offset,o=Math.max(i.maxIndex+1-i.minIndex-(a?0:1),1);if(void 0!==t&&null!==t&&(n=i.isHorizontal()?t.x:t.y),void 0!==n||void 0!==t&&isNaN(e)){var r=i.getLabels();t=n||t;var l=r.indexOf(t);e=-1!==l?l:e}if(i.isHorizontal()){var s=i.width/o,u=s*(e-i.minIndex);return a&&(u+=s/2),i.left+Math.round(u)}var d=i.height/o,c=d*(e-i.minIndex);return a&&(c+=d/2),i.top+Math.round(c)},getPixelForTick:function(t){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null)},getValueForPixel:function(t){var e=this,n=e.options.offset,i=Math.max(e._ticks.length-(n?0:1),1),a=e.isHorizontal(),o=(a?e.width:e.height)/i;return t-=a?e.left:e.top,n&&(t-=o/2),(t<=0?0:Math.round(t/o))+e.minIndex},getBasePixel:function(){return this.bottom}});t.scaleService.registerScaleType("category",e,{position:"bottom"})}},{}],53:[function(t,e,n){"use strict";var i=t(25),a=t(45),o=t(34);e.exports=function(t){var e={position:"left",ticks:{callback:o.formatters.linear}},n=t.LinearScaleBase.extend({determineDataLimits:function(){function t(t){return r?t.xAxisID===e.id:t.yAxisID===e.id}var e=this,n=e.options,i=e.chart,o=i.data.datasets,r=e.isHorizontal();e.min=null,e.max=null;var l=n.stacked;if(void 0===l&&a.each(o,function(e,n){if(!l){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&t(a)&&void 0!==a.stack&&(l=!0)}}),n.stacked||l){var s={};a.each(o,function(o,r){var l=i.getDatasetMeta(r),u=[l.type,void 0===n.stacked&&void 0===l.stack?r:"",l.stack].join(".");void 0===s[u]&&(s[u]={positiveValues:[],negativeValues:[]});var d=s[u].positiveValues,c=s[u].negativeValues;i.isDatasetVisible(r)&&t(l)&&a.each(o.data,function(t,i){var a=+e.getRightValue(t);isNaN(a)||l.data[i].hidden||(d[i]=d[i]||0,c[i]=c[i]||0,n.relativePoints?d[i]=100:a<0?c[i]+=a:d[i]+=a)})}),a.each(s,function(t){var n=t.positiveValues.concat(t.negativeValues),i=a.min(n),o=a.max(n);e.min=null===e.min?i:Math.min(e.min,i),e.max=null===e.max?o:Math.max(e.max,o)})}else a.each(o,function(n,o){var r=i.getDatasetMeta(o);i.isDatasetVisible(o)&&t(r)&&a.each(n.data,function(t,n){var i=+e.getRightValue(t);isNaN(i)||r.data[n].hidden||(null===e.min?e.min=i:i<e.min&&(e.min=i),null===e.max?e.max=i:i>e.max&&(e.max=i))})});e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var t,e=this,n=e.options.ticks;if(e.isHorizontal())t=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(e.width/50));else{var o=a.valueOrDefault(n.fontSize,i.global.defaultFontSize);t=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(e.height/(2*o)))}return t},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e,n=this,i=n.start,a=+n.getRightValue(t),o=n.end-i;return n.isHorizontal()?(e=n.left+n.width/o*(a-i),Math.round(e)):(e=n.bottom-n.height/o*(a-i),Math.round(e))},getValueForPixel:function(t){var e=this,n=e.isHorizontal(),i=n?e.width:e.height,a=(n?t-e.left:e.bottom-t)/i;return e.start+(e.end-e.start)*a},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});t.scaleService.registerScaleType("linear",n,e)}},{25:25,34:34,45:45}],54:[function(t,e,n){"use strict";var i=t(45),a=t(34);e.exports=function(t){var e=i.noop;t.LinearScaleBase=t.Scale.extend({getRightValue:function(e){return"string"==typeof e?+e:t.Scale.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=i.sign(t.min),a=i.sign(t.max);n<0&&a<0?t.max=0:n>0&&a>0&&(t.min=0)}var o=void 0!==e.min||void 0!==e.suggestedMin,r=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),o!==r&&t.min>=t.max&&(o?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:e,handleDirectionalChanges:e,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),o={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,stepSize:i.valueOrDefault(e.fixedStepSize,e.stepSize)},r=t.ticks=a.generators.linear(o,t);t.handleDirectionalChanges(),t.max=i.max(r),t.min=i.min(r),e.reverse?(r.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),t.Scale.prototype.convertTicksToLabels.call(e)}})}},{34:34,45:45}],55:[function(t,e,n){"use strict";var i=t(45),a=t(34);e.exports=function(t){var e={position:"left",ticks:{callback:a.formatters.logarithmic}},n=t.Scale.extend({determineDataLimits:function(){function t(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}var e=this,n=e.options,a=n.ticks,o=e.chart,r=o.data.datasets,l=i.valueOrDefault,s=e.isHorizontal();e.min=null,e.max=null,e.minNotZero=null;var u=n.stacked;if(void 0===u&&i.each(r,function(e,n){if(!u){var i=o.getDatasetMeta(n);o.isDatasetVisible(n)&&t(i)&&void 0!==i.stack&&(u=!0)}}),n.stacked||u){var d={};i.each(r,function(a,r){var l=o.getDatasetMeta(r),s=[l.type,void 0===n.stacked&&void 0===l.stack?r:"",l.stack].join(".");o.isDatasetVisible(r)&&t(l)&&(void 0===d[s]&&(d[s]=[]),i.each(a.data,function(t,i){var a=d[s],o=+e.getRightValue(t);isNaN(o)||l.data[i].hidden||(a[i]=a[i]||0,n.relativePoints?a[i]=100:a[i]+=o)}))}),i.each(d,function(t){var n=i.min(t),a=i.max(t);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?a:Math.max(e.max,a)})}else i.each(r,function(n,a){var r=o.getDatasetMeta(a);o.isDatasetVisible(a)&&t(r)&&i.each(n.data,function(t,n){var i=+e.getRightValue(t);isNaN(i)||r.data[n].hidden||(null===e.min?e.min=i:i<e.min&&(e.min=i),null===e.max?e.max=i:i>e.max&&(e.max=i),0!==i&&(null===e.minNotZero||i<e.minNotZero)&&(e.minNotZero=i))})});e.min=l(a.min,e.min),e.max=l(a.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(i.log10(e.min))-1),e.max=Math.pow(10,Math.floor(i.log10(e.max))+1)):(e.min=1,e.max=10))},buildTicks:function(){var t=this,e=t.options.ticks,n={min:e.min,max:e.max},o=t.ticks=a.generators.logarithmic(n,t);t.isHorizontal()||o.reverse(),t.max=i.max(o),t.min=i.min(o),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),t.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},getPixelForValue:function(t){var e,n,a,o=this,r=o.start,l=+o.getRightValue(t),s=o.options.ticks;return o.isHorizontal()?(a=i.log10(o.end)-i.log10(r),0===l?n=o.left:(e=o.width,n=o.left+e/a*(i.log10(l)-i.log10(r)))):(e=o.height,0!==r||s.reverse?0===o.end&&s.reverse?(a=i.log10(o.start)-i.log10(o.minNotZero),n=l===o.end?o.top:l===o.minNotZero?o.top+.02*e:o.top+.02*e+.98*e/a*(i.log10(l)-i.log10(o.minNotZero))):0===l?n=s.reverse?o.top:o.bottom:(a=i.log10(o.end)-i.log10(r),e=o.height,n=o.bottom-e/a*(i.log10(l)-i.log10(r))):(a=i.log10(o.end)-i.log10(o.minNotZero),n=l===r?o.bottom:l===o.minNotZero?o.bottom-.02*e:o.bottom-.02*e-.98*e/a*(i.log10(l)-i.log10(o.minNotZero)))),n},getValueForPixel:function(t){var e,n,a=this,o=i.log10(a.end)-i.log10(a.start);return a.isHorizontal()?(n=a.width,e=a.start*Math.pow(10,(t-a.left)*o/n)):(n=a.height,e=Math.pow(10,(a.bottom-t)*o/n)/a.start),e}});t.scaleService.registerScaleType("logarithmic",n,e)}},{34:34,45:45}],56:[function(t,e,n){"use strict";var i=t(25),a=t(45),o=t(34);e.exports=function(t){function e(t){var e=t.options;return e.angleLines.display||e.pointLabels.display?t.chart.data.labels.length:0}function n(t){var e=t.options.pointLabels,n=a.valueOrDefault(e.fontSize,v.defaultFontSize),i=a.valueOrDefault(e.fontStyle,v.defaultFontStyle),o=a.valueOrDefault(e.fontFamily,v.defaultFontFamily);return{size:n,style:i,family:o,font:a.fontString(n,i,o)}}function r(t,e,n){return a.isArray(n)?{w:a.longestText(t,t.font,n),h:n.length*e+1.5*(n.length-1)*e}:{w:t.measureText(n).width,h:e}}function l(t,e,n,i,a){return t===i||t===a?{start:e-n/2,end:e+n/2}:t<i||t>a?{start:e-n-5,end:e}:{start:e,end:e+n+5}}function s(t){var i,o,s,u=n(t),d=Math.min(t.height/2,t.width/2),c={r:t.width,l:0,t:t.height,b:0},h={};t.ctx.font=u.font,t._pointLabelSizes=[];var f=e(t);for(i=0;i<f;i++){s=t.getPointPosition(i,d),o=r(t.ctx,u.size,t.pointLabels[i]||""),t._pointLabelSizes[i]=o;var g=t.getIndexAngle(i),p=a.toDegrees(g)%360,v=l(p,s.x,o.w,0,180),m=l(p,s.y,o.h,90,270);v.start<c.l&&(c.l=v.start,h.l=g),v.end>c.r&&(c.r=v.end,h.r=g),m.start<c.t&&(c.t=m.start,h.t=g),m.end>c.b&&(c.b=m.end,h.b=g)}t.setReductions(d,c,h)}function u(t){var e=Math.min(t.height/2,t.width/2);t.drawingArea=Math.round(e),t.setCenterPoint(0,0,0,0)}function d(t){return 0===t||180===t?"center":t<180?"left":"right"}function c(t,e,n,i){if(a.isArray(e))for(var o=n.y,r=1.5*i,l=0;l<e.length;++l)t.fillText(e[l],n.x,o),o+=r;else t.fillText(e,n.x,n.y)}function h(t,e,n){90===t||270===t?n.y-=e.h/2:(t>270||t<90)&&(n.y-=e.h)}function f(t){var i=t.ctx,o=a.valueOrDefault,r=t.options,l=r.angleLines,s=r.pointLabels;i.lineWidth=l.lineWidth,i.strokeStyle=l.color;var u=t.getDistanceFromCenterForValue(r.ticks.reverse?t.min:t.max),f=n(t);i.textBaseline="top";for(var g=e(t)-1;g>=0;g--){if(l.display){var p=t.getPointPosition(g,u);i.beginPath(),i.moveTo(t.xCenter,t.yCenter),i.lineTo(p.x,p.y),i.stroke(),i.closePath()}if(s.display){var m=t.getPointPosition(g,u+5),b=o(s.fontColor,v.defaultFontColor);i.font=f.font,i.fillStyle=b;var x=t.getIndexAngle(g),y=a.toDegrees(x);i.textAlign=d(y),h(y,t._pointLabelSizes[g],m),c(i,t.pointLabels[g]||"",m,f.size)}}}function g(t,n,i,o){var r=t.ctx;if(r.strokeStyle=a.valueAtIndexOrDefault(n.color,o-1),r.lineWidth=a.valueAtIndexOrDefault(n.lineWidth,o-1),t.options.gridLines.circular)r.beginPath(),r.arc(t.xCenter,t.yCenter,i,0,2*Math.PI),r.closePath(),r.stroke();else{var l=e(t);if(0===l)return;r.beginPath();var s=t.getPointPosition(0,i);r.moveTo(s.x,s.y);for(var u=1;u<l;u++)s=t.getPointPosition(u,i),r.lineTo(s.x,s.y);r.closePath(),r.stroke()}}function p(t){return a.isNumber(t)?t:0}var v=i.global,m={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:o.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}},b=t.LinearScaleBase.extend({setDimensions:function(){var t=this,e=t.options,n=e.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var i=a.min([t.height,t.width]),o=a.valueOrDefault(n.fontSize,v.defaultFontSize);t.drawingArea=e.display?i/2-(o/2+n.backdropPaddingY):i/2},determineDataLimits:function(){var t=this,e=t.chart,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;a.each(e.data.datasets,function(o,r){if(e.isDatasetVisible(r)){var l=e.getDatasetMeta(r);a.each(o.data,function(e,a){var o=+t.getRightValue(e);isNaN(o)||l.data[a].hidden||(n=Math.min(o,n),i=Math.max(o,i))})}}),t.min=n===Number.POSITIVE_INFINITY?0:n,t.max=i===Number.NEGATIVE_INFINITY?0:i,t.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,e=a.valueOrDefault(t.fontSize,v.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*e)))},convertTicksToLabels:function(){var e=this;t.LinearScaleBase.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){this.options.pointLabels.display?s(this):u(this)},setReductions:function(t,e,n){var i=this,a=e.l/Math.sin(n.l),o=Math.max(e.r-i.width,0)/Math.sin(n.r),r=-e.t/Math.cos(n.t),l=-Math.max(e.b-i.height,0)/Math.cos(n.b);a=p(a),o=p(o),r=p(r),l=p(l),i.drawingArea=Math.min(Math.round(t-(a+o)/2),Math.round(t-(r+l)/2)),i.setCenterPoint(a,o,r,l)},setCenterPoint:function(t,e,n,i){var a=this,o=a.width-e-a.drawingArea,r=t+a.drawingArea,l=n+a.drawingArea,s=a.height-i-a.drawingArea;a.xCenter=Math.round((r+o)/2+a.left),a.yCenter=Math.round((l+s)/2+a.top)},getIndexAngle:function(t){return t*(2*Math.PI/e(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this,i=n.getIndexAngle(t)-Math.PI/2;return{x:Math.round(Math.cos(i)*e)+n.xCenter,y:Math.round(Math.sin(i)*e)+n.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this,e=t.min,n=t.max;return t.getPointPositionForValue(0,t.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},draw:function(){var t=this,e=t.options,n=e.gridLines,i=e.ticks,o=a.valueOrDefault;if(e.display){var r=t.ctx,l=this.getIndexAngle(0),s=o(i.fontSize,v.defaultFontSize),u=o(i.fontStyle,v.defaultFontStyle),d=o(i.fontFamily,v.defaultFontFamily),c=a.fontString(s,u,d);a.each(t.ticks,function(e,a){if(a>0||i.reverse){var u=t.getDistanceFromCenterForValue(t.ticksAsNumbers[a]);if(n.display&&0!==a&&g(t,n,u,a),i.display){var d=o(i.fontColor,v.defaultFontColor);if(r.font=c,r.save(),r.translate(t.xCenter,t.yCenter),r.rotate(l),i.showLabelBackdrop){var h=r.measureText(e).width;r.fillStyle=i.backdropColor,r.fillRect(-h/2-i.backdropPaddingX,-u-s/2-i.backdropPaddingY,h+2*i.backdropPaddingX,s+2*i.backdropPaddingY)}r.textAlign="center",r.textBaseline="middle",r.fillStyle=d,r.fillText(e,0,-u),r.restore()}}}),(e.angleLines.display||e.pointLabels.display)&&f(t)}}});t.scaleService.registerScaleType("radialLinear",b,m)}},{25:25,34:34,45:45}],57:[function(t,e,n){"use strict";function i(t,e){return t-e}function a(t){var e,n,i,a={},o=[];for(e=0,n=t.length;e<n;++e)a[i=t[e]]||(a[i]=!0,o.push(i));return o}function o(t,e,n,i){if("linear"===i||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var a,o,r,l,s,u=[],d=[e];for(a=0,o=t.length;a<o;++a)(l=t[a])>e&&l<n&&d.push(l);for(d.push(n),a=0,o=d.length;a<o;++a)s=d[a+1],r=d[a-1],l=d[a],void 0!==r&&void 0!==s&&Math.round((s+r)/2)===l||u.push({time:l,pos:a/(o-1)});return u}function r(t,e,n){for(var i,a,o,r=0,l=t.length-1;r>=0&&r<=l;){if(i=r+l>>1,a=t[i-1]||null,o=t[i],!a)return{lo:null,hi:o};if(o[e]<n)r=i+1;else{if(!(a[e]>n))return{lo:a,hi:o};l=i-1}}return{lo:o,hi:null}}function l(t,e,n,i){var a=r(t,e,n),o=a.lo?a.hi?a.lo:t[t.length-2]:t[0],l=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=l[e]-o[e],u=s?(n-o[e])/s:0,d=(l[i]-o[i])*u;return o[i]+d}function s(t,e){var n=e.parser,i=e.parser||e.format;return"function"==typeof n?n(t):"string"==typeof t&&"string"==typeof i?m(t,i):(t instanceof m||(t=m(t)),t.isValid()?t:"function"==typeof i?i(t):t)}function u(t,e){if(x.isNullOrUndef(t))return null;var n=e.options.time,i=s(e.getRightValue(t),n);return i.isValid()?(n.round&&i.startOf(n.round),i.valueOf()):null}function d(t,e,n,i){var a,o,r,l=e-t,s=w[n],u=s.size,d=s.steps;if(!d)return Math.ceil(l/((i||1)*u));for(a=0,o=d.length;a<o&&(r=d[a],!(Math.ceil(l/(u*r))<=i));++a);return r}function c(t,e,n,i){var a,o,r,l=M.length;for(a=M.indexOf(t);a<l-1;++a)if(o=w[M[a]],r=o.steps?o.steps[o.steps.length-1]:k,o.common&&Math.ceil((n-e)/(r*o.size))<=i)return M[a];return M[l-1]}function h(t,e,n,i){var a,o,r=m.duration(m(i).diff(m(n)));for(a=M.length-1;a>=M.indexOf(e);a--)if(o=M[a],w[o].common&&r.as(o)>=t.length)return o;return M[e?M.indexOf(e):0]}function f(t){for(var e=M.indexOf(t)+1,n=M.length;e<n;++e)if(w[M[e]].common)return M[e]}function g(t,e,n,i){var a,o=i.time,r=o.unit||c(o.minUnit,t,e,n),l=f(r),s=x.valueOrDefault(o.stepSize,o.unitStepSize),u="week"===r&&o.isoWeekday,h=i.ticks.major.enabled,g=w[r],p=m(t),v=m(e),b=[];for(s||(s=d(t,e,r,n)),u&&(p=p.isoWeekday(u),v=v.isoWeekday(u)),p=p.startOf(u?"day":r),(v=v.startOf(u?"day":r))<e&&v.add(1,r),a=m(p),h&&l&&!u&&!o.round&&(a.startOf(l),a.add(~~((p-a)/(g.size*s))*s,r));a<v;a.add(s,r))b.push(+a);return b.push(+a),b}function p(t,e,n,i,a){var o,r,s=0,u=0;return a.offset&&e.length&&(a.time.min||(o=e.length>1?e[1]:i,r=e[0],s=(l(t,"time",o,"pos")-l(t,"time",r,"pos"))/2),a.time.max||(o=e[e.length-1],r=e.length>1?e[e.length-2]:n,u=(l(t,"time",o,"pos")-l(t,"time",r,"pos"))/2)),{left:s,right:u}}function v(t,e){var n,i,a,o,r=[];for(n=0,i=t.length;n<i;++n)a=t[n],o=!!e&&a===+m(a).startOf(e),r.push({value:a,major:o});return r}var m=t(1);m="function"==typeof m?m:window.moment;var b=t(25),x=t(45),y=Number.MIN_SAFE_INTEGER||-9007199254740991,k=Number.MAX_SAFE_INTEGER||9007199254740991,w={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},M=Object.keys(w);e.exports=function(t){var e=t.Scale.extend({initialize:function(){if(!m)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),t.Scale.prototype.initialize.call(this)},update:function(){var e=this,n=e.options;return n.time&&n.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),t.Scale.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),t.Scale.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var t,e,n,o,r,l,s=this,d=s.chart,c=s.options.time,h=k,f=y,g=[],p=[],v=[];for(t=0,n=d.data.labels.length;t<n;++t)v.push(u(d.data.labels[t],s));for(t=0,n=(d.data.datasets||[]).length;t<n;++t)if(d.isDatasetVisible(t))if(r=d.data.datasets[t].data,x.isObject(r[0]))for(p[t]=[],e=0,o=r.length;e<o;++e)l=u(r[e],s),g.push(l),p[t][e]=l;else g.push.apply(g,v),p[t]=v.slice(0);else p[t]=[];v.length&&(v=a(v).sort(i),h=Math.min(h,v[0]),f=Math.max(f,v[v.length-1])),g.length&&(g=a(g).sort(i),h=Math.min(h,g[0]),f=Math.max(f,g[g.length-1])),h=u(c.min,s)||h,f=u(c.max,s)||f,h=h===k?+m().startOf("day"):h,f=f===y?+m().endOf("day")+1:f,s.min=Math.min(h,f),s.max=Math.max(h+1,f),s._horizontal=s.isHorizontal(),s._table=[],s._timestamps={data:g,datasets:p,labels:v}},buildTicks:function(){var t,e,n,i=this,a=i.min,r=i.max,l=i.options,s=l.time,d=[],c=[];switch(l.ticks.source){case"data":d=i._timestamps.data;break;case"labels":d=i._timestamps.labels;break;case"auto":default:d=g(a,r,i.getLabelCapacity(a),l)}for("ticks"===l.bounds&&d.length&&(a=d[0],r=d[d.length-1]),a=u(s.min,i)||a,r=u(s.max,i)||r,t=0,e=d.length;t<e;++t)(n=d[t])>=a&&n<=r&&c.push(n);return i.min=a,i.max=r,i._unit=s.unit||h(c,s.minUnit,i.min,i.max),i._majorUnit=f(i._unit),i._table=o(i._timestamps.data,a,r,l.distribution),i._offsets=p(i._table,c,a,r,l),v(c,i._majorUnit)},getLabelForIndex:function(t,e){var n=this,i=n.chart.data,a=n.options.time,o=i.labels&&t<i.labels.length?i.labels[t]:"",r=i.datasets[e].data[t];return x.isObject(r)&&(o=n.getRightValue(r)),a.tooltipFormat&&(o=s(o,a).format(a.tooltipFormat)),o},tickFormatFunction:function(t,e,n,i){var a=this,o=a.options,r=t.valueOf(),l=o.time.displayFormats,s=l[a._unit],u=a._majorUnit,d=l[u],c=t.clone().startOf(u).valueOf(),h=o.ticks.major,f=h.enabled&&u&&d&&r===c,g=t.format(i||(f?d:s)),p=f?h:o.ticks.minor,v=x.valueOrDefault(p.callback,p.userCallback);return v?v(g,e,n):g},convertTicksToLabels:function(t){var e,n,i=[];for(e=0,n=t.length;e<n;++e)i.push(this.tickFormatFunction(m(t[e].value),e,t));return i},getPixelForOffset:function(t){var e=this,n=e._horizontal?e.width:e.height,i=e._horizontal?e.left:e.top,a=l(e._table,"time",t,"pos");return i+n*(e._offsets.left+a)/(e._offsets.left+1+e._offsets.right)},getPixelForValue:function(t,e,n){var i=this,a=null;if(void 0!==e&&void 0!==n&&(a=i._timestamps.datasets[n][e]),null===a&&(a=u(t,i)),null!==a)return i.getPixelForOffset(a)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this,n=e._horizontal?e.width:e.height,i=e._horizontal?e.left:e.top,a=(n?(t-i)/n:0)*(e._offsets.left+1+e._offsets.left)-e._offsets.right,o=l(e._table,"pos",a,"time");return m(o)},getLabelWidth:function(t){var e=this,n=e.options.ticks,i=e.ctx.measureText(t).width,a=x.toRadians(n.maxRotation),o=Math.cos(a),r=Math.sin(a);return i*o+x.valueOrDefault(n.fontSize,b.global.defaultFontSize)*r},getLabelCapacity:function(t){var e=this,n=e.options.time.displayFormats.millisecond,i=e.tickFormatFunction(m(t),0,[],n),a=e.getLabelWidth(i),o=e.isHorizontal()?e.width:e.height;return Math.floor(o/a)}});t.scaleService.registerScaleType("time",e,{position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}})}},{1:1,25:25,45:45}]},{},[7])(7)});
var swfobject=function(){var e="undefined",t="object",i="Shockwave Flash",a="ShockwaveFlash.ShockwaveFlash",n="application/x-shockwave-flash",r="SWFObjectExprInst",s="onreadystatechange",l=window,f=document,o=navigator,c=false,u=[k],d=[],p=[],v=[],y,h,m,g,w=false,b=false,C,E,S=true,A=function(){var r=typeof f.getElementById!=e&&typeof f.getElementsByTagName!=e&&typeof f.createElement!=e,s=o.userAgent.toLowerCase(),u=o.platform.toLowerCase(),d=u?/win/.test(u):/win/.test(s),p=u?/mac/.test(u):/mac/.test(s),v=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,y=!+"1",h=[0,0,0],m=null;if(typeof o.plugins!=e&&typeof o.plugins[i]==t){m=o.plugins[i].description;if(m&&!(typeof o.mimeTypes!=e&&o.mimeTypes[n]&&!o.mimeTypes[n].enabledPlugin)){c=true;y=false;m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1");h[0]=parseInt(m.replace(/^(.*)\..*$/,"$1"),10);h[1]=parseInt(m.replace(/^.*\.(.*)\s.*$/,"$1"),10);h[2]=/[a-zA-Z]/.test(m)?parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof l.ActiveXObject!=e){try{var g=new ActiveXObject(a);if(g){m=g.GetVariable("$version");if(m){y=true;m=m.split(" ")[1].split(",");h=[parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10)]}}}catch(w){}}return{w3:r,pv:h,wk:v,ie:y,win:d,mac:p}}(),N=function(){if(!A.w3){return}if(typeof f.readyState!=e&&f.readyState=="complete"||typeof f.readyState==e&&(f.getElementsByTagName("body")[0]||f.body)){T()}if(!w){if(typeof f.addEventListener!=e){f.addEventListener("DOMContentLoaded",T,false)}if(A.ie&&A.win){f.attachEvent(s,function(){if(f.readyState=="complete"){f.detachEvent(s,arguments.callee);T()}});if(l==top){!function(){if(w){return}try{f.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}T()}()}}if(A.wk){!function(){if(w){return}if(!/loaded|complete/.test(f.readyState)){setTimeout(arguments.callee,0);return}T()}()}L(T)}}();function T(){if(w){return}try{var e=f.getElementsByTagName("body")[0].appendChild(H("span"));e.parentNode.removeChild(e)}catch(t){return}w=true;var i=u.length;for(var a=0;a<i;a++){u[a]()}}function I(e){if(w){e()}else{u[u.length]=e}}function L(t){if(typeof l.addEventListener!=e){l.addEventListener("load",t,false)}else if(typeof f.addEventListener!=e){f.addEventListener("load",t,false)}else if(typeof l.attachEvent!=e){G(l,"onload",t)}else if(typeof l.onload=="function"){var i=l.onload;l.onload=function(){i();t()}}else{l.onload=t}}function k(){if(c){j()}else{B()}}function j(){var i=f.getElementsByTagName("body")[0];var a=H(t);a.setAttribute("type",n);var r=i.appendChild(a);if(r){var s=0;!function(){if(typeof r.GetVariable!=e){var t=r.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");A.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]}}else if(s<10){s++;setTimeout(arguments.callee,10);return}i.removeChild(a);r=null;B()}()}else{B()}}function B(){var t=d.length;if(t>0){for(var i=0;i<t;i++){var a=d[i].id;var n=d[i].callbackFn;var r={success:false,id:a};if(A.pv[0]>0){var s=W(a);if(s){if(J(d[i].swfVersion)&&!(A.wk&&A.wk<312)){X(a,true);if(n){r.success=true;r.ref=O(a);n(r)}}else if(d[i].expressInstall&&F()){var l={};l.data=d[i].expressInstall;l.width=s.getAttribute("width")||"0";l.height=s.getAttribute("height")||"0";if(s.getAttribute("class")){l.styleclass=s.getAttribute("class")}if(s.getAttribute("align")){l.align=s.getAttribute("align")}var f={};var o=s.getElementsByTagName("param");var c=o.length;for(var u=0;u<c;u++){if(o[u].getAttribute("name").toLowerCase()!="movie"){f[o[u].getAttribute("name")]=o[u].getAttribute("value")}}$(l,f,a,n)}else{x(s);if(n){n(r)}}}}else{X(a,true);if(n){var p=O(a);if(p&&typeof p.SetVariable!=e){r.success=true;r.ref=p}n(r)}}}}}function O(i){var a=null;var n=W(i);if(n&&n.nodeName=="OBJECT"){if(typeof n.SetVariable!=e){a=n}else{var r=n.getElementsByTagName(t)[0];if(r){a=r}}}return a}function F(){return!b&&J("6.0.65")&&(A.win||A.mac)&&!(A.wk&&A.wk<312)}function $(t,i,a,n){b=true;m=n||null;g={success:false,id:a};var s=W(a);if(s){if(s.nodeName=="OBJECT"){y=M(s);h=null}else{y=s;h=a}t.id=r;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137){t.height="137"}f.title=f.title.slice(0,47)+" - Flash Player Installation";var o=A.ie&&A.win?"ActiveX":"PlugIn",c="MMredirectURL="+l.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+f.title;if(typeof i.flashvars!=e){i.flashvars+="&"+c}else{i.flashvars=c}if(A.ie&&A.win&&s.readyState!=4){var u=H("div");a+="SWFObjectNew";u.setAttribute("id",a);s.parentNode.insertBefore(u,s);s.style.display="none";!function(){if(s.readyState==4){s.parentNode.removeChild(s)}else{setTimeout(arguments.callee,10)}}()}V(t,i,a)}}function x(e){if(A.ie&&A.win&&e.readyState!=4){var t=H("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(M(e),t);e.style.display="none";!function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}}()}else{e.parentNode.replaceChild(M(e),e)}}function M(e){var i=H("div");if(A.win&&A.ie){i.innerHTML=e.innerHTML}else{var a=e.getElementsByTagName(t)[0];if(a){var n=a.childNodes;if(n){var r=n.length;for(var s=0;s<r;s++){if(!(n[s].nodeType==1&&n[s].nodeName=="PARAM")&&!(n[s].nodeType==8)){i.appendChild(n[s].cloneNode(true))}}}}}return i}function V(i,a,r){var s,l=W(r);if(A.wk&&A.wk<312){return s}if(l){if(typeof i.id==e){i.id=r}if(A.ie&&A.win){var f="";for(var o in i){if(i[o]!=Object.prototype[o]){if(o.toLowerCase()=="data"){a.movie=i[o]}else if(o.toLowerCase()=="styleclass"){f+=' class="'+i[o]+'"'}else if(o.toLowerCase()!="classid"){f+=" "+o+'="'+i[o]+'"'}}}var c="";for(var u in a){if(a[u]!=Object.prototype[u]){c+='<param name="'+u+'" value="'+a[u]+'" />'}}l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+c+"</object>";p[p.length]=i.id;s=W(i.id)}else{var d=H(t);d.setAttribute("type",n);for(var v in i){if(i[v]!=Object.prototype[v]){if(v.toLowerCase()=="styleclass"){d.setAttribute("class",i[v])}else if(v.toLowerCase()!="classid"){d.setAttribute(v,i[v])}}}for(var y in a){if(a[y]!=Object.prototype[y]&&y.toLowerCase()!="movie"){P(d,y,a[y])}}l.parentNode.replaceChild(d,l);s=d}}return s}function P(e,t,i){var a=H("param");a.setAttribute("name",t);a.setAttribute("value",i);e.appendChild(a)}function R(e){var t=W(e);if(t&&t.nodeName=="OBJECT"){if(A.ie&&A.win){t.style.display="none";!function(){if(t.readyState==4){D(e)}else{setTimeout(arguments.callee,10)}}()}else{t.parentNode.removeChild(t)}}}function D(e){var t=W(e);if(t){for(var i in t){if(typeof t[i]=="function"){t[i]=null}}t.parentNode.removeChild(t)}}function W(e){var t=null;try{t=f.getElementById(e)}catch(i){}return t}function H(e){return f.createElement(e)}function G(e,t,i){e.attachEvent(t,i);v[v.length]=[e,t,i]}function J(e){var t=A.pv,i=e.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10)||0;i[2]=parseInt(i[2],10)||0;return t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?true:false}function U(i,a,n,r){if(A.ie&&A.mac){return}var s=f.getElementsByTagName("head")[0];if(!s){return}var l=n&&typeof n=="string"?n:"screen";if(r){C=null;E=null}if(!C||E!=l){var o=H("style");o.setAttribute("type","text/css");o.setAttribute("media",l);C=s.appendChild(o);if(A.ie&&A.win&&typeof f.styleSheets!=e&&f.styleSheets.length>0){C=f.styleSheets[f.styleSheets.length-1]}E=l}if(A.ie&&A.win){if(C&&typeof C.addRule==t){C.addRule(i,a)}}else{if(C&&typeof f.createTextNode!=e){C.appendChild(f.createTextNode(i+" {"+a+"}"))}}}function X(e,t){if(!S){return}var i=t?"visible":"hidden";if(w&&W(e)){W(e).style.visibility=i}else{U("#"+e,"visibility:"+i)}}function z(t){var i=/[\\\"<>\.;]/;var a=i.exec(t)!=null;return a&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var Z=function(){if(A.ie&&A.win){window.attachEvent("onunload",function(){var e=v.length;for(var t=0;t<e;t++){v[t][0].detachEvent(v[t][1],v[t][2])}var i=p.length;for(var a=0;a<i;a++){R(p[a])}for(var n in A){A[n]=null}A=null;for(var r in swfobject){swfobject[r]=null}swfobject=null})}}();return{registerObject:function(e,t,i,a){if(A.w3&&e&&t){var n={};n.id=e;n.swfVersion=t;n.expressInstall=i;n.callbackFn=a;d[d.length]=n;X(e,false)}else if(a){a({success:false,id:e})}},getObjectById:function(e){if(A.w3){return O(e)}},embedSWF:function(i,a,n,r,s,l,f,o,c,u){var d={success:false,id:a};if(A.w3&&!(A.wk&&A.wk<312)&&i&&a&&n&&r&&s){X(a,false);I(function(){n+="";r+="";var p={};if(c&&typeof c===t){for(var v in c){p[v]=c[v]}}p.data=i;p.width=n;p.height=r;var y={};if(o&&typeof o===t){for(var h in o){y[h]=o[h]}}if(f&&typeof f===t){for(var m in f){if(typeof y.flashvars!=e){y.flashvars+="&"+m+"="+f[m]}else{y.flashvars=m+"="+f[m]}}}if(J(s)){var g=V(p,y,a);if(p.id==a){X(a,true)}d.success=true;d.ref=g}else if(l&&F()){p.data=l;$(p,y,a,u);return}else{X(a,true)}if(u){u(d)}})}else if(u){u(d)}},switchOffAutoHideShow:function(){S=false},ua:A,getFlashPlayerVersion:function(){return{major:A.pv[0],minor:A.pv[1],release:A.pv[2]}},hasFlashPlayerVersion:J,createSWF:function(e,t,i){if(A.w3){return V(e,t,i)}else{return undefined}},showExpressInstall:function(e,t,i,a){if(A.w3&&F()){$(e,t,i,a)}},removeSWF:function(e){if(A.w3){R(e)}},createCSS:function(e,t,i,a){if(A.w3){U(e,t,i,a)}},addDomLoadEvent:I,addLoadEvent:L,getQueryParamValue:function(e){var t=f.location.search||f.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return z(t)}var i=t.split("&");for(var a=0;a<i.length;a++){if(i[a].substring(0,i[a].indexOf("="))==e){return z(i[a].substring(i[a].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(b){var e=W(r);if(e&&y){e.parentNode.replaceChild(y,e);if(h){X(h,true);if(A.ie&&A.win){y.style.display="block"}}if(m){m(g)}}b=false}}}}();
/*! jQuery UI - v1.10.4 - 2014-04-06
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})})(jQuery);(function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),k=t.position.getScrollInfo(y),w=(e.collision||"flip").split(" "),D={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=h.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=h.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),D[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),a=i(D.at,p,g),v.left+=a[0],v.top+=a[1],this.each(function(){var n,h,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),x=u+f+s(this,"marginRight")+k.width,C=d+_+s(this,"marginBottom")+k.height,M=t.extend({},v),T=i(D.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?M.left-=u:"center"===e.my[0]&&(M.left-=u/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=T[0],M.top+=T[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[w[i]]&&t.ui.position[w[i]][s](M,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:x,collisionHeight:C,offset:[a[0]+T[0],a[1]+T[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(h=function(t){var i=m.left-M.left,s=i+p-u,n=m.top-M.top,a=n+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:M.left,top:M.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(l.horizontal="center"),d>g&&g>r(n+a)&&(l.vertical="middle"),l.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(M,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-a-n;e.collisionWidth>a?l>0&&0>=h?(i=t.left+l+e.collisionWidth-a-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+a-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-a-n;e.collisionHeight>a?l>0&&0>=h?(i=t.top+l+e.collisionHeight-a-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+a-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-o-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-l,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-o-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-o-a,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);(function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,a,o,r,l,h,c,u,d,p=t(this).data("ui-draggable"),g=p.options,f=g.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,l=r+p.snapElements[u].width,h=p.snapElements[u].top,c=h+p.snapElements[u].height,r-f>_||m>l+f||h-f>b||v>c+f||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==g.snapMode&&(s=f>=Math.abs(h-b),n=f>=Math.abs(c-v),a=f>=Math.abs(r-_),o=f>=Math.abs(l-m),s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=s||n||a||o,"outer"!==g.snapMode&&(s=f>=Math.abs(h-v),n=f>=Math.abs(c-b),a=f>=Math.abs(r-m),o=f>=Math.abs(l-_),s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||a||o||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})})(jQuery);(function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],undefined):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},t.ui.ddmanager.droppables[i.scope]=t.ui.ddmanager.droppables[i.scope]||[],t.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,a,o=(t.positionAbs||t.position.absolute).left,r=(t.positionAbs||t.position.absolute).top,l=o+t.helperProportions.width,h=r+t.helperProportions.height,c=i.offset.left,u=i.offset.top,d=c+i.proportions().width,p=u+i.proportions().height;switch(s){case"fit":return o>=c&&d>=l&&r>=u&&p>=h;case"intersect":return o+t.helperProportions.width/2>c&&d>l-t.helperProportions.width/2&&r+t.helperProportions.height/2>u&&p>h-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,a=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(a,u,i.proportions().height)&&e(n,c,i.proportions().width);case"touch":return(r>=u&&p>=r||h>=u&&p>=h||u>r&&h>p)&&(o>=c&&d>=o||l>=c&&d>=l||c>o&&l>d);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,a=t.ui.ddmanager.droppables[e.options.scope]||[],o=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||e&&!a[s].accept.call(a[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue t}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=t.ui.intersect(e,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),a.length&&(s=t.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}})(jQuery);(function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),a="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,a;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,a),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-a.left||0,d=e.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=s?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(o,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,a=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),a&&(t.height=e.maxHeight),o&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),a&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,a=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:o,h=t.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,a,o=t(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,c=o._aspectRatio||e.shiftKey,u={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-u.left:o.offset.left-u.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-u.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,a=e.containerElement,o=t(e.helper),r=o.offset(),h=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(a[e]=i||null)}),e.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,a=e.originalPosition,o=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(o)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.top=a.top-u):/^(sw)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.left=a.left-c):(p-l>0?(e.size.height=p,e.position.top=a.top-u):(e.size.height=l,e.position.top=a.top+n.height-l),d-h>0?(e.size.width=d,e.position.left=a.left-c):(e.size.width=h,e.position.left=a.left+n.width-h))}})})(jQuery);(function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=e.pageX,l=e.pageY;return a>r&&(i=r,r=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:l-o}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?h=!(i.left>r||a>i.right||i.top>l||o>i.bottom):"fit"===n.tolerance&&(h=i.left>a&&r>i.right&&i.top>o&&l>i.bottom),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})})(jQuery);(function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})(jQuery);(function(e){var t=0,i={},a={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,a=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(s+1)%a];break;case i.LEFT:case i.UP:n=this.headers[(s-1+a)%a];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[a-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,a=this.options,s=a.heightStyle,n=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),a=i.attr("id"),s=i.next(),n=s.attr("id");a||(a=r+"-header-"+t,i.attr("id",a)),n||(n=r+"-panel-"+t,s.attr("id",n)),i.attr("aria-controls",n),s.attr("aria-labelledby",a)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(a.event),"fill"===s?(i=n.height(),this.element.siblings(":visible").each(function(){var t=e(this),a=t.css("position");"absolute"!==a&&"fixed"!==a&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,a=this.active,s=e(t.currentTarget),n=s[0]===a[0],r=n&&i.collapsible,o=r?e():s.next(),h=a.next(),d={oldHeader:a,oldPanel:h,newHeader:r?e():s,newPanel:o};t.preventDefault(),n&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=r?!1:this.headers.index(s),this.active=n?e():s,this._toggle(d),a.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),n||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,a=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=a,this.options.animate?this._animate(i,a,t):(a.hide(),i.show(),this._toggleComplete(t)),a.attr({"aria-hidden":"true"}),a.prev().attr("aria-selected","false"),i.length&&a.length?a.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,s){var n,r,o,h=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=c&&l.down||l,v=function(){h._toggleComplete(s)};return"number"==typeof u&&(o=u),"string"==typeof u&&(r=u),r=r||u.easing||l.easing,o=o||u.duration||l.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(i,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(a,{duration:o,easing:r,complete:v,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(n-t.outerHeight()-d),d=0)}}),undefined):t.animate(i,o,r,v):e.animate(a,o,r,v)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,undefined;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",s=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},a=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,s),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,h=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return o.disabled?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];a(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return o.disabled?!1:(e(this).addClass("ui-state-active"),t=this,n.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return o.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return o.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),t&&this.buttonElement.removeClass("ui-state-focus"),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?a(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,a=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(a?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(n.inline?t.parent()[0]:n.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var a in i)null==i[a]&&(t[a]=i[a]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var n,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var a,s,n;a=t.nodeName.toLowerCase(),s="div"===a||"span"===a,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),s),n.settings=e.extend({},i||{}),"input"===a?this._connectDatepicker(t,n):s&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var a=e(t);i.append=e([]),i.trigger=e([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var a,s,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),a=this._get(i,"showOn"),("focus"===a||"both"===a)&&t.focus(this._showDatepicker),("button"===a||"both"===a)&&(s=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:s,title:s}):s)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,s,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,a=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,a=s);return a},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var a=e(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,a,n,o){var u,c,h,l,d,p=this._dialogInst;return p||(this.uuid+=1,u="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+u+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),s(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,h/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,a=e(t),s=e.data(t,r);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,n){var r,o,u,c,h=this._getInst(i);return 2===arguments.length&&"string"==typeof a?"defaults"===a?e.extend({},e.datepicker._defaults):h?"all"===a?e.extend({},h.settings):this._get(h,a):null:(r=a||{},"string"==typeof a&&(r={},r[a]=n),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),u=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),s(h.settings,r),null!==u&&r.dateFormat!==t&&r.minDate===t&&(h.settings.minDate=this._formatDate(h,u)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,a,s,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),s[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,s[0]),i=e.datepicker._get(n,"onSelect"),i?(a=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[a,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var a,s,n=e.datepicker._getInst(i.target);return e.datepicker._get(n,"constrainInput")?(a=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!a||a.indexOf(s)>-1):t},_doKeyUp:function(t){var i,a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a)),i&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,r,o,u,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(s(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(u=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?i.dpDiv.show(u,e.datepicker._get(i,"showOptions"),c):i.dpDiv[u||"show"](u?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,n=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(t),s=a[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,u=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>u&&u>s?Math.abs(i.left+s-u):0),i.top-=Math.min(i.top,i.top+n>c&&c>n?Math.abs(n+o):0),i},_findPos:function(t){for(var i,a=this._getInst(t),s=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,a,s,n,o=this._curInst;!o||t&&o!==e.data(t,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),a=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==a)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,a){var s=e(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,i+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(t){var i,a=e(t),s=this._getInst(a[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(a)},_selectMonthYear:function(t,i,a){var s=e(t),n=this._getInst(s[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,i,a,s){var n,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(n=this._getInst(r[0]),n.selectedDay=n.currentDay=e("a",s).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=a,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var a,s=e(t),n=this._getInst(s[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),a=this._get(n,"onSelect"),a?a.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,a,s,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),a=this._getDate(t),s=this.formatDate(i,a,this._getFormatConfig(t)),e(n).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,a,s){if(null==i||null==a)throw"Invalid arguments";if(a="object"==typeof a?""+a:a+"",""===a)return null;var n,r,o,u,c=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,p=(s?s.dayNames:null)||this._defaults.dayNames,g=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,f=-1,_=-1,v=-1,k=-1,y=!1,b=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},D=function(e){var t=b(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=RegExp("^\\d{1,"+i+"}"),n=a.substring(c).match(s);if(!n)throw"Missing number at position "+c;return c+=n[0].length,parseInt(n[0],10)},w=function(i,s,n){var r=-1,o=e.map(b(i)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,i){var s=i[1];return a.substr(c,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],c+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+c},M=function(){if(a.charAt(c)!==i.charAt(n))throw"Unexpected literal at position "+c;c++};for(n=0;i.length>n;n++)if(y)"'"!==i.charAt(n)||b("'")?M():y=!1;else switch(i.charAt(n)){case"d":v=D("d");break;case"D":w("D",d,p);break;case"o":k=D("o");break;case"m":_=D("m");break;case"M":_=w("M",g,m);break;case"y":f=D("y");break;case"@":u=new Date(D("@")),f=u.getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"!":u=new Date((D("!")-this._ticksTo1970)/1e4),f=u.getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"'":b("'")?M():y=!0;break;default:M()}if(a.length>c&&(o=a.substr(c),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=f?0:-100)),k>-1)for(_=1,v=k;;){if(r=this._getDaysInMonth(f,_-1),r>=v)break;_++,v-=r}if(u=this._daylightSavingAdjust(new Date(f,_-1,v)),u.getFullYear()!==f||u.getMonth()+1!==_||u.getDate()!==v)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var a,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,u=function(t){var i=e.length>a+1&&e.charAt(a+1)===t;return i&&a++,i},c=function(e,t,i){var a=""+t;if(u(e))for(;i>a.length;)a="0"+a;return a},h=function(e,t,i,a){return u(e)?a[t]:i[t]},l="",d=!1;if(t)for(a=0;e.length>a;a++)if(d)"'"!==e.charAt(a)||u("'")?l+=e.charAt(a):d=!1;else switch(e.charAt(a)){case"d":l+=c("d",t.getDate(),2);break;case"D":l+=h("D",t.getDay(),s,n);break;case"o":l+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=c("m",t.getMonth()+1,2);break;case"M":l+=h("M",t.getMonth(),r,o);break;case"y":l+=u("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this._ticksTo1970;break;case"'":u("'")?l+="'":d=!0;break;default:l+=e.charAt(a)}return l},_possibleChars:function(e){var t,i="",a=!1,s=function(i){var a=e.length>t+1&&e.charAt(t+1)===i;return a&&t++,a};for(t=0;e.length>t;t++)if(a)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):a=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":a=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),n=s,r=this._getFormatConfig(e);try{n=this.parseDate(i,a,r)||s}catch(o){a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,a){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(a){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),r=s.getMonth(),o=s.getDate(),u=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=u.exec(i);c;){switch(c[2]||"d"){case"d":case"D":o+=parseInt(c[1],10);break;case"w":case"W":o+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(c[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}c=u.exec(i)}return new Date(n,r,o)},r=null==i||""===i?a:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?a:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?a:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),a="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(a,-i,"M")},next:function(){e.datepicker._adjustDate(a,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(a)},selectDay:function(){return e.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(a,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,s,n,r,o,u,c,h,l,d,p,g,m,f,_,v,k,y,b,D,w,M,C,x,I,N,T,A,E,S,Y,F,P,O,j,K,R,H=new Date,W=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),L=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),z=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),Q=1!==q[0]||1!==q[1],V=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-G,et=e.drawYear;if(0>Z&&(Z+=12,et--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-q[0]*q[1]+1,X.getDate())),t=$&&$>t?$:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=z?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=z?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):s,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+s+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?V:W,r=z?this.formatDate(r,o,this._getFormatConfig(e)):r,u=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(L?u:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(L?"":u)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,l=this._get(e,"showWeek"),d=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),f=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),k=this._getDefaultDate(e),y="",D=0;q[0]>D;D++){for(w="",this.maxRows=4,M=0;q[1]>M;M++){if(C=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),x=" ui-corner-all",I="",Q){if(I+="<div class='ui-datepicker-group",q[1]>1)switch(M){case 0:I+=" ui-datepicker-group-first",x=" ui-corner-"+(L?"right":"left");break;case q[1]-1:I+=" ui-datepicker-group-last",x=" ui-corner-"+(L?"left":"right");break;default:I+=" ui-datepicker-group-middle",x=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===D?L?n:a:"")+(/all|right/.test(x)&&0===D?L?a:n:"")+this._generateMonthYearHeader(e,Z,et,$,X,D>0||M>0,g,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",N=l?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",b=0;7>b;b++)T=(b+h)%7,N+="<th"+((b+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[T]+"'>"+p[T]+"</span></th>";for(I+=N+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),E=(this._getFirstDayOfMonth(et,Z)-h+7)%7,S=Math.ceil((E+A)/7),Y=Q?this.maxRows>S?this.maxRows:S:S,this.maxRows=Y,F=this._daylightSavingAdjust(new Date(et,Z,1-E)),P=0;Y>P;P++){for(I+="<tr>",O=l?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(F)+"</td>":"",b=0;7>b;b++)j=f?f.apply(e.input?e.input[0]:null,[F]):[!0,""],K=F.getMonth()!==Z,R=K&&!v||!j[0]||$&&$>F||X&&F>X,O+="<td class='"+((b+h+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(F.getTime()===C.getTime()&&Z===e.selectedMonth&&e._keyEvent||k.getTime()===F.getTime()&&k.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!_?"":" "+j[1]+(F.getTime()===V.getTime()?" "+this._currentClass:"")+(F.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(K&&!_||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(K&&!_?"&#xa0;":R?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===W.getTime()?" ui-state-highlight":"")+(F.getTime()===V.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);I+=O+"</tr>"}Z++,Z>11&&(Z=0,et++),I+="</tbody></table>"+(Q?"</div>"+(q[0]>0&&M===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),w+=I}y+=w}return y+=c,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var u,c,h,l,d,p,g,m,f=this._get(e,"changeMonth"),_=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),k="<div class='ui-datepicker-title'>",y="";if(n||!f)y+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(u=a&&a.getFullYear()===i,c=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!u||h>=a.getMonth())&&(!c||s.getMonth()>=h)&&(y+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"</option>");y+="</select>"}if(v||(k+=y+(!n&&f&&_?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!_)k+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(l=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);
return isNaN(t)?d:t},g=p(l[0]),m=Math.max(g,p(l[1]||"")),g=a?Math.max(g,a.getFullYear()):g,m=s?Math.min(m,s.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=g;g++)e.yearshtml+="<option value='"+g+"'"+(g===i?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",k+=e.yearshtml,e.yearshtml=null}return k+=this._get(e,"yearSuffix"),v&&(k+=(!n&&f&&_?"":"&#xa0;")+y),k+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return a&&s>a?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(0>t?t:s[0]*s[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,a,s=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,u=this._get(e,"yearRange");return u&&(i=u.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!s||t.getTime()>=s.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"})(jQuery);(function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,a=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(s){}this._hide(this.uiDialog,this.options.hide,function(){a._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),a=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==a[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(a.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(i,function(i,a){var s,n;a=e.isFunction(a)?{click:a,text:i}:a,a=e.extend({type:"button"},a),s=a.click,a.click=function(){s.apply(t.element[0],arguments)},n={icons:a.icons,text:a.showText},delete a.icons,delete a.showText,e("<button></button>",a).button(n).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",a,t(s))},drag:function(e,a){i._trigger("drag",e,t(a))},stop:function(s,n){a.position=[n.position.left-i.document.scrollLeft(),n.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(n))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,a=this.options,s=a.resizable,n=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:r,start:function(a,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",a,t(s))},resize:function(e,a){i._trigger("resize",e,t(a))},stop:function(s,n){a.height=e(this).height(),a.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(n))}}).css("position",n)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(a){var s=this,n=!1,r={};e.each(a,function(e,a){s._setOption(e,a),e in t&&(n=!0),e in i&&(r[e]=a)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,a,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(a=s.is(":data(ui-resizable)"),a&&!t&&s.resizable("destroy"),a&&"string"==typeof t&&s.resizable("option","handles",t),a||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),a.minWidth>a.width&&(a.width=a.minWidth),e=this.uiDialog.css({height:"auto",width:a.width}).outerHeight(),t=Math.max(0,a.minHeight-e),i="number"==typeof a.maxHeight?Math.max(0,a.maxHeight-e):"none","auto"===a.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,a.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(a){t._allowInteraction(a)||(a.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,a=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(a=i.split?i.split(" "):[i[0],i[1]],1===a.length&&(a[1]=a[0]),e.each(["left","top"],function(e,t){+a[e]===a[e]&&(s[e]=a[e],a[e]=t)}),i={my:a[0]+(0>s[0]?s[0]:"+"+s[0])+" "+a[1]+(0>s[1]?s[1]:"+"+s[1]),at:a.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})})(jQuery);(function(t){t.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})})(jQuery);(function(t,e){t.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})})(jQuery);(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,l,h,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-a.width()/2,top:e.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](u,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);(function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})})(jQuery);(function(t,e){function i(){return++n}function s(t){return t=t.cloneNode(!1),t.hash.length>1&&decodeURIComponent(t.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,a){return t(a).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(l),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?t():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():a,newPanel:h};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),e),this._toggle(e,c))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);(function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})})(jQuery);(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=h(),n=s._rgba=[];return i=i.toLowerCase(),f(l,function(t,a){var o,r=a.re.exec(i),l=r&&a.parse(r),h=a.space||"rgba";return l?(o=s[h](l),s[c[h].cache]=o[c[h].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(n,o,r,l){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,l],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof h?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=h(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=h(t),n=s._space(),a=c[n],o=0===this.alpha()?h("transparent"):this,r=o[a.cache]||a.to(o._rgba),l=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],h=s[a],c=u[n.type]||{};null!==h&&(null===o?l[a]=h:(c.mod&&(h-o>c.mod/2?o+=c.mod:o-h>c.mod/2&&(o-=c.mod)),l[a]=i((h-o)*e+o,n)))}),this[n](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=h(e)._rgba;return h(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),l=Math.min(s,n,a),h=r-l,c=r+l,u=.5*c;return e=l===r?0:s===r?60*(n-a)/h+360:n===r?60*(a-s)/h+120:60*(s-n)/h+240,i=0===h?0:.5>=u?h/c:h/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,l=n.to,c=n.from;h.fn[s]=function(s){if(l&&!this[o]&&(this[o]=l(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=h(c(d)),n[o]=d,n):h(d)},f(a,function(e,i){h.fn[e]||(h.fn[e]=function(n){var a,o=t.type(n),l="alpha"===e?this._hsla?"hsla":"rgba":s,h=this[l](),c=h[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),h[i.idx]=n,this[l](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=h(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(l){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var l=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",h=l.children?o.find("*").addBack():o;h=h.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),h=h.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),s=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,h.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.4",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);(function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,l=t(this),h=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(l,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),h):t.effects.save(l,h),l.show(),a=t.effects.createWrapper(l).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,m[p]=v?o:0,g||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:o+r),v&&(a.css(p,0),g||a.css(f,r+o)),a.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),t.effects.restore(l,h),t.effects.removeWrapper(l),n()}})}})(jQuery);(function(t){t.effects.effect.bounce=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"effect"),h="hide"===l,c="show"===l,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||h?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=o.queue(),y=b.length;for((c||h)&&r.push("opacity"),t.effects.save(o,r),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,_?2*-d:2*d).animate(a,g,m)),h&&(d/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m).animate(a,g,m),d=h?2*d:d/2;h&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m)),o.queue(function(){h&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}})(jQuery);(function(t){t.effects.effect.clip=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"hide"),h="show"===l,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(o,r),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[d](),h&&(n.css(d,0),n.css(p,a/2)),f[d]=h?a:0,f[p]=h?0:a/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){h||o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(n,e.mode||"hide"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,a),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(h,"pos"===c?-s:s),u[h]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var a,o,r,l,h,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(a=0;u>a;a++)for(l=m.top+a*_,c=a-(u-1)/2,o=0;d>o;o++)r=m.left+o*v,h=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?h*v:0),top:l+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:h*v),top:l+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}})(jQuery);(function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}})(jQuery);(function(t){t.effects.effect.fold=function(e,i){var s,n,a=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(a,e.mode||"hide"),l="show"===r,h="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(a,o),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[h?0:1]),l&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=l?n[0]:c,v[f[1]]=l?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){h&&a.hide(),t.effects.restore(a,o),t.effects.removeWrapper(a),i()})}})(jQuery);(function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],a=t.effects.setMode(s,e.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,n),i()}})}})(jQuery);(function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),a=t.effects.setMode(n,e.mode||"show"),o="show"===a,r="hide"===a,l=o||"hide"===a,h=2*(e.times||5)+(l?1:0),c=e.duration/h,u=0,d=n.queue(),p=d.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;h>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,h+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",l=e.origin,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=l||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:h),n.to={height:h.height*c.y,width:h.width*c.x,outerHeight:h.outerHeight*c.y,outerWidth:h.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=o.css("position"),_=f?r:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===g||"both"===g)&&(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),("content"===g||"both"===g)&&a.from.y!==a.to.y&&(_=_.concat(c).concat(h),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(n=t.effects.getBaseline(m,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),h=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,h),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,h)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","height","width"],o=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",l=e.distance||20,h=e.times||3,c=2*h+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,a),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+l,g[d]=(p?"+=":"-=")+2*l,m[d]=(p?"-=":"+=")+2*l,n.animate(f,u,e.easing),s=1;h>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(h,c?isNaN(s)?"-"+s:-s:s),u[h]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,l=a?o.scrollLeft():0,h=n.offset(),c={top:h.top-r,left:h.left-l,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-l,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}})(jQuery);
!function(t){t.support.touch="ontouchend"in document;if(!t.support.touch){return}var e=t.ui.mouse.prototype,o=e._mouseInit,u=e._mouseDestroy,n;function r(t,e){if(t.originalEvent.touches.length>1){return}t.preventDefault();var o=t.originalEvent.changedTouches[0],u=document.createEvent("MouseEvents");u.initMouseEvent(e,true,true,window,1,o.screenX,o.screenY,o.clientX,o.clientY,false,false,false,false,0,null);t.target.dispatchEvent(u)}e._touchStart=function(t){var e=this;if(n||!e._mouseCapture(t.originalEvent.changedTouches[0])){return}n=true;e._touchMoved=false;r(t,"mouseover");r(t,"mousemove");r(t,"mousedown")};e._touchMove=function(t){if(!n){return}this._touchMoved=true;r(t,"mousemove")};e._touchEnd=function(t){if(!n){return}r(t,"mouseup");r(t,"mouseout");if(!this._touchMoved){r(t,"click")}n=false};e._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")});o.call(e)};e._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")});u.call(e)}}(jQuery);
!function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.6";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi "+"ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(e,a,t){var n,o,i,s;if(!e.bJUI){n=document.createElement("div");o=document.createElement("div")}else{n=document.createElement("a");o=document.createElement("a");s=document.createElement("span");s.className=e.oClasses.sPageJUINext;o.appendChild(s);i=document.createElement("span");i.className=e.oClasses.sPageJUIPrev;n.appendChild(i)}n.className=e.oClasses.sPagePrevDisabled;o.className=e.oClasses.sPageNextDisabled;n.title=e.oLanguage.oPaginate.sPrevious;o.title=e.oLanguage.oPaginate.sNext;a.appendChild(n);a.appendChild(o);$(n).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"previous")){t(e)}});$(o).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"next")){t(e)}});$(n).bind("selectstart.DT",function(){return false});$(o).bind("selectstart.DT",function(){return false});if(e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"){a.setAttribute("id",e.sTableId+"_paginate");n.setAttribute("id",e.sTableId+"_previous");o.setAttribute("id",e.sTableId+"_next")}},fnUpdate:function(e,a){if(!e.aanFeatures.p){return}var t=e.aanFeatures.p;for(var n=0,o=t.length;n<o;n++){if(t[n].childNodes.length!==0){t[n].childNodes[0].className=e._iDisplayStart===0?e.oClasses.sPagePrevDisabled:e.oClasses.sPagePrevEnabled;t[n].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?e.oClasses.sPageNextDisabled:e.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,a,t){var n=document.createElement("span");var o=document.createElement("span");var i=document.createElement("span");var s=document.createElement("span");var r=document.createElement("span");n.innerHTML=e.oLanguage.oPaginate.sFirst;o.innerHTML=e.oLanguage.oPaginate.sPrevious;s.innerHTML=e.oLanguage.oPaginate.sNext;r.innerHTML=e.oLanguage.oPaginate.sLast;var l=e.oClasses;n.className=l.sPageButton+" "+l.sPageFirst;o.className=l.sPageButton+" "+l.sPagePrevious;s.className=l.sPageButton+" "+l.sPageNext;r.className=l.sPageButton+" "+l.sPageLast;a.appendChild(n);a.appendChild(o);a.appendChild(i);a.appendChild(s);a.appendChild(r);$(n).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"first")){t(e)}});$(o).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"previous")){t(e)}});$(s).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"next")){t(e)}});$(r).bind("click.DT",function(){if(e.oApi._fnPageChange(e,"last")){t(e)}});$("span",a).bind("mousedown.DT",function(){return false}).bind("selectstart.DT",function(){return false});if(e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"){a.setAttribute("id",e.sTableId+"_paginate");n.setAttribute("id",e.sTableId+"_first");o.setAttribute("id",e.sTableId+"_previous");s.setAttribute("id",e.sTableId+"_next");r.setAttribute("id",e.sTableId+"_last")}},fnUpdate:function(e,a){if(!e.aanFeatures.p){return}var t=_oExt.oPagination.iFullNumbersShowPages;var n=Math.floor(t/2);var o=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength);var i=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1;var s="";var r,l,f,u;var d=e.oClasses;if(o<t){r=1;l=o}else{if(i<=n){r=1;l=t}else{if(i>=o-n){r=o-t+1;l=o}else{r=i-Math.ceil(t/2)+1;l=r+t-1}}}for(f=r;f<=l;f++){if(i!=f){s+='<span class="'+d.sPageButton+'">'+f+"</span>"}else{s+='<span class="'+d.sPageButtonActive+'">'+f+"</span>"}}var p=e.aanFeatures.p;var h,c,g;var _=function(){var t=this.innerHTML*1-1;e._iDisplayStart=t*e._iDisplayLength;a(e);return false};var m=function(){return false};for(f=0,u=p.length;f<u;f++){if(p[f].childNodes.length===0){continue}var S=$("span:eq(2)",p[f]);S.html(s);$("span",S).bind("click.DT",_).bind("mousedown.DT",m).bind("selectstart.DT",m);h=p[f].getElementsByTagName("span");c=[h[0],h[1],h[h.length-2],h[h.length-1]];$(c).removeClass(d.sPageButton+" "+d.sPageButtonActive+" "+d.sPageButtonStaticDisabled);if(i==1){c[0].className+=" "+d.sPageButtonStaticDisabled;c[1].className+=" "+d.sPageButtonStaticDisabled}else{c[0].className+=" "+d.sPageButton;c[1].className+=" "+d.sPageButton}if(o===0||i==o||e._iDisplayLength==-1){c[2].className+=" "+d.sPageButtonStaticDisabled;c[3].className+=" "+d.sPageButtonStaticDisabled}else{c[2].className+=" "+d.sPageButton;c[3].className+=" "+d.sPageButton}}}}};_oExt.oSort={"string-asc":function(e,a){var t=e.toLowerCase();var n=a.toLowerCase();return t<n?-1:t>n?1:0},"string-desc":function(e,a){var t=e.toLowerCase();var n=a.toLowerCase();return t<n?1:t>n?-1:0},"html-asc":function(e,a){var t=e.replace(/<.*?>/g,"").toLowerCase();var n=a.replace(/<.*?>/g,"").toLowerCase();return t<n?-1:t>n?1:0},"html-desc":function(e,a){var t=e.replace(/<.*?>/g,"").toLowerCase();var n=a.replace(/<.*?>/g,"").toLowerCase();return t<n?1:t>n?-1:0},"date-asc":function(e,a){var t=Date.parse(e);var n=Date.parse(a);if(isNaN(t)||t===""){t=Date.parse("01/01/1970 00:00:00")}if(isNaN(n)||n===""){n=Date.parse("01/01/1970 00:00:00")}return t-n},"date-desc":function(e,a){var t=Date.parse(e);var n=Date.parse(a);if(isNaN(t)||t===""){t=Date.parse("01/01/1970 00:00:00")}if(isNaN(n)||n===""){n=Date.parse("01/01/1970 00:00:00")}return n-t},"numeric-asc":function(e,a){var t=e=="-"||e===""?0:e*1;var n=a=="-"||a===""?0:a*1;return t-n},"numeric-desc":function(e,a){var t=e=="-"||e===""?0:e*1;var n=a=="-"||a===""?0:a*1;return n-t}};_oExt.aTypes=[function(e){if(e.length===0){return"numeric"}var a="0123456789-";var t="0123456789.";var n;var o=false;n=e.charAt(0);if(a.indexOf(n)==-1){return null}for(var i=1;i<e.length;i++){n=e.charAt(i);if(t.indexOf(n)==-1){return null}if(n=="."){if(o){return null}o=true}}return"numeric"},function(e){var a=Date.parse(e);if(a!==null&&!isNaN(a)||e.length===0){return"date"}return null},function(e){if(e.indexOf("<")!=-1&&e.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(e){var a=function(e,a){while(e.length<a){e+="0"}return e};var t=_oExt.sVersion.split(".");var n=e.split(".");var o="",i="";for(var s=0,r=n.length;s<r;s++){o+=a(t[s],3);i+=a(n[s],3)}return parseInt(o,10)>=parseInt(i,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0,bAutoCss:true};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(e,a,t){$.ajax({url:e,data:a,success:t,dataType:"json",cache:false,error:function(e,a,t){if(a=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. "+"This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(e){if(e<1e3){return e}else{var a=e+"",t=a.split(""),n="",o=a.length;for(var i=0;i<o;i++){if(i%3===0&&i!==0){n=","+n}n=t[o-i-1]+n}}return n};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e!="undefined"&&e===false){_fnCalculateEnd(a);_fnDraw(a)}else{_fnReDraw(a)}};this.fnFilter=function(e,a,t,n,o){var i=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!i.oFeatures.bFilter){return}if(typeof t=="undefined"){t=false}if(typeof n=="undefined"){n=true}if(typeof o=="undefined"){o=true}if(typeof a=="undefined"||a===null){_fnFilterComplete(i,{sSearch:e,bRegex:t,bSmart:n},1);if(o&&typeof i.aanFeatures.f!="undefined"){var s=i.aanFeatures.f;for(var r=0,l=s.length;r<l;r++){$("input",s[r]).val(e)}}}else{i.aoPreSearchCols[a].sSearch=e;i.aoPreSearchCols[a].bRegex=t;i.aoPreSearchCols[a].bSmart=n;_fnFilterComplete(i,i.oPreviousSearch,1)}};this.fnSettings=function(e){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);a.aaSorting=e;_fnSort(a)};this.fnSortListener=function(e,a,t){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),e,a,t)};this.fnAddData=function(e,a){if(e.length===0){return[]}var t=[];var n;var o=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e[0]=="object"){for(var i=0;i<e.length;i++){n=_fnAddData(o,e[i]);if(n==-1){return t}t.push(n)}}else{n=_fnAddData(o,e);if(n==-1){return t}t.push(n)}o.aiDisplay=o.aiDisplayMaster.slice();if(typeof a=="undefined"||a){_fnReDraw(o)}return t};this.fnDeleteRow=function(e,a,t){var n=_fnSettingsFromNode(this[_oExt.iApiIndex]);var o,i;i=typeof e=="object"?_fnNodeToDataIndex(n,e):e;var s=n.aoData.splice(i,1);var r=$.inArray(i,n.aiDisplay);n.asDataSearch.splice(r,1);_fnDeleteIndex(n.aiDisplayMaster,i);_fnDeleteIndex(n.aiDisplay,i);if(typeof a=="function"){a.call(this,n,s)}if(n._iDisplayStart>=n.aiDisplay.length){n._iDisplayStart-=n._iDisplayLength;if(n._iDisplayStart<0){n._iDisplayStart=0}}if(typeof t=="undefined"||t){_fnCalculateEnd(n);_fnDraw(n)}return s};this.fnClearTable=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(a);if(typeof e=="undefined"||e){_fnDraw(a)}};this.fnOpen=function(e,a,t){var n=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(e);var o=document.createElement("tr");var i=document.createElement("td");o.appendChild(i);i.className=t;i.colSpan=_fnVisbleColumns(n);i.innerHTML=a;var s=$("tr",n.nTBody);if($.inArray(e,s)!=-1){$(o).insertAfter(e)}n.aoOpenRows.push({nTr:o,nParent:e});return o};this.fnClose=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var t=0;t<a.aoOpenRows.length;t++){if(a.aoOpenRows[t].nParent==e){var n=a.aoOpenRows[t].nTr.parentNode;if(n){n.removeChild(a.aoOpenRows[t].nTr)}a.aoOpenRows.splice(t,1);return 0}}return 1};this.fnGetData=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e!="undefined"){var t=typeof e=="object"?_fnNodeToDataIndex(a,e):e;return(aRowData=a.aoData[t])?aRowData._aData:null}return _fnGetDataMaster(a)};this.fnGetNodes=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e!="undefined"){return(aRowData=a.aoData[e])?aRowData.nTr:null}return _fnGetTrNodes(a)};this.fnGetPosition=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);var t;if(e.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(a,e)}else if(e.nodeName.toUpperCase()=="TD"){var n=_fnNodeToDataIndex(a,e.parentNode);var o=0;for(var i=0;i<a.aoColumns.length;i++){if(a.aoColumns[i].bVisible){if(a.aoData[n].nTr.getElementsByTagName("td")[i-o]==e){return[n,i-o,i]}}else{o++}}}return null};this.fnUpdate=function(e,a,t,n,o){var i=_fnSettingsFromNode(this[_oExt.iApiIndex]);var s;var r;var l=typeof a=="object"?_fnNodeToDataIndex(i,a):a;if(typeof e!="object"){r=e;i.aoData[l]._aData[t]=r;if(i.aoColumns[t].fnRender!==null){r=i.aoColumns[t].fnRender({iDataRow:l,iDataColumn:t,aData:i.aoData[l]._aData,oSettings:i});if(i.aoColumns[t].bUseRendered){i.aoData[l]._aData[t]=r}}s=_fnColumnIndexToVisible(i,t);if(s!==null){i.aoData[l].nTr.getElementsByTagName("td")[s].innerHTML=r}else{i.aoData[l]._anHidden[t].innerHTML=r}}else{if(e.length!=i.aoColumns.length){_fnLog(i,0,"An array passed to fnUpdate must have the same number of "+"columns as the table in question - in this case "+i.aoColumns.length);return 1}for(var f=0;f<e.length;f++){r=e[f];i.aoData[l]._aData[f]=r;if(i.aoColumns[f].fnRender!==null){r=i.aoColumns[f].fnRender({iDataRow:l,iDataColumn:f,aData:i.aoData[l]._aData,oSettings:i});if(i.aoColumns[f].bUseRendered){i.aoData[l]._aData[f]=r}}s=_fnColumnIndexToVisible(i,f);if(s!==null){i.aoData[l].nTr.getElementsByTagName("td")[s].innerHTML=r}else{i.aoData[l]._anHidden[f].innerHTML=r}}}var u=$.inArray(l,i.aiDisplay);i.asDataSearch[u]=_fnBuildSearchRow(i,i.aoData[l]._aData);if(typeof o=="undefined"||o){_fnAjustColumnSizing(i)}if(typeof n=="undefined"||n){_fnReDraw(i)}return 0};this.fnSetColumnVis=function(e,a,t){var n=_fnSettingsFromNode(this[_oExt.iApiIndex]);var o,i;var s=n.aoColumns.length;var r,l,f,u,d;if(n.aoColumns[e].bVisible==a){return}var p=$(">tr",n.nTHead)[0];var h=$(">tr",n.nTFoot)[0];var c=[];var g=[];for(o=0;o<s;o++){c.push(n.aoColumns[o].nTh);g.push(n.aoColumns[o].nTf)}if(a){var _=0;for(o=0;o<e;o++){if(n.aoColumns[o].bVisible){_++}}if(_>=_fnVisbleColumns(n)){p.appendChild(c[e]);u=$(">tr",n.nTHead);for(o=1,i=u.length;o<i;o++){u[o].appendChild(n.aoColumns[e].anThExtra[o-1])}if(h){h.appendChild(g[e]);u=$(">tr",n.nTFoot);for(o=1,i=u.length;o<i;o++){u[o].appendChild(n.aoColumns[e].anTfExtra[o-1])}}for(o=0,i=n.aoData.length;o<i;o++){r=n.aoData[o]._anHidden[e];n.aoData[o].nTr.appendChild(r)}}else{var m;for(o=e;o<s;o++){m=_fnColumnIndexToVisible(n,o);if(m!==null){break}}p.insertBefore(c[e],p.getElementsByTagName("th")[m]);u=$(">tr",n.nTHead);for(o=1,i=u.length;o<i;o++){d=$(u[o]).children();u[o].insertBefore(n.aoColumns[e].anThExtra[o-1],d[m])}if(h){h.insertBefore(g[e],h.getElementsByTagName("th")[m]);u=$(">tr",n.nTFoot);for(o=1,i=u.length;o<i;o++){d=$(u[o]).children();u[o].insertBefore(n.aoColumns[e].anTfExtra[o-1],d[m])}}l=_fnGetTdNodes(n);for(o=0,i=n.aoData.length;o<i;o++){r=n.aoData[o]._anHidden[e];n.aoData[o].nTr.insertBefore(r,$(">td:eq("+m+")",n.aoData[o].nTr)[0])}}n.aoColumns[e].bVisible=true}else{p.removeChild(c[e]);for(o=0,i=n.aoColumns[e].anThExtra.length;o<i;o++){f=n.aoColumns[e].anThExtra[o];f.parentNode.removeChild(f)}if(h){h.removeChild(g[e]);for(o=0,i=n.aoColumns[e].anTfExtra.length;o<i;o++){f=n.aoColumns[e].anTfExtra[o];f.parentNode.removeChild(f)}}l=_fnGetTdNodes(n);for(o=0,i=n.aoData.length;o<i;o++){r=l[o*n.aoColumns.length+e*1];n.aoData[o]._anHidden[e]=r;r.parentNode.removeChild(r)}n.aoColumns[e].bVisible=false}for(o=0,i=n.aoOpenRows.length;o<i;o++){n.aoOpenRows[o].nTr.colSpan=_fnVisbleColumns(n)}if(typeof t=="undefined"||t){_fnAjustColumnSizing(n);_fnDraw(n)}_fnSaveState(n)};this.fnPageChange=function(e,a){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(t,e);_fnCalculateEnd(t);if(typeof a=="undefined"||a){_fnDraw(t)}};this.fnDestroy=function(){var e=_fnSettingsFromNode(this[_oExt.iApiIndex]);var a=e.nTableWrapper.parentNode;var t=e.nTBody;var n,o;e.bDestroying=true;$(e.nTableWrapper).find("*").andSelf().unbind(".DT");for(n=0,o=e.aoColumns.length;n<o;n++){if(e.aoColumns[n].bVisible===false){this.fnSetColumnVis(n,true)}}$("tbody>tr>td."+e.oClasses.sRowEmpty,e.nTable).parent().remove();if(e.nTable!=e.nTHead.parentNode){$(">thead",e.nTable).remove();e.nTable.appendChild(e.nTHead)}if(e.nTFoot&&e.nTable!=e.nTFoot.parentNode){$(">tfoot",e.nTable).remove();e.nTable.appendChild(e.nTFoot)}e.nTable.parentNode.removeChild(e.nTable);$(e.nTableWrapper).remove();e.aaSorting=[];e.aaSortingFixed=[];_fnSortingClasses(e);$(_fnGetTrNodes(e)).removeClass(e.asStripClasses.join(" "));if(!e.bJUI){$("th",e.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",e.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",e.nTHead).remove()}a.appendChild(e.nTable);for(n=0,o=e.aoData.length;n<o;n++){t.appendChild(e.aoData[n].nTr)}e.nTable.style.width=_fnStringToCss(e.sDestroyWidth);$(">tr:even",t).addClass(e.asDestoryStrips[0]);$(">tr:odd",t).addClass(e.asDestoryStrips[1]);for(n=0,o=_aoSettings.length;n<o;n++){if(_aoSettings[n]==e){_aoSettings.splice(n,1)}}e=null};this.fnAdjustColumnSizing=function(e){var a=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnAjustColumnSizing(a);if(typeof e=="undefined"||e){this.fnDraw(false)}else if(a.oScroll.sX!==""||a.oScroll.sY!==""){this.oApi._fnScrollDraw(a)}};function _fnExternApiFunc(e){return function(){var a=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[e].apply(this,a)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(e){var a,t;if(e.bInitialised===false){setTimeout(function(){_fnInitalise(e)},200);return}_fnAddOptionsHtml(e);_fnDrawHead(e);_fnProcessingDisplay(e,true);if(e.oFeatures.bAutoWidth){_fnCalculateColumnWidths(e)}for(a=0,t=e.aoColumns.length;a<t;a++){if(e.aoColumns[a].sWidth!==null){e.aoColumns[a].nTh.style.width=_fnStringToCss(e.aoColumns[a].sWidth)}}if(e.oFeatures.bSort){_fnSort(e)}else{e.aiDisplay=e.aiDisplayMaster.slice();_fnCalculateEnd(e);_fnDraw(e)}if(e.sAjaxSource!==null&&!e.oFeatures.bServerSide){e.fnServerData.call(e.oInstance,e.sAjaxSource,[],function(t){for(a=0;a<t.aaData.length;a++){_fnAddData(e,t.aaData[a])}e.iInitDisplayStart=e._iDisplayStart;if(e.oFeatures.bSort){_fnSort(e)}else{e.aiDisplay=e.aiDisplayMaster.slice();_fnCalculateEnd(e);_fnDraw(e)}_fnProcessingDisplay(e,false);_fnInitComplete(e,t)});return}if(!e.oFeatures.bServerSide){_fnProcessingDisplay(e,false);_fnInitComplete(e)}}function _fnInitComplete(e,a){e._bInitComplete=true;if(typeof e.fnInitComplete=="function"){if(typeof a!="undefined"){e.fnInitComplete.call(e.oInstance,e,a)}else{e.fnInitComplete.call(e.oInstance,e)}}}function _fnLanguageProcess(e,a,t){_fnMap(e.oLanguage,a,"sProcessing");_fnMap(e.oLanguage,a,"sLengthMenu");_fnMap(e.oLanguage,a,"sEmptyTable");_fnMap(e.oLanguage,a,"sZeroRecords");_fnMap(e.oLanguage,a,"sInfo");_fnMap(e.oLanguage,a,"sInfoEmpty");_fnMap(e.oLanguage,a,"sInfoFiltered");_fnMap(e.oLanguage,a,"sInfoPostFix");_fnMap(e.oLanguage,a,"sSearch");if(typeof a.oPaginate!="undefined"){_fnMap(e.oLanguage.oPaginate,a.oPaginate,"sFirst");_fnMap(e.oLanguage.oPaginate,a.oPaginate,"sPrevious");_fnMap(e.oLanguage.oPaginate,a.oPaginate,"sNext");_fnMap(e.oLanguage.oPaginate,a.oPaginate,"sLast")}if(typeof a.sEmptyTable=="undefined"&&typeof a.sZeroRecords!="undefined"){_fnMap(e.oLanguage,a,"sZeroRecords","sEmptyTable")}if(t){_fnInitalise(e)}}function _fnAddColumn(e,a){e.aoColumns[e.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,sTitle:a?a.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:e.aoColumns.length-1,sSortDataType:"std",nTh:a?a:document.createElement("th"),nTf:null,anThExtra:[],anTfExtra:[]};var t=e.aoColumns.length-1;var n=e.aoColumns[t];if(typeof e.aoPreSearchCols[t]=="undefined"||e.aoPreSearchCols[t]===null){e.aoPreSearchCols[t]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof e.aoPreSearchCols[t].bRegex=="undefined"){e.aoPreSearchCols[t].bRegex=true}if(typeof e.aoPreSearchCols[t].bSmart=="undefined"){e.aoPreSearchCols[t].bSmart=true}}_fnColumnOptions(e,t,null)}function _fnColumnOptions(e,a,t){var n=e.aoColumns[a];if(typeof t!="undefined"&&t!==null){if(typeof t.sType!="undefined"){n.sType=t.sType;n._bAutoType=false}_fnMap(n,t,"bVisible");_fnMap(n,t,"bSearchable");_fnMap(n,t,"bSortable");_fnMap(n,t,"sTitle");_fnMap(n,t,"sName");_fnMap(n,t,"sWidth");_fnMap(n,t,"sWidth","sWidthOrig");_fnMap(n,t,"sClass");_fnMap(n,t,"fnRender");_fnMap(n,t,"bUseRendered");_fnMap(n,t,"iDataSort");_fnMap(n,t,"asSorting");_fnMap(n,t,"sSortDataType")}if(!e.oFeatures.bSort){n.bSortable=false}if(!n.bSortable||$.inArray("asc",n.asSorting)==-1&&$.inArray("desc",n.asSorting)==-1){n.sSortingClass=e.oClasses.sSortableNone;n.sSortingClassJUI=""}else if($.inArray("asc",n.asSorting)!=-1&&$.inArray("desc",n.asSorting)==-1){n.sSortingClass=e.oClasses.sSortableAsc;n.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed}else if($.inArray("asc",n.asSorting)==-1&&$.inArray("desc",n.asSorting)!=-1){n.sSortingClass=e.oClasses.sSortableDesc;n.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed}}function _fnAddData(e,a){if(a.length!=e.aoColumns.length&&e.iDrawError!=e.iDraw){_fnLog(e,0,"Added data (size "+a.length+") does not match known "+"number of columns ("+e.aoColumns.length+")");e.iDrawError=e.iDraw;return-1}var t=a.slice();var n=e.aoData.length;e.aoData.push({nTr:document.createElement("tr"),_iId:e.iNextId++,_aData:t,_anHidden:[],_sRowStripe:""});var o,i;for(var s=0;s<t.length;s++){o=document.createElement("td");if(t[s]===null){t[s]=""}if(typeof e.aoColumns[s].fnRender=="function"){var r=e.aoColumns[s].fnRender({iDataRow:n,iDataColumn:s,aData:t,oSettings:e});o.innerHTML=r;if(e.aoColumns[s].bUseRendered){e.aoData[n]._aData[s]=r}}else{o.innerHTML=t[s]}if(typeof t[s]!="string"){t[s]+=""}t[s]=$.trim(t[s]);if(e.aoColumns[s].sClass!==null){o.className=e.aoColumns[s].sClass}if(e.aoColumns[s]._bAutoType&&e.aoColumns[s].sType!="string"){i=_fnDetectType(e.aoData[n]._aData[s]);if(e.aoColumns[s].sType===null){e.aoColumns[s].sType=i}else if(e.aoColumns[s].sType!=i){e.aoColumns[s].sType="string"}}if(e.aoColumns[s].bVisible){e.aoData[n].nTr.appendChild(o);e.aoData[n]._anHidden[s]=null}else{e.aoData[n]._anHidden[s]=o}}e.aiDisplayMaster.push(n);return n}function _fnGatherData(e){var a,t,n,o,i,s,r,l,f,u,d,p,h,c,g;if(e.sAjaxSource===null){l=e.nTBody.childNodes;for(t=0,n=l.length;t<n;t++){if(l[t].nodeName.toUpperCase()=="TR"){d=e.aoData.length;e.aoData.push({nTr:l[t],_iId:e.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});e.aiDisplayMaster.push(d);u=e.aoData[d]._aData;r=l[t].childNodes;s=0;for(o=0,i=r.length;o<i;o++){if(r[o].nodeName.toUpperCase()=="TD"){u[s]=$.trim(r[o].innerHTML);s++}}}}}l=_fnGetTrNodes(e);r=[];for(t=0,n=l.length;t<n;t++){for(o=0,i=l[t].childNodes.length;o<i;o++){f=l[t].childNodes[o];if(f.nodeName.toUpperCase()=="TD"){r.push(f)}}}if(r.length!=l.length*e.aoColumns.length){_fnLog(e,1,"Unexpected number of TD elements. Expected "+l.length*e.aoColumns.length+" and got "+r.length+". DataTables does "+"not support rowspan / colspan in the table body, and there must be one cell for each "+"row/column combination.")}for(c=0,g=e.aoColumns.length;c<g;c++){if(e.aoColumns[c].sTitle===null){e.aoColumns[c].sTitle=e.aoColumns[c].nTh.innerHTML}var _=e.aoColumns[c]._bAutoType,m=typeof e.aoColumns[c].fnRender=="function",S=e.aoColumns[c].sClass!==null,C=e.aoColumns[c].bVisible,b,D,v;if(_||m||S||!C){for(p=0,h=e.aoData.length;p<h;p++){b=r[p*g+c];if(_){if(e.aoColumns[c].sType!="string"){D=_fnDetectType(e.aoData[p]._aData[c]);if(e.aoColumns[c].sType===null){e.aoColumns[c].sType=D}else if(e.aoColumns[c].sType!=D){e.aoColumns[c].sType="string"}}}if(m){v=e.aoColumns[c].fnRender({iDataRow:p,iDataColumn:c,aData:e.aoData[p]._aData,oSettings:e});b.innerHTML=v;if(e.aoColumns[c].bUseRendered){e.aoData[p]._aData[c]=v}}if(S){b.className+=" "+e.aoColumns[c].sClass}if(!C){e.aoData[p]._anHidden[c]=b;b.parentNode.removeChild(b)}else{e.aoData[p]._anHidden[c]=null}}}}}function _fnDrawHead(e){var a,t,n,o,i;var s=e.nTHead.getElementsByTagName("tr");var r=e.nTHead.getElementsByTagName("th").length;var l=0;var f;if(r!==0){for(a=0,n=e.aoColumns.length;a<n;a++){t=e.aoColumns[a].nTh;if(e.aoColumns[a].sClass!==null){$(t).addClass(e.aoColumns[a].sClass)}for(o=1,i=s.length;o<i;o++){f=$(s[o]).children();e.aoColumns[a].anThExtra.push(f[a-l]);if(!e.aoColumns[a].bVisible){s[o].removeChild(f[a-l])}}if(e.aoColumns[a].bVisible){if(e.aoColumns[a].sTitle!=t.innerHTML){t.innerHTML=e.aoColumns[a].sTitle}}else{t.parentNode.removeChild(t);l++}}}else{var u=document.createElement("tr");for(a=0,n=e.aoColumns.length;a<n;a++){t=e.aoColumns[a].nTh;t.innerHTML=e.aoColumns[a].sTitle;if(e.aoColumns[a].sClass!==null){$(t).addClass(e.aoColumns[a].sClass)}if(e.aoColumns[a].bVisible){u.appendChild(t)}}$(e.nTHead).html("")[0].appendChild(u)}if(e.bJUI){for(a=0,n=e.aoColumns.length;a<n;a++){t=e.aoColumns[a].nTh;var d=document.createElement("div");d.className=e.oClasses.sSortJUIWrapper;$(t).contents().appendTo(d);d.appendChild(document.createElement("span"));t.appendChild(d)}}var p=function(e){this.onselectstart=function(){return false};return false};if(e.oFeatures.bSort){for(a=0;a<e.aoColumns.length;a++){if(e.aoColumns[a].bSortable!==false){_fnSortAttachListener(e,e.aoColumns[a].nTh,a);$(e.aoColumns[a].nTh).bind("mousedown.DT",p)}else{$(e.aoColumns[a].nTh).addClass(e.oClasses.sSortableNone)}}}if(e.nTFoot!==null){l=0;s=e.nTFoot.getElementsByTagName("tr");var h=s[0].getElementsByTagName("th");for(a=0,n=h.length;a<n;a++){if(typeof e.aoColumns[a]!="undefined"){e.aoColumns[a].nTf=h[a-l];if(e.oClasses.sFooterTH!==""){e.aoColumns[a].nTf.className+=" "+e.oClasses.sFooterTH}for(o=1,i=s.length;o<i;o++){f=$(s[o]).children();e.aoColumns[a].anTfExtra.push(f[a-l]);if(!e.aoColumns[a].bVisible){s[o].removeChild(f[a-l])}}if(!e.aoColumns[a].bVisible){h[a-l].parentNode.removeChild(h[a-l]);l++}}}}}function _fnDraw(e){var a,t;var n=[];var o=0;var i=false;var s=e.asStripClasses.length;var r=e.aoOpenRows.length;e.bDrawing=true;if(typeof e.iInitDisplayStart!="undefined"&&e.iInitDisplayStart!=-1){if(e.oFeatures.bServerSide){e._iDisplayStart=e.iInitDisplayStart}else{e._iDisplayStart=e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart}e.iInitDisplayStart=-1;_fnCalculateEnd(e)}if(!e.bDestroying&&e.oFeatures.bServerSide&&!_fnAjaxUpdate(e)){return}else if(!e.oFeatures.bServerSide){e.iDraw++}if(e.aiDisplay.length!==0){var l=e._iDisplayStart;var f=e._iDisplayEnd;if(e.oFeatures.bServerSide){l=0;f=e.aoData.length}for(var u=l;u<f;u++){var d=e.aoData[e.aiDisplay[u]];var p=d.nTr;if(s!==0){var h=e.asStripClasses[o%s];if(d._sRowStripe!=h){$(p).removeClass(d._sRowStripe).addClass(h);d._sRowStripe=h}}if(typeof e.fnRowCallback=="function"){p=e.fnRowCallback.call(e.oInstance,p,e.aoData[e.aiDisplay[u]]._aData,o,u);if(!p&&!i){_fnLog(e,0,"A node was not returned by fnRowCallback");i=true}}n.push(p);o++;if(r!==0){for(var c=0;c<r;c++){if(p==e.aoOpenRows[c].nParent){n.push(e.aoOpenRows[c].nTr)}}}}}else{n[0]=document.createElement("tr");if(typeof e.asStripClasses[0]!="undefined"){n[0].className=e.asStripClasses[0]}var g=document.createElement("td");g.setAttribute("valign","top");g.colSpan=_fnVisbleColumns(e);g.className=e.oClasses.sRowEmpty;if(typeof e.oLanguage.sEmptyTable!="undefined"&&e.fnRecordsTotal()===0){g.innerHTML=e.oLanguage.sEmptyTable}else{g.innerHTML=e.oLanguage.sZeroRecords.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()))}n[o].appendChild(g)}if(typeof e.fnHeaderCallback=="function"){e.fnHeaderCallback.call(e.oInstance,$(">tr",e.nTHead)[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay)}if(typeof e.fnFooterCallback=="function"){e.fnFooterCallback.call(e.oInstance,$(">tr",e.nTFoot)[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay)}var _=document.createDocumentFragment(),m=document.createDocumentFragment(),S,C;if(e.nTBody){S=e.nTBody.parentNode;m.appendChild(e.nTBody);if(!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered){C=e.nTBody.childNodes;for(a=C.length-1;a>=0;a--){C[a].parentNode.removeChild(C[a])}}for(a=0,t=n.length;a<t;a++){_.appendChild(n[a])
}e.nTBody.appendChild(_);if(S!==null){S.appendChild(e.nTBody)}}for(a=e.aoDrawCallback.length-1;a>=0;a--){e.aoDrawCallback[a].fn.call(e.oInstance,e)}e.bSorted=false;e.bFiltered=false;e.bDrawing=false;if(e.oFeatures.bServerSide){_fnProcessingDisplay(e,false);if(typeof e._bInitComplete=="undefined"){_fnInitComplete(e)}}}function _fnReDraw(e){if(e.oFeatures.bSort){_fnSort(e,e.oPreviousSearch)}else if(e.oFeatures.bFilter){_fnFilterComplete(e,e.oPreviousSearch)}else{_fnCalculateEnd(e);_fnDraw(e)}}function _fnAjaxUpdate(e){if(e.bAjaxDataGet){_fnProcessingDisplay(e,true);var a=e.aoColumns.length;var t=[];var n;e.iDraw++;t.push({name:"sEcho",value:e.iDraw});t.push({name:"iColumns",value:a});t.push({name:"sColumns",value:_fnColumnOrdering(e)});t.push({name:"iDisplayStart",value:e._iDisplayStart});t.push({name:"iDisplayLength",value:e.oFeatures.bPaginate!==false?e._iDisplayLength:-1});if(e.oFeatures.bFilter!==false){t.push({name:"sSearch",value:e.oPreviousSearch.sSearch});t.push({name:"bRegex",value:e.oPreviousSearch.bRegex});for(n=0;n<a;n++){t.push({name:"sSearch_"+n,value:e.aoPreSearchCols[n].sSearch});t.push({name:"bRegex_"+n,value:e.aoPreSearchCols[n].bRegex});t.push({name:"bSearchable_"+n,value:e.aoColumns[n].bSearchable})}}if(e.oFeatures.bSort!==false){var o=e.aaSortingFixed!==null?e.aaSortingFixed.length:0;var i=e.aaSorting.length;t.push({name:"iSortingCols",value:o+i});for(n=0;n<o;n++){t.push({name:"iSortCol_"+n,value:e.aaSortingFixed[n][0]});t.push({name:"sSortDir_"+n,value:e.aaSortingFixed[n][1]})}for(n=0;n<i;n++){t.push({name:"iSortCol_"+(n+o),value:e.aaSorting[n][0]});t.push({name:"sSortDir_"+(n+o),value:e.aaSorting[n][1]})}for(n=0;n<a;n++){t.push({name:"bSortable_"+n,value:e.aoColumns[n].bSortable})}}e.fnServerData.call(e.oInstance,e.sAjaxSource,t,function(a){_fnAjaxUpdateDraw(e,a)});return false}else{return true}}function _fnAjaxUpdateDraw(e,a){if(typeof a.sEcho!="undefined"){if(a.sEcho*1<e.iDraw){return}else{e.iDraw=a.sEcho*1}}if(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered)){_fnClearTable(e)}e._iRecordsTotal=a.iTotalRecords;e._iRecordsDisplay=a.iTotalDisplayRecords;var t=_fnColumnOrdering(e);var n=typeof a.sColumns!="undefined"&&t!==""&&a.sColumns!=t;if(n){var o=_fnReOrderIndex(e,a.sColumns)}for(var i=0,s=a.aaData.length;i<s;i++){if(n){var r=[];for(var l=0,f=e.aoColumns.length;l<f;l++){r.push(a.aaData[i][o[l]])}_fnAddData(e,r)}else{_fnAddData(e,a.aaData[i])}}e.aiDisplay=e.aiDisplayMaster.slice();e.bAjaxDataGet=false;_fnDraw(e);e.bAjaxDataGet=true;_fnProcessingDisplay(e,false)}function _fnAddOptionsHtml(e){var a=document.createElement("div");e.nTable.parentNode.insertBefore(a,e.nTable);e.nTableWrapper=document.createElement("div");e.nTableWrapper.className=e.oClasses.sWrapper;if(e.sTableId!==""){e.nTableWrapper.setAttribute("id",e.sTableId+"_wrapper")}var t=e.nTableWrapper;var n=e.sDom.split("");var o,i,s,r,l,f,u;for(var d=0;d<n.length;d++){i=0;s=n[d];if(s=="<"){r=document.createElement("div");l=n[d+1];if(l=="'"||l=='"'){f="";u=2;while(n[d+u]!=l){f+=n[d+u];u++}if(f=="H"){f="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else if(f=="F"){f="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}if(f.indexOf(".")!=-1){var p=f.split(".");r.setAttribute("id",p[0].substr(1,p[0].length-1));r.className=p[1]}else if(f.charAt(0)=="#"){r.setAttribute("id",f.substr(1,f.length-1))}else{r.className=f}d+=u}t.appendChild(r);t=r}else if(s==">"){t=t.parentNode}else if(s=="l"&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange){o=_fnFeatureHtmlLength(e);i=1}else if(s=="f"&&e.oFeatures.bFilter){o=_fnFeatureHtmlFilter(e);i=1}else if(s=="r"&&e.oFeatures.bProcessing){o=_fnFeatureHtmlProcessing(e);i=1}else if(s=="t"){o=_fnFeatureHtmlTable(e);i=1}else if(s=="i"&&e.oFeatures.bInfo){o=_fnFeatureHtmlInfo(e);i=1}else if(s=="p"&&e.oFeatures.bPaginate){o=_fnFeatureHtmlPaginate(e);i=1}else if(_oExt.aoFeatures.length!==0){var h=_oExt.aoFeatures;for(var c=0,g=h.length;c<g;c++){if(s==h[c].cFeature){o=h[c].fnInit(e);if(o){i=1}break}}}if(i==1&&o!==null){if(typeof e.aanFeatures[s]!="object"){e.aanFeatures[s]=[]}e.aanFeatures[s].push(o);t.appendChild(o)}}a.parentNode.replaceChild(e.nTableWrapper,a)}function _fnFeatureHtmlTable(e){if(e.oScroll.sX===""&&e.oScroll.sY===""){return e.nTable}var a=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),r=e.nTable.cloneNode(false),l=e.nTable.cloneNode(false),f=e.nTable.getElementsByTagName("thead")[0],u=e.nTable.getElementsByTagName("tfoot").length===0?null:e.nTable.getElementsByTagName("tfoot")[0],d=typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI?_oExt.oJUIClasses:_oExt.oStdClasses;t.appendChild(n);i.appendChild(s);o.appendChild(e.nTable);a.appendChild(t);a.appendChild(o);n.appendChild(r);r.appendChild(f);if(u!==null){a.appendChild(i);s.appendChild(l);l.appendChild(u)}a.className=d.sScrollWrapper;t.className=d.sScrollHead;n.className=d.sScrollHeadInner;o.className=d.sScrollBody;i.className=d.sScrollFoot;s.className=d.sScrollFootInner;if(e.oScroll.bAutoCss){t.style.overflow="hidden";t.style.position="relative";i.style.overflow="hidden";o.style.overflow="auto"}t.style.border="0";t.style.width="100%";i.style.border="0";n.style.width="150%";r.removeAttribute("id");r.style.marginLeft="0";e.nTable.style.marginLeft="0";if(u!==null){l.removeAttribute("id");l.style.marginLeft="0"}var p=$(">caption",e.nTable);for(var h=0,c=p.length;h<c;h++){r.appendChild(p[h])}if(e.oScroll.sX!==""){t.style.width=_fnStringToCss(e.oScroll.sX);o.style.width=_fnStringToCss(e.oScroll.sX);if(u!==null){i.style.width=_fnStringToCss(e.oScroll.sX)}$(o).scroll(function(e){t.scrollLeft=this.scrollLeft;if(u!==null){i.scrollLeft=this.scrollLeft}})}if(e.oScroll.sY!==""){o.style.height=_fnStringToCss(e.oScroll.sY)}e.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(e.oScroll.bInfinite){$(o).scroll(function(){if(!e.bDrawing){if($(this).scrollTop()+$(this).height()>$(e.nTable).height()-e.oScroll.iLoadGap){if(e.fnDisplayEnd()<e.fnRecordsDisplay()){_fnPageChange(e,"next");_fnCalculateEnd(e);_fnDraw(e)}}}})}e.nScrollHead=t;e.nScrollFoot=i;return a}function _fnScrollDraw(e){var a=e.nScrollHead.getElementsByTagName("div")[0],t=a.getElementsByTagName("table")[0],n=e.nTable.parentNode,o,i,s,r,l,f,u,d,p,h,c,g=[],_;var m=e.nTable.getElementsByTagName("thead");if(m.length>0){e.nTable.removeChild(m[0])}if(e.nTFoot!==null){var S=e.nTable.getElementsByTagName("tfoot");if(S.length>0){e.nTable.removeChild(S[0])}}m=e.nTHead.cloneNode(true);e.nTable.insertBefore(m,e.nTable.childNodes[0]);if(e.nTFoot!==null){S=e.nTFoot.cloneNode(true);e.nTable.insertBefore(S,e.nTable.childNodes[1])}var C=_fnGetUniqueThs(m);for(o=0,i=C.length;o<i;o++){h=_fnVisibleToColumnIndex(e,o);C[o].style.width=e.aoColumns[h].sWidth}if(e.nTFoot!==null){_fnApplyToChildren(function(e){e.style.width=""},S.getElementsByTagName("tr"))}_=$(e.nTable).outerWidth();if(e.oScroll.sX===""){e.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){e.nTable.style.width=_fnStringToCss($(e.nTable).outerWidth()-e.oScroll.iBarWidth)}}else{if(e.oScroll.sXInner!==""){e.nTable.style.width=_fnStringToCss(e.oScroll.sXInner)}else if(_==$(n).width()&&$(n).height()<$(e.nTable).height()){e.nTable.style.width=_fnStringToCss(_-e.oScroll.iBarWidth);if($(e.nTable).outerWidth()>_-e.oScroll.iBarWidth){e.nTable.style.width=_fnStringToCss(_)}}else{e.nTable.style.width=_fnStringToCss(_)}}_=$(e.nTable).outerWidth();l=e.nTHead.getElementsByTagName("tr");f=m.getElementsByTagName("tr");_fnApplyToChildren(function(e,a){p=e.style;p.paddingTop="0";p.paddingBottom="0";p.borderTopWidth="0";p.borderBottomWidth="0";p.height=0;c=$(e).width();a.style.width=_fnStringToCss(c);g.push(c)},f,l);$(f).height(0);if(e.nTFoot!==null){u=S.getElementsByTagName("tr");d=e.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(e,a){p=e.style;p.paddingTop="0";p.paddingBottom="0";p.borderTopWidth="0";p.borderBottomWidth="0";p.height=0;c=$(e).width();a.style.width=_fnStringToCss(c);g.push(c)},u,d);$(u).height(0)}_fnApplyToChildren(function(e){e.innerHTML="";e.style.width=_fnStringToCss(g.shift())},f);if(e.nTFoot!==null){_fnApplyToChildren(function(e){e.innerHTML="";e.style.width=_fnStringToCss(g.shift())},u)}if($(e.nTable).outerWidth()<_){if(e.oScroll.sX===""){_fnLog(e,1,"The table cannot fit into the current element which will cause column"+" misalignment. It is suggested that you enable x-scrolling or increase the width"+" the table has in which to be drawn")}else if(e.oScroll.sXInner!==""){_fnLog(e,1,"The table cannot fit into the current element which will cause column"+" misalignment. It is suggested that you increase the sScrollXInner property to"+" allow it to draw in a larger area, or simply remove that parameter to allow"+" automatic calculation")}}if(e.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){n.style.height=_fnStringToCss(e.nTable.offsetHeight+e.oScroll.iBarWidth)}}if(e.oScroll.sY!==""&&e.oScroll.bCollapse){n.style.height=_fnStringToCss(e.oScroll.sY);var b=e.oScroll.sX!==""&&e.nTable.offsetWidth>n.offsetWidth?e.oScroll.iBarWidth:0;if(e.nTable.offsetHeight<n.offsetHeight){n.style.height=_fnStringToCss($(e.nTable).height()+b)}}var D=$(e.nTable).outerWidth();t.style.width=_fnStringToCss(D);a.style.width=_fnStringToCss(D+e.oScroll.iBarWidth);if(e.nTFoot!==null){var v=e.nScrollFoot.getElementsByTagName("div")[0],y=v.getElementsByTagName("table")[0];v.style.width=_fnStringToCss(e.nTable.offsetWidth+e.oScroll.iBarWidth);y.style.width=_fnStringToCss(e.nTable.offsetWidth)}if(e.bSorted||e.bFiltered){n.scrollTop=0}}function _fnAjustColumnSizing(e){if(e.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(e);for(var a=0,t=e.aoColumns.length;a<t;a++){e.aoColumns[a].nTh.style.width=e.aoColumns[a].sWidth}}function _fnFeatureHtmlFilter(e){var a=document.createElement("div");if(e.sTableId!==""&&typeof e.aanFeatures.f=="undefined"){a.setAttribute("id",e.sTableId+"_filter")}a.className=e.oClasses.sFilter;var t=e.oLanguage.sSearch===""?"":" ";a.innerHTML=e.oLanguage.sSearch+t+'<input type="text" />';var n=$("input",a);n.val(e.oPreviousSearch.sSearch.replace('"',"&quot;"));n.bind("keyup.DT",function(a){var t=e.aanFeatures.f;for(var n=0,o=t.length;n<o;n++){if(t[n]!=this.parentNode){$("input",t[n]).val(this.value)}}if(this.value!=e.oPreviousSearch.sSearch){_fnFilterComplete(e,{sSearch:this.value,bRegex:e.oPreviousSearch.bRegex,bSmart:e.oPreviousSearch.bSmart})}});n.bind("keypress.DT",function(e){if(e.keyCode==13){return false}});return a}function _fnFilterComplete(e,a,t){_fnFilter(e,a.sSearch,t,a.bRegex,a.bSmart);for(var n=0;n<e.aoPreSearchCols.length;n++){_fnFilterColumn(e,e.aoPreSearchCols[n].sSearch,n,e.aoPreSearchCols[n].bRegex,e.aoPreSearchCols[n].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(e)}e.bFiltered=true;e._iDisplayStart=0;_fnCalculateEnd(e);_fnDraw(e);_fnBuildSearchArray(e,0)}function _fnFilterCustom(e){var a=_oExt.afnFiltering;for(var t=0,n=a.length;t<n;t++){var o=0;for(var i=0,s=e.aiDisplay.length;i<s;i++){var r=e.aiDisplay[i-o];if(!a[t](e,e.aoData[r]._aData,r)){e.aiDisplay.splice(i-o,1);o++}}}}function _fnFilterColumn(e,a,t,n,o){if(a===""){return}var i=0;var s=_fnFilterCreateSearch(a,n,o);for(var r=e.aiDisplay.length-1;r>=0;r--){var l=_fnDataToSearch(e.aoData[e.aiDisplay[r]]._aData[t],e.aoColumns[t].sType);if(!s.test(l)){e.aiDisplay.splice(r,1);i++}}}function _fnFilter(e,a,t,n,o){var i;var s=_fnFilterCreateSearch(a,n,o);if(typeof t=="undefined"||t===null){t=0}if(_oExt.afnFiltering.length!==0){t=1}if(a.length<=0){e.aiDisplay.splice(0,e.aiDisplay.length);e.aiDisplay=e.aiDisplayMaster.slice()}else{if(e.aiDisplay.length==e.aiDisplayMaster.length||e.oPreviousSearch.sSearch.length>a.length||t==1||a.indexOf(e.oPreviousSearch.sSearch)!==0){e.aiDisplay.splice(0,e.aiDisplay.length);_fnBuildSearchArray(e,1);for(i=0;i<e.aiDisplayMaster.length;i++){if(s.test(e.asDataSearch[i])){e.aiDisplay.push(e.aiDisplayMaster[i])}}}else{var r=0;for(i=0;i<e.asDataSearch.length;i++){if(!s.test(e.asDataSearch[i])){e.aiDisplay.splice(i-r,1);r++}}}}e.oPreviousSearch.sSearch=a;e.oPreviousSearch.bRegex=n;e.oPreviousSearch.bSmart=o}function _fnBuildSearchArray(e,a){e.asDataSearch.splice(0,e.asDataSearch.length);var t=typeof a!="undefined"&&a==1?e.aiDisplayMaster:e.aiDisplay;for(var n=0,o=t.length;n<o;n++){e.asDataSearch[n]=_fnBuildSearchRow(e,e.aoData[t[n]]._aData)}}function _fnBuildSearchRow(e,a){var t="";var n=document.createElement("div");for(var o=0,i=e.aoColumns.length;o<i;o++){if(e.aoColumns[o].bSearchable){var s=a[o];t+=_fnDataToSearch(s,e.aoColumns[o].sType)+"  "}}if(t.indexOf("&")!==-1){n.innerHTML=t;t=n.textContent?n.textContent:n.innerText;t=t.replace(/\n/g," ").replace(/\r/g,"")}return t}function _fnFilterCreateSearch(e,a,t){var n,o;if(t){n=a?e.split(" "):_fnEscapeRegex(e).split(" ");o="^(?=.*?"+n.join(")(?=.*?")+").*$";return new RegExp(o,"i")}else{e=a?e:_fnEscapeRegex(e);return new RegExp(e,"i")}}function _fnDataToSearch(e,a){if(typeof _oExt.ofnSearch[a]=="function"){return _oExt.ofnSearch[a](e)}else if(a=="html"){return e.replace(/\n/g," ").replace(/<.*?>/g,"")}else if(typeof e=="string"){return e.replace(/\n/g," ")}return e}function _fnSort(e,a){var t,n,o,i,s,r,l=[],f=[],u=_oExt.oSort,d=e.aoData,p=e.aoColumns;if(!e.oFeatures.bServerSide&&(e.aaSorting.length!==0||e.aaSortingFixed!==null)){if(e.aaSortingFixed!==null){l=e.aaSortingFixed.concat(e.aaSorting)}else{l=e.aaSorting.slice()}for(o=0;o<l.length;o++){var h=l[o][0];var c=_fnColumnIndexToVisible(e,h);var g=e.aoColumns[h].sSortDataType;if(typeof _oExt.afnSortData[g]!="undefined"){var _=_oExt.afnSortData[g](e,h,c);for(s=0,r=d.length;s<r;s++){d[s]._aData[h]=_[s]}}}for(o=0,i=e.aiDisplayMaster.length;o<i;o++){f[e.aiDisplayMaster[o]]=o}var m=l.length;e.aiDisplayMaster.sort(function(e,a){var i;for(o=0;o<m;o++){t=p[l[o][0]].iDataSort;n=p[t].sType;i=u[n+"-"+l[o][1]](d[e]._aData[t],d[a]._aData[t]);if(i!==0){return i}}return u["numeric-asc"](f[e],f[a])})}if(typeof a=="undefined"||a){_fnSortingClasses(e)}e.bSorted=true;if(e.oFeatures.bFilter){_fnFilterComplete(e,e.oPreviousSearch,1)}else{e.aiDisplay=e.aiDisplayMaster.slice();e._iDisplayStart=0;_fnCalculateEnd(e);_fnDraw(e)}}function _fnSortAttachListener(e,a,t,n){$(a).bind("click.DT",function(a){if(e.aoColumns[t].bSortable===false){return}var o=function(){var n,o;if(a.shiftKey){var i=false;for(var s=0;s<e.aaSorting.length;s++){if(e.aaSorting[s][0]==t){i=true;n=e.aaSorting[s][0];o=e.aaSorting[s][2]+1;if(typeof e.aoColumns[n].asSorting[o]=="undefined"){e.aaSorting.splice(s,1)}else{e.aaSorting[s][1]=e.aoColumns[n].asSorting[o];e.aaSorting[s][2]=o}break}}if(i===false){e.aaSorting.push([t,e.aoColumns[t].asSorting[0],0])}}else{if(e.aaSorting.length==1&&e.aaSorting[0][0]==t){n=e.aaSorting[0][0];o=e.aaSorting[0][2]+1;if(typeof e.aoColumns[n].asSorting[o]=="undefined"){o=0}e.aaSorting[0][1]=e.aoColumns[n].asSorting[o];e.aaSorting[0][2]=o}else{e.aaSorting.splice(0,e.aaSorting.length);e.aaSorting.push([t,e.aoColumns[t].asSorting[0],0])}}_fnSort(e)};if(!e.oFeatures.bProcessing){o()}else{_fnProcessingDisplay(e,true);setTimeout(function(){o();if(!e.oFeatures.bServerSide){_fnProcessingDisplay(e,false)}},0)}if(typeof n=="function"){n(e)}})}function _fnSortingClasses(e){var a,t,n,o,i;var s,r;var l=e.aoColumns.length;var f=e.oClasses;for(a=0;a<l;a++){if(e.aoColumns[a].bSortable){$(e.aoColumns[a].nTh).removeClass(f.sSortAsc+" "+f.sSortDesc+" "+e.aoColumns[a].sSortingClass)}}if(e.aaSortingFixed!==null){s=e.aaSortingFixed.concat(e.aaSorting)}else{s=e.aaSorting.slice()}for(a=0;a<e.aoColumns.length;a++){if(e.aoColumns[a].bSortable){r=e.aoColumns[a].sSortingClass;i=-1;for(n=0;n<s.length;n++){if(s[n][0]==a){r=s[n][1]=="asc"?f.sSortAsc:f.sSortDesc;i=n;break}}$(e.aoColumns[a].nTh).addClass(r);if(e.bJUI){var u=$("span",e.aoColumns[a].nTh);u.removeClass(f.sSortJUIAsc+" "+f.sSortJUIDesc+" "+f.sSortJUI+" "+f.sSortJUIAscAllowed+" "+f.sSortJUIDescAllowed);var d;if(i==-1){d=e.aoColumns[a].sSortingClassJUI}else if(s[i][1]=="asc"){d=f.sSortJUIAsc}else{d=f.sSortJUIDesc}u.addClass(d)}}else{$(e.aoColumns[a].nTh).addClass(e.aoColumns[a].sSortingClass)}}r=f.sSortColumn;if(e.oFeatures.bSort&&e.oFeatures.bSortClasses){var p=_fnGetTdNodes(e);if(p.length>=l){for(a=0;a<l;a++){if(p[a].className.indexOf(r+"1")!=-1){for(n=0,o=p.length/l;n<o;n++){p[l*n+a].className=$.trim(p[l*n+a].className.replace(r+"1",""))}}else if(p[a].className.indexOf(r+"2")!=-1){for(n=0,o=p.length/l;n<o;n++){p[l*n+a].className=$.trim(p[l*n+a].className.replace(r+"2",""))}}else if(p[a].className.indexOf(r+"3")!=-1){for(n=0,o=p.length/l;n<o;n++){p[l*n+a].className=$.trim(p[l*n+a].className.replace(" "+r+"3",""))}}}}var h=1,c;for(a=0;a<s.length;a++){c=parseInt(s[a][0],10);for(n=0,o=p.length/l;n<o;n++){p[l*n+c].className+=" "+r+h}if(h<3){h++}}}}function _fnFeatureHtmlPaginate(e){if(e.oScroll.bInfinite){return null}var a=document.createElement("div");a.className=e.oClasses.sPaging+e.sPaginationType;_oExt.oPagination[e.sPaginationType].fnInit(e,a,function(e){_fnCalculateEnd(e);_fnDraw(e)});if(typeof e.aanFeatures.p=="undefined"){e.aoDrawCallback.push({fn:function(e){_oExt.oPagination[e.sPaginationType].fnUpdate(e,function(e){_fnCalculateEnd(e);_fnDraw(e)})},sName:"pagination"})}return a}function _fnPageChange(e,a){var t=e._iDisplayStart;if(a=="first"){e._iDisplayStart=0}else if(a=="previous"){e._iDisplayStart=e._iDisplayLength>=0?e._iDisplayStart-e._iDisplayLength:0;if(e._iDisplayStart<0){e._iDisplayStart=0}}else if(a=="next"){if(e._iDisplayLength>=0){if(e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()){e._iDisplayStart+=e._iDisplayLength}}else{e._iDisplayStart=0}}else if(a=="last"){if(e._iDisplayLength>=0){var n=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1;e._iDisplayStart=(n-1)*e._iDisplayLength}else{e._iDisplayStart=0}}else{_fnLog(e,0,"Unknown paging action: "+a)}return t!=e._iDisplayStart}function _fnFeatureHtmlInfo(e){var a=document.createElement("div");a.className=e.oClasses.sInfo;if(typeof e.aanFeatures.i=="undefined"){e.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(e.sTableId!==""){a.setAttribute("id",e.sTableId+"_info")}}return a}function _fnUpdateInfo(e){if(!e.oFeatures.bInfo||e.aanFeatures.i.length===0){return}var a=e._iDisplayStart+1,t=e.fnDisplayEnd(),n=e.fnRecordsTotal(),o=e.fnRecordsDisplay(),i=e.fnFormatNumber(a),s=e.fnFormatNumber(t),r=e.fnFormatNumber(n),l=e.fnFormatNumber(o),f;if(e.oScroll.bInfinite){i=e.fnFormatNumber(1)}if(e.fnRecordsDisplay()===0&&e.fnRecordsDisplay()==e.fnRecordsTotal()){f=e.oLanguage.sInfoEmpty+e.oLanguage.sInfoPostFix}else if(e.fnRecordsDisplay()===0){f=e.oLanguage.sInfoEmpty+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",r)+e.oLanguage.sInfoPostFix}else if(e.fnRecordsDisplay()==e.fnRecordsTotal()){f=e.oLanguage.sInfo.replace("_START_",i).replace("_END_",s).replace("_TOTAL_",l)+e.oLanguage.sInfoPostFix}else{f=e.oLanguage.sInfo.replace("_START_",i).replace("_END_",s).replace("_TOTAL_",l)+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()))+e.oLanguage.sInfoPostFix}if(e.oLanguage.fnInfoCallback!==null){f=e.oLanguage.fnInfoCallback(e,a,t,n,o,f)}var u=e.aanFeatures.i;for(var d=0,p=u.length;d<p;d++){$(u[d]).html(f)}}function _fnFeatureHtmlLength(e){if(e.oScroll.bInfinite){return null}var a=e.sTableId===""?"":'name="'+e.sTableId+'_length"';var t='<select size="1" '+a+">";var n,o;if(e.aLengthMenu.length==2&&typeof e.aLengthMenu[0]=="object"&&typeof e.aLengthMenu[1]=="object"){for(n=0,o=e.aLengthMenu[0].length;n<o;n++){t+='<option value="'+e.aLengthMenu[0][n]+'">'+e.aLengthMenu[1][n]+"</option>"}}else{for(n=0,o=e.aLengthMenu.length;n<o;n++){t+='<option value="'+e.aLengthMenu[n]+'">'+e.aLengthMenu[n]+"</option>"}}t+="</select>";var i=document.createElement("div");if(e.sTableId!==""&&typeof e.aanFeatures.l=="undefined"){i.setAttribute("id",e.sTableId+"_length")}i.className=e.oClasses.sLength;i.innerHTML=e.oLanguage.sLengthMenu.replace("_MENU_",t);$('select option[value="'+e._iDisplayLength+'"]',i).attr("selected",true);$("select",i).bind("change.DT",function(a){var t=$(this).val();var i=e.aanFeatures.l;for(n=0,o=i.length;n<o;n++){if(i[n]!=this.parentNode){$("select",i[n]).val(t)}}e._iDisplayLength=parseInt(t,10);_fnCalculateEnd(e);if(e.fnDisplayEnd()==e.fnRecordsDisplay()){e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength;if(e._iDisplayStart<0){e._iDisplayStart=0}}if(e._iDisplayLength==-1){e._iDisplayStart=0}_fnDraw(e)});return i}function _fnFeatureHtmlProcessing(e){var a=document.createElement("div");if(e.sTableId!==""&&typeof e.aanFeatures.r=="undefined"){a.setAttribute("id",e.sTableId+"_processing")}a.innerHTML=e.oLanguage.sProcessing;a.className=e.oClasses.sProcessing;e.nTable.parentNode.insertBefore(a,e.nTable);return a}function _fnProcessingDisplay(e,a){if(e.oFeatures.bProcessing){var t=e.aanFeatures.r;for(var n=0,o=t.length;n<o;n++){t[n].style.visibility=a?"visible":"hidden"}}}function _fnVisibleToColumnIndex(e,a){var t=-1;for(var n=0;n<e.aoColumns.length;n++){if(e.aoColumns[n].bVisible===true){t++}if(t==a){return n}}return null}function _fnColumnIndexToVisible(e,a){var t=-1;for(var n=0;n<e.aoColumns.length;n++){if(e.aoColumns[n].bVisible===true){t++}if(n==a){return e.aoColumns[n].bVisible===true?t:null}}return null}function _fnNodeToDataIndex(e,a){var t,n;for(t=e._iDisplayStart,n=e._iDisplayEnd;t<n;t++){if(e.aoData[e.aiDisplay[t]].nTr==a){return e.aiDisplay[t]}}for(t=0,n=e.aoData.length;t<n;t++){if(e.aoData[t].nTr==a){return t}}return null}function _fnVisbleColumns(e){var a=0;for(var t=0;t<e.aoColumns.length;t++){if(e.aoColumns[t].bVisible===true){a++}}return a}function _fnCalculateEnd(e){if(e.oFeatures.bPaginate===false){e._iDisplayEnd=e.aiDisplay.length}else{if(e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||e._iDisplayLength==-1){e._iDisplayEnd=e.aiDisplay.length}else{e._iDisplayEnd=e._iDisplayStart+e._iDisplayLength}}}function _fnConvertToWidth(e,a){if(!e||e===null||e===""){return 0}if(typeof a=="undefined"){a=document.getElementsByTagName("body")[0]}var t;var n=document.createElement("div");n.style.width=e;a.appendChild(n);t=n.offsetWidth;a.removeChild(n);return t}function _fnCalculateColumnWidths(e){var a=e.nTable.offsetWidth;var t=0;var n;var o=0;var i=e.aoColumns.length;var s;var r=$("th",e.nTHead);for(s=0;s<i;s++){if(e.aoColumns[s].bVisible){o++;if(e.aoColumns[s].sWidth!==null){n=_fnConvertToWidth(e.aoColumns[s].sWidthOrig,e.nTable.parentNode);if(n!==null){e.aoColumns[s].sWidth=_fnStringToCss(n)}t++}}}if(i==r.length&&t===0&&o==i&&e.oScroll.sX===""&&e.oScroll.sY===""){for(s=0;s<e.aoColumns.length;s++){n=$(r[s]).width();if(n!==null){e.aoColumns[s].sWidth=_fnStringToCss(n)}}}else{var l=e.nTable.cloneNode(false),f=document.createElement("tbody"),u=document.createElement("tr"),d;l.removeAttribute("id");l.appendChild(e.nTHead.cloneNode(true));if(e.nTFoot!==null){l.appendChild(e.nTFoot.cloneNode(true));_fnApplyToChildren(function(e){e.style.width=""},l.getElementsByTagName("tr"))}l.appendChild(f);f.appendChild(u);var p=$("thead th",l);if(p.length===0){p=$("tbody tr:eq(0)>td",l)}p.each(function(a){this.style.width="";var t=_fnVisibleToColumnIndex(e,a);if(t!==null&&e.aoColumns[t].sWidthOrig!==""){this.style.width=e.aoColumns[t].sWidthOrig}});for(s=0;s<i;s++){if(e.aoColumns[s].bVisible){var h=_fnGetWidestNode(e,s);if(h!==null){h=h.cloneNode(true);u.appendChild(h)}}}var c=e.nTable.parentNode;c.appendChild(l);if(e.oScroll.sX!==""&&e.oScroll.sXInner!==""){l.style.width=_fnStringToCss(e.oScroll.sXInner)}else if(e.oScroll.sX!==""){l.style.width="";if($(l).width()<c.offsetWidth){l.style.width=_fnStringToCss(c.offsetWidth)}}else if(e.oScroll.sY!==""){l.style.width=_fnStringToCss(c.offsetWidth)}l.style.visibility="hidden";_fnScrollingWidthAdjust(e,l);var g=$("tbody tr:eq(0)>td",l);if(g.length===0){g=$("thead tr:eq(0)>th",l)}var _,m=0,S;for(s=0;s<e.aoColumns.length;s++){if(e.aoColumns[s].bVisible){S=$(g[m]).outerWidth();if(S!==null&&S>0){e.aoColumns[s].sWidth=_fnStringToCss(S)}m++}}e.nTable.style.width=_fnStringToCss($(l).outerWidth());l.parentNode.removeChild(l)}}function _fnScrollingWidthAdjust(e,a){if(e.oScroll.sX===""&&e.oScroll.sY!==""){var t=$(a).width();a.style.width=_fnStringToCss($(a).outerWidth()-e.oScroll.iBarWidth)}else if(e.oScroll.sX!==""){a.style.width=_fnStringToCss($(a).outerWidth())}}function _fnGetWidestNode(e,a,t){if(typeof t=="undefined"||t){var n=_fnGetMaxLenString(e,a);var o=_fnColumnIndexToVisible(e,a);if(n<0){return null}return e.aoData[n].nTr.getElementsByTagName("td")[o]}var i=-1,s,r,l=-1,f=document.createElement("div");f.style.visibility="hidden";f.style.position="absolute";document.body.appendChild(f);for(s=0,r=e.aoData.length;s<r;s++){f.innerHTML=e.aoData[s]._aData[a];if(f.offsetWidth>i){i=f.offsetWidth;l=s}}document.body.removeChild(f);if(l>=0){var u=_fnColumnIndexToVisible(e,a);var d=e.aoData[l].nTr.getElementsByTagName("td")[u];if(d){return d}}return null}function _fnGetMaxLenString(e,a){var t=-1;var n=-1;for(var o=0;o<e.aoData.length;o++){var i=e.aoData[o]._aData[a];if(i.length>t){t=i.length;n=o}}return n}function _fnStringToCss(e){if(e===null){return"0px"}if(typeof e=="number"){if(e<0){return"0px"}return e+"px"}var a=e.charCodeAt(e.length-1);if(a<48||a>57){return e}return e+"px"}function _fnArrayCmp(e,a){if(e.length!=a.length){return 1}for(var t=0;t<e.length;t++){if(e[t]!=a[t]){return 2}}return 0}function _fnDetectType(e){var a=_oExt.aTypes;var t=a.length;for(var n=0;n<t;n++){var o=a[n](e);if(o!==null){return o}}return"string"}function _fnSettingsFromNode(e){for(var a=0;a<_aoSettings.length;a++){if(_aoSettings[a].nTable==e){return _aoSettings[a]}}return null}function _fnGetDataMaster(e){var a=[];var t=e.aoData.length;for(var n=0;n<t;n++){a.push(e.aoData[n]._aData)}return a}function _fnGetTrNodes(e){var a=[];var t=e.aoData.length;for(var n=0;n<t;n++){a.push(e.aoData[n].nTr)}return a}function _fnGetTdNodes(e){var a=_fnGetTrNodes(e);var t=[],n;var o=[];var i;var s,r,l,f;for(s=0,r=a.length;s<r;s++){t=[];for(l=0,f=a[s].childNodes.length;l<f;l++){n=a[s].childNodes[l];if(n.nodeName.toUpperCase()=="TD"){t.push(n)}}i=0;for(l=0,f=e.aoColumns.length;l<f;l++){if(e.aoColumns[l].bVisible){o.push(t[l-i])}else{o.push(e.aoData[s]._anHidden[l]);i++}}}return o}function _fnEscapeRegex(e){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var t=new RegExp("(\\"+a.join("|\\")+")","g");return e.replace(t,"\\$1")}function _fnDeleteIndex(e,a){var t=-1;for(var n=0,o=e.length;n<o;n++){if(e[n]==a){t=n}else if(e[n]>a){e[n]--}}if(t!=-1){e.splice(t,1)}}function _fnReOrderIndex(e,a){var t=a.split(",");var n=[];for(var o=0,i=e.aoColumns.length;o<i;o++){for(var s=0;s<i;s++){if(e.aoColumns[o].sName==t[s]){n.push(s);break}}}return n}function _fnColumnOrdering(e){var a="";for(var t=0,n=e.aoColumns.length;t<n;t++){a+=e.aoColumns[t].sName+","}if(a.length==n){return""}return a.slice(0,-1)}function _fnLog(e,a,t){var n=e.sTableId===""?"DataTables warning: "+t:"DataTables warning (table id = '"+e.sTableId+"'): "+t;if(a===0){if(_oExt.sErrMode=="alert"){alert(n)}else{throw n}return}else if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(n)}}function _fnClearTable(e){e.aoData.splice(0,e.aoData.length);e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length);e.aiDisplay.splice(0,e.aiDisplay.length);_fnCalculateEnd(e)}function _fnSaveState(e){if(!e.oFeatures.bStateSave||typeof e.bDestroying!="undefined"){return}var a,t,n;var o="{";o+='"iCreate":'+(new Date).getTime()+",";o+='"iStart":'+e._iDisplayStart+",";o+='"iEnd":'+e._iDisplayEnd+",";o+='"iLength":'+e._iDisplayLength+",";o+='"sFilter":"'+encodeURIComponent(e.oPreviousSearch.sSearch)+'",';o+='"sFilterEsc":'+!e.oPreviousSearch.bRegex+",";o+='"aaSorting":[ ';for(a=0;a<e.aaSorting.length;a++){o+="["+e.aaSorting[a][0]+',"'+e.aaSorting[a][1]+'"],'}o=o.substring(0,o.length-1);o+="],";o+='"aaSearchCols":[ ';for(a=0;a<e.aoPreSearchCols.length;a++){o+='["'+encodeURIComponent(e.aoPreSearchCols[a].sSearch)+'",'+!e.aoPreSearchCols[a].bRegex+"],"}o=o.substring(0,o.length-1);o+="],";o+='"abVisCols":[ ';for(a=0;a<e.aoColumns.length;a++){o+=e.aoColumns[a].bVisible+","}o=o.substring(0,o.length-1);o+="]";for(a=0,t=e.aoStateSave.length;a<t;a++){n=e.aoStateSave[a].fn(e,o);if(n!==""){o=n}}o+="}";_fnCreateCookie(e.sCookiePrefix+e.sInstance,o,e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=typeof $.parseJSON=="function"?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+iSecs*1e3);var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=typeof $.parseJSON=="function"?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(e){var a=window.location.pathname.split("/"),t=e+"_"+a[a.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",n=document.cookie.split(";");for(var o=0;o<n.length;o++){var i=n[o];while(i.charAt(0)==" "){i=i.substring(1,i.length)}if(i.indexOf(t)===0){return decodeURIComponent(i.substring(t.length,i.length))}}return null}function _fnGetUniqueThs(e){var a=e.getElementsByTagName("tr");if(a.length==1){return a[0].getElementsByTagName("th")}var t=[],n=[];var o=2,i=3,s=4;var r,l,f,u,d,p;var h=function(e,a,t){while(typeof e[a][t]!="undefined"){t++}return t};var c=function(e){if(typeof t[e]=="undefined"){t[e]=[]}};for(r=0,u=a.length;r<u;r++){c(r);var g=0;var _=[];for(l=0,d=a[r].childNodes.length;l<d;l++){if(a[r].childNodes[l].nodeName.toUpperCase()=="TD"||a[r].childNodes[l].nodeName.toUpperCase()=="TH"){_.push(a[r].childNodes[l])}}for(l=0,d=_.length;l<d;l++){var m=_[l].getAttribute("colspan")*1;var S=_[l].getAttribute("rowspan")*1;if(!m||m===0||m===1){p=h(t,r,g);t[r][p]=_[l].nodeName.toUpperCase()=="TD"?s:_[l];if(S||S===0||S===1){for(f=1;f<S;f++){c(r+f);
t[r+f][p]=o}}g++}else{p=h(t,r,g);for(f=0;f<m;f++){t[r][p+f]=i}g+=m}}}for(r=0,u=t.length;r<u;r++){for(l=0,d=t[r].length;l<d;l++){if(typeof t[r][l]=="object"&&typeof n[l]=="undefined"){n[l]=t[r][l]}}}return n}function _fnScrollBarWidth(){var e=document.createElement("p");var a=e.style;a.width="100%";a.height="200px";var t=document.createElement("div");a=t.style;a.position="absolute";a.top="0px";a.left="0px";a.visibility="hidden";a.width="200px";a.height="150px";a.overflow="hidden";t.appendChild(e);document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;if(n==o){o=t.clientWidth}document.body.removeChild(t);return n-o}function _fnApplyToChildren(e,a,t){for(var n=0,o=a.length;n<o;n++){for(var i=0,s=a[n].childNodes.length;i<s;i++){if(a[n].childNodes[i].nodeType==1){if(typeof t!="undefined"){e(a[n].childNodes[i],t[n].childNodes[i])}else{e(a[n].childNodes[i])}}}}}function _fnMap(e,a,t,n){if(typeof n=="undefined"){n=t}if(typeof a[t]!="undefined"){e[n]=a[t]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var e=0,a,t,n,o,i;for(e=0,a=_aoSettings.length;e<a;e++){if(_aoSettings[e].nTable==this){if(typeof oInit=="undefined"||typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true){return _aoSettings[e].oInstance}else if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[e].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[e],0,"Cannot reinitialise DataTable.\n\n"+"To retrieve the DataTables object for this table, please pass either no arguments "+"to the dataTable() function, or set bRetrieve to true. Alternatively, to destory "+"the old table and create a new one, set bDestroy to true (note that a lot of "+"changes to the configuration can be made through the API which is usually much "+"faster).");return}}if(_aoSettings[e].sTableId!==""&&_aoSettings[e].sTableId==this.getAttribute("id")){_aoSettings.splice(e,1);break}}var s=new classSettings;_aoSettings.push(s);var r=false;var l=false;var f=this.getAttribute("id");if(f!==null){s.sTableId=f;s.sInstance=f}else{s.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(s,0,"Attempted to initialise DataTables on a node which is not a "+"table: "+this.nodeName);return}s.nTable=this;s.oInstance=_that.length==1?_that:$(this).dataTable();s.oApi=_that.oApi;s.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){s.oInit=oInit;_fnMap(s.oFeatures,oInit,"bPaginate");_fnMap(s.oFeatures,oInit,"bLengthChange");_fnMap(s.oFeatures,oInit,"bFilter");_fnMap(s.oFeatures,oInit,"bSort");_fnMap(s.oFeatures,oInit,"bInfo");_fnMap(s.oFeatures,oInit,"bProcessing");_fnMap(s.oFeatures,oInit,"bAutoWidth");_fnMap(s.oFeatures,oInit,"bSortClasses");_fnMap(s.oFeatures,oInit,"bServerSide");_fnMap(s.oScroll,oInit,"sScrollX","sX");_fnMap(s.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(s.oScroll,oInit,"sScrollY","sY");_fnMap(s.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(s.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(s.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(s.oScroll,oInit,"bScrollAutoCss","bAutoCss");_fnMap(s,oInit,"asStripClasses");_fnMap(s,oInit,"fnRowCallback");_fnMap(s,oInit,"fnHeaderCallback");_fnMap(s,oInit,"fnFooterCallback");_fnMap(s,oInit,"fnCookieCallback");_fnMap(s,oInit,"fnInitComplete");_fnMap(s,oInit,"fnServerData");_fnMap(s,oInit,"fnFormatNumber");_fnMap(s,oInit,"aaSorting");_fnMap(s,oInit,"aaSortingFixed");_fnMap(s,oInit,"aLengthMenu");_fnMap(s,oInit,"sPaginationType");_fnMap(s,oInit,"sAjaxSource");_fnMap(s,oInit,"iCookieDuration");_fnMap(s,oInit,"sCookiePrefix");_fnMap(s,oInit,"sDom");_fnMap(s,oInit,"oSearch","oPreviousSearch");_fnMap(s,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(s,oInit,"iDisplayLength","_iDisplayLength");_fnMap(s,oInit,"bJQueryUI","bJUI");_fnMap(s.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){s.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){s.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){s.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(s.oFeatures.bServerSide&&s.oFeatures.bSort&&s.oFeatures.bSortClasses){s.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){s.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){s.sDom='<"H"lfr>t<"F"ip>'}}if(s.oScroll.sX!==""||s.oScroll.sY!==""){s.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof s.iInitDisplayStart=="undefined"){s.iInitDisplayStart=oInit.iDisplayStart;s._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){s.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(s,oInit);s.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){l=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){s.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(s.oLanguage.sUrl,null,function(e){_fnLanguageProcess(s,e,true)});r=true}else{_fnLanguageProcess(s,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){s.asStripClasses.push(s.oClasses.sStripOdd);s.asStripClasses.push(s.oClasses.sStripEven)}var u=false;var d=$(">tbody>tr",this);for(e=0,a=s.asStripClasses.length;e<a;e++){if(d.filter(":lt(2)").hasClass(s.asStripClasses[e])){u=true;break}}if(u){s.asDestoryStrips=["",""];if($(d[0]).hasClass(s.oClasses.sStripOdd)){s.asDestoryStrips[0]+=s.oClasses.sStripOdd+" "}if($(d[0]).hasClass(s.oClasses.sStripEven)){s.asDestoryStrips[0]+=s.oClasses.sStripEven}if($(d[1]).hasClass(s.oClasses.sStripOdd)){s.asDestoryStrips[1]+=s.oClasses.sStripOdd+" "}if($(d[1]).hasClass(s.oClasses.sStripEven)){s.asDestoryStrips[1]+=s.oClasses.sStripEven}d.removeClass(s.asStripClasses.join(" "))}var p=this.getElementsByTagName("thead");var h=p.length===0?[]:_fnGetUniqueThs(p[0]);var c;if(typeof oInit.aoColumns=="undefined"){c=[];for(e=0,a=h.length;e<a;e++){c.push(null)}}else{c=oInit.aoColumns}for(e=0,a=c.length;e<a;e++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==a){if(c[e]===null){c[e]={}}c[e].bVisible=oInit.saved_aoColumns[e].bVisible}_fnAddColumn(s,h?h[e]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(e=oInit.aoColumnDefs.length-1;e>=0;e--){var g=oInit.aoColumnDefs[e].aTargets;if(!$.isArray(g)){_fnLog(s,1,"aTargets must be an array of targets, not a "+typeof g)}for(t=0,n=g.length;t<n;t++){if(typeof g[t]=="number"&&g[t]>=0){while(s.aoColumns.length<=g[t]){_fnAddColumn(s)}_fnColumnOptions(s,g[t],oInit.aoColumnDefs[e])}else if(typeof g[t]=="number"&&g[t]<0){_fnColumnOptions(s,s.aoColumns.length+g[t],oInit.aoColumnDefs[e])}else if(typeof g[t]=="string"){for(o=0,i=s.aoColumns.length;o<i;o++){if(g[t]=="_all"||s.aoColumns[o].nTh.className.indexOf(g[t])!=-1){_fnColumnOptions(s,o,oInit.aoColumnDefs[e])}}}}}}if(typeof c!="undefined"){for(e=0,a=c.length;e<a;e++){_fnColumnOptions(s,e,c[e])}}for(e=0,a=s.aaSorting.length;e<a;e++){if(s.aaSorting[e][0]>=s.aoColumns.length){s.aaSorting[e][0]=0}var _=s.aoColumns[s.aaSorting[e][0]];if(typeof s.aaSorting[e][2]=="undefined"){s.aaSorting[e][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof s.saved_aaSorting=="undefined"){s.aaSorting[e][1]=_.asSorting[0]}for(t=0,n=_.asSorting.length;t<n;t++){if(s.aaSorting[e][1]==_.asSorting[t]){s.aaSorting[e][2]=t;break}}}_fnSortingClasses(s);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}s.nTHead=this.getElementsByTagName("thead")[0];s.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){s.nTFoot=this.getElementsByTagName("tfoot")[0]}if(l){for(e=0;e<oInit.aaData.length;e++){_fnAddData(s,oInit.aaData[e])}}else{_fnGatherData(s)}s.aiDisplay=s.aiDisplayMaster.slice();s.bInitialised=true;if(r===false){_fnInitalise(s)}})}}(jQuery,window,document);
$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:a._iDisplayLength===-1?0:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:a._iDisplayLength===-1?0:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}};$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(a,i,e){var t=a.oLanguage.oPaginate;var l=function(i){i.preventDefault();if(a.oApi._fnPageChange(a,i.data.action)){e(a)}};$(i).append('<ul class="pagination">'+'<li class="prev disabled"><a href="#">&larr; '+t.sPrevious+"</a></li>"+'<li class="next disabled"><a href="#">'+t.sNext+" &rarr; </a></li>"+"</ul>");var s=$("a",i);$(s[0]).bind("click.DT",{action:"previous"},l);$(s[1]).bind("click.DT",{action:"next"},l)},fnUpdate:function(a,i){var e=5;var t=a.oInstance.fnPagingInfo();var l=a.aanFeatures.p;var s,n,o,r,f,g=Math.floor(e/2);if(t.iTotalPages<e){r=1;f=t.iTotalPages}else if(t.iPage<=g){r=1;f=e}else if(t.iPage>=t.iTotalPages-g){r=t.iTotalPages-e+1;f=t.iTotalPages}else{r=t.iPage-g+1;f=r+e-1}for(s=0,iLen=l.length;s<iLen;s++){$("li:gt(0)",l[s]).filter(":not(:last)").remove();for(n=r;n<=f;n++){o=n==t.iPage+1?'class="active"':"";$("<li "+o+'><a href="#">'+n+"</a></li>").insertBefore($("li:last",l[s])[0]).bind("click",function(e){e.preventDefault();a._iDisplayStart=(parseInt($("a",this).text(),10)-1)*t.iLength;i(a)})}if(t.iPage===0){$("li:first",l[s]).addClass("disabled")}else{$("li:first",l[s]).removeClass("disabled")}if(t.iPage===t.iTotalPages-1||t.iTotalPages===0){$("li:last",l[s]).addClass("disabled")}else{$("li:last",l[s]).removeClass("disabled")}}}}});
!function(e){var t=(e.browser.msie?"paste":"input")+".masked_input";var n=window.orientation!=undefined;e.masked_inputed_input={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};e.fn.extend({caret:function(e,t){if(this.length==0)return;if(typeof e=="number"){t=typeof t=="number"?t:e;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(e,t)}else if(this.createTextRange){var n=this.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",e);n.select()}})}else{if(this[0].setSelectionRange){e=this[0].selectionStart;t=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5);t=e+n.text.length}return{begin:e,end:t}}},unmasked_input:function(){return this.trigger("unmasked_input")},masked_input:function(i,a){if(!i&&this.length>0){var r=e(this[0]);var l=r.data("tests");return e.map(r.data("buffer"),function(e,t){return l[t]?e:null}).join("")}a=e.extend({placeholder:"_",completed:null},a);var u=e.masked_inputed_input.definitions;var l=[];var s=i.length;var f=null;var o=i.length;e.each(i.split(""),function(e,t){if(t=="?"){o--;s=e}else if(u[t]){l.push(new RegExp(u[t]));if(f==null)f=l.length-1}else{l.push(null)}});return this.each(function(){var r=e(this);var c=e.map(i.split(""),function(e,t){if(e!="?")return u[e]?a.placeholder:e});var d=false;var h=r.val();r.data("buffer",c).data("tests",l);function v(e){while(++e<=o&&!l[e]);return e}function p(e){while(!l[e]&&--e>=0);for(var t=e;t<o;t++){if(l[t]){c[t]=a.placeholder;var n=v(t);if(n<o&&l[t].test(c[n])){c[t]=c[n]}else break}}_();r.caret(Math.max(f,e))}function m(e){for(var t=e,n=a.placeholder;t<o;t++){if(l[t]){var i=v(t);var r=c[t];c[t]=n;if(i<o&&l[i].test(r))n=r;else break}}}function g(t){var i=e(this).caret();var a=t.keyCode;d=a<16||a>16&&a<32||a>32&&a<41;if(i.begin-i.end!=0&&(!d||a==8||a==46))k(i.begin,i.end);if(a==8||a==46||n&&a==127){p(i.begin+(a==46?0:-1));return false}else if(a==27){r.val(h);r.caret(0,y());return false}}function b(t){if(d){d=false;return t.keyCode==8?false:null}t=t||window.event;var n=t.charCode||t.keyCode||t.which;var i=e(this).caret();if(t.ctrlKey||t.altKey||t.metaKey){return true}else if(n>=32&&n<=125||n>186){var u=v(i.begin-1);if(u<o){var s=String.fromCharCode(n);if(l[u].test(s)){m(u);c[u]=s;_();var f=v(u);e(this).caret(f);if(a.completed&&f==o)a.completed.call(r)}}}return false}function k(e,t){for(var n=e;n<t&&n<o;n++){if(l[n])c[n]=a.placeholder}}function _(){return r.val(c.join("")).val()}function y(e){var t=r.val();var n=-1;for(var i=0,u=0;i<o;i++){if(l[i]){c[i]=a.placeholder;while(u++<t.length){var d=t.charAt(u-1);if(l[i].test(d)){c[i]=d;n=i;break}}if(u>t.length)break}else if(c[i]==t[u]&&i!=s){u++;n=i}}if(!e&&n+1<s){r.val("");k(0,o)}else if(e||n+1>=s){_();if(!e)r.val(r.val().substring(0,n+1))}return s?i:f}if(!r.attr("readonly"))r.one("unmasked_input",function(){r.unbind(".masked_input").removeData("buffer").removeData("tests")}).bind("focus.masked_input",function(){h=r.val();var e=y();_();setTimeout(function(){if(e==i.length)r.caret(0,e);else r.caret(e)},0)}).bind("blur.masked_input",function(){y();if(r.val()!=h)r.change()}).bind("keydown.masked_input",g).bind("keypress.masked_input",b).bind(t,function(){setTimeout(function(){r.caret(y(true))},0)});y()})}})}(jQuery);
!function(){function e(e){console.log("$f.fireEvent",[].slice.call(e))}function n(e){if(!e||typeof e!="object"){return e}var t=new e.constructor;for(var i in e){if(e.hasOwnProperty(i)){t[i]=n(e[i])}}return t}function t(e,n){if(!e){return}var t,i=0,r=e.length;if(r===undefined){for(t in e){if(n.call(e[t],t,e[t])===false){break}}}else{for(var f=e[0];i<r&&n.call(f,i,f)!==false;f=e[++i]){}}return e}function i(e){return document.getElementById(e)}function r(e,n,i){if(typeof n!="object"){return e}if(e&&n){t(n,function(n,t){if(!i||typeof t!="function"){e[n]=t}})}return e}function f(e){var n=e.indexOf(".");if(n!=-1){var i=e.slice(0,n)||"*";var r=e.slice(n+1,e.length);var f=[];t(document.getElementsByTagName(i),function(){if(this.className&&this.className.indexOf(r)!=-1){f.push(this)}});return f}}function o(e){e=e||window.event;if(e.preventDefault){e.stopPropagation();e.preventDefault()}else{e.returnValue=false;e.cancelBubble=true}return false}function a(e,n,t){e[n]=e[n]||[];e[n].push(t)}function u(){return"_"+(""+Math.random()).slice(2,10)}var l=function(e,n,i){var f=this,o={},l={};f.index=n;if(typeof e=="string"){e={url:e}}r(this,e,true);t("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var e="on"+this;if(e.indexOf("*")!=-1){e=e.slice(0,e.length-1);var t="onBefore"+e.slice(2);f[t]=function(e){a(l,t,e);return f}}f[e]=function(n){a(l,e,n);return f};if(n==-1){if(f[t]){i[t]=f[t]}if(f[e]){i[e]=f[e]}}});r(this,{onCuepoint:function(e,t){if(arguments.length==1){o.embedded=[null,e];return f}if(typeof e=="number"){e=[e]}var r=u();o[r]=[e,t];if(i.isLoaded()){i._api().fp_addCuepoints(e,n,r)}return f},update:function(e){r(f,e);if(i.isLoaded()){i._api().fp_updateClip(e,n)}var t=i.getConfig();var o=n==-1?t.clip:t.playlist[n];r(o,e,true)},_fireEvent:function(e,a,u,s){if(e=="onLoad"){t(o,function(e,t){if(t[0]){i._api().fp_addCuepoints(t[0],n,e)}});return false}s=s||f;if(e=="onCuepoint"){var c=o[a];if(c){return c[1].call(i,s,u)}}if(a&&"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(e)!=-1){r(s,a);if(a.metaData){if(!s.duration){s.duration=a.metaData.duration}else{s.fullDuration=a.metaData.duration}}}var d=true;t(l[e],function(){d=this.call(i,s,a,u)});return d}});if(e.onCuepoint){var s=e.onCuepoint;f.onCuepoint.apply(f,typeof s=="function"?[s]:s);delete e.onCuepoint}t(e,function(n,t){if(typeof t=="function"){a(l,n,t);delete e[n]}});if(n==-1){i.onCuepoint=this.onCuepoint}};var s=function(e,n,i,f){var o=this,a={},l=false;if(f){r(a,f)}t(n,function(e,t){if(typeof t=="function"){a[e]=t;delete n[e]}});r(this,{animate:function(t,r,f){if(!t){return o}if(typeof r=="function"){f=r;r=500}if(typeof t=="string"){var l=t;t={};t[l]=r;r=500}if(f){var s=u();a[s]=f}if(r===undefined){r=500}n=i._api().fp_animate(e,t,r,s);return o},css:function(t,f){if(f!==undefined){var a={};a[t]=f;t=a}n=i._api().fp_css(e,t);r(o,n);return o},show:function(){this.display="block";i._api().fp_showPlugin(e);return o},hide:function(){this.display="none";i._api().fp_hidePlugin(e);return o},toggle:function(){this.display=i._api().fp_togglePlugin(e);return o},fadeTo:function(n,t,r){if(typeof t=="function"){r=t;t=500}if(r){var f=u();a[f]=r}this.display=i._api().fp_fadeTo(e,n,t,f);this.opacity=n;return o},fadeIn:function(e,n){return o.fadeTo(1,e,n)},fadeOut:function(e,n){return o.fadeTo(0,e,n)},getName:function(){return e},getPlayer:function(){return i},_fireEvent:function(n,f,u){if(n=="onUpdate"){var s=i._api().fp_getPlugin(e);if(!s){return}r(o,s);delete o.methods;if(!l){t(s.methods,function(){var n=""+this;o[n]=function(){var t=[].slice.call(arguments);var r=i._api().fp_invoke(e,n,t);return r==="undefined"||r===undefined?o:r}});l=true}}var c=a[n];if(c){var d=c.apply(o,f);if(n.slice(0,1)=="_"){delete a[n]}return d}return o}})};function c(f,c,p){var h=this,g=null,v=false,y,m,w=[],_={},b={},L,E,P,S,x,C;r(h,{id:function(){return L},isLoaded:function(){return g!==null&&g.fp_play!==undefined&&!v},getParent:function(){return f},hide:function(e){if(e){f.style.height="0px"}if(h.isLoaded()){g.style.height="0px"}return h},show:function(){f.style.height=C+"px";if(h.isLoaded()){g.style.height=x+"px"}return h},isHidden:function(){return h.isLoaded()&&parseInt(g.style.height,10)===0},load:function(e){if(!h.isLoaded()&&h._fireEvent("onBeforeLoad")!==false){var n=function(){y=f.innerHTML;if(y&&!flashembed.isSupported(c.version)){f.innerHTML=""}if(e){e.cached=true;a(b,"onLoad",e)}flashembed(f,c,{config:p})};var i=0;t(d,function(){this.unload(function(e){if(++i==d.length){n()}})})}return h},unload:function(e){if(this.isFullscreen()&&/WebKit/i.test(navigator.userAgent)){if(e){e(false)}return h}if(y.replace(/\s/g,"")!==""){if(h._fireEvent("onBeforeUnload")===false){if(e){e(false)}return h}v=true;try{if(g){g.fp_close();h._fireEvent("onUnload")}}catch(n){}var t=function(){g=null;f.innerHTML=y;v=false;if(e){e(true)}};setTimeout(t,50)}else if(e){e(false)}return h},getClip:function(e){if(e===undefined){e=S}return w[e]},getCommonClip:function(){return m},getPlaylist:function(){return w},getPlugin:function(e){var n=_[e];if(!n&&h.isLoaded()){var t=h._api().fp_getPlugin(e);if(t){n=new s(e,t,h);_[e]=n}}return n},getScreen:function(){return h.getPlugin("screen")},getControls:function(){return h.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return h.getPlugin("logo")._fireEvent("onUpdate")}catch(e){}},getPlay:function(){return h.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(e){return e?n(p):p},getFlashParams:function(){return c},loadPlugin:function(e,n,t,i){if(typeof t=="function"){i=t;t={}}var r=i?u():"_";h._api().fp_loadPlugin(e,n,t,r);var f={};f[r]=i;var o=new s(e,null,h,f);_[e]=o;return o},getState:function(){return h.isLoaded()?g.fp_getState():-1},play:function(e,n){var t=function(){if(e!==undefined){h._api().fp_play(e,n)}else{h._api().fp_play()}};if(h.isLoaded()){t()}else if(v){setTimeout(function(){h.play(e,n)},50)}else{h.load(function(){t()})}return h},getVersion:function(){var e="flowplayer.js 3.2.6";if(h.isLoaded()){var n=g.fp_getVersion();n.push(e);return n}return e},_api:function(){if(!h.isLoaded()){throw"Flowplayer "+h.id()+" not loaded when calling an API method"}return g},setClip:function(e){h.setPlaylist([e]);return h},getIndex:function(){return P},_swfHeight:function(){return g.clientHeight}});t("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var e="on"+this;if(e.indexOf("*")!=-1){e=e.slice(0,e.length-1);var n="onBefore"+e.slice(2);h[n]=function(e){a(b,n,e);return h}}h[e]=function(n){a(b,e,n);return h}});t("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var e=this;h[e]=function(n,t){if(!h.isLoaded()){return h}var i=null;if(n!==undefined&&t!==undefined){i=g["fp_"+e](n,t)}else{i=n===undefined?g["fp_"+e]():g["fp_"+e](n)}return i==="undefined"||i===undefined?h:i}});h._fireEvent=function(n){if(typeof n=="string"){n=[n]}var r=n[0],f=n[1],o=n[2],a=n[3],u=0;if(p.debug){e(n)}if(!h.isLoaded()&&r=="onLoad"&&f=="player"){g=g||i(E);x=h._swfHeight();t(w,function(){this._fireEvent("onLoad")});t(_,function(e,n){n._fireEvent("onUpdate")});m._fireEvent("onLoad")}if(r=="onLoad"&&f!="player"){return}if(r=="onError"){if(typeof f=="string"||typeof f=="number"&&typeof o=="number"){f=o;o=a}}if(r=="onContextMenu"){t(p.contextMenu[f],function(e,n){n.call(h)});return}if(r=="onPluginEvent"||r=="onBeforePluginEvent"){var s=f.name||f;var c=_[s];if(c){c._fireEvent("onUpdate",f);return c._fireEvent(o,n.slice(3))}return}if(r=="onPlaylistReplace"){w=[];var d=0;t(f,function(){w.push(new l(this,d++,h))})}if(r=="onClipAdd"){if(f.isInStream){return}f=new l(f,o,h);w.splice(o,0,f);for(u=o+1;u<w.length;u++){w[u].index++}}var v=true;if(typeof f=="number"&&f<w.length){S=f;var y=w[f];if(y){v=y._fireEvent(r,o,a)}if(!y||v!==false){v=m._fireEvent(r,o,a,y)}}t(b[r],function(){v=this.call(h,f,o);if(this.cached){b[r].splice(u,1)}if(v===false){return false}u++});return v};function M(){if($f(f)){$f(f).getParent().innerHTML="";P=$f(f).getIndex();d[P]=h}else{d.push(h);P=d.length-1}C=parseInt(f.style.height,10)||f.clientHeight;L=f.id||"fp"+u();E=c.id||L+"_api";c.id=E;p.playerId=L;if(typeof p=="string"){p={clip:{url:p}}}if(typeof p.clip=="string"){p.clip={url:p.clip}}p.clip=p.clip||{};if(f.getAttribute("href",2)&&!p.clip.url){p.clip.url=f.getAttribute("href",2)}m=new l(p.clip,-1,h);p.playlist=p.playlist||[p.clip];var e=0;t(p.playlist,function(){var n=this;if(typeof n=="object"&&n.length){n={url:""+n}}t(p.clip,function(e,t){if(t!==undefined&&n[e]===undefined&&typeof t!="function"){n[e]=t}});p.playlist[e]=n;n=new l(n,e,h);w.push(n);e++});t(p,function(e,n){if(typeof n=="function"){if(m[e]){m[e](n)}else{a(b,e,n)}delete p[e]}});t(p.plugins,function(e,n){if(n){_[e]=new s(e,n,h)}});if(!p.plugins||p.plugins.controls===undefined){_.controls=new s("controls",null,h)}_.canvas=new s("canvas",null,h);y=f.innerHTML;function n(e){var n=h.hasiPadSupport&&h.hasiPadSupport();if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(w[0].url)&&!n){return true}if(!h.isLoaded()&&h._fireEvent("onBeforeClick")!==false){h.load()}return o(e)}function i(){if(y.replace(/\s/g,"")!==""){if(f.addEventListener){f.addEventListener("click",n,false)}else if(f.attachEvent){f.attachEvent("onclick",n)}}else{if(f.addEventListener){f.addEventListener("click",o,false)}h.load()}}setTimeout(i,0)}if(typeof f=="string"){var T=i(f);if(!T){throw"Flowplayer cannot access element: "+f}f=T;M()}else{M()}}var d=[];function p(e){this.length=e.length;this.each=function(n){t(e,n)};this.size=function(){return e.length}}window.flowplayer=window.$f=function(){var e=null;var o=arguments[0];if(!arguments.length){t(d,function(){if(this.isLoaded()){e=this;return false}});return e||d[0]}if(arguments.length==1){if(typeof o=="number"){return d[o]}else{if(o=="*"){return new p(d)}t(d,function(){if(this.id()==o.id||this.id()==o||this.getParent()==o){e=this;return false}});return e}}if(arguments.length>1){var a=arguments[1],u=arguments.length==3?arguments[2]:{};if(typeof a=="string"){a={src:a}}a=r({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:false},a);if(typeof o=="string"){if(o.indexOf(".")!=-1){var l=[];t(f(o),function(){l.push(new c(this,n(a),n(u)))});return new p(l)}else{var s=i(o);return new c(s!==null?s:o,a,u)}}else if(o){return new c(o,a,u)}}return null};r(window.$f,{fireEvent:function(){var e=[].slice.call(arguments);var n=$f(e[0]);return n?n._fireEvent(e.slice(1)):null},addPlugin:function(e,n){c.prototype[e]=n;return $f},each:t,extend:r});if(typeof jQuery=="function"){jQuery.fn.flowplayer=function(e,t){if(!arguments.length||typeof arguments[0]=="number"){var i=[];this.each(function(){var e=$f(this);if(e){i.push(e)}});return arguments.length?i[arguments[0]]:new p(i)}return this.each(function(){$f(this,n(e),t?n(t):{})})}}}();!function(){var e=document.all,n="http://www.adobe.com/go/getflashplayer",t=typeof jQuery=="function",i=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,r={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}function f(e,n){if(n){for(var t in n){if(n.hasOwnProperty(t)){e[t]=n[t]}}}return e}function o(e,n){var t=[];for(var i in e){if(e.hasOwnProperty(i)){t[i]=n(e[i])}}return t}window.flashembed=function(e,n,t){if(typeof e=="string"){e=document.getElementById(e.replace("#",""))}if(!e){return}if(typeof n=="string"){n={src:n}}return new l(e,f(f({},r),n),t)};var a=f(window.flashembed,{conf:r,getVersion:function(){var e,n;try{n=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");n=e&&e.GetVariable("$version")}catch(r){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");n=e&&e.GetVariable("$version")}catch(f){}}}n=i.exec(n);return n?[n[1],n[3]]:[0,0]},asString:function(e){if(e===null||e===undefined){return null}var n=typeof e;if(n=="object"&&e.push){n="array"}switch(n){case"string":e=e.replace(new RegExp('(["\\\\])',"g"),"\\$1");e=e.replace(/^\s?(\d+\.?\d+)%/,"$1pct");return'"'+e+'"';case"array":return"["+o(e,function(e){return a.asString(e)}).join(",")+"]";case"function":return'"function()"';case"object":var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push('"'+i+'":'+a.asString(e[i]))}}return"{"+t.join(",")+"}"}return String(e).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(n,t){n=f({},n);var i='<object width="'+n.width+'" height="'+n.height+'" id="'+n.id+'" name="'+n.id+'"';if(n.cachebusting){n.src+=(n.src.indexOf("?")!=-1?"&":"?")+Math.random()}if(n.w3c||!e){i+=' data="'+n.src+'" type="application/x-shockwave-flash"'}else{i+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'}i+=">";if(n.w3c||e){i+='<param name="movie" value="'+n.src+'" />'}n.width=n.height=n.id=n.w3c=n.src=null;n.onFail=n.version=n.expressInstall=null;for(var r in n){if(n[r]){i+='<param name="'+r+'" value="'+n[r]+'" />'}}var o="";if(t){for(var u in t){if(t[u]){var l=t[u];o+=u+"="+(/function|object/.test(typeof l)?a.asString(l):l)+"&"}}o=o.slice(0,-1);i+='<param name="flashvars" value=\''+o+"' />"}i+="</object>";return i},isSupported:function(e){return u[0]>e[0]||u[0]==e[0]&&u[1]>=e[1]}});var u=a.getVersion();function l(t,i,r){if(a.isSupported(i.version)){t.innerHTML=a.getHTML(i,r)}else if(i.expressInstall&&a.isSupported([6,65])){t.innerHTML=a.getHTML(f(i,{src:i.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title})}else{if(!t.innerHTML.replace(/\s/g,"")){t.innerHTML="<h2>Flash version "+i.version+" or greater is required</h2>"+"<h3>"+(u[0]>0?"Your version is "+u:"You have no flash plugin installed")+"</h3>"+(t.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+n+"'>here</a></p>");if(t.tagName=="A"){t.onclick=function(){location.href=n}}}if(i.onFail){var o=i.onFail.call(this);if(typeof o=="string"){t.innerHTML=o}}}if(e){window[i.id]=document.getElementById(i.id)}f(this,{getRoot:function(){return t},getOptions:function(){return i},getConf:function(){return r},getApi:function(){return t.firstChild}})}if(t){jQuery.tools=jQuery.tools||{version:"3.2.6"};jQuery.tools.flashembed={conf:r};jQuery.fn.flashembed=function(e,n){return this.each(function(){jQuery(this).data("flashembed",flashembed(this,e,n))})}}}();
!function(e){e.tools=e.tools||{version:"1.2.5"};e.tools.overlay={addEffect:function(e,t,o){n[e]=[t,o]},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:!e.browser.msie||e.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var t=[],n={};e.tools.overlay.addEffect("default",function(t,n){var o=this.getConf(),i=e(window);if(!o.fixed){t.top+=i.scrollTop();t.left+=i.scrollLeft()}t.position=o.fixed?"fixed":"absolute";this.getOverlay().css(t).fadeIn(o.speed,n)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)});function o(o,i){var r=this,f=o.add(r),l=e(window),c,s,a,u=e.tools.expose&&(i.mask||i.expose),d=Math.random().toString().slice(10);if(u){if(typeof u=="string"){u={color:u}}u.closeOnClick=u.closeOnEsc=false}var g=i.target||o.attr("rel");s=g?e(g):null||o;if(!s.length){throw"Could not find Overlay: "+g}if(o&&o.index(s)==-1){o.click(function(e){r.load(e);return e.preventDefault()})}e.extend(r,{load:function(o){if(r.isOpened()){return r}var c=n[i.effect];if(!c){throw'Overlay: cannot find effect : "'+i.effect+'"'}if(i.oneInstance){e.each(t,function(){this.close(o)})}o=o||e.Event();o.type="onBeforeLoad";f.trigger(o);if(o.isDefaultPrevented()){return r}a=true;if(u){e(s).expose(u)}var g=i.top,h=i.left,p=s.outerWidth({margin:true}),v=s.outerHeight({margin:true});if(typeof g=="string"){g=g=="center"?Math.max((l.height()-v)/2,0):parseInt(g,10)/100*l.height()}if(h=="center"){h=Math.max((l.width()-p)/2,0)}c[0].call(r,{top:g,left:h},function(){if(a){o.type="onLoad";f.trigger(o)}});if(u&&i.closeOnClick){e.mask.getMask().one("click",r.close)}if(i.closeOnClick){e(document).bind("click."+d,function(t){if(!e(t.target).parents(s).length){r.close(t)}})}if(i.closeOnEsc){e(document).bind("keydown."+d,function(e){if(e.keyCode==27){r.close(e)}})}return r},close:function(t){if(!r.isOpened()){return r}t=t||e.Event();t.type="onBeforeClose";f.trigger(t);if(t.isDefaultPrevented()){return}a=false;n[i.effect][1].call(r,function(){t.type="onClose";f.trigger(t)});e(document).unbind("click."+d).unbind("keydown."+d);if(u){e.mask.close()}return r},getOverlay:function(){return s},getTrigger:function(){return o},getClosers:function(){return c},isOpened:function(){return a},getConf:function(){return i}});e.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(t,n){if(e.isFunction(i[n])){e(r).bind(n,i[n])}r[n]=function(t){if(t){e(r).bind(n,t)}return r}});c=s.find(i.close||".close");if(!c.length&&!i.close){c=e('<a class="close"></a>');s.prepend(c)}c.click(function(e){r.close(e)});if(i.load){r.load()}}e.fn.overlay=function(n){var i=this.data("overlay");if(i){return i}if(e.isFunction(n)){n={onBeforeLoad:n}}n=e.extend(true,{},e.tools.overlay.conf,n);this.each(function(){i=new o(e(this),n);t.push(i);e(this).data("overlay",i)});return n.api?i:this}}(jQuery);
!function(e){var t=e.tools.overlay;t.plugins=t.plugins||{};t.plugins.gallery={version:"1.0.0",conf:{imgId:"img",next:".next",prev:".prev",info:".info",progress:".progress",disabledClass:"disabled",activeClass:"active",opacity:.8,speed:"slow",template:"<strong>${title}</strong> <span>Image ${index} of ${total}</span>",autohide:true,preload:true,api:false}};e.fn.gallery=function(a){var n=e.extend({},t.plugins.gallery.conf),s;e.extend(n,a);s=this.overlay();var r=this,d=s.getOverlay(),o=d.find(n.next),l=d.find(n.prev),f=d.find(n.info),c=d.find(n.progress),h=l.add(o).add(f).css({opacity:n.opacity}),v=s.getClosers(),u;function p(i){c.fadeIn();h.hide();v.hide();var t=i.attr("href");var a=new Image;a.onload=function(){c.fadeOut();var s=e("#"+n.imgId,d);if(!s.length){s=e("<img/>").attr("id",n.imgId).css("visibility","hidden");d.prepend(s)}s.attr("src",t).css("visibility","hidden");var p=a.width;var g=(e(window).width()-p)/2;u=r.index(r.filter('[href="'+t+'"]'));r.removeClass(n.activeClass).eq(u).addClass(n.activeClass);var m=n.disabledClass;h.removeClass(m);if(u===0){l.addClass(m)}if(u==r.length-1){o.addClass(m)}var y=n.template.replace("${title}",i.attr("title")).replace("${index}",u+1).replace("${total}",r.length);var C=parseInt(f.css("paddingLeft"),10)+parseInt(f.css("paddingRight"),10);f.html(y).css({width:p-C});d.animate({width:p,height:a.height,left:g},n.speed,function(){s.hide().css("visibility","visible").fadeIn(function(){if(!n.autohide){h.fadeIn();v.show()}})})};a.onerror=function(){d.fadeIn().html("Cannot find image "+t)};a.src=t;if(n.preload){r.filter(":eq("+(u-1)+"), :eq("+(u+1)+")").each(function(){var i=new Image;i.src=e(this).attr("href")})}}function g(e,t){e.click(function(){if(e.hasClass(n.disabledClass)){return}var a=r.eq(i=u+(t?1:-1));if(a.length){p(a)}})}g(o,true);g(l);e(document).keydown(function(e){if(!d.is(":visible")||e.altKey||e.ctrlKey){return}if(e.keyCode==37||e.keyCode==39){var i=e.keyCode==37?l:o;i.click();return e.preventDefault()}return true});function m(){if(!d.is(":animated")){h.show();v.show()}}if(n.autohide){d.hover(m,function(){h.fadeOut();v.hide()}).mousemove(m)}var y;this.each(function(){var i=e(this),t=e(this).overlay(),a=t;t.onBeforeLoad(function(){p(i)});t.onClose(function(){r.removeClass(n.activeClass)})});return n.api?y:this}}(jQuery);
!function(n){n.tools=n.tools||{version:"1.2.5"};var e;e=n.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function o(){if(n.browser.msie){var e=n(document).height(),o=n(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e-o<20?o:e]}return[n(document).width(),n(document).height()]}function t(e){if(e){return e.call(n.mask)}}var i,s,c,d,a;n.mask={load:function(f,r){if(c){return this}if(typeof f=="string"){f={color:f}}f=f||d;d=f=n.extend(n.extend({},e.conf),f);i=n("#"+f.maskId);if(!i.length){i=n("<div/>").attr("id",f.maskId);n("body").append(i)}var l=o();i.css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",opacity:f.startOpacity,zIndex:f.zIndex});if(f.color){i.css("backgroundColor",f.color)}if(t(f.onBeforeLoad)===false){return this}if(f.closeOnEsc){n(document).bind("keydown.mask",function(e){if(e.keyCode==27){n.mask.close(e)}})}if(f.closeOnClick){i.bind("click.mask",function(e){n.mask.close(e)})}n(window).bind("resize.mask",function(){n.mask.fit()});if(r&&r.length){a=r.eq(0).css("zIndex");n.each(r,function(){var e=n(this);if(!/relative|absolute|fixed/i.test(e.css("position"))){e.css("position","relative")}});s=r.css({zIndex:Math.max(f.zIndex+1,a=="auto"?0:a)})}i.css({display:"block"}).fadeTo(f.loadSpeed,f.opacity,function(){n.mask.fit();t(f.onLoad);c="full"});c=true;return this},close:function(){if(c){if(t(d.onBeforeClose)===false){return this}i.fadeOut(d.closeSpeed,function(){t(d.onClose);if(s){s.css({zIndex:a})}c=false});n(document).unbind("keydown.mask");i.unbind("click.mask");n(window).unbind("resize.mask")}return this},fit:function(){if(c){var n=o();i.css({width:n[0],height:n[1]})}},getMask:function(){return i},isLoaded:function(n){return n?c=="full":c},getConf:function(){return d},getExposed:function(){return s}};n.fn.mask=function(e){n.mask.load(e);return this};n.fn.expose=function(e){n.mask.load(e,this);return this}}(jQuery);
!function(e,t,i,n){"use strict";var a=i(e),o=i(t),r=i("html");var s=i.fancybox=function(){s.open.apply(this,arguments)};var l=s.isTouch=t.createTouch!==n||e.ontouchstart!==n;var f=function(e){return e&&e.hasOwnProperty&&e instanceof i};var c=function(e){return e&&i.type(e)==="string"};var d=function(e){return c(e)&&e.indexOf("%")>0};var p=function(e,t){var i=parseFloat(e,10)||0;if(t&&d(e)){i=s.getViewport()[t]/100*i}return Math.ceil(i)};var h=function(e,t){return p(e,t)+"px"};var u=Date.now||function(){return+new Date};var g=function(e){var t=c(e)?i(e):e;if(t&&t.length){t.removeClass("fancybox-wrap").stop(true).trigger("onReset").hide().unbind();try{t.find("iframe").unbind().attr("src",l?"":"//about:blank");setTimeout(function(){t.empty().remove();if(s.lock&&!s.coming&&!s.current){var e,n;i(".fancybox-margin").removeClass("fancybox-margin");e=a.scrollTop();n=a.scrollLeft();r.removeClass("fancybox-lock");s.lock.remove();s.lock=null;a.scrollTop(e).scrollLeft(n)}},150)}catch(n){}}};i.extend(s,{version:"3.0.0",defaults:{theme:"default",padding:15,margin:[30,55,30,55],loop:true,arrows:true,closeBtn:true,expander:!l,caption:{type:"outside"},overlay:{closeClick:true,speedIn:0,speedOut:250,showEarly:true,css:{}},helpers:{},width:800,height:450,minWidth:100,minHeight:100,maxWidth:99999,maxHeight:99999,aspectRatio:false,fitToView:true,autoHeight:true,autoWidth:true,autoResize:true,autoCenter:!l,topRatio:.5,leftRatio:.5,openEffect:"elastic",openSpeed:350,openEasing:"easeOutQuad",closeEffect:"elastic",closeSpeed:350,closeEasing:"easeOutQuad",nextEffect:"elastic",nextSpeed:350,nextEasing:"easeOutQuad",prevEffect:"elastic",prevSpeed:350,prevEasing:"easeOutQuad",autoPlay:false,playSpeed:3e3,onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeClose:i.noop,afterClose:i.noop,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-inner"></div></div>',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true"></iframe>',error:'<p class="fancybox-error">{{ERROR}}</p>',closeBtn:'<a title="{{CLOSE}}" class="fancybox-close" href="javascript:;"></a>',next:'<a title="{{NEXT}}" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="{{PREV}}" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},locale:"en",locales:{en:{CLOSE:"",NEXT:"",PREV:"",ERROR:"",EXPAND:"",SHRINK:"",PLAY_START:"",PLAY_STOP:""}},index:0,content:null,href:null,wrapCSS:"",modal:false,locked:true,preload:3,mouseWheel:true,scrolling:"auto",scrollOutside:true},current:null,coming:null,group:[],index:0,isActive:false,isOpen:false,isOpened:false,isMaximized:false,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,helpers:{},open:function(e,t){if(!e){return}if(false===s.close(true)){return}if(!i.isPlainObject(t)){t={}}s.opts=i.extend(true,{},s.defaults,t);s.populate(e);if(s.group.length){s._start(s.opts.index)}},populate:function(e){var t=[];if(!i.isArray(e)){e=[e]}i.each(e,function(a,o){var r=i.extend(true,{},s.opts),d,p,h,u,g;if(i.isPlainObject(o)){d=o}else if(c(o)){d={href:o}}else if(f(o)||i.type(o)==="object"&&o.nodeType){p=i(o);d=i(p).get(0);if(!d.href){d={href:o}}d=i.extend({href:p.data("fancybox-href")||p.attr("href")||d.href,title:p.data("fancybox-title")||p.attr("title")||d.title,type:p.data("fancybox-type"),element:p},p.data("fancybox-options"))}else{return}if(!d.type&&(d.content||d.href)){d.type=d.content?"html":s.guessType(p,d.href)}h=d.type||s.opts.type;if(h==="image"||h==="swf"){r.autoWidth=r.autoHeight=false;r.scrolling="visible"}if(h==="image"){r.aspectRatio=true}if(h==="iframe"){r.autoWidth=false;r.scrolling=l?"scroll":"visible"}if(e.length<2){r.margin=30}d=i.extend(true,{},r,d);u=d.margin;g=d.padding;if(i.type(u)==="number"){d.margin=[u,u,u,u]}if(i.type(g)==="number"){d.padding=[g,g,g,g]}if(d.modal){i.extend(true,d,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,overlay:{closeClick:false}})}if(d.autoSize!==n){d.autoWidth=d.autoHeight=!!d.autoSize}if(d.width==="auto"){d.autoWidth=true}if(d.height==="auto"){d.autoHeight=true}t.push(d)});s.group=s.group.concat(t)},cancel:function(){var e=s.coming;if(!e||false===s.trigger("onCancel")){return}s.hideLoading();if(s.ajaxLoad){s.ajaxLoad.abort()}if(s.imgPreload){s.imgPreload.onload=s.imgPreload.onerror=null}if(e.wrap){g(e.wrap)}s.ajaxLoad=s.imgPreload=s.coming=null;if(!s.current){s._afterZoomOut(e)}},close:function(e){if(e&&i.type(e)==="object"){e.preventDefault()}s.cancel();if(!s.isActive||s.coming||false===s.trigger("beforeClose")){return}s.unbind();s.isClosing=true;if(s.lock){s.lock.css("overflow","hidden")}if(!s.isOpen||e===true){s._afterZoomOut()}else{s.isOpen=s.isOpened=false;s.transitions.close()}},prev:function(e){var t=s.current;if(t){s.jumpto(t.index-1,c(e)?e:t.direction.prev)}},next:function(e){var t=s.current;if(t){s.jumpto(t.index+1,c(e)?e:t.direction.next)}},jumpto:function(e,t){var i=s.current;if(!(s.coming&&s.coming.index===e)){s.cancel();if(i.index==e){t=null}else if(!t){t=i.direction[e>i.index?"next":"prev"]}s.direction=t;s._start(e)}}});i.extend(s,{guessType:function(e,t){var i=e&&e.prop("class")?e.prop("class").match(/fancybox\.(\w+)/):0,n=false;if(i){return i[1]}if(c(t)){if(t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)){n="image"}else if(t.match(/\.(swf)((\?|#).*)?$/i)){n="swf"}else if(t.charAt(0)==="#"){n="inline"}}else if(c(e)){n="html"}return n},trigger:function(e,t){var n,a=t||s.coming||s.current;if(!a){return}if(i.isFunction(a[e])){n=a[e].apply(a,Array.prototype.slice.call(arguments,1))}if(n===false||e==="afterClose"&&s.isActive){return false}if(a.helpers){i.each(a.helpers,function(t,n){var o=s.helpers[t],r;if(n&&o&&i.isFunction(o[e])){r=i.extend(true,{},o.defaults,n);o.opts=r;o[e](r,a)}})}i.event.trigger(e)},reposition:function(e,t){var i=t||s.current,n=i&&i.wrap,a;if(s.isOpen&&n){a=s._getPosition(i);if(e===false||e&&e.type==="scroll"){n.stop(true).animate(a,200).css("overflow","visible")}else{n.css(a)}}},update:function(e){var t=e&&e.type,n=u(),a=s.current,o;if(!a||!s.isOpen){return}if(t==="scroll"){if(s.wrap.outerHeight(true)>s.getViewport().h){return}if(s.didUpdate){clearTimeout(s.didUpdate)}s.didUpdate=setTimeout(function(){s.reposition(e);s.didUpdate=null},50);return}if(s.lock){s.lock.css("overflow","hidden")}s._setDimension();s.reposition(e);if(s.lock){s.lock.css("overflow","auto")}if(a.caption.type==="float"){o=s.getViewport().w-(s.wrap.outerWidth(true)-s.inner.width());a.caption.wrap.css("width",o).css("marginLeft",(o*.5-s.inner.width()*.5)*-1)}if(a.expander){if(a.canShrink){i(".fancybox-expand").show().attr("title",a.locales[a.locale].SHRINK)}else if(a.canExpand){i(".fancybox-expand").show().attr("title",a.locales[a.locale].EXPAND)}else{i(".fancybox-expand").hide()}}s.trigger("onUpdate")},toggle:function(e){var t=s.current;if(t&&s.isOpen){s.current.fitToView=i.type(e)==="boolean"?e:!s.current.fitToView;s.update(true)}},hideLoading:function(){i("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading();e=i('<div id="fancybox-loading"></div>').click(s.cancel).appendTo("body");if(!s.defaults.fixed){t=s.getViewport();e.css({position:"absolute",top:t.h*.5+t.y,left:t.w*.5+t.x})}},getViewport:function(){var t;if(s.lock){t={x:s.lock.scrollLeft(),y:s.lock.scrollTop(),w:s.lock[0].clientWidth,h:s.lock[0].clientHeight}}else{t={x:a.scrollLeft(),y:a.scrollTop(),w:l&&e.innerWidth?e.innerWidth:a.width(),h:l&&e.innerHeight?e.innerHeight:a.height()}}return t},unbind:function(){if(f(s.wrap)){s.wrap.unbind(".fb")}if(f(s.inner)){s.inner.unbind(".fb")}o.unbind(".fb");a.unbind(".fb")},rebind:function(){var e=s.current,t;s.unbind();if(!e||!s.isOpen){return}a.bind("orientationchange.fb"+(l?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),s.update);t=e.keys;if(t){o.bind("keydown.fb",function(a){var o=a.which||a.keyCode,r=a.target||a.srcElement;if(o===27&&s.coming){return false}if(!a.ctrlKey&&!a.altKey&&!a.shiftKey&&!a.metaKey&&!(r&&(r.type||i(r).is("[contenteditable]")))){i.each(t,function(t,r){if(r[o]!==n){a.preventDefault();if(e.group.length>1){s[t](r[o])}return false}if(i.inArray(o,r)>-1){a.preventDefault();if(t==="play"){s.slideshow.toggle()}else{s[t]()}return false}})}})}s.lastScroll=u();if(e.mouseWheel&&s.group.length>1){s.wrap.bind("DOMMouseScroll.fb mousewheel.fb MozMousePixelScroll.fb",function(e){var t=e.originalEvent,i=t.target||0,n=t.wheelDelta||t.detail||0,a=t.wheelDeltaX||0,o=t.wheelDeltaY||0,r=u();if(i&&i.style&&!(i.style.overflow&&i.style.overflow==="hidden")&&(i.clientWidth&&i.scrollWidth>i.clientWidth||i.clientHeight&&i.scrollHeight>i.clientHeight)){return}if(n===0||s.current&&s.current.canShrink){return}t.stopPropagation();if(s.lastScroll&&r-s.lastScroll<80){s.lastScroll=r;return}s.lastScroll=r;if(t.axis){if(t.axis===t.HORIZONTAL_AXIS){a=n*-1}else if(t.axis===t.VERTICAL_AXIS){o=n*-1}}if(a===0){if(o>0){s.prev("down")}else{s.next("up")}}else{if(a>0){s.prev("right")}else{s.next("left")}}})}s.touch.init()},rebuild:function(){var e=s.current;e.wrap.find(".fancybox-nav, .fancybox-close, .fancybox-expand").remove();if(e.arrows&&s.group.length>1){if(e.loop||e.index>0){i(s._translate(e.tpl.prev)).appendTo(s.inner).bind("click.fb",s.prev)}if(e.loop||e.index<s.group.length-1){i(s._translate(e.tpl.next)).appendTo(s.inner).bind("click.fb",s.next)}}if(e.closeBtn){i(s._translate(e.tpl.closeBtn)).appendTo(s.wrap).bind("click.fb",s.close)}if(e.expander&&e.type==="image"){i('<a title="Expand image" class="fancybox-expand" href="javascript:;"></a>').appendTo(s.inner).bind("click.fb",s.toggle);if(!e.canShrink&&!e.canExpand){}}},_start:function(e){var t,n;if(s.opts.loop){if(e<0){e=s.group.length+e%s.group.length}e=e%s.group.length}t=s.group[e];if(!t){return false}t=i.extend(true,{},s.opts,t);t.group=s.group;t.index=e;s.coming=t;if(false===s.trigger("beforeLoad")){s.coming=null;return}s.isActive=true;s._build();o.bind("keydown.loading",function(e){if((e.which||e.keyCode)===27){o.unbind(".loading");e.preventDefault();s.cancel()}});if(t.overlay&&t.overlay.showEarly){s.overlay.open(t.overlay)}n=t.type;if(n==="image"){s._loadImage()}else if(n==="ajax"){s._loadAjax()}else if(n==="iframe"){s._loadIframe()}else if(n==="inline"){s._loadInline()}else if(n==="html"||n==="swf"){s._afterLoad()}else{s._error()}},_build:function(){var e=s.coming,t=e.caption.type,n,l,f,c;e.wrap=n=i('<div class="fancybox-wrap"></div>').appendTo(e.parent||"body").addClass("fancybox-"+e.theme);e.inner=l=i('<div class="fancybox-inner"></div>').appendTo(n);e[t==="outside"||t==="float"?"inner":"wrap"].addClass("fancybox-skin fancybox-"+e.theme+"-skin");if(e.locked&&e.overlay&&s.defaults.fixed){if(!s.lock){s.lock=i('<div id="fancybox-lock"></div>').appendTo(n.parent())}s.lock.unbind().append(n);if(e.overlay.closeClick){s.lock.click(function(e){if(i(e.target).is(s.lock)){s.close()}})}if(o.height()>a.height()||r.css("overflow-y")==="scroll"){i("*:visible").filter(function(){return i(this).css("position")==="fixed"&&!i(this).hasClass("fancybox-overlay")&&i(this).attr("id")!=="fancybox-lock"}).addClass("fancybox-margin");r.addClass("fancybox-margin")}f=a.scrollTop();c=a.scrollLeft();r.addClass("fancybox-lock");a.scrollTop(f).scrollLeft(c)}s.trigger("onReady")},_error:function(e){if(!s.coming){return}i.extend(s.coming,{type:"html",autoWidth:true,autoHeight:true,closeBtn:true,minWidth:0,minHeight:0,padding:[15,15,15,15],scrolling:"visible",hasError:e,content:s._translate(s.coming.tpl.error)});s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null;i.extend(s.coming,{width:this.width,height:this.height,content:i(this).addClass("fancybox-image")});s._afterLoad()};e.onerror=function(){this.onload=this.onerror=null;s._error("image")};e.src=s.coming.href;if(e.complete!==true||e.width<1){s.showLoading()}},_loadAjax:function(){var e=s.coming,t=e.href,n,a;n=t.split(/\s+/,2);t=n.shift();a=n.shift();s.showLoading();s.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){if(s.coming&&t!=="abort"){s._error("ajax",e)}else{s.hideLoading()}},success:function(t,n){if(n==="success"){if(a){t=i("<div>").html(t).find(a)}e.content=t;s._afterLoad()}}}))},_loadIframe:function(){var e=s.coming,t;e.content=t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",l?"auto":e.iframe.scrolling);if(e.iframe.preload){s.showLoading();s._setDimension(e);e.wrap.addClass("fancybox-tmp");t.one("load.fb",function(){if(e.iframe.preload){i(this).data("ready",1);i(this).bind("load.fb",s.update);s._afterLoad()}})}t.attr("src",e.href).appendTo(e.inner);if(!e.iframe.preload){s._afterLoad()}else if(t.data("ready")!==1){s.showLoading()}},_loadInline:function(){var e=s.coming,t=e.href;e.content=i(c(t)?t.replace(/.*(?=#[^\s]+$)/,""):t);if(e.content.length){s._afterLoad()}else{s._error()}},_preloadImages:function(){var e=s.group,t=s.current,i=e.length,n=t.preload?Math.min(t.preload,i-1):0,a,o;for(o=1;o<=n;o+=1){a=e[(t.index+o)%i];if(a&&a.type==="image"&&a.href){(new Image).src=a.href}}},_afterLoad:function(){var e=s.coming,t=s.current;o.unbind(".loading");if(!e||s.isActive===false||false===s.trigger("afterLoad",e,t)){s.hideLoading();if(e&&e.wrap){g(e.wrap)}if(!t){s._afterZoomOut(e)}s.coming=null;return}i.extend(s,{wrap:e.wrap.addClass("fancybox-type-"+e.type+" fancybox-"+(l?"mobile":"desktop")+" fancybox-"+e.theme+"-"+(l?"mobile":"desktop")+" "+e.wrapCSS),inner:e.inner,current:e,previous:t});s._prepare();s.trigger("beforeShow",e,t);s.isOpen=false;s.coming=null;s._setDimension();s.hideLoading();if(e.overlay&&!s.overlay.el){s.overlay.open(e.overlay)}s.transitions.open()},_prepare:function(){var e=s.current,t=e.content||"",n=e.wrap,a=e.inner,o=e.margin,r=e.padding,l=e.href,d=e.type,p=e.scrolling,u=e.caption,g=e.title,m=u.type,y="fancybox-placeholder",v="fancybox-display",w;if(d!=="iframe"&&f(t)&&t.length){if(!t.data(y)){t.data(v,t.css("display")).data(y,i('<div class="'+y+'"></div>').insertAfter(t).hide())}t=t.show().detach();e.wrap.bind("onReset",function(){if(i(this).find(t).length){t.css("display",t.data(v)).replaceAll(t.data(y)).data(y,false).data(v,false)}})}if(d==="swf"){t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+l+'"></param>';w="";i.each(e.swf,function(e,i){t+='<param name="'+e+'" value="'+i+'"></param>';w+=" "+e+'="'+i+'"'});t+='<embed src="'+l+'" type="application/x-shockwave-flash" width="100%" height="100%"'+w+"></embed></object>"}if(!(f(t)&&t.parent().is(e.inner))){e.inner.append(t);e.content=e.inner.children(":last")}i.each(["Top","Right","Bottom","Left"],function(e,t){if(o[e]){n.css("margin"+t,h(o[e]))}if(r[e]){if(!(t==="Bottom"&&m==="outside")){n.css("padding"+t,h(r[e]))}if(m==="outside"||m==="float"){a.css("border"+t+"Width",h(r[e]));if(t==="Top"||t==="Left"){a.css("margin"+t,h(r[e]*-1))}}}});if(i.isFunction(g)){g=g.call(e.element,e)}if(c(g)&&i.trim(g)!==""){e.caption.wrap=i('<div class="fancybox-title fancybox-title-'+m+'-wrap">'+g+"</div>").appendTo(e[m==="over"?"inner":"wrap"]);if(m==="float"){e.caption.wrap.width(s.getViewport().w-(s.wrap.outerWidth(true)-s.inner.width())).wrapInner("<div></div>")}}},_setDimension:function(e){var t=s.getViewport(),i=e||s.current,n=i.wrap,a=i.inner,o=i.width,r=i.height,l=i.minWidth,c=i.minHeight,u=i.maxWidth,g=i.maxHeight,m=i.margin,y=i.scrollOutside?i.scrollbarWidth:0,m=i.margin,v=i.padding,w=i.scrolling,x=1,b,_,k,T,C,O,W,L,E,M,S,H,A,R,I;w=w.split(",");b=w[0];_=w[1]||b;i.inner.css("overflow-x",b==="yes"?"scroll":b==="no"?"hidden":b).css("overflow-y",_==="yes"?"scroll":_==="no"?"hidden":_);T=m[1]+m[3]+v[1]+v[3];k=m[0]+m[2]+v[0]+v[2];l=p(d(l)?p(l,"w")-T:l);u=p(d(u)?p(u,"w")-T:u);c=p(d(c)?p(c,"h")-k:c);g=p(d(g)?p(g,"h")-k:g);C=p(d(o)?p(o,"w")-T:o);O=p(d(r)?p(r,"h")-k:r);if(i.fitToView){u=Math.min(u,p("100%","w")-T);g=Math.min(g,p("100%","h")-k)}M=t.w;S=t.h;if(i.type==="iframe"){L=i.content;n.removeClass("fancybox-tmp");if((i.autoWidth||i.autoHeight)&&L&&L.data("ready")===1){try{if(L[0].contentWindow&&L[0].contentWindow.document.location){E=L.contents().find("body");a.addClass("fancybox-tmp");a.width(screen.width-T).height(99999);if(y){E.css("overflow-x","hidden")}if(i.autoWidth){C=E.outerWidth(true)}if(i.autoHeight){O=E.outerHeight(true)}a.removeClass("fancybox-tmp")}}catch(j){}}}else if((i.autoWidth||i.autoHeight)&&!(i.type==="image"||i.type==="swf")){a.addClass("fancybox-tmp");if(i.autoWidth){a.width("auto")}else{a.width(u)}if(i.autoHeight){a.height("auto")}else{a.height(g)}if(i.autoWidth){C=a[0].scrollWidth||a.width()}if(i.autoHeight){O=a[0].scrollHeight||a.height()}a.removeClass("fancybox-tmp")}o=C;r=O;W=C/O;if(!i.autoResize){n.css({width:h(o),height:"auto"});a.css({width:h(o),height:h(r)});return}if(i.aspectRatio){if(o>u){o=u;r=o/W}if(r>g){r=g;o=r*W}if(o<l){o=l;r=o/W}if(r<c){r=c;o=r*W}}else{o=Math.max(l,Math.min(o,u));if(i.autoHeight&&i.type!=="iframe"){a.width(o);O=r=a[0].scrollHeight}r=Math.max(c,Math.min(r,g))}n.css({width:h(o),height:"auto"});a.css({width:h(o),height:h(r)});H=p(n.outerWidth(true));A=p(n.outerHeight(true));if(i.fitToView){if(i.aspectRatio){while((H>M||A>S)&&o>l&&r>c){if(x++>30){break}r=Math.max(c,Math.min(g,r-10));o=p(r*W);if(o<l){o=l;r=p(o/W)}if(o>u){o=u;r=p(o/W)}n.css({width:h(o)});a.css({width:h(o),height:h(r)});H=p(n.outerWidth(true));A=p(n.outerHeight(true))}}else{o=Math.max(l,Math.min(o,o-(H-M)));r=Math.max(c,Math.min(r,r-(A-S)))}}if(y&&b==="auto"&&(r<a[0].scrollHeight||f(i.content)&&i.content[0]&&r<i.content[0].offsetHeight)&&o+T+y<u){o+=y}n.css({width:o});a.css({width:h(o),height:h(r)});H=p(n.outerWidth(true));A=p(n.outerHeight(true));R=(H>M||A>S)&&o>l&&r>c;I=(H<M||A<S)&&(i.aspectRatio?o<u&&r<g&&o<C&&r<O:(o<u||r<g)&&(o<C||r<O));i.canShrink=R;i.canExpand=I;if(!L&&i.autoHeight&&r>c&&r<g&&!I){a.height("auto")}},_getPosition:function(e){var t=e||s.current,i=t.wrap,n=s.getViewport(),a={},o=n.y,r=n.x;a={top:h(Math.max(o,o+(n.h-i.outerHeight(true))*t.topRatio)),left:h(Math.max(r,r+(n.w-i.outerWidth(true))*t.leftRatio)),width:h(i.width()),height:h(i.height())};return a},_afterZoomIn:function(){var e=s.current;if(!e){return}if(s.lock){s.lock.css("overflow","auto")}s.isOpen=s.isOpened=true;s.rebuild();s.rebind();if(e.caption&&e.caption.wrap){e.caption.wrap.show().css({visibility:"visible",opacity:0,left:0}).animate({opacity:1},"fast")}s.update();s.wrap.css("overflow","visible").addClass("fancybox-open").focus();s[s.wrap.hasClass("fancybox-skin")?"wrap":"inner"].addClass("fancybox-"+e.theme+"-skin-open");if(e.caption&&e.caption.wrap){e.caption.wrap.show().css("left",0).animate({opacity:1},"fast")}if(e.margin[2]>0){i('<div class="fancybox-spacer"></div>').css("height",h(e.margin[2]-2)).appendTo(s.wrap)}s.trigger("afterShow");s._preloadImages();if(e.autoPlay&&!s.slideshow.isActive){s.slideshow.start()}},_afterZoomOut:function(e){var t=function(){g(".fancybox-wrap")};s.hideLoading();e=e||s.current;if(e&&e.wrap){e.wrap.hide()}i.extend(s,{group:[],opts:{},coming:null,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,inner:null});s.trigger("afterClose",e);if(!s.coming&&!s.current){if(e.overlay){s.overlay.close(e.overlay,t)}else{t()}}},_translate:function(e){var t=s.coming||s.current,i=t.locales[t.locale];return e.replace(/\{\{(\w+)\}\}/g,function(e,t){var a=i[t];if(a===n){return e}return a})}});s.transitions={_getOrig:function(e){var t=e||s.current,i=t.wrap,n=t.element,o=t.orig,r=s.getViewport(),l={},c=50,d=50;if(!o&&n&&n.is(":visible")){o=n.find("img:first:visible");if(!o.length){o=n}}if(!o&&t.group[0].element){o=t.group[0].element.find("img:visible:first")}if(f(o)&&o.is(":visible")){l=o.offset();if(o.is("img")){c=o.outerWidth();d=o.outerHeight()}if(s.lock){l.top-=a.scrollTop();l.left-=a.scrollLeft()}}else{l.top=r.y+(r.h-d)*t.topRatio;l.left=r.x+(r.w-c)*t.leftRatio}l={top:h(l.top-(i.outerHeight(true)-i.height())*.5),left:h(l.left-(i.outerWidth(true)-i.width())*.5),width:h(c),height:h(d)};return l},_getCenter:function(e){var t=e||s.current,i=t.wrap,n=s.getViewport(),a={},o=n.y,r=n.x;a={top:h(Math.max(o,o+(n.h-i.outerHeight(true))*t.topRatio)),left:h(Math.max(r,r+(n.w-i.outerWidth(true))*t.leftRatio)),width:h(i.width()),height:h(i.height())};return a},_prepare:function(e,t){var i=e||s.current,n=i.wrap,a=i.inner;n.height(n.height());a.css({width:a.width()*100/n.width()+"%",height:Math.floor(a.height()*100/n.height()*100)/100+"%"});if(t===true){n.find(".fancybox-title, .fancybox-spacer, .fancybox-close, .fancybox-nav").remove()}a.css("overflow","hidden")},fade:function(e,t){var n=this._getCenter(e),a={opacity:0};return t==="open"||t==="changeIn"?[i.extend(n,a),{opacity:1}]:[{},a]},drop:function(e,t){var n=i.extend(this._getCenter(e),{opacity:1}),a=i.extend({},n,{opacity:0,top:h(Math.max(s.getViewport().y-e.margin[0],p(n.top)-200))});return t==="open"||t==="changeIn"?[a,n]:[{},a]},elastic:function(e,t){var n=e.wrap,a=e.margin,o=s.getViewport(),r=s.direction,l=this._getCenter(e),f=i.extend({},l),c=i.extend({},l),d,h,u;if(t==="open"){f=this._getOrig(e)}else if(t==="close"){f={};c=this._getOrig(e)}else if(r){d=r==="up"||r==="down"?"top":"left";h=r==="up"||r==="left"?200:-200;if(t==="changeIn"){u=p(f[d])+h;if(r==="left"){u=Math.min(u,o.x+o.w-a[3]-n.outerWidth()-1)}else if(r==="right"){u=Math.max(u,o.x-a[1])}else if(r==="up"){u=Math.min(u,o.y+o.h-a[0]-n.outerHeight()-1)}else{u=Math.max(u,o.y-a[2])}f[d]=u}else{u=p(n.css(d))-h;f={};if(r==="left"){u=Math.max(u,o.x-a[3])}else if(r==="right"){u=Math.min(u,o.x+o.w-a[1]-n.outerWidth()-1)}else if(r==="up"){u=Math.max(u,o.y-a[0])}else{u=Math.min(u,o.y+o.h-a[2]-n.outerHeight()-1)}c[d]=u}}if(t==="open"||t==="changeIn"){f.opacity=0;c.opacity=1}else{c.opacity=0}return[f,c]},open:function(){var e=s.current,t=s.previous,n=s.direction,a,o,r,l,f;if(t){t.wrap.stop(true).removeClass("fancybox-opened")}if(s.isOpened){a=e.nextEffect,r=e.nextSpeed;l=e.nextEasing;f="changeIn"}else{a=e.openEffect;r=e.openSpeed;l=e.openEasing;f="open"}if(a==="none"){s._afterZoomIn()}else{o=this[a](e,f);if(a==="elastic"){this._prepare(e)}e.wrap.css(o[0]);e.wrap.animate(o[1],r,l,s._afterZoomIn)}if(t){if(!s.isOpened||t.prevEffect==="none"){g(i(".fancybox-wrap").not(e.wrap))}else{t.wrap.stop(true).removeClass("fancybox-opened");o=this[t.prevEffect](t,"changeOut");this._prepare(t,true);t.wrap.animate(o[1],t.prevSpeed,t.prevEasing,function(){g(t.wrap)})}}},close:function(){var e=s.current,t=e.wrap.stop(true).removeClass("fancybox-opened"),i=e.closeEffect,n;if(i==="none"){return s._afterZoomOut()}this._prepare(e,true);n=this[i](e,"close");t.addClass("fancybox-animating").animate(n[1],e.closeSpeed,e.closeEasing,s._afterZoomOut)}};s.slideshow={_clear:function(){if(this._timer){clearTimeout(this._timer)}},_set:function(){this._clear();if(s.current&&this.isActive){this._timer=setTimeout(s.next,this._speed)}},_timer:null,_speed:null,isActive:false,start:function(e){var t=s.current;if(t&&(t.loop||t.index<t.group.length-1)){this.stop();this.isActive=true;this._speed=e||t.playSpeed;o.bind({"beforeLoad.player":i.proxy(this._clear,this),"onUpdate.player":i.proxy(this._set,this),"onCancel.player beforeClose.player":i.proxy(this.stop,this)});this._set();s.trigger("onPlayStart")}},stop:function(){this._clear();o.unbind(".player");this.isActive=false;this._timer=this._speed=null;s.trigger("onPlayEnd")},toggle:function(){if(this.isActive){this.stop()}else{this.start.apply(this,arguments)}}};s.overlay={el:null,theme:"",open:function(e){var t=this,n=this.el,o=s.defaults.fixed,r,l;e=i.extend({},s.defaults.overlay,e);if(n){n.stop(true).removeAttr("style").unbind(".overlay")}else{n=i('<div class="fancybox-overlay'+(o?" fancybox-overlay-fixed":"")+'"></div>').appendTo(e.parent||"body")}if(e.closeClick){n.bind("click.overlay",function(e){if(s.lastTouch&&u()-s.lastTouch<300){return false}if(s.isActive){s.close()}else{t.close()}return false})}l=e.theme||(s.coming?s.coming.theme:"default");if(l!==this.theme){n.removeClass("fancybox-"+this.theme+"-overlay")}this.theme=l;n.addClass("fancybox-"+l+"-overlay").css(e.css);r=n.css("opacity");if(!this.el&&r<1&&e.speedIn){n.css({opacity:0,filter:"alpha(opacity=0)"}).fadeTo(e.speedIn,r)}this.el=n;if(!o){a.bind("resize.overlay",i.proxy(this.update,this));this.update()}},close:function(e,t){e=i.extend({},s.defaults.overlay,e);if(this.el){this.el.stop(true).fadeOut(e.speedOut,function(){a.unbind("resize.overlay");i(".fancybox-overlay").remove();s.overlay.el=null;if(i.isFunction(t)){t()}})}},update:function(){this.el.css({width:"100%",height:"100%"});this.el.width(o.width()).height(o.height())}};s.touch={startX:0,wrapX:0,dx:0,isMoving:false,_start:function(e){var t=s.current,n=e.originalEvent.touches?e.originalEvent.touches[0]:e,a=u();if(!s.isOpen||s.wrap.is(":animated")||!(i(e.target).is(s.inner)||i(e.target).parent().is(s.inner))){return}if(s.lastTouch&&a-s.lastTouch<300){e.preventDefault();s.lastTouch=a;this._cancel(true);s.toggle();return false}s.lastTouch=a;if(s.wrap&&s.wrap.outerWidth()>s.getViewport().w){return}e.preventDefault();if(n&&s.wrap&&s.wrap.outerWidth()<s.getViewport().w){this.startX=n.pageX;this.wrapX=s.wrap.position().left;this.isMoving=true;s.inner.bind("touchmove.fb",i.proxy(this._move,this)).one("touchend.fb touchcancel.fb",i.proxy(this._cancel,this))}},_move:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,i=this.startX-t.pageX;if(!this.isMoving||!s.isOpen){return}this.dx=i;if(s.current.wrap.outerWidth(true)<=a.width()){if(Math.abs(i)>=50){e.preventDefault();this.last=0;this._cancel(true);if(i>0){s.next("left")}else{s.prev("right")}}else if(Math.abs(i)>3){e.preventDefault();this.last=0;s.wrap.css("left",this.wrapX-i)}}},_clear:function(){this.startX=this.wrapX=this.dx=0;this.isMoving=false},_cancel:function(e){if(s.inner){s.inner.unbind("touchmove.fb")}if(s.isOpen&&Math.abs(this.dx)>3){s.reposition(false)}this._clear()},init:function(){var e=this;if(s.inner&&s.touch){this._cancel(true);s.inner.bind("touchstart.fb",i.proxy(this._start,this))}}};if(!i.easing.easeOutQuad){i.easing.easeOutQuad=function(e,t,i,n,a){return-n*(t/=a)*(t-2)+i}}o.ready(function(){var t,o,l,f;if(i.scrollbarWidth===n){i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();e.remove();return n}}if(i.support.fixedPosition===n){i.support.fixedPosition=function(){var e=i('<div style="position:fixed;top:20px;padding:0;margin:0;border:0;"></div>').appendTo("body"),t=e.css("position")==="fixed"&&(e[0].offsetTop>18&&e[0].offsetTop<22||e[0].offsetTop===15);e.remove();return t}()}i.extend(s.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});l=a.scrollTop();f=a.scrollLeft();t=i(e).width();r.addClass("fancybox-lock-test");o=i(e).width();r.removeClass("fancybox-lock-test");a.scrollTop(l).scrollLeft(f);s.lockMargin=o-t;i("<style type='text/css'>.fancybox-margin{margin-right:"+s.lockMargin+"px;}</style>").appendTo("head")});i.fn.fancybox=function(e){var t=this,n=this.length?this.selector:false,a=n&&n.indexOf("()")<0&&!(e&&e.live===false);var r=function(o){var r=a?i(n):t,l=i(this).blur(),f=e.groupAttr||"data-fancybox-group",c=l.attr(f),d=this.rel;if(!c&&d&&d!=="nofollow"){f="rel";c=d}if(c){l=r.filter("["+f+'="'+c+'"]');e.index=l.index(this)}if(l.length){o.preventDefault();s.open(l.get(),e)}};e=e||{};if(a){o.undelegate(n,"click.fb-start").delegate(n+":not('.fancybox-close,.fancybox-nav,.fancybox-wrap')","click.fb-start",r)}else{t.unbind("click.fb-start").bind("click.fb-start",r)}return this}}(window,document,jQuery);
/*!
 * Thumbnail helper for fancyBox
 * version: 2.0.0 (Tue, 29 Jan 2013)
 * @requires fancyBox v3.0 or later
 *
 * Usage:
 *     $(".fancybox").fancybox({
 *         helpers : {
 *             thumbs: {
 *                 width  : 50,
 *                 height : 50
 *             }
 *         }
 *     });
 *
 */

(function(e){var t=e.fancybox;t.helpers.thumbs={defaults:{width:75,height:50,position:"bottom",source:function(){}},list:null,items:null,count:0,_create:function(t){var n=this.opts,r,i;r="";e.each(t.group,function(e){r+='<li><a data-index="'+e+'" href="javascript:jQuery.fancybox.jumpto('+e+');"></a></li>'});this.list=i=e("<ul>"+r+"</ul>");this.items=i.children();this.count=this.items.length;this.wrap=e('<div id="fancybox-thumbs" class="'+n.position+'"></div>').append(i).wrapInner('<div class="inner" />').wrapInner('<div class="outer" />').appendTo("body");e('<a class="fancybox-thumb-prev" href="javascript:;"><span></span></a>').click(e.proxy(this.prev,this)).prependTo(this.wrap);e('<a class="fancybox-thumb-next" href="javascript:;"><span></span></a>').click(e.proxy(this.next,this)).appendTo(this.wrap);i.find("a").width(n.width).height(n.height);this.width=this.items.outerWidth(true);this.height=this.items.outerHeight(true);i.width(this.width*this.count).height(this.height)},_loadPage:function(){var n=this,r,i,s;var o=function(e){n._setThumb(r,e)};if(!this.list){return}r=this.list.find("a").slice(this.start,this.end+1).not(".ready").first();if(r&&r.length){r.addClass("ready");i=t.group[r.data("index")];href=this._getThumb(i,o);if(e.type(href)==="string"){o(href)}else if(!href){this._loadPage()}}},_getThumb:function(t,n){var r=this,i,s;i=this.opts.source(t,n);if(!i&&t.element){i=e(t.element).find("img").attr("src")}if(!i&&(s=t.href.match(/(youtube\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i))){i="http://img.youtube.com/vi/"+s[3]+"/mqdefault.jpg"}if(!i&&(s=t.href.match(/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/))){e.getJSON("http://www.vimeo.com/api/v2/video/"+s[1]+".json?callback=?",{format:"json"},function(e){n(e[0].thumbnail_small)});return true}if(!i&&t.type==="image"&&t.href){i=t.href}return i},_setThumb:function(t,n){var r=this;var i=function(){r._loadPage()};if(!this.list){return}e("<img />").load(function(){var n=this.width,s=this.height,o=t.width(),u=t.height(),a,f;if(!r.wrap||!n||!s){i();return}a=n/o;f=s/u;if(a>=1&&f>=1){if(a>f){n=n/f;s=u}else{n=o;s=s/a}}e(this).css({width:Math.floor(n),height:Math.floor(s),"margin-top":Math.floor(u*.3-s*.3),"margin-left":Math.floor(o*.5-n*.5)}).appendTo(t);i()}).error(i).attr("src",n)},_move:function(n){var r=0,i=400,s,o,u;if(!this.wrap){return}s=Math.ceil(this.count/this.itemsMin);if(n===undefined){n=Math.floor(t.current.index/this.itemsMin)+1}e(".fancybox-thumb-prev, .fancybox-thumb-next").hide();if(s<2){e.extend(this,{pages:s,page:1,start:0,end:this.count});this.list.stop(true).css({"margin-left":"auto","margin-right":"auto",left:0});this._loadPage();return}if(n<=1){n=1}else{e(".fancybox-thumb-prev").show()}if(n>=s){n=s}else{e(".fancybox-thumb-next").show()}o=(n-1)*this.itemsMin;u=o+this.itemsMax-1;r=this.width*this.itemsMin*(n-1)*-1;if(this.left===r){return}e.extend(this,{pages:s,page:n,start:o,end:u,left:r});this._loadPage();this.list.stop(true).animate({"margin-left":r+"px"},i)},prev:function(){this._move(this.page-1)},next:function(){this._move(this.page+1)},afterLoad:function(e,t){var n=e.position==="bottom"?2:0;if(t.group.length<2){t.helpers.thumbs=false;return}if(!this.wrap){this._create(t)}if(e.margin!==false){t.margin[n]=Math.max(this.height+40,t.margin[n])}},beforeShow:function(e,t){if(this.items){this.items.removeClass("fancybox-thumb-active");this.current=this.list.find("a[data-index='"+t.index+"']").parent().addClass("fancybox-thumb-active")}},onUpdate:function(){if(!this.wrap){return}this.wrap.width(t.getViewport().w);this.view=this.list.parent().innerWidth();this.itemsMin=Math.floor(this.view/this.width);this.itemsMax=Math.ceil(this.view/this.width);this._move()},beforeClose:function(){if(this.wrap){this.wrap.stop(true).remove()}e.extend(this,{pages:0,page:0,start:0,end:0,count:0,items:null,left:null,wrap:null,list:null})}}})(jQuery)
var Froogaloop=function(){function e(t){return new e.fn.init(t)}var t={},n=false,r=false,i=Array.prototype.slice,l="";e.fn=e.prototype={element:null,init:function(e){if(typeof e==="string"){e=document.getElementById(e)}this.element=e;l=d(this.element.getAttribute("src"));return this},api:function(e,t){if(!this.element||!e){return false}var n=this,r=n.element,i=r.id!==""?r.id:null,l=!c(t)?t:null,f=c(t)?t:null;if(f){u(e,f,i)}o(e,l,r);return n},addEvent:function(e,t){if(!this.element){return false}var n=this,i=n.element,l=i.id!==""?i.id:null;u(e,t,l);if(e!="ready"){o("addEventListener",e,i)}else if(e=="ready"&&r){t.call(null,l)}return n},removeEvent:function(e){if(!this.element){return false}var t=this,n=t.element,r=n.id!==""?n.id:null,i=s(e,r);if(e!="ready"&&i){o("removeEventListener",e,n)}}};function o(e,t,n){if(!n.contentWindow.postMessage){return false}var r=n.getAttribute("src").split("?")[0],i=JSON.stringify({method:e,value:t});if(r.substr(0,2)==="//"){r=window.location.protocol+r}n.contentWindow.postMessage(i,r)}function f(e){var t,n;try{t=JSON.parse(e.data);n=t.event||t.method}catch(i){}if(n=="ready"&&!r){r=true}if(e.origin!=l){return false}var o=t.value,f=t.data,u=u===""?null:t.player_id,s=a(n,u),d=[];if(!s){return false}if(o!==undefined){d.push(o)}if(f){d.push(f)}if(u){d.push(u)}return d.length>0?s.apply(null,d):s.call()}function u(e,n,r){if(r){if(!t[r]){t[r]={}}t[r][e]=n}else{t[e]=n}}function a(e,n){if(n){return t[n][e]}else{return t[e]}}function s(e,n){if(n&&t[n]){if(!t[n][e]){return false}t[n][e]=null}else{if(!t[e]){return false}t[e]=null}return true}function d(e){if(e.substr(0,2)==="//"){e=window.location.protocol+e}var t=e.split("/"),n="";for(var r=0,i=t.length;r<i;r++){if(r<3){n+=t[r]}else{break}if(r<2){n+="/"}}return n}function c(e){return!!(e&&e.constructor&&e.call&&e.apply)}function p(e){return toString.call(e)==="[object Array]"}e.fn.init.prototype=e.fn;if(window.addEventListener){window.addEventListener("message",f,false)}else{window.attachEvent("onmessage",f)}return window.Froogaloop=e}();
!function(e,n,t,i){if(t===i){throw new e.Error("Unsolved Dependency : jQuery")}function o(o,u){var r,a,s,m,f,v={},c={};function l(e){v.X=e.pageX;v.Y=e.pageY}function p(){e.clearInterval(s);e.clearTimeout(r);t(o).unbind("mousemove",l);c={}}function h(){m=!m;f.type=m?"mouseenterintent":"mouseleaveintent";t.event.handle.call(o,f)}function d(){p();h()}function b(){if(c.X!==i&&c.Y!==i){var e=n.sqrt(n.pow(c.X-v.X,2)+n.pow(c.Y-v.Y,2))/u.checkSpeedInterval*1e3;if(e<=u.maxSpeed){d()}}c.X=v.X;c.Y=v.Y}function y(n){f=n;p();e.clearTimeout(a);if(n.type==="mouseenter"&&!m){if(u.maxSpeed>=0){t(o).mousemove(l);s=e.setInterval(b,u.checkSpeedInterval)}if(u.enterTimeout>0){r=e.setTimeout(d,u.enterTimeout)}}else if(n.type==="mouseleave"&&m){a=e.setTimeout(h,u.leaveTimeout)}}function T(){u=t.extend({maxSpeed:-1,enterTimeout:0,leaveTimeout:0},u);if(!u.checkSpeedInterval||u.checkSpeedInterval<10){u.checkSpeedInterval=10}t(o).bind("mouseenter mouseleave",y)}this.changeOptions=function I(e){for(var n in e){if(typeof e[n]==="number"){u[n]=e[n]}}};this.unbind=function S(e){if(e==="enter"){u.enterTimeout=0;u.maxSpeed=-1}else if(e==="leave"){u.leaveTimeout=0}};T()}function u(e,n){return{setup:function(e){e=t.extend({},n,e);t(this).each(function(){var n=t(this).data("HoverIntent");if(n&&typeof n.changeOptions==="function"){n.changeOptions(e)}else{t(this).data("HoverIntent",new o(this,e))}})},teardown:function(){var n=t(this).data("HoverIntent");if(n){n.unbind(e)}}}}function r(e,n){if(typeof n==="number"){n={maxSpeed:n};if(typeof arguments[2]==="number"){n.enterTimeout=arguments[2]}if(typeof arguments[3]==="number"){n.checkSpeedInterval=arguments[3]}}return this.bind("mouseenterintent",n,e)}function a(e,n){if(typeof n==="number"){n={leaveTimeout:n}}return this.bind("mouseleaveintent",n,e)}function s(e,n,i){if(i&&i.group){var o={cible:this};t(o).bind("mouseenterintent",function(){e.apply(this.cible,arguments)}).bind("mouseleaveintent",i,function(){n.apply(this.cible,arguments)});return this.bind("mouseenter mouseleave mousemove",function(e){t.event.handle.call(o,e)})}return this.bind("mouseenterintent",e).bind("mouseleaveintent",i,n)}t.event.special.mouseenterintent=t.event.special.mouseenterintent||u("enter",{maxSpeed:150,enterTimeout:500,checkSpeedInterval:40});t.event.special.mouseleaveintent=t.event.special.mouseleaveintent||u("leave",{leaveTimeout:300});t.fn.mouseenterintent=t.fn.mouseenterintent||r;t.fn.mouseleaveintent=t.fn.mouseleaveintent||a;t.fn.hoverintent=t.fn.hoverintent||s;t.fn.hoverIntent=t.fn.hoverIntent||function(e,n){var i=t.extend({},n?{over:e,out:n}:e),o={};if(i.sensitivity){o.maxSpeed=i.sensitivity/7*150}if(i.timeout){o.leaveTimeout=i.timeout}if(i.interval){o.checkSpeedInterval=i.interval}return t.fn.hoverintent.apply(this,[i.over,i.out,o])}}(this,this.Math,this.jQuery);
if(jQuery)!function(e){e.extend(e.fn,{multiSelect:function(t,i){if(!t)var t={};if(t.selectAll==undefined)t.selectAll=true;if(t.selectAllText==undefined)t.selectAllText="Select All";if(t.noneSelected==undefined)t.noneSelected="Select options";if(t.oneOrMoreSelected==undefined)t.oneOrMoreSelected="% selected";e(this).each(function(){var l=e(this);var s='<input type="text" readonly="readonly" class="multiSelect" value="" style="cursor: default;" />';s+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; display: none;">';if(t.selectAll)s+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+t.selectAllText+"</label>";e(l).find("OPTION").each(function(){if(e(this).val()!=""){s+='<label><input type="checkbox" name="'+e(l).attr("name")+'" value="'+e(this).val()+'"';if(e(this).attr("selected"))s+=' checked="checked"';s+=' class="save_parameter multi_select" />'+e(this).html()+"</label>"}});s+="</div>";e(l).after(s);e(l).next(".multiSelect").mouseover(function(){e(this).addClass("hover")}).mouseout(function(){e(this).removeClass("hover")}).click(function(){if(e(this).hasClass("active")){e(this).multiSelectOptionsHide()}else{e(this).multiSelectOptionsShow()}return false}).focus(function(){e(this).addClass("focus")}).blur(function(){e(this).removeClass("focus")});if(t.selectAll){var c=true;e(l).next(".multiSelect").next(".multiSelectOptions").find("INPUT:checkbox").not(".selectAll").each(function(){if(!e(this).attr("checked"))c=false});if(c)e(l).next(".multiSelect").next(".multiSelectOptions").find("INPUT.selectAll").attr("checked",true).parent().addClass("checked")}e(l).next(".multiSelect").next(".multiSelectOptions").find("INPUT.selectAll").click(function(){if(e(this).attr("checked")==true)e(this).parent().parent().find("INPUT:checkbox").attr("checked",true).parent().addClass("checked");else e(this).parent().parent().find("INPUT:checkbox").attr("checked",false).parent().removeClass("checked")});e(l).next(".multiSelect").next(".multiSelectOptions").find("INPUT:checkbox").click(function(){e(this).parent().parent().multiSelectUpdateSelected(t);e(this).parent().parent().find("LABEL").removeClass("checked").find("INPUT:checked").parent().addClass("checked");e(this).parent().parent().prev(".multiSelect").focus();if(!e(this).attr("checked"))e(this).parent().parent().find("INPUT:checkbox.selectAll").attr("checked",false).parent().removeClass("checked");if(i)i(e(this))});e(l).next(".multiSelect").next(".multiSelectOptions").each(function(){e(this).multiSelectUpdateSelected(t);e(this).find("INPUT:checked").parent().addClass("checked")});e(l).next(".multiSelect").next(".multiSelectOptions").find("LABEL").mouseover(function(){e(this).parent().find("LABEL").removeClass("hover");e(this).addClass("hover")}).mouseout(function(){e(this).parent().find("LABEL").removeClass("hover")});e(l).next(".multiSelect").keydown(function(l){if(e(this).next(".multiSelectOptions").is(":visible")){if(l.keyCode==9){e(this).addClass("focus").trigger("click");e(this).focus().next(":input").focus();return true}if(l.keyCode==27||l.keyCode==37||l.keyCode==39){e(this).addClass("focus").trigger("click")}if(l.keyCode==40){if(!e(this).next(".multiSelectOptions").find("LABEL").hasClass("hover")){e(this).next(".multiSelectOptions").find("LABEL:first").addClass("hover")}else{e(this).next(".multiSelectOptions").find("LABEL.hover").removeClass("hover").next("LABEL").addClass("hover");if(!e(this).next(".multiSelectOptions").find("LABEL").hasClass("hover")){e(this).next(".multiSelectOptions").find("LABEL:first").addClass("hover")}}return false}if(l.keyCode==38){if(!e(this).next(".multiSelectOptions").find("LABEL").hasClass("hover")){e(this).next(".multiSelectOptions").find("LABEL:first").addClass("hover")}else{e(this).next(".multiSelectOptions").find("LABEL.hover").removeClass("hover").prev("LABEL").addClass("hover");if(!e(this).next(".multiSelectOptions").find("LABEL").hasClass("hover")){e(this).next(".multiSelectOptions").find("LABEL:last").addClass("hover")}}return false}if(l.keyCode==13||l.keyCode==32){if(e(this).next(".multiSelectOptions").find("LABEL.hover INPUT:checkbox").hasClass("selectAll")){if(e(this).next(".multiSelectOptions").find("LABEL.hover INPUT:checkbox").attr("checked")){e(this).next(".multiSelectOptions").find("INPUT:checkbox").attr("checked",false).parent().removeClass("checked")}else{e(this).next(".multiSelectOptions").find("INPUT:checkbox").attr("checked",true).parent().addClass("checked")}e(this).next(".multiSelectOptions").multiSelectUpdateSelected(t);if(i)i(e(this));return false}if(e(this).next(".multiSelectOptions").find("LABEL.hover INPUT:checkbox").attr("checked")){e(this).next(".multiSelectOptions").find("LABEL.hover INPUT:checkbox").attr("checked",false);e(this).next(".multiSelectOptions").multiSelectUpdateSelected(t);e(this).next(".multiSelectOptions").find("LABEL").removeClass("checked").find("INPUT:checked").parent().addClass("checked");e(this).next(".multiSelectOptions").find("INPUT:checkbox.selectAll").attr("checked",false).parent().removeClass("checked");if(i)i(e(this))}else{e(this).next(".multiSelectOptions").find("LABEL.hover INPUT:checkbox").attr("checked",true);e(this).next(".multiSelectOptions").multiSelectUpdateSelected(t);e(this).next(".multiSelectOptions").find("LABEL").removeClass("checked").find("INPUT:checked").parent().addClass("checked");if(i)i(e(this))}}return false}else{if(l.keyCode==38||l.keyCode==40||l.keyCode==13||l.keyCode==32){e(this).removeClass("focus").trigger("click");e(this).next(".multiSelectOptions").find("LABEL:first").addClass("hover");return false}if(l.keyCode==9){e(this).focus().next(":input").focus();return true}}if(l.keyCode==13)return false});e(l).remove()})},multiSelectOptionsHide:function(){e(this).removeClass("active").next(".multiSelectOptions").hide()},multiSelectOptionsShow:function(){e(".multiSelect").multiSelectOptionsHide();e(this).next(".multiSelectOptions").find("LABEL").removeClass("hover");e(this).addClass("active").next(".multiSelectOptions").show();var t=e(this).offset();multiSelectCurrent=e(this);var i="";e(this).next(".multiSelectOptions").hover(function(){clearTimeout(i)},function(){i=setTimeout('$(multiSelectCurrent).multiSelectOptionsHide(); $(multiSelectCurrent).unbind("hover");',250)})},multiSelectUpdateSelected:function(t){var i=0,l="";e(this).find("INPUT:checkbox:checked").not(".selectAll").each(function(){i++});if(i==0){e(this).prev("INPUT.multiSelect").val(t.noneSelected)}else{if(t.oneOrMoreSelected=="*"){var s="";e(this).find("INPUT:checkbox:checked").each(function(){if(e(this).parent().text()!=t.selectAllText)s=s+e(this).parent().text()+", "});s=s.substr(0,s.length-2);e(this).prev("INPUT.multiSelect").val(s)}else{e(this).prev("INPUT.multiSelect").val(t.oneOrMoreSelected.replace("%",i))}}}})}(jQuery);
!function(e){e.fn.ajaxSubmit=function(a){if(!this.length){t("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof a=="function")a={success:a};var r=e.trim(this.attr("action"));if(r){r=(r.match(/^([^#]+)/)||[])[1]}r=r||window.location.href||"";a=e.extend({url:r,type:this.attr("method")||"GET"},a||{});var i={};this.trigger("form-pre-serialize",[this,a,i]);if(i.veto){t("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(a.beforeSerialize&&a.beforeSerialize(this,a)===false){t("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=this.formToArray(a.semantic);if(a.data){a.extraData=a.data;for(var s in a.data){if(a.data[s]instanceof Array){for(var o in a.data[s])n.push({name:s,value:a.data[s][o]})}else n.push({name:s,value:a.data[s]})}}if(a.beforeSubmit&&a.beforeSubmit(n,this,a)===false){t("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[n,this,a,i]);if(i.veto){t("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var u=e.param(n);if(a.type.toUpperCase()=="GET"){a.url+=(a.url.indexOf("?")>=0?"&":"?")+u;a.data=null}else a.data=u;var f=this,l=[];if(a.resetForm)l.push(function(){f.resetForm()});if(a.clearForm)l.push(function(){f.clearForm()});if(!a.dataType&&a.target){var c=a.success||function(){};l.push(function(t){e(a.target).html(t).each(c,arguments)})}else if(a.success)l.push(a.success);a.success=function(e,t){for(var r=0,i=l.length;r<i;r++)l[r].apply(a,[e,t,f])};var m=e("input:file",this).fieldValue();var d=false;for(var h=0;h<m.length;h++)if(m[h])d=true;var v=false;if(a.iframe||d||v){if(a.closeKeepAlive)e.get(a.closeKeepAlive,p);else p()}else e.ajax(a);this.trigger("form-submit-notify",[this,a]);return this;function p(){var r=f[0];if(e(":input[name=submit]",r).length){alert('Error: Form elements must not be named "submit".');return}var i=e.extend({},e.ajaxSettings,a);var n=e.extend(true,{},e.extend(true,{},e.ajaxSettings),i);var s="jqFormIO"+(new Date).getTime();var o=e('<iframe id="'+s+'" name="'+s+'" src="about:blank" />');var u=o[0];o.css({position:"absolute",top:"-1000px",left:"-1000px"});var l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;o.attr("src","about:blank")}};var c=i.global;if(c&&!e.active++)e.event.trigger("ajaxStart");if(c)e.event.trigger("ajaxSend",[l,i]);if(n.beforeSend&&n.beforeSend(l,n)===false){n.global&&e.active--;return}if(l.aborted)return;var m=0;var d=0;var h=r.clk;if(h){var v=h.name;if(v&&!h.disabled){a.extraData=a.extraData||{};a.extraData[v]=h.value;if(h.type=="image"){a.extraData[name+".x"]=r.clk_x;a.extraData[name+".y"]=r.clk_y}}}setTimeout(function(){var t=f.attr("target"),n=f.attr("action");r.setAttribute("target",s);if(r.getAttribute("method")!="POST")r.setAttribute("method","POST");if(r.getAttribute("action")!=i.url)r.setAttribute("action",i.url);if(!a.skipEncodingOverride){f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(i.timeout)setTimeout(function(){d=true;b()},i.timeout);var l=[];try{if(a.extraData)for(var c in a.extraData)l.push(e('<input type="hidden" name="'+c+'" value="'+a.extraData[c]+'" />').appendTo(r)[0]);o.appendTo("body");u.attachEvent?u.attachEvent("onload",b):u.addEventListener("load",b,false);r.submit()}finally{r.setAttribute("action",n);t?r.setAttribute("target",t):f.removeAttr("target");e(l).remove()}},10);var p=50;function b(){if(m++)return;u.detachEvent?u.detachEvent("onload",b):u.removeEventListener("load",b,false);var a=true;try{if(d)throw"timeout";var r,n;n=u.contentWindow?u.contentWindow.document:u.contentDocument?u.contentDocument:u.document;var s=i.dataType=="xml"||n.XMLDocument||e.isXMLDoc(n);t("isXml="+s);if(!s&&(n.body==null||n.body.innerHTML=="")){if(--p){m=0;setTimeout(b,100);return}t("Could not access iframe DOM after 50 tries.");return}l.responseText=n.body?n.body.innerHTML:null;l.responseXML=n.XMLDocument?n.XMLDocument:n;l.getResponseHeader=function(e){var t={"content-type":i.dataType};return t[e]};if(i.dataType=="json"||i.dataType=="script"){var f=n.getElementsByTagName("textarea")[0];l.responseText=f?f.value:l.responseText}else if(i.dataType=="xml"&&!l.responseXML&&l.responseText!=null){l.responseXML=g(l.responseText)}r=e.httpData(l,i.dataType)}catch(h){a=false;e.handleError(i,l,"error",h)}if(a){i.success(r,"success");if(c)e.event.trigger("ajaxSuccess",[l,i])}if(c)e.event.trigger("ajaxComplete",[l,i]);if(c&&!--e.active)e.event.trigger("ajaxStop");if(i.complete)i.complete(l,a?"success":"error");setTimeout(function(){o.remove();l.responseXML=null},100)}function g(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else t=(new DOMParser).parseFromString(e,"text/xml");return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null}}};e.fn.ajaxForm=function(t){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){e(this).ajaxSubmit(t);return false}).each(function(){e(":submit,input:image",this).bind("click.form-plugin",function(t){var a=this.form;a.clk=this;if(this.type=="image"){if(t.offsetX!=undefined){a.clk_x=t.offsetX;a.clk_y=t.offsetY}else if(typeof e.fn.offset=="function"){var r=e(this).offset();a.clk_x=t.pageX-r.left;a.clk_y=t.pageY-r.top}else{a.clk_x=t.pageX-this.offsetLeft;a.clk_y=t.pageY-this.offsetTop}}setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},10)})})};e.fn.ajaxFormUnbind=function(){this.unbind("submit.form-plugin");return this.each(function(){e(":submit,input:image",this).unbind("click.form-plugin")})};e.fn.formToArray=function(t){var a=[];if(this.length==0)return a;var r=this[0];var i=t?r.getElementsByTagName("*"):r.elements;if(!i)return a;for(var n=0,s=i.length;n<s;n++){var o=i[n];var u=o.name;if(!u)continue;if(t&&r.clk&&o.type=="image"){if(!o.disabled&&r.clk==o){a.push({name:u,value:e(o).val()});a.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y})}continue}var f=e.fieldValue(o,true);if(f&&f.constructor==Array){for(var l=0,c=f.length;l<c;l++)a.push({name:u,value:f[l]})}else if(f!==null&&typeof f!="undefined")a.push({name:u,value:f})}if(!t&&r.clk){var m=e(r.clk),d=m[0],u=d.name;if(u&&!d.disabled&&d.type=="image"){a.push({name:u,value:m.val()});a.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y})}}return a};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var a=[];this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array){for(var n=0,s=i.length;n<s;n++)a.push({name:r,value:i[n]})}else if(i!==null&&typeof i!="undefined")a.push({name:this.name,value:i})});return e.param(a)};e.fn.fieldValue=function(t){for(var a=[],r=0,i=this.length;r<i;r++){var n=this[r];var s=e.fieldValue(n,t);if(s===null||typeof s=="undefined"||s.constructor==Array&&!s.length)continue;s.constructor==Array?e.merge(a,s):a.push(s)}return a};e.fieldValue=function(e,t){var a=e.name,r=e.type,i=e.tagName.toLowerCase();if(typeof t=="undefined")t=true;if(t&&(!a||e.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!e.checked||(r=="submit"||r=="image")&&e.form&&e.form.clk!=e||i=="select"&&e.selectedIndex==-1))return null;if(i=="select"){var n=e.selectedIndex;if(n<0)return null;var s=[],o=e.options;var u=r=="select-one";var f=u?n+1:o.length;for(var l=u?n:0;l<f;l++){var c=o[l];if(c.selected){var m=c.value;if(!m)m=c.attributes&&c.attributes["value"]&&!c.attributes["value"].specified?c.text:c.value;if(u)return m;s.push(m)}}return s}return e.value};e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})};e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();if(e=="text"||e=="password"||t=="textarea")this.value="";else if(e=="checkbox"||e=="radio")this.checked=false;else if(t=="select")this.selectedIndex=-1})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};e.fn.enable=function(e){if(e==undefined)e=true;return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(t==undefined)t=true;return this.each(function(){var a=this.type;if(a=="checkbox"||a=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");if(t&&r[0]&&r[0].type=="select-one"){r.find("option").selected(false)}this.selected=t}})};function t(){if(e.fn.ajaxSubmit.debug&&window.console&&window.console.log)window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}}(jQuery);
jQuery.fn.aDisable=function(){return this.each(function(){var e=$(this);if(!e.hasClass("h24_disabled"))e.addClass("h24_disabled");var n=e.data("events");if(typeof n!="undefined"&&typeof n.click!="undefined"){if(!e.hasClass("h24_preexisting_event"))e.addClass("h24_preexisting_event");return}e.unbind("click");e.bind("click",function(){return false})})};jQuery.fn.aEnable=function(){return this.each(function(){var e=$(this);e.removeClass("h24_disabled");if(e.hasClass("h24_preexisting_event")){e.removeClass("h24_preexisting_event");return}e.unbind("click")})};
!function(e){var o={init:function(o){var t={boxZ:1e3,elemZ:10};var o=e.extend(true,t,o);return this.each(function(){var t=e(this),i=t.data("overlayWindow"),a=t.offset(),r=t.width(),n=t.height(),l,s;if(!i){t.data("overlayWindow",o);i=t.data("overlayWindow")}l=e("<div />");l.css({position:"fixed",top:0,left:0,width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0)","z-index":i.boxZ}).appendTo(".sitepreview");$localClickBlocker=e("<div />");$localClickBlocker.css({position:"absolute",top:-250,left:0,width:r,height:n+500,"background-color":"rgba(0, 0, 0, 0)","z-index":i.elemZ-1}).appendTo(t);s=e("<div />");s.css({position:"absolute",top:0,left:0,width:r,height:n,"box-shadow":"0px 0px 0px 5000px rgba(0, 0, 0, 0.5)","z-index":i.elemZ}).appendTo(t);i.clickBlocker=l;i.localClickBlocker=$localClickBlocker;i.shadow=s})},setSeeThrough:function(o){return this.each(function(){var t=e(this),i=t.data("overlayWindow");if(o){i.shadow.css("box-shadow","")}else{i.shadow.css("box-shadow","0px 0px 0px 5000px rgba(0, 0, 0, 0.5)")}})},destroy:function(){return this.each(function(){var o=e(this);data.clickBlocker.remove();data.shadow.remove();data.localClickBlocker.remove();o.removeData("overlayWindow")})},updateHeight:function(){return this.each(function(){var o=e(this),t=o.data("overlayWindow");t.shadow.height(o.height());t.localClickBlocker.height(o.height()+500)})},rerender:function(){return this.each(function(){var o=e(this),t=o.data("overlayWindow");if(t.shadow[0].style.outline){t.shadow[0].style.outline=null}else{t.shadow[0].style.outline="transparent"}})}};e.fn.overlayWindow=function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof t==="object"||!t)return o.init.apply(this,arguments);else e.error("Non-existing method: "+plugin_name+"."+t)}}(jQuery);
!function(e){var a={init:function(t){var o={objectClass:"h24_collage_object",objectSettingsClass:"h24_collage_object_settings_panel",objectSettingsContainer:"#h24_collage_object_settings_container",objectContentClass:"h24_collage_object_content",dialogZindex:2e4,mode:"",fixedZ:500,floatingZ:2500,expandDuration:400,objects:{},maxHeight:1e3,maxWidth:1e3,snap:false,objectListItemMaxLength:17,objectListPreviewHeight:50,objectListPreviewWidth:150,selectionMarkerBorderWidth:1,backgroundColor:"#ffffff",deletionConfirmationString:$h24.phrase.GUIPhrase("General","Are you sure you want to delete this object?"),objectSettingsOriginalOffset:400,keyDownTimeout:300};$h24.adminPanel.togglePanel(true);e("html").css({"margin-top":83,"overflow-x":"hidden"}).addClass("h24_collage-editor-active");e("#h24_header_collage_editor_button").remove();var t=e.extend(true,o,t);var l=e(this);var i=l.data("collage");if(!i){l.data("collage",t);var i=l.data("collage")}var s;switch(parseInt($h24.design_id,10)){case 43:s=450;break;default:s=9;break}l.overlayWindow({elemZ:300,boxZ:s});i.backgroundColor=l.extractBackground();i.firstSettingsPanelLoaded=false;l.css("overflow","visible");i.bodyOverflow=e("body").css("overflow");i.bodyMarginTop=e("body").css("margin-top");i.bodyHeight=e("body").css("height");e("body").css({overflow:"hidden",height:"auto"});l.addClass("h24_collage");var n={homepageid:$h24.homepageid,model:"CollageManager",modelaction:"init",mode:i.mode,width:l.width(),height:l.height(),pageid:$h24.pageid,__skip_loading_overlay:true,__keep_loading_overlay:true};l.css("background-image","none");l.find(".h24_collage_object").remove();e("#h24_flag_list").hide();$h24.post($h24.slashwebroot+"Page/Communicator",n,function(t){e(t).appendTo("body");var o=e(i.objectSettingsContainer);o.draggable({handle:".h24_dialogBoxFlaps_left",stop:function(){l.overlayWindow("rerender")}});var s=e("#h24_collage_editor_top_panel");var n=e("#volatile_collage_object_container");var c=e("#h24_collage_editor_loading_spinner");var r=e("#h24_collage_editor_settings_loading_spinner");var d=e("#h24_collage_settings_loading_overlay");var _=e("#h24_collage_object_hover_ants_border_top");var h=e("#h24_collage_object_hover_ants_border_right");var f=e("#h24_collage_object_hover_ants_border_bottom");var g=e("#h24_collage_object_hover_ants_border_left");var v=e("#h24_collage_object_selected_ants_border_top");var u=e("#h24_collage_object_selected_ants_border_right");var p=e("#h24_collage_object_selected_ants_border_bottom");var b=e("#h24_collage_object_selected_ants_border_left");var m=e("#h24_collage_object_menu");c.appendTo(l);_.appendTo(l);h.appendTo(l);f.appendTo(l);g.appendTo(l);v.appendTo(l);u.appendTo(l);p.appendTo(l);b.appendTo(l);m.appendTo(l);r.appendTo(e(i.objectSettingsContainer));d.appendTo(e(i.objectSettingsContainer));i.collageid=s.find("input[name=collageid]").val();i.spinner=c;i.settings_spinner=r;i.settings_overlay=d;i.object_selection_border_top=_;i.object_selection_border_right=h;i.object_selection_border_bottom=f;i.object_selection_border_left=g;i.object_selection_delete_link=m;i.object_selected_border_top=v;i.object_selected_border_right=u;i.object_selected_border_bottom=p;i.object_selected_border_left=b;m.mouseover(function(){if(!m.hasClass("h24_hover"))m.addClass("h24_hover");m.css("visibility","visible")}).mouseout(function(){m.removeClass("h24_hover");if(i.selectedObject>0){if(!i.objects[i.selectedObject].hasClass("h24_hover"))m.css("visibility","hidden")}else m.css("visibility","hidden")}).css("visibility","hidden");$key_catcher=e("#h24_collage_editor_key_catcher");i.key_catcher=$key_catcher;$key_catcher.inputTimeout({onTimeout:function(e){var t=l.find(".h24_collage_object.selected");if(t.length==1&&t.hasClass("h24_save_position")){t.removeClass("h24_save_position");a.saveObject.call(l[0],"position",t,{skipLoadingOverlay:true})}},onKeyUp:function(e,t){var o=l.find(".h24_collage_object.selected");switch(t){case 46:var s=confirm(i.deletionConfirmationString);if(s===true){a.deleteObject.call(l[0],o)}break;case 37:o.css("left",parseInt(o.css("left"),10)-1);o.addClass("h24_save_position");a.setSelectionMarker.call(l[0],o,true);break;case 38:o.css("top",parseInt(o.css("top"),10)-1);o.addClass("h24_save_position");a.setSelectionMarker.call(l[0],o,true);break;case 39:o.css("left",parseInt(o.css("left"),10)+1);o.addClass("h24_save_position");a.setSelectionMarker.call(l[0],o,true);break;case 40:o.css("top",parseInt(o.css("top"),10)+1);o.addClass("h24_save_position");a.setSelectionMarker.call(l[0],o,true);break}},delay:500,triggerOnlyOnDifferentValue:false});s.find("input[name=shade_toggler]").bind("click change",function(){var a=e(this);if(this.checked)l.overlayWindow("setSeeThrough",true);else l.overlayWindow("setSeeThrough",false)});s.find("input[name=snap_toggler]").bind("click change",function(){var e=this.checked;i.snap=e;if(e){for(var a in i.objects)i.objects[a].draggable("option","snap",".h24_collage,."+i.objectClass)}else{for(var a in i.objects)i.objects[a].draggable("option","snap",false)}});var j=s.find(".height_slider input[name=value]");var k=parseInt(j.val());var C=parseInt(s.find(".height_slider input[name=min]").val());var w=parseInt(s.find(".height_slider input[name=max]").val());var y=s.find(".height_slider input[name=design_tweak_slot_id]").val();var $=s.find(".height_slider .slider");$.slider({min:C,value:k,max:w,slide:function(e,a){l.height(a.value);l.overlayWindow("updateHeight");j.val(a.value)},stop:function(e,t){a.saveHeight.call(l[0],t.value,y,C,w)}});j.blur(function(){var t=e(this);var o=parseInt(t.val());if(isNaN(o))o=0;var i=$.slider("value",o).slider("value");l.height(i);l.overlayWindow("updateHeight");if(o!=i)t.val(i);a.saveHeight.call(l[0],i,y,C,w)});var x=s.find(".objects_button_container");var O=x.find(".objects_list_container");i.objects_list_container=O;x.mouseover(function(){e(this).addClass("h24_hover");O.show()}).mouseout(function(){e(this).removeClass("h24_hover");O.hide();a.hideSelectionMarker.call(l[0])});s.find(".cancel_button_container a.cancel_and_reload").click(function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"remove_working_copy",__keep_loading_overlay:true},function(e){if(e.successful){var a=parseInt(s.find(".height_slider input[name=min]").val(),10);var t=parseInt(s.find(".height_slider input[name=max]").val(),10);var o=parseInt(s.find(".height_slider input[name=revert_value]").val(),10);var l=s.find(".height_slider input[name=design_tweak_slot_id]").val();var i={homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_tweaks",local_data:{}};i.local_data[l]={css:"height:"+o+","+a+","+t};$h24.post($h24.slashwebroot+"Page/Communicator",i,function(e){refreshBrowser()})}});return false});s.find(".panel_buttons a").each(function(){var t=e(this);if(t.hasClass("smart_save")){t.click(function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"smart_save",__keep_loading_overlay:true},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()});return false})}if(t.hasClass("expand_save_submenu")){t.click(function(){a.toggleSaveSubmenu.call(l[0]);return false})}else if(t.hasClass("add_text_dialog")){t.click(function(){a.unselectObjects.call(l[0]);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_text_dialog"},function(t){var o=$h24.dialog.create("h24_collage_add_text",t,{overlayZIndex:i.dialogZindex});o.markup.find("a").click(function(){var t=e(this);if(t.hasClass("add_imagetext")){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_imagetext",collageid:i.collageid,background_color:i.backgroundColor},function(t){var i=e(t);i.css({top:l.offset().top,left:l.offset().left});a.initObject.call(l[0],i);o.close()});return false}else if(t.hasClass("add_text")){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_text",collageid:i.collageid,background_color:i.backgroundColor},function(t){var i=e(t);i.css({top:l.offset().top,left:l.offset().left});a.initObject.call(l[0],i);o.close()});return false}})});return false})}else if(t.hasClass("add_image_dialog")){t.click(function(){a.unselectObjects.call(l[0]);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_image_dialog"},function(t){var o=$h24.dialog.create("h24_collage_add_text",t,{overlayZIndex:i.dialogZindex,width:800,closeCallback:function(){$h24.coreUploader.destroy("h24_collage_uploader_placeholder");this.close()}});var s=o.markup;s.find(".h24_add_image_dialog_tab_container").tabs();$h24.coreUploader.create("h24_collage_uploader_placeholder",e("#h24_collage_uploader_placeholder"),{type:"default",mode:$h24.coreUploader.IMAGE_UPLOADER_MODE,maxQueuedFiles:1,maxFileSize:"10mb",fileUploaded:function(t){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_from_pictureid",collageid:i.collageid,pictureid:t.pictureid},function(t){var o=e(t);o.css({top:l.offset().top,left:l.offset().left});a.initObject.call(l[0],o)})},allFilesUploaded:function(){$h24.coreUploader.destroy("h24_collage_uploader_placeholder");o.close()}});s.find(".user_pattern_container").click(function(t){var s=e(t.target);if(s.hasClass("pattern_preview"))var n=s.find("input[name=user_file_id]").val();else if(s.hasClass("pattern_preview_image")||s.hasClass("scaled_preview"))var n=s.closest(".pattern_preview").find("input[name=user_file_id]").val();if(typeof n=="undefined")return;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_from_user_file_id",collageid:i.collageid,user_file_id:n},function(t){if(typeof t=="string"){var i=e(t);i.css({top:l.offset().top,left:l.offset().left});a.initObject.call(l[0],i);$h24.coreUploader.destroy("h24_collage_uploader_placeholder");o.close()}else{alert(translatedString("Couldn't import the file")+" (Error "+t.errorcode+")")}})});s.find("div.h24_add_image_dialog_external_tab a.image_from_external_url").click(function(){var t=e(this).closest("div.h24_add_image_dialog_external_tab").find("input[name=url]").val();if(t=="")return false;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"add_from_external_url",collageid:i.collageid,url:t},function(t){if(typeof t=="string"){var i=e(t);i.css({top:l.offset().top,left:l.offset().left});a.initObject.call(l[0],i);$h24.coreUploader.destroy("h24_collage_uploader_placeholder");o.close()}else{if(t.errorcode==1)alert(translatedString("Specified file bigger than")+" "+t.file_size_limit+" bytes, "+translatedString("try uploading it manually instead")+".");else alert(translatedString("Couldn't import the file")+", "+translatedString("try uploading it manually instead")+". (Error "+t.errorcode+")")}});return false})});return false})}else if(t.hasClass("set_background")){t.click(function(){a.unselectObjects.call(l[0]);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"background_dialog",collageid:i.collageid},function(a){var t=$h24.dialog.create("h24_collage_background",a,{overlayZIndex:i.dialogZindex,width:450,sidePadding:15});var o=t.markup;var s=o.find(".h24_background_dialog_color_tab");var n=s.find("input[name=current_color]");var c=s.find(".colorpicker");c.canvasPicker({color:n.val(),allowTransparency:true});o.find(".buttons a").click(function(){var a=e(this);if(a.hasClass("pick_background")){var o=c.canvasPickerGetColor();l.css("background-color",o);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"pick_background",collageid:i.collageid,background_color:o},function(e){if(!e.successful&&$h24.devmode)console.log(e);i.backgroundColor=o;t.close()});return false}else if(a.hasClass("h24_close")){t.close();return false}})});return false})}else if(t.hasClass("h24_revert")){t.click(function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"revert_specific_collage",__keep_loading_overlay:true,pageid:$h24.pageid},function(e){if((!e.successful||typeof e=="string")&&$h24.devmode)console.log(e);else refreshBrowser()});return false});var o=e("#h24_collage_editor_revert_tooltip");t.mouseover(function(){o.show()}).mouseout(function(){o.hide()})}});e("#h24_collage_editor_save_submenu a").click(function(){var t=e(this);a.toggleSaveSubmenu.call(l[0]);if(t.hasClass("save_as_default")){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_as_default",__keep_loading_overlay:true},function(e){if((!e.successful||typeof e=="string")&&$h24.devmode)console.log(e);else refreshBrowser()})}else if(t.hasClass("save_to_active_page")){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_pageid",pageid:$h24.pageid,__keep_loading_overlay:true},function(e){if((!e.successful||typeof e=="string")&&$h24.devmode)console.log(e);else refreshBrowser()})}else if(t.hasClass("save_to_other_pages_dialog")){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_other_pages_dialog",pageid:$h24.pageid},function(a){var t=$h24.dialog.create("h24_collage_save_to_other_pages",a,{overlayZIndex:i.dialogZindex,width:800});var o=t.markup;o.find(".h24_save_to_other_pages_dialog_tab_container").tabs();o.find(".h24_save_to_other_pages_dialog_single_tab a").click(function(){var a=e(this);if(a.hasClass("pick_specific_page")){var t=a.closest(".h24_save_to_other_pages_dialog_single_tab").find("select[name=pages]").val();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_ci",common_identifier:t},function(e){if((!e.successful||typeof e=="string")&&$h24.devmode)console.log(e);else refreshBrowser()});return false}});var l=o.find(".h24_save_to_other_pages_dialog_multiple_tab");l.find("select[name=language]").change(function(){l.find(".language_container").hide();e("#h24_save_to_other_pages_dialog_page_language_container_"+e(this).val()).show()});l.find(".buttons a").click(function(){var a=e(this);if(a.hasClass("save_to_multiple_pages")){var o=l.find(".language_container:visible input[type=checkbox]");var i=0;var s=[];o.each(function(){var a=e(this);if(this.checked){i++;s[s.length]=a.val()}});if(i==0)return;if(o.length==i){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_language_by_cis",common_identifiers:s,__keep_loading_overlay:true},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()})}else{$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_multiple_cis",common_identifiers:s,__keep_loading_overlay:true},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()})}}else if(a.hasClass("cancel"))t.close();return false});var s=o.find(".h24_save_to_other_pages_dialog_language_tab");s.find(".buttons a").click(function(){var a=e(this);if(a.hasClass("save_to_languages")){var o=s.find(".language_container input[type=checkbox]");var l=[];var i=0;o.each(function(){var a=e(this);if(this.checked){i++;l[l.length]=a.val()}});if(i==0)return;if(o.length==i){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"delete_all_and_save_as_default",__keep_loading_overlay:true},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()})}else{$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_to_languages",homepage_language_ids:l,__keep_loading_overlay:true},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()})}}else if(a.hasClass("cancel"))t.close();return false})})}return false});n.find(".h24_collage_object_container").each(function(t){a.initObject.call(l[0],e(this),true)});var S=l.find(".h24_boxed_overlay");S.click(function(t){var o=e(t.target);var s=t.pageX;var n=t.pageY;var c;for(var r in i.objects){var d=i.objects[r];var _=d.offset();var h=d.width();var f=d.height();if(s>=_.left&&s<=_.left+h&&n>=_.top&&n<=_.top+f){c=d;break}}if(typeof c!="undefined")a.selectObject.call(l[0],c);else a.unselectObjects.call(l[0])});a.populateObjectList.call(l[0]);a.triggerInitSpinner.call(l[0]);var M;M=e("#h24_header_collage_editor_generic_help_tooltip");if(M.length==1){M.find("a").bind("click",{tooltip:M},function(a){var t=a.data.tooltip;var o=e(this);if(o.hasClass("h24_hide_and_start_video")){if(typeof $h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_generic_help!="undefined"){$h24.utils.vimeoVideo($h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_generic_help.vimeoId,{videoWidth:$h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_generic_help.width,videoHeight:$h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_generic_help.height})}t.remove();return false}else if(o.hasClass("h24_hide")){t.remove();return false}else if(o.hasClass("h24_hide_forever")){$h24.tooltips.blockTooltip("header_collage_editor_generic_help");t.remove();return false}})}M=e("#h24_header_collage_editor_save_help_tooltip");if(M.length==1){M.find("a").bind("click",{tooltip:M},function(a){var t=a.data.tooltip;var o=e(this);if(o.hasClass("h24_hide_and_start_video")){if(typeof $h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_save_help!="undefined"){$h24.utils.vimeoVideo($h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_save_help.vimeoId,{videoWidth:$h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_save_help.width,videoHeight:$h24.data.help[$h24.fullLanguage].autonomous.header_collage_editor_save_help.height})}t.remove();return false}else if(o.hasClass("h24_hide")){t.remove();return false}else if(o.hasClass("h24_hide_forever")){$h24.tooltips.blockTooltip("header_collage_editor_save_help");t.remove();return false}})}});return this},initObject:function(t,o){var l=e(this);var i=l.data("collage");if(typeof o=="undefined")o=false;var s=t.find("."+i.objectClass);var n=t.find("."+i.objectSettingsClass);var c=s.find("input[name=collageobjectid]").val();s.appendTo(l);n.appendTo(e(i.objectSettingsContainer));n.tabs();s.click(function(){a.selectObject.call(l[0],s);i.object_selection_delete_link.css("visibility","visible")});var r=s.data("collageObject");if(!r){s.data("collageObject",{collageobjectid:c,settings:n});var r=s.data("collageObject")}i.objects[c]=s;var d=i.snap?".h24_collage,."+i.objectClass:false;s.draggable({start:function(e,t){a.hideSelectionMarker.call(l[0]);a.hideSelectionMarker.call(l[0],true);i.object_selection_delete_link.hide()},stop:function(e,t){if(s.hasClass("h24_collage_fixed_object")){a.revertPositionIfNeeded.call(l[0],s,t.originalPosition)}a.saveObject.call(l[0],"position",s);a.setSelectionMarker.call(l[0],s,true)},snap:d});if(s.hasClass("h24_collage_object_image")||s.hasClass("h24_collage_object_imagetext")){var _=s.find(".h24_collage_object_content img");_[0].onload=function(){var t=e(this).closest("."+i.objectClass);var o=t.data("collageObject");o.imageInitialized=true;a.triggerInitSpinner.call(l[0])};_.onerror=function(){var a=e(this).closest("."+i.objectClass);var t=a.data("collageObject");t.imageInitialized=true};r.imageInitialized=false;a.triggerInitSpinner.call(l[0])}else r.imageInitialized=true;var h=s.find("."+i.objectContentClass);n.find("a.h24_dialog_close_link").click(function(){a.unselectObjects.call(l[0]);return false});var f=n.find(".placeholder_settings");if(f.length==1){f.find("select").change(function(){var t=e(this);a.savePlaceholder.call(l[0],s,t.val())})}var g=n.find(".object_settings");if(g.length==1){g.find("a").click(function(){var t=e(this);if(t.hasClass("delete")){var o=confirm(i.deletionConfirmationString);if(o===true)a.deleteObject.call(l[0],s);return false}})}var v=n.find(".position_settings");if(v.length==1){v.find("a").each(function(){var t=e(this);t.click(function(){var e=s.position();if(t.hasClass("origo")){s.css({left:0,top:0})}else if(t.hasClass("h24_up")){s.css({left:e.left,top:e.top-1})}else if(t.hasClass("h24_right")){s.css({left:e.left+1,top:e.top})}else if(t.hasClass("h24_down")){s.css({left:e.left,top:e.top+1})}else if(t.hasClass("h24_left")){s.css({left:e.left-1,top:e.top})}a.saveObject.call(l[0],"position",s);return false})})}var u=n.find(".scale_settings");if(u.length==1){var p=u.find("div.slider");var b=u.find("input[name=scale]");var m=u.find(".slider_text");var j=u.find("input[name=org_width]").val();var k=u.find("input[name=org_height]").val();var _=s.find(".h24_collage_object_content img");p.slider({min:1,max:100,value:b.val(),slide:function(e,a){m.text(a.value+"%")},stop:function(e,t){b.val(t.value);a.saveObject.call(l[0],"force_scale",s,{scale:t.value,img:_})}});u.find(".buttons a").click(function(){var t=e(this);var o=-1;if(t.hasClass("scale_10"))o=10;else if(t.hasClass("scale_50"))o=50;else if(t.hasClass("scale_100"))o=100;if(o>-1){p.slider("value",o);b.val(o);m.text(o+"%");a.saveObject.call(l[0],"force_scale",s,{scale:o,img:_});return false}})}var C=n.find(".h24_cm_edit_image_button");if(C.length==1){C.find("a").click(function(){var t=e(this);if(t.hasClass("h24_cm_edit_image")){var o=C.find("input[name=pictureid]").val();$h24.image_manager.imageEditors("collage",o,null,function(e){if(typeof e!="undefined"&&e!==null){C.find("input[name=pictureid]").val(e);a.saveObject.call(l[0],"anti-cache",s)}});return false}})}var w=n.find(".text_settings");if(w.length==1){w.find("input[name=text]").bind("keyup",function(t){var o=e(this);if(typeof r.keyDownTimer!="undefined"){clearTimeout(r.keyDownTimer);delete r.keyDownTimer}r.keyDownTimer=setTimeout(function(){a.saveObject.call(l[0],"text",s,o.val());delete r.keyDownTimer},i.keyDownTimeout);if(s.hasClass("h24_collage_object_text")){h.text(o.val());a.positionObjectExtras.call(l[0],s,true)}});var y=w.find(".fontface_text");var $=w.find("input[name=fontface]");if(s.hasClass("h24_collage_object_text")){var x=w.find("input[name=fontface_type]");var O=w.find("input[name=fontface_family]");var S=x.val();var M=O.val();if(S=="google"||S=="local")$h24.design_manager.loadFonts($.val(),S)}w.find("a.fontface_dialog").click(function(){var e={useFontLoaderOnOk:s.hasClass("h24_collage_object_text"),current:$.val(),dialogSettings:{overlayZIndex:i.dialogZindex},okCallback:function(e,t,o){if(s.hasClass("h24_collage_object_text")){x.val(o);O.val(t)}a.saveObject.call(l[0],"fontface",s,e);this.close()},textElements:y,valElements:$};if(s.hasClass("h24_collage_object_text"))e.cssElements=s;if(s.hasClass("h24_collage_object_imagetext"))e.ttfOnly=true;$h24.design_manager.genericFontPicker(e);return false});w.find("select[name=font-size]").bind("change",function(t){if(s.hasClass("h24_collage_object_text"))s.css("font-size",e(this).val()+"px");a.saveObject.call(l[0],"font-size",s,e(this).val())});var P=w.find(".h24_header_fontface_color_preview");var I=w.find("input[name=color]");var T=I.val();w.find("a.h24_fontface_color_dialog").click(function(){e("#h24_collage_object_settings_container").hide();$h24.utils.colorPicker({color:I.val(),dragCallback:function(e){if(s.hasClass("h24_collage_object_text")){s.css("color",e)}P.css("background-color",e);I.val(e)},changedCallback:function(e){if(s.hasClass("h24_collage_object_imagetext")){a.saveObject.call(l[0],"color",s,e)}},saveCallback:function(t){if(s.hasClass("h24_collage_object_text")){a.saveObject.call(l[0],"color",s,t)}e("#h24_collage_object_settings_container").show();$h24.coreDialogs.h24_canvas_picker.content.find(".h24_canvas_picker").addClass("h24_saving_and_closing")},dialogSettings:{transparentOverlay:true,showCloseButton:true,contentContainerCss:{top:parseInt(e(window).height()/3,10)},overlayClickToClose:true,onClose:function(){if(!$h24.coreDialogs.h24_canvas_picker.content.find(".h24_canvas_picker").hasClass("h24_saving_and_closing")){P.css("background-color",T);I.val(T);if(s.hasClass("h24_collage_object_text")){s.css("color",T)}else if(s.hasClass("h24_collage_object_imagetext")){a.saveObject.call(l[0],"color",s,T)}e("#h24_collage_object_settings_container").show()}}},allowTransparency:false,hideTopPanel:false});return false})}var z=n.find(".z_index_settings");if(z.length==1){z.find("a").each(function(){var t=e(this);t.click(function(){if(t.hasClass("h24_up"))a.saveObject.call(l[0],"up",s);else if(t.hasClass("h24_down"))a.saveObject.call(l[0],"down",s);else if(t.hasClass("h24_top"))a.saveObject.call(l[0],"top",s);else if(t.hasClass("h24_bottom"))a.saveObject.call(l[0],"bottom",s);return false})})}var L=n.find(".free_floating_settings");var E=n.find(".h24_collage_object_link_settings .h24_collage_object_link_float_info");var Z=n.find(".h24_collage_object_link_settings input[name=toggle_linking]");var D=n.find(".h24_collage_object_link_settings .h24_collage_object_link_without_float_warning");L.find("input[name=free_floating]").bind("click",function(){var t=e(this);if(this.checked){s.removeClass("h24_collage_fixed_object");if(!s.hasClass("h24_collage_free_floating_object"))s.addClass("h24_collage_free_floating_object");a.saveObject.call(l[0],"free_floating",s);D.hide()}else{s.removeClass("h24_collage_free_floating_object");if(!s.hasClass("h24_collage_fixed_object"))s.addClass("h24_collage_fixed_object");a.saveObject.call(l[0],"free_floating",s);if(a.revertPositionIfNeeded.call(l[0],s))a.saveObject.call(l[0],"position",s);E.hide();if(Z[0].checked)D.show()}});var W=n.find(".fade_settings");if(W.length==1){var B=W.find("div.slider");var H=W.find("select[name=direction]");var U=W.find("input[name=percentage]").val();B.slider({value:U,min:0,max:100,stop:function(e,t){a.saveObject.call(l[0],"fade",s,{percentage:t.value,direction:H.val()})}});H.bind("change",function(){a.saveObject.call(l[0],"fade",s,{percentage:B.slider("value"),direction:e(this).val()})})}var F=n.find(".opacity_settings");if(F.length==1){var N=F.find("div.slider");var A=F.find("input[name=opacity]");N.slider({min:1,max:10,value:A.val()/10,slide:function(e,a){if(s.hasClass("h24_collage_object_text")){s.css({opacity:a.value*.1})}},stop:function(e,t){A.val(t.value*10);a.saveObject.call(l[0],"opacity",s,t.value*10)}});F.find(".buttons a").click(function(){var t=e(this);var o=-1;if(t.hasClass("opacity_10"))o=1;else if(t.hasClass("opacity_50"))o=5;else if(t.hasClass("opacity_100"))o=10;if(o>-1){N.slider("value",o);if(s.hasClass("h24_collage_object_text")){s.css({opacity:o*.1})}A.val(o*10);a.saveObject.call(l[0],"opacity",s,o*10);return false}})}var G=n.find(".rotate_settings");if(G.length==1){var V=G.find("div.slider");var A=G.find("input[name=rotate]");var Q=G.find(".slider_text");var K=parseInt(A.val());V.slider({min:0,max:360,value:K,start:function(e,a){K=a.value},slide:function(e,a){var t=a.value-K;s.css({"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)"});Q.html(a.value+"&deg;")},stop:function(e,t){a.saveObject.call(l[0],"rotate",s,t.value)}});G.find("a").click(function(){var t=e(this);var o=-1;if(t.hasClass("rotate_0"))o=0;else if(t.hasClass("rotate_90"))o=90;else if(t.hasClass("rotate_180"))o=180;else if(t.hasClass("rotate_270"))o=270;if(o>=0){var i=o-K;s.css({"-webkit-transform":"rotate("+i+"deg)","-moz-transform":"rotate("+i+"deg)"});V.slider("value",o);a.saveObject.call(l[0],"rotate",s,o);Q.html(o+"&deg;");return false}})}var R=n.find(".h24_collage_object_link_settings");if(R.length==1){var X=R.find(".buttons");var Y=R.find("input[name=link]");var q=R.find("input[name=link_type]");var J=R.find("input[name=link_target]");var ea=R.find("input[name=link_metadata]");var aa=R.find("span.h24_link_description");var Z=R.find("input[name=toggle_linking]");var ta=R.find(".h24_collage_object_link_float_info");var D=R.find(".h24_collage_object_link_without_float_warning");Z.click(function(){var e=Y.val();if(this.checked){if(e==""){R.find(".h24_modify_link").hide();R.find(".h24_create_link").show()}else{R.find(".h24_create_link").hide();R.find(".h24_modify_link").show()}X.show();if(L.length==1){D.hide();ta.show();L.find("input[name=free_floating]")[0].checked=true;s.removeClass("h24_collage_fixed_object");if(!s.hasClass("h24_collage_free_floating_object"))s.addClass("h24_collage_free_floating_object");a.saveObject.call(l[0],"free_floating",s)}}else{D.hide();ta.show();X.hide();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"unlink_object",collageobjectid:c},function(e){if(!e.successful&&$h24.devmode)console.log(e)});Y.val("");q.val("");J.val("");ea.val("")}});R.find("a.h24_link_anchor").click(function(){if(Y.val()=="")var e={};else{var e={link:Y.val(),link_type:q.val(),link_target:J.val(),link_metadata:ea.val()}}$h24.link.h24coreDialog("collageobject",r.collageobjectid,"",e,function(e,t){switch(e){case"save":Y.val(t.link);q.val(t.link_type);J.val(t.link_target);ea.val(t.link_metadata);$h24.link.getLinkDescription(t.link,t.link_type,t.link_metadata,{html:aa});R.find(".h24_create_link").hide();R.find(".h24_modify_link").show();if(L.length==1){ta.show();L.find("input[name=free_floating]")[0].checked=true;s.removeClass("h24_collage_fixed_object");if(!s.hasClass("h24_collage_free_floating_object"))s.addClass("h24_collage_free_floating_object");a.saveObject.call(l[0],"free_floating",s)}break;case"remove":aa.text("");R.find(".h24_modify_link").hide();R.find(".h24_create_link").show();Z[0].checked=false;D.hide();ta.show();X.hide();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"unlink_object",collageobjectid:c},function(e){if(!e.successful&&$h24.devmode)console.log(e)});Y.val("");q.val("");J.val("");ea.val("");break}$h24.dialogs.h24_generic_linking_dialog.close()},{overlayZIndex:i.dialogZindex});return false})}if(s.hasClass("h24_collage_free_floating_object"))s.css("z-index",parseInt(s.css("z-index"))+i.floatingZ);else s.css("z-index",parseInt(s.css("z-index"))+i.fixedZ);s.mouseover(function(){if(s.hasClass("ui-draggable-dragging"))return;if(!s.hasClass("h24_hover"))s.addClass("h24_hover");a.setSelectionMarker.call(l[0],s);if(s.hasClass("selected"))i.object_selection_delete_link.css("visibility","visible")}).mouseout(function(){s.removeClass("h24_hover");if(!i.object_selection_delete_link.hasClass("h24_hover"))i.object_selection_delete_link.css("visibility","hidden");a.hideSelectionMarker.call(l[0])});if(!o){a.populateObjectList.call(l[0]);a.selectObject.call(l[0],s);if(s.hasClass("h24_collage_object_imagetext")||s.hasClass("h24_collage_object_image")){i.object_selection_delete_link.hide();s.find(".h24_collage_object_content img").load(function(){a.positionObjectExtras.call(l[0],s,true);i.object_selection_delete_link.show();e(this).unbind("load")})}else{a.positionObjectExtras.call(l[0],s,true);i.object_selection_delete_link.show()}}},deleteObject:function(t){var o=e(this);var l=o.data("collage");var i=t.data("collageObject");$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"delete_object",collageobjectid:i.collageobjectid},function(s){if(!s.successful&&$h24.devmode)console.log(s);else{var n=s.lowered_objects;var c={};o.find("div."+l.objectClass).each(function(){var a=e(this).data("collageObject");c[a.collageobjectid]=e(this)});for(var r=0;r<n.length;r++){if(typeof c[n[r]]!="undefined"){var d=c[n[r]];var _=d.css("z-index");d.css("z-index",--_)}}}a.unselectObjects.call(o[0]);delete l.objects[i.collageobjectid];t.remove();a.populateObjectList.call(o[0])})},saveObject:function(t,o,l){var i=e(this);
var s=i.data("collage");var n=o.data("collageObject");var c={};var r=false;switch(t){case"position":var d=o.position();c["position"]={x:d.left,y:d.top};if(typeof l!="undefined"&&typeof l.skipLoadingOverlay!="undefined"){r=true}a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();break;case"text":r=true;var _=l;c["text"]=_;if(o.hasClass("h24_collage_object_imagetext")){var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")}}break;case"up":case"down":case"top":case"bottom":c["zindex"]=t;var h=function(e){for(var a in e.data.objects.free_floating){var t=parseInt(e.data.objects.free_floating[a]);t=t+s.floatingZ;s.objects[a].css("z-index",t)}for(var a in e.data.objects.fixed){var t=parseInt(e.data.objects.fixed[a]);t=t+s.fixedZ;s.objects[a].css("z-index",t)}};a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();break;case"free_floating":c["free_floating"]=o.hasClass("h24_collage_free_floating_object")?1:0;var h=function(e){var t=e.data.free_floating?parseInt(e.data.zindex,10)+s.floatingZ:e.data.zindex+s.fixedZ;o.css("z-index",t);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()};break;case"opacity":c["opacity"]=l;if(o.hasClass("h24_collage_object_image")||o.hasClass("h24_collage_object_imagetext")){var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")}}break;case"fade":c["fade"]={percentage:l.percentage,direction:l.direction};var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")};break;case"fontface":c["fontface"]=l;if(o.hasClass("h24_collage_object_imagetext")){var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")}}break;case"color":if(typeof l!="string")return;c["color"]=l;if(o.hasClass("h24_collage_object_imagetext")){var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")}}break;case"font-size":c["font-size"]=l;if(o.hasClass("h24_collage_object_imagetext")){var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show()});e(this).unbind("load")}}break;case"scale":var f=l;c["scale"]={x:f.width(),y:f.height()};var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);l.css({width:"",height:""});a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();e(this).unbind("load")})};break;case"force_scale":c["force_scale"]=l.scale;var f=l.img;var h=function(t){var l=o.find(".h24_collage_object_content img");a.loadingSpinner.call(i[0],o,true);l.attr("src",l.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);l.css({width:"",height:""});a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();e(this).unbind("load")})};break;case"rotate":var f=o.find(".h24_collage_object_content img");c["rotate"]=l;var h=function(t){a.loadingSpinner.call(i[0],o,true);f.attr("src",f.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);o.css({"-moz-transform":"","-webkit-transform":""});o.css({left:t.data.x,top:t.data.y});a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();e(this).unbind("load")})};break;case"anti-cache":var f=o.find(".h24_collage_object_content img");c["anti-cache"]=1;var h=function(t){a.loadingSpinner.call(i[0],o,true);f.attr("src",f.attr("src")+Math.floor(Math.random()*10)).load(function(){a.loadingSpinner.call(i[0],o,false);a.positionObjectExtras.call(i[0],o,true);s.object_selection_delete_link.show();e(this).unbind("load")})};break}$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:r,homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_object",collageobjectid:n.collageobjectid,settings:c},function(e){if(!e.successful&&$h24.devmode)console.log(e);if(typeof h=="function")h.call(i[0],e);a.populateObjectList.call(i[0],true)})},selectObject:function(t){var o=e(this);var l=o.data("collage");var i=t.data("collageObject");l.key_catcher[0].focus();if(i.settings.css("display")=="none"){a.unselectObjects.call(o[0]);i.settings.show();t.addClass("selected");if(t.hasClass("ui-resizable"))t.resizable("option","disabled",false);l.selectedObject=i.collageobjectid;if(!l.firstSettingsPanelLoaded){e(l.objectSettingsContainer).css({top:e(window).height()-l.objectSettingsOriginalOffset});l.firstSettingsPanelLoaded=true}a.positionObjectExtras.call(o[0],t,true);a.setSelectionMarker.call(o[0],t,true);l.object_selection_delete_link.show();l.object_selection_delete_link.unbind("click").click(function(){var e=confirm(l.deletionConfirmationString);if(e===true)a.deleteObject.call(o[0],t);return false})}},unselectObjects:function(){var t=e(this);var o=t.data("collage");e(o.objectSettingsContainer).find(".h24_collage_object_settings_panel").each(function(){if(e(this).css("display")=="block")e(this).hide()});o.selectedObject=0;t.find("."+o.objectClass+".selected").each(function(){var l=e(this);l.removeClass("selected");if(l.hasClass("ui-resizable"))l.resizable("option","disabled",true);o.object_selection_delete_link.hide();a.hideSelectionMarker.call(t[0],true)});o.object_selection_delete_link.hide()},revertPositionIfNeeded:function(a,t){return false;var o=e(this);var l=o.offset();var i=o.width();var s=o.height();var n=a.offset();var c=a.position();var r=a.width();var d=a.height();var _={y:l.top,x:l.left};var h={y:l.top,x:l.left+i};var f={y:l.top+s,x:l.left+i};var g={y:l.top+s,x:l.left};var v={0:{y:n.top,x:n.left},1:{y:n.top,x:n.left+r},2:{y:n.top+d,x:n.left+r},3:{y:n.top+d,x:n.left}};var u=10;for(var p=0;p<4;p++){var b=v[p];if(b.x-u>_.x&&b.x+u<h.x&&b.y-u>_.y&&b.y+u<g.y)return false}if(c.top<0&&c.top+d>s&&(c.left>0&&c.left<i||c.left+r>0&&c.left+r<i)){return false}if(typeof t=="undefined"){a.css({top:0,left:0})}else{a.css({top:t.top,left:t.left})}return true},saveHeight:function(a,t,o,l){var i=e(this);var s=i.data("collage");var n={homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_tweaks",local_data:{}};n.local_data[t]={css:"height:"+a+","+o+","+l};$h24.post($h24.slashwebroot+"Page/Communicator",n,function(e){if(!e.successful&&$h24.devmode)console.log(e)});$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"set_height",height:a,collageid:s.collageid},function(e){if(!e.successful&&$h24.devmode)console.log(e)})},loadingSpinner:function(a,t){var o=e(this);var l=o.data("collage");var i=a.data("collageObject");var s=l.spinner;var n=l.settings_spinner;var c=i.settings;var r=l.settings_overlay;if(t){var d=a.position();var _=a.width();var h=a.height();var f=s.width();var g=s.height();s.css({left:d.left+_/2-f/2,top:d.top+h/2-g/2}).show();var _=c.find("> div").width();var h=c.find("> div").height();var f=n.width();var g=n.height();n.css({left:_/2-f/2,top:h/2-g/2}).show();r.show();r.width(_);r.height(h)}else{s.hide();n.hide();r.hide()}},savePlaceholder:function(a,t){var o=e(this);var l=o.data("collage");var i=a.data("collageObject");$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"save_placeholder",collageobjectid:i.collageobjectid,placeholder:t},function(e){if(!e.successful&&$h24.devmode)console.log(e)})},toggleSaveSubmenu:function(){var a=e("#h24_collage_editor_save_submenu");if(a.hasClass("hidden_menu")){e("#h24_header_collage_editor_generic_help_tooltip").hide();e("#h24_header_collage_editor_save_help_tooltip").show();a.removeClass("hidden_menu").addClass("visible_menu").css({visibility:"visible"}).animate({top:83})}else{e("#h24_header_collage_editor_generic_help_tooltip").show();e("#h24_header_collage_editor_save_help_tooltip").hide();a.removeClass("visible_menu").addClass("hidden_menu").animate({top:-158},function(){e(this).css({visibility:"hidden"})})}},destroy:function(){var a=e(this);var t=a.data("collage");$h24.adminPanel.togglePanel(false);e(a).overlayWindow("destroy");e("#h24_collage_editor_top_panel").remove();a.removeClass("h24_collage");e("body").css({overflow:t.bodyOverflow,"margin-top":t.bodyMarginTop,height:t.bodyHeight});e("html").removeClass("h24_collage-editor-active");e("#h24_flag_list").show();return this},triggerInitSpinner:function(){var a=e(this);var t=a.data("collage");for(var o in t.objects){if(!t.objects[o].data("collageObject").imageInitialized){$h24.utils.showLoadingSpinner();return}}$h24.utils.hideLoadingSpinner()},populateObjectList:function(t){var o=e(this);var l=o.data("collage");var i=l.objects_list_container.find("ul");var s=l.objectListItemMaxLength;var n=l.objectListPreviewWidth;var c=l.objectListPreviewHeight;if(typeof t!="boolean")t=false;i.find("li").each(function(){var a=e(this);if(t&&a.hasClass("h24_obj_list_prev_image"))return;if(!a.hasClass("copy_me")&&!a.hasClass("empty_message"))a.unbind("click").remove()});var r=0;for(var d in l.objects)r++;if(r==0){i.find("li.empty_message").show();return}else i.find("li.empty_message").hide();var _=i.find("li.copy_me");var h=[];var f={};for(var d in l.objects){var g=l.objects[d];if(t&&g.hasClass("h24_collage_object_image"))continue;var v=g.data("collageObject");var u=v.settings;var p=_.clone();var b=p.find(".replacement_element");var m=p.find(".loading_spinner");var j="object_preview_image_"+Math.floor(Math.random()*999999);m.attr("id",j);p.data("collageObject",g);if(g.hasClass("h24_collage_object_imagetext")){p.addClass("h24_obj_list_prev_imagetext");var k=u.find("input[name=text]").val();p.find("img.imagetext_object").show();if(k.length>s)k=k.substring(0,s)+"..";b.replaceWith(e("<span/>").text(k));m.remove()}else if(g.hasClass("h24_collage_object_text")){p.addClass("h24_obj_list_prev_text");var k=u.find("input[name=text]").val();p.find("img.text_object").show();if(k.length>s)k=k.substring(0,s)+"..";b.replaceWith(e("<span/>").text(k));m.remove()}else if(g.hasClass("h24_collage_object_image")){p.addClass("h24_obj_list_prev_image");b.remove();p.find("img.image_object").show();h[h.length]=d;f[d]=j}p.click(function(){a.selectObject.call(o[0],e(this).data("collageObject"))}).mouseover(function(){a.setSelectionMarker.call(o[0],e(this).data("collageObject"))});p.removeClass("copy_me");p.appendTo(i)}if(!t){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CollageManager",modelaction:"multiple_object_list_images",collageobjectids:h,width:n,height:c,__skip_loading_overlay:true,__keep_loading_overlay:true},function(a){if(a.successful){for(var t in a.images){e("#"+f[t]).attr("src",a.images[t])}}else if($h24.devmode)console.log(a)})}},positionObjectExtras:function(a,t){var o=e(this);var l=o.data("collage");var i=a.data("collageObject");if(typeof t=="undefined")var t=false;if(t){var s=l.object_selected_border_top;var n=l.object_selected_border_right;var c=l.object_selected_border_bottom;var r=l.object_selected_border_left}else{var s=l.object_selection_border_top;var n=l.object_selection_border_right;var c=l.object_selection_border_bottom;var r=l.object_selection_border_left}var d=l.selectionMarkerBorderWidth;var _=l.object_selection_delete_link;var h=a.position();var f=a.width();var g=a.height();if(l.selectedObject==i.collageobjectid){_.css({left:h.left+f-22,top:h.top})}s.css({left:h.left,top:h.top-d}).width(f+d).height(d);n.css({left:h.left+f,top:h.top-d}).width(d).height(g+2*d);c.css({left:h.left,top:h.top+g}).width(f+d).height(d);r.css({left:h.left-d,top:h.top-d}).width(d).height(g+2*d)},setSelectionMarker:function(t,o){var l=e(this);var i=l.data("collage");var s=t.data("collageObject");if(typeof o=="undefined")var o=false;a.positionObjectExtras.call(l[0],t,o);if(o){i.object_selected_border_top.show();i.object_selected_border_right.show();i.object_selected_border_bottom.show();i.object_selected_border_left.show()}else{i.object_selection_border_top.show();i.object_selection_border_right.show();i.object_selection_border_bottom.show();i.object_selection_border_left.show()}},hideSelectionMarker:function(a){var t=e(this);var o=t.data("collage");if(typeof a=="undefined")var a=false;if(a){o.object_selected_border_top.hide();o.object_selected_border_right.hide();o.object_selected_border_bottom.hide();o.object_selected_border_left.hide()}else{o.object_selection_border_top.hide();o.object_selection_border_right.hide();o.object_selection_border_bottom.hide();o.object_selection_border_left.hide()}}};e.fn.collage=function(t){if(a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof t==="object"||!t)return a.init.apply(this,arguments);else e.error("Non-existing method: "+plugin_name+"."+t)}}(jQuery);
!function(e){var i={init:function(i){var t={attr:"preview",zIndex:5e3,offset:30,bottomOffset:30,clickReturnFalse:false};var i=e.extend(true,t,i);return this.each(function(){var t=e(this);var r=t.data("hoverPreview");if(!r){t.data("hoverPreview",i);var r=t.data("hoverPreview")}var o=t.attr(i.attr);var n=e("<img/>",{src:o}).css({position:"absolute",visibility:"hidden","z-index":i.zIndex,"box-shadow":"0px 0px 5px #000000","-moz-box-shadow":"0px 0px 5px #000000","-webkit-box-shadow":"0px 0px 5px #000000"});n.appendTo("body");r.preview=n;r.previewWidth=n.width();r.previewHeight=n.height();t.mouseout(function(e){n.css("visibility","hidden")}).mousemove(function(t){if(r.previewWidth==0)r.previewWidth=n.width();if(r.previewHeight==0)r.previewHeight=n.height();var o=t.clientX+r.previewWidth+i.offset>e(window).width();var s=t.clientY+r.previewHeight+i.offset+r.bottomOffset>e(window).height();var a={left:o?t.clientX-i.offset-r.previewWidth:t.clientX+i.offset,top:s?t.pageY+i.offset+(e(window).height()-(t.clientY+r.previewHeight+i.offset)-r.bottomOffset):t.pageY+i.offset};n.offset(a);n.css("visibility","visible")});if(i.clickReturnFalse){t.click(function(){return false})}})},destroy:function(){return this.each(function(){var i=e(this);var t=i.data("hoverPreview");i.unbind("mouseover mouseout mousemove");t.preview.remove()})}};e.fn.hoverPreview=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof t==="object"||!t)return i.init.apply(this,arguments);else e.error("Non-existing method: "+plugin_name+"."+t)}}(jQuery);
jQuery.fn.extractBackground=function(r,e){var n=$(this);var t=n;var a;if(typeof r=="undefined")var r="#ffffff";if(typeof e=="undefined")var e=30;for(var f=0;f<e;f++){try{a=t.css("background-color")}catch(i){if($h24.devmode)console.log("extractBackground-error: "+i)}if(typeof a!="undefined"&&a!=null&&a!=""&&a!="inherit"&&a!="none"&&a!="transparent"&&a!="rgba(0, 0, 0, 0)"){break}else{if(t.parent().length==1){t=t.parent()}else{a=r;break}}}if(a.substring(0,1)!="#"){var s=a;if(typeof s=="string"){if(s.substring(0,3)=="rgb"){s=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(s[1]).toString(16)).slice(-2)+("0"+parseInt(s[2]).toString(16)).slice(-2)+("0"+parseInt(s[3]).toString(16)).slice(-2)}else return a}}else return a};
jQuery.fn.extractColor=function(r,e){var t=$(this);var n=t;var i;if(typeof r=="undefined")var r="#000000";if(typeof e=="undefined")var e=30;for(var a=0;a<e;a++){try{i=n.css("color")}catch(s){if($h24.devmode)console.log("extractBackground-error: "+s)}if(typeof i!="undefined"&&i!=null&&i!=""&&i!="inherit"&&i!="none"&&i!="transparent"&&i!="rgba(0, 0, 0, 0)"){break}else{if(n.parent().length==1)n=n.parent();else{i=r;break}}}if(i.substring(0,1)!="#"){var o=i;if(typeof o=="string"){if(o.substring(0,3)=="rgb"){o=o.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(o[1]).toString(16)).slice(-2)+("0"+parseInt(o[2]).toString(16)).slice(-2)+("0"+parseInt(o[3]).toString(16)).slice(-2)}else return i}}else return i};
jQuery.cookie=function(e,n,o){if(arguments.length>1&&String(n)!=="[object Object]"){o=jQuery.extend({},o);if(n===null||n===undefined){o.expires=-1}if(typeof o.expires==="number"){var t=o.expires,r=o.expires=new Date;r.setDate(r.getDate()+t)}n=String(n);return document.cookie=[encodeURIComponent(e),"=",o.raw?n:encodeURIComponent(n),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}o=n||{};var i,c=o.raw?function(e){return e}:decodeURIComponent;return(i=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?c(i[1]):null};
!function(t){var e={init:function(e){var i={onTimeout:function(t){},onKeyUp:function(t,e){},delay:500,triggerOnlyOnDifferentValue:true};var e=t.extend(true,i,e);return this.each(function(){var i=t(this),n;n=i.data("inputTimeout");if(typeof n=="undefined"){i.data("inputTimeout",{timingOut:false,timeoutId:0,delay:e.delay,onTimeout:e.onTimeout,onKeyUp:e.onKeyUp,lastValue:i.val()});n=i.data("inputTimeout")}else{return}i.bind("keyup paste",function(i){var n=t(this),u=n.data("inputTimeout"),a;if(u.timingOut){clearTimeout(u.timeoutId)}u.timeoutId=setTimeout(function(){if(!e.triggerOnlyOnDifferentValue||n.val()!=u.lastValue){u.lastValue=n.val();u.onTimeout.call(n[0],n.val())}u.timingOut=false},u.delay);u.timingOut=true;if(typeof e.onKeyUp=="function"){if(i.type=="paste"){setTimeout(function(){e.onKeyUp.call(n[0],n.val(),i.keyCode)},4)}else{a=e.onKeyUp.call(n[0],n.val(),i.keyCode);if(typeof a=="boolean"&&a===false){clearTimeout(u.timeoutId);u.timingOut=false}}}})})}};t.fn.inputTimeout=function(){return e.init.apply(this,arguments)}}(jQuery);
jQuery.fn.loadingSpinner=function(e){return this.each(function(){var n=$(this);var i=false;var a=false;if(n.find("div.h24_loading_spinner_container").length>=1){var t=true}else{var t=false}if(typeof e=="undefined"&&t){a=true}else if(typeof e=="undefined"&&!t){i=true}else if(e&&!t){i=true}else if(!e){a=true}if(i){if(n.css("position")!="relative"&&n.css("position")!="absolute"){n.css("position","relative")}var r=$("<div>").addClass("h24_loading_spinner_container").css({position:"absolute",top:"0",right:"0",bottom:"0",left:"0",backgroundImage:"url("+$h24.publicdir+"css/common/images/transparent-white-50.png)",zIndex:100});var s=$("<div>").addClass("h24_loading_spinner_container_spinner").css({position:"absolute",left:"0",top:"0",width:"100%",height:"100%",backgroundImage:"url("+$h24.publicdir+"css/common/images/ajax-loader-large-transparent.gif)",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundPosition:"center",zIndex:100});r.append(s);n.append(r)}else if(a){n.find("div.h24_loading_spinner_container").remove()}})};
!function(t){var i={init:function(i){return this.each(function(){var e=t(this),a,o={timeout:3e3,onLoad:function(t){}};if(typeof e.data("loadWithTimeout")!="undefined"){return}t.extend(o,i);data={options:o,timerId:-1};e.data("loadWithTimeout",data);e.addClass("load_with_timeout_pending");a=setTimeout(function(){if(e.hasClass("load_with_timeout_pending")){e.removeClass("load_with_timeout_pending");o.onLoad.call(e[0],true)}},o.timeout);e.data("loadWithTimeout",data).timerId=a;e.load(function(){e.removeClass("load_with_timeout_pending");o.onLoad.call(e[0],false)})})},destroy:function(){return this.each(function(){var i=t(this),e=i.data(),a=i.data("loadWithTimeout");i.unbind("load");clearTimeout(a.timerId);delete a.loadWithTimeout;i.removeClass("load_with_timeout_pending")})}};t.fn.loadWithTimeout=function(t){if(i[t]){return i[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return i.init.apply(this,arguments)}}}(jQuery);
"use strict";!function(){if(jQuery&&jQuery.jstree){return}var e=false,t=false,a=false;!function(s){s.vakata={};s.vakata.css={get_css:function(e,t,a){e=e.toLowerCase();var s=a.cssRules||a.rules,i=0;do{if(s.length&&i>s.length+5){return false}if(s[i].selectorText&&s[i].selectorText.toLowerCase()==e){if(t===true){if(a.removeRule){a.removeRule(i)}if(a.deleteRule){a.deleteRule(i)}return true}else{return s[i]}}}while(s[++i]);return false},add_css:function(e,t){if(s.jstree.css.get_css(e,false,t)){return false}if(t.insertRule){t.insertRule(e+" { }",0)}else{t.addRule(e,null,0)}return s.vakata.css.get_css(e)},remove_css:function(e,t){return s.vakata.css.get_css(e,true,t)},add_sheet:function(e){var t=false,a=true;if(e.str){if(e.title){t=s("style[id='"+e.title+"-stylesheet']")[0]}if(t){a=false}else{t=document.createElement("style");t.setAttribute("type","text/css");if(e.title){t.setAttribute("id",e.title+"-stylesheet")}}if(t.styleSheet){if(a){document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet.cssText=e.str}else{t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str}}else{t.appendChild(document.createTextNode(e.str));document.getElementsByTagName("head")[0].appendChild(t)}return t.sheet||t.styleSheet}if(e.url){if(document.createStyleSheet){try{t=document.createStyleSheet(e.url)}catch(i){}}else{t=document.createElement("link");t.rel="stylesheet";t.type="text/css";t.media="all";t.href=e.url;document.getElementsByTagName("head")[0].appendChild(t);return t.styleSheet}}}};var i=[],n=-1,r={},l={};s.fn.jstree=function(e){var t=typeof e=="string",a=Array.prototype.slice.call(arguments,1),n=this;if(t){if(e.substring(0,1)=="_"){return n}this.each(function(){var t=i[s.data(this,"jstree_instance_id")],r=t&&s.isFunction(t[e])?t[e].apply(t,a):t;if(typeof r!=="undefined"&&(e.indexOf("is_")===0||r!==true&&r!==false)){n=r;return false}})}else{this.each(function(){var t=s.data(this,"jstree_instance_id"),n=[],l=e?s.extend({},true,e):{},o=s(this),d=false,c=[];n=n.concat(a);if(o.data("jstree")){n.push(o.data("jstree"))}l=n.length?s.extend.apply(null,[true,l].concat(n)):l;if(typeof t!=="undefined"&&i[t]){i[t].destroy()}t=parseInt(i.push({}),10)-1;s.data(this,"jstree_instance_id",t);l.plugins=s.isArray(l.plugins)?l.plugins:s.jstree.defaults.plugins.slice();l.plugins.unshift("core");l.plugins=l.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");d=s.extend(true,{},s.jstree.defaults,l);d.plugins=l.plugins;s.each(r,function(e,t){if(s.inArray(e,d.plugins)===-1){d[e]=null;delete d[e]}else{c.push(e)}});d.plugins=c;i[t]=new s.jstree._instance(t,s(this).addClass("jstree jstree-"+t),d);s.each(i[t]._get_settings().plugins,function(e,a){i[t].data[a]={}});s.each(i[t]._get_settings().plugins,function(e,a){if(r[a]){r[a].__init.apply(i[t])}});setTimeout(function(){if(i[t]){i[t].init()}},0)})}return n};s.jstree={defaults:{plugins:[]},_focused:function(){return i[n]||null},_reference:function(e){if(i[e]){return i[e]}var t=s(e);if(!t.length&&typeof e==="string"){t=s("#"+e)}if(!t.length){return null}return i[t.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(e,t,a){this.data={core:{}};this.get_settings=function(){return s.extend(true,{},a)};this._get_settings=function(){return a};this.get_index=function(){return e};this.get_container=function(){return t};this.get_container_ul=function(){return t.children("ul:eq(0)")};this._set_settings=function(e){a=s.extend(true,{},a,e)}},_fn:{},plugin:function(e,t){t=s.extend({},{__init:s.noop,__destroy:s.noop,_fn:{},defaults:false},t);r[e]=t;s.jstree.defaults[e]=t.defaults;s.each(t._fn,function(t,a){a.plugin=e;a.old=s.jstree._fn[t];s.jstree._fn[t]=function(){var e,i=a,n=Array.prototype.slice.call(arguments),r=new s.Event("before.jstree"),l=false;if(this.data.core.locked===true&&t!=="unlock"&&t!=="is_locked"){return}do{if(i&&i.plugin&&s.inArray(i.plugin,this._get_settings().plugins)!==-1){break}i=i.old}while(i);if(!i){return}if(t.indexOf("_")===0){e=i.apply(this,n)}else{e=this.get_container().triggerHandler(r,{func:t,inst:this,args:n,plugin:i.plugin});if(e===false){return}if(typeof e!=="undefined"){n=e}e=i.apply(s.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:n,rslt:e,rlbk:l})},__rollback:function(){l=this.get_rollback();return l},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):n)}}),n)}return e};s.jstree._fn[t].old=a.old;s.jstree._fn[t].plugin=e})},rollback:function(e){if(e){if(!s.isArray(e)){e=[e]}s.each(e,function(e,t){i[t.i].set_rollback(t.h,t.d)})}}};s.jstree._fn=s.jstree._instance.prototype={};s(function(){var i=navigator.userAgent.toLowerCase(),n=(i.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=""+".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } "+".jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } "+".jstree-rtl li { margin-left:0; margin-right:18px; } "+".jstree > ul > li { margin-left:0px; } "+".jstree-rtl > ul > li { margin-right:0px; } "+".jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } "+".jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } "+".jstree a:focus { outline: none; } "+".jstree a > ins { height:16px; width:16px; } "+".jstree a > .jstree-icon { margin-right:3px; } "+".jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } "+"li.jstree-open > ul { display:block; } "+"li.jstree-closed > ul { display:none; } ";if(/msie/.test(i)&&parseInt(n,10)==6){e=true;try{document.execCommand("BackgroundImageCache",false,true)}catch(l){}r+=""+".jstree li { height:18px; margin-left:0; margin-right:0; } "+".jstree li li { margin-left:18px; } "+".jstree-rtl li li { margin-left:0px; margin-right:18px; } "+"li.jstree-open ul { display:block; } "+"li.jstree-closed ul { display:none !important; } "+".jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "+".jstree li a ins { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(i)&&parseInt(n,10)==7){t=true;r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if(!/compatible/.test(i)&&/mozilla/.test(i)&&parseFloat(n,10)<1.9){a=true;r+=""+".jstree ins { display:-moz-inline-box; } "+".jstree li { line-height:12px; } "+".jstree a { display:-moz-inline-box; } "+".jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "}s.vakata.css.add_sheet({str:r,title:"jstree"})});s.jstree.plugin("core",{__init:function(){this.data.core.locked=false;this.data.core.to_open=this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:false,animation:500,initially_open:[],initially_load:[],open_parents:true,notify_plugins:true,rtl:false,load_open:false,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl){this.get_container().addClass("jstree-rtl").css("direction","rtl")}this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",s.proxy(function(e){var t=s(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",s.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){t=window.getSelection();try{t.removeAllRanges();t.collapse()}catch(a){}}}});if(this._get_settings().core.notify_plugins){this.get_container().bind("load_node.jstree",s.proxy(function(e,t){var a=this._get_node(t.rslt.obj),i=this;if(a===-1){a=this.get_container_ul()}if(!a.length){return}a.find("li").each(function(){var e=s(this);if(e.data("jstree")){s.each(e.data("jstree"),function(t,a){if(i.data[t]&&s.isFunction(i["_"+t+"_notify"])){i["_"+t+"_notify"].call(i,e,a)}})}})},this))}if(this._get_settings().core.load_open){this.get_container().bind("load_node.jstree",s.proxy(function(e,t){var a=this._get_node(t.rslt.obj),i=this;if(a===-1){a=this.get_container_ul()}if(!a.length){return}a.find("li.jstree-open:not(:has(ul))").each(function(){i.load_node(this,s.noop,s.noop)})},this))}this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),a=this._get_settings(),l=this;s.each(a.plugins,function(e,t){try{r[t].__destroy.apply(l)}catch(a){}});this.__callback();if(this.is_focused()){for(e in i){if(i.hasOwnProperty(e)&&e!=t){i[e].set_focus();break}}}if(t===n){n=-1}this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")});s(document).unbind(".jstree-"+t).undelegate(".jstree-"+t);i[t]=null;delete i[t]},_core_notify:function(e,t){if(t.opened){this.open_node(e,false,true)}},lock:function(){this.data.core.locked=true;this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");this.__callback({})},unlock:function(){this.data.core.locked=false;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){if(this.id){e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,a=true,i=[],n=[];if(!e){this.data.core.reopen=false;this.data.core.refreshing=true;this.data.core.to_open=s.map(s.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.data.core.to_load=s.map(s.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});if(this.data.core.to_open.length){this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)}}if(this.data.core.to_load.length){s.each(this.data.core.to_load,function(e,t){if(t=="#"){return true}if(s(t).length){i.push(t)}else{n.push(t)}});if(i.length){this.data.core.to_load=n;s.each(i,function(e,s){if(!t._is_loaded(s)){t.load_node(s,function(){t.reload_nodes(true)},function(){t.reload_nodes(true)});a=false}})}}if(this.data.core.to_open.length){s.each(this.data.core.to_open,function(e,a){t.open_node(a,false,true)})}if(a){if(this.data.core.reopen){clearTimeout(this.data.core.reopen)}this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50);this.data.core.refreshing=false;this.reopen()}},reopen:function(){var e=this;if(this.data.core.to_open.length){s.each(this.data.core.to_open,function(t,a){e.open_node(a,false,true)})}this.__callback({})},refresh:function(e){var t=this;this.save_opened();if(!e){e=-1}e=this._get_node(e);if(!e){e=-1}if(e!==-1){e.children("UL").remove()}else{this.get_container_ul().empty()}this.load_node(e,function(){t.__callback({obj:e});t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused()){return}var e=s.jstree._focused();if(e){e.unset_focus()}this.get_container().addClass("jstree-focused");n=this.get_index();this.__callback()},is_focused:function(){return n==this.get_index()},unset_focus:function(){if(this.is_focused()){this.get_container().removeClass("jstree-focused");n=-1}this.__callback()},_get_node:function(e){var t=s(e,this.get_container());if(t.is(".jstree")||e==-1){return-1}t=t.closest("li",this.get_container());return t.length?t:false},_get_next:function(e,t){e=this._get_node(e);if(e===-1){return this.get_container().find("> ul > li:first-child")}if(!e.length){return false}if(t){return e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):false}if(e.hasClass("jstree-open")){return e.find("li:eq(0)")}else if(e.nextAll("li").size()>0){return e.nextAll("li:eq(0)")}else{return e.parentsUntil(".jstree","li").next("li").eq(0)}},_get_prev:function(e,t){e=this._get_node(e);if(e===-1){return this.get_container().find("> ul > li:last-child")}if(!e.length){return false}if(t){return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):false}if(e.prev("li").length){e=e.prev("li").eq(0);while(e.hasClass("jstree-open")){e=e.children("ul:eq(0)").children("li:last")}return e}else{var a=e.parentsUntil(".jstree","li:eq(0)");return a.length?a:false}},_get_parent:function(e){e=this._get_node(e);if(e==-1||!e.length){return false}var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){e=this._get_node(e);if(e===-1){return this.get_container().children("ul:eq(0)").children("li")}if(!e.length){return false}return e.children("ul:eq(0)").children("li")},get_path:function(e,t){var a=[],s=this;e=this._get_node(e);if(e===-1||!e||!e.length){return false}e.parentsUntil(".jstree","li").each(function(){a.push(t?this.id:s.get_text(this))});a.reverse();a.push(t?e.attr("id"):this.get_text(e));return a},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){e=this._get_node(e);return e&&e!==-1&&e.hasClass("jstree-leaf")},correct_state:function(e){e=this._get_node(e);if(!e||e===-1){return false}e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:e})},open_node:function(t,a,s){t=this._get_node(t);if(!t.length){return false}if(!t.hasClass("jstree-closed")){if(a){a.call()}return false}var i=s||e?0:this._get_settings().core.animation,n=this;if(!this._is_loaded(t)){t.children("a").addClass("jstree-loading");this.load_node(t,function(){n.open_node(t,a,s)},a)}else{if(this._get_settings().core.open_parents){t.parentsUntil(".jstree",".jstree-closed").each(function(){n.open_node(this,false,true)})}if(i){t.children("ul").css("display","none")}t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");if(i){t.children("ul").stop(true,true).slideDown(i,function(){this.style.display="";n.after_open(t)})}else{n.after_open(t)}this.__callback({obj:t});if(a){a.call()}}},after_open:function(e){this.__callback({obj:e})},close_node:function(t,a){t=this._get_node(t);var s=a||e?0:this._get_settings().core.animation,i=this;if(!t.length||!t.hasClass("jstree-open")){return false}if(s){t.children("ul").attr("style","display:block !important")}t.removeClass("jstree-open").addClass("jstree-closed");if(s){t.children("ul").stop(true,true).slideUp(s,function(){this.style.display="";i.after_close(t)})}else{i.after_close(t)}this.__callback({obj:t})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){e=this._get_node(e);if(e.hasClass("jstree-closed")){return this.open_node(e)}if(e.hasClass("jstree-open")){return this.close_node(e)}},open_all:function(e,t,a){e=e?this._get_node(e):-1;if(!e||e===-1){e=this.get_container_ul()}if(a){e=e.find("li.jstree-closed")}else{a=e;if(e.is(".jstree-closed")){e=e.find("li.jstree-closed").andSelf()}else{e=e.find("li.jstree-closed")}}var s=this;e.each(function(){var e=this;if(!s._is_loaded(this)){s.open_node(this,function(){s.open_all(e,t,a)},!t)}else{s.open_node(this,false,!t)}});if(a.find("li.jstree-closed").length===0){this.__callback({obj:a})}},close_all:function(e,t){var a=this;e=e?this._get_node(e):this.get_container();if(!e||e===-1){e=this.get_container_ul()}e.find("li.jstree-open").andSelf().each(function(){a.close_node(this,!t)});this.__callback({obj:e})},clean_node:function(e){e=e&&e!=-1?s(e):this.get_container_ul();e=e.is("li")?e.find("li").andSelf():e.find("li");e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:e})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e);this.data=t;this.__callback()},load_node:function(e,t,a){this.__callback({obj:e})},_is_loaded:function(e){return true},create_node:function(e,t,a,i,n){e=this._get_node(e);t=typeof t==="undefined"?"last":t;var r=s("<li />"),l=this._get_settings().core,o;if(e!==-1&&!e.length){return false}if(!n&&!this._is_loaded(e)){this.load_node(e,function(){this.create_node(e,t,a,i,true)});return false}this.__rollback();if(typeof a==="string"){a={data:a}}if(!a){a={}}if(a.attr){r.attr(a.attr)}if(a.metadata){r.data(a.metadata)}if(a.state){r.addClass("jstree-"+a.state)}if(!a.data){a.data=this._get_string("new_node")}if(!s.isArray(a.data)){o=a.data;a.data=[];a.data.push(o)}s.each(a.data,function(e,t){o=s("<a />");if(s.isFunction(t)){t=t.call(this,a)}if(typeof t=="string"){o.attr("href","#")[l.html_titles?"html":"text"](t)}else{if(!t.attr){t.attr={}}if(!t.attr.href){t.attr.href="#"}o.attr(t.attr)[l.html_titles?"html":"text"](t.title);if(t.language){o.addClass(t.language)}}o.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!t.icon&&a.icon){t.icon=a.icon}if(t.icon){if(t.icon.indexOf("/")===-1){o.children("ins").addClass(t.icon)}else{o.children("ins").css("background","url('"+t.icon+"') center center no-repeat")}}r.append(o)});r.prepend("<ins class='jstree-icon'>&#160;</ins>");if(e===-1){e=this.get_container();if(t==="before"){t="first"}if(t==="after"){t="last"}}switch(t){case"before":e.before(r);o=this._get_parent(e);break;case"after":e.after(r);o=this._get_parent(e);break;case"inside":case"first":if(!e.children("ul").length){e.append("<ul />")}e.children("ul").prepend(r);o=e;break;case"last":if(!e.children("ul").length){e.append("<ul />")}e.children("ul").append(r);o=e;break;default:if(!e.children("ul").length){e.append("<ul />")}if(!t){t=0}o=e.children("ul").children("li").eq(t);if(o.length){o.before(r)}else{e.children("ul").append(r)}o=e;break}if(o===-1||o.get(0)===this.get_container().get(0)){o=-1}this.clean_node(o);this.__callback({obj:r,parent:o});if(i){i.call(this,r)}return r},get_text:function(e){e=this._get_node(e);if(!e.length){return false}var t=this._get_settings().core.html_titles;e=e.children("a:eq(0)");if(t){e=e.clone();e.children("INS").remove();return e.html()}else{e=e.contents().filter(function(){return this.nodeType==3})[0];return e.nodeValue}},set_text:function(e,t){e=this._get_node(e);if(!e.length){return false}e=e.children("a:eq(0)");if(this._get_settings().core.html_titles){var a=e.children("INS").clone();e.html(t).prepend(a);this.__callback({obj:e,name:t});return true}else{e=e.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:e,name:t});return e.nodeValue=t}},rename_node:function(e,t){e=this._get_node(e);this.__rollback();if(e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))){this.__callback({obj:e,name:t})}},delete_node:function(e){e=this._get_node(e);if(!e.length){return false}this.__rollback();var t=this._get_parent(e),a=s([]),i=this;e.each(function(){a=a.add(i._get_prev(this))});e=e.detach();if(t!==-1&&t.find("> ul > li").length===0){t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}this.clean_node(t);this.__callback({obj:e,prev:a,parent:t});return e},prepare_move:function(e,t,a,i,n){var r={};r.ot=s.jstree._reference(e)||this;r.o=r.ot._get_node(e);r.r=t===-1?-1:this._get_node(t);r.p=typeof a==="undefined"||a===false?"last":a;if(!n&&l.o&&l.o[0]===r.o[0]&&l.r[0]===r.r[0]&&l.p===r.p){this.__callback(l);if(i){i.call(this,l)}return}r.ot=s.jstree._reference(r.o)||this;r.rt=s.jstree._reference(r.r)||this;if(r.r===-1||!r.r){r.cr=-1;switch(r.p){case"first":case"before":case"inside":r.cp=0;break;case"after":case"last":r.cp=r.rt.get_container().find(" > ul > li").length;break;default:r.cp=r.p;break}}else{if(!/^(before|after)$/.test(r.p)&&!this._is_loaded(r.r)){return this.load_node(r.r,function(){this.prepare_move(e,t,a,i,true)})}switch(r.p){case"before":r.cp=r.r.index();r.cr=r.rt._get_parent(r.r);break;case"after":r.cp=r.r.index()+1;r.cr=r.rt._get_parent(r.r);break;case"inside":case"first":r.cp=0;r.cr=r.r;break;case"last":r.cp=r.r.find(" > ul > li").length;r.cr=r.r;break;default:r.cp=r.p;r.cr=r.r;break}}r.np=r.cr==-1?r.rt.get_container():r.cr;r.op=r.ot._get_parent(r.o);r.cop=r.o.index();if(r.op===-1){r.op=r.ot?r.ot.get_container():this.get_container()}if(!/^(before|after)$/.test(r.p)&&r.op&&r.np&&r.op[0]===r.np[0]&&r.o.index()<r.cp){r.cp++}r.or=r.np.find(" > ul > li:nth-child("+(r.cp+1)+")");l=r;this.__callback(l);if(i){i.call(this,l)}},check_move:function(){var e=l,t=true,a=e.r===-1?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0]){return false}if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index()){return false}e.o.each(function(){if(a.parentsUntil(".jstree","li").andSelf().index(this)!==-1){t=false;return false}});return t},move_node:function(e,t,a,i,n,r){if(!n){return this.prepare_move(e,t,a,function(e){this.move_node(e,false,false,i,true,r)})}if(i){l.cy=true}if(!r&&!this.check_move()){return false}this.__rollback();var o=false;if(i){o=e.o.clone(true);o.find("*[id]").andSelf().each(function(){if(this.id){this.id="copy_"+this.id}})}else{o=e.o}if(e.or.length){e.or.before(o)}else{if(!e.np.children("ul").length){s("<ul />").appendTo(e.np)}e.np.children("ul:eq(0)").append(o)}try{e.ot.clean_node(e.op);e.rt.clean_node(e.np);if(!e.op.find("> ul > li").length){e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}}catch(d){}if(i){l.cy=true;l.oc=o}this.__callback(l);return l},_get_move:function(){return l}}})}(jQuery);!function(e){var t,a,s;e(function(){if(/msie/.test(navigator.userAgent.toLowerCase())){a=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");s=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");t=a.width()-s.width();a.add(s).remove()}else{a=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});t=100-a.width();a.parent().remove()}});e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault();t.currentTarget.blur();if(!e(t.currentTarget).hasClass("jstree-loading")){this.select_node(t.currentTarget,true,t)}},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){if(!e(t.currentTarget).hasClass("jstree-loading")){this.hover_node(t.target)}},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(!e(t.currentTarget).hasClass("jstree-loading")){this.dehover_node(t.target)}},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,a){var s=this._get_settings().ui,i=this._get_node(a.rslt.obj),n=i&&i.length?i.children("ul").find("a.jstree-clicked"):e(),r=this;if(s.selected_parent_close===false||!n.length){return}n.each(function(){r.deselect_node(this);if(s.selected_parent_close==="select_parent"){r.select_node(i)}})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var a=this._get_settings().ui.select_prev_on_delete,s=this._get_node(t.rslt.obj),i=s&&s.length?s.find("a.jstree-clicked"):[],n=this;i.each(function(){n.deselect_node(this)});if(a&&i.length){t.rslt.prev.each(function(){if(this.parentNode){n.select_node(this);return false}})}},this)).bind("move_node.jstree",e.proxy(function(e,t){if(t.rslt.cy){t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")}},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:true,select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(t,a){if(typeof t==="undefined"||t===null){return a?this.data.ui.selected:this.data.ui.last_selected}var s=e(t,this.get_container());if(s.is(".jstree")||t==-1){return-1}s=s.closest("li",this.get_container());return s.length?s:false},_ui_notify:function(e,t){if(t.selected){this.select_node(e,false)}},save_selected:function(){var e=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){if(this.id){e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}});this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,a=this.data.ui.to_select;a=e.map(e.makeArray(a),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});e.each(a,function(e,a){if(a&&a!=="#"){t.select_node(a)}});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(e){this.save_selected();return this.__call_old()},hover_node:function(e){e=this._get_node(e);if(!e.length){return false}if(!e.hasClass("jstree-hovered")){this.dehover_node()}this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent();this._fix_scroll(e);this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered,t;if(!e||!e.length){return false}t=e.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===t[0]){this.data.ui.hovered=null}this.__callback({obj:e})},select_node:function(e,t,a){e=this._get_node(e);if(e==-1||!e||!e.length){return false}var s=this._get_settings().ui,i=s.select_multiple_modifier=="on"||s.select_multiple_modifier!==false&&a&&a[s.select_multiple_modifier+"Key"],n=s.select_range_modifier!==false&&a&&a[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),l=true,o=this;if(t){if(s.disable_selecting_children&&i&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length)){return false}l=false;switch(!0){case n:this.data.ui.last_selected.addClass("jstree-last-selected");e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();if(s.select_limit==-1||e.length<s.select_limit){this.data.ui.last_selected.removeClass("jstree-last-selected");this.data.ui.selected.each(function(){if(this!==o.data.ui.last_selected[0]){o.deselect_node(this)}});r=false;l=true}else{l=false}break;case r&&!i:this.deselect_all();r=false;l=true;break;case!r&&!i:if(s.select_limit==-1||s.select_limit>0){this.deselect_all();l=true}break;case r&&i:this.deselect_node(e);break;case!r&&i:if(s.select_limit==-1||this.data.ui.selected.length+1<=s.select_limit){l=true}break}}if(l&&!r){if(!n){this.data.ui.last_selected=e}e.children("a").addClass("jstree-clicked");if(s.selected_parent_open){e.parents(".jstree-closed").each(function(){o.open_node(this,false,true)})}this.data.ui.selected=this.data.ui.selected.add(e);this._fix_scroll(e.eq(0));this.__callback({obj:e,e:a})}},_fix_scroll:function(e){var a=this.get_container()[0],s;if(a.scrollHeight>a.offsetHeight){e=this._get_node(e);if(!e||e===-1||!e.length||!e.is(":visible")){return}s=e.offset().top-this.get_container().offset().top;if(s<0){a.scrollTop=a.scrollTop+s-1}if(s+this.data.core.li_height+(a.scrollWidth>a.offsetWidth?t:0)>a.offsetHeight){a.scrollTop=a.scrollTop+(s-a.offsetHeight+this.data.core.li_height+1+(a.scrollWidth>a.offsetWidth?t:0))}}},deselect_node:function(e){e=this._get_node(e);if(!e.length){return false}if(this.is_selected(e)){e.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(e);if(this.data.ui.last_selected.get(0)===e.get(0)){this.data.ui.last_selected=this.data.ui.selected.eq(0)}this.__callback({obj:e})}},toggle_select:function(e){e=this._get_node(e);if(!e.length){return false}if(this.is_selected(e)){this.deselect_node(e)}else{this.select_node(e)}},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var a=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=e([]);this.data.ui.last_selected=false;this.__callback({obj:a})}}});e.jstree.defaults.plugins.push("ui")}(jQuery);!function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var a=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){a.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(e){return true}}},_fn:{_show_input:function(t,a){t=this._get_node(t);var s=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,n=t.children("ins").width(),r=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,l=this.get_text(t),o=e("<div />",{css:{position:"absolute",top:"-200px",left:s?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=t.css("position","relative").append(e("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:s?"auto":n+r+4+"px",right:s?n+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),s=e.val();if(s===""){s=l}o.remove();e.remove();this.set_text(t,l);this.rename_node(t,s);a.call(this,t,s,l);t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(t==27){this.value=l;this.blur();return}else if(t==13){this.blur();return}else{d.width(Math.min(o.text("pW"+this.value).width(),i))}},keypress:function(e){var t=e.keyCode||e.which;if(t==13){return false}}})).children(".jstree-rename-input");this.set_text(t,"");o.css({fontFamily:d.css("fontFamily")||"",fontSize:d.css("fontSize")||"",fontWeight:d.css("fontWeight")||"",fontStyle:d.css("fontStyle")||"",fontStretch:d.css("fontStretch")||"",fontVariant:d.css("fontVariant")||"",letterSpacing:d.css("letterSpacing")||"",wordSpacing:d.css("wordSpacing")||""});d.width(Math.min(o.text("pW"+d[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e);this.__rollback();var t=this.__callback;this._show_input(e,function(e,a,s){t.call(this,{obj:e,new_name:a,old_name:s})})},create:function(t,a,s,i,n){var r,l=this;t=this._get_node(t);if(!t){t=-1}this.__rollback();r=this.create_node(t,a,s,function(t){var a=this._get_parent(t),s=e(t).index();
if(i){i.call(this,t)}if(a.length&&a.hasClass("jstree-closed")){this.open_node(a,false,true)}if(!n){this._show_input(t,function(e,t,i){l.__callback({obj:e,name:t,parent:a,position:s})})}else{l.__callback({obj:t,name:this.get_text(t),parent:a,position:s})}});return r},remove:function(e){e=this._get_node(e,true);var t=this._get_parent(e),a=this._get_prev(e);this.__rollback();e=this.delete_node(e);if(e!==false){this.__callback({obj:e,prev:a,parent:t})}},check_move:function(){if(!this.__call_old()){return false}var e=this._get_settings().crrm.move;if(!e.check_move.call(this,this._get_move())){return false}return true},move_node:function(e,t,a,s,i,n){var r=this._get_settings().crrm.move;if(!i){if(typeof a==="undefined"){a=r.default_position}if(a==="inside"&&!r.default_position.match(/^(before|after)$/)){a=r.default_position}return this.__call_old(true,e,t,a,s,false,n)}if(r.always_copy===true||r.always_copy==="multitree"&&e.rt.get_index()!==e.ot.get_index()){s=true}this.__call_old(true,e,t,a,s,true,n)},cut:function(e){e=this._get_node(e,true);if(!e||!e.length){return false}this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=e;this.__callback({obj:e})},copy:function(e){e=this._get_node(e,true);if(!e||!e.length){return false}this.data.crrm.ct_nodes=false;this.data.crrm.cp_nodes=e;this.__callback({obj:e})},paste:function(e){e=this._get_node(e);if(!e||!e.length){return false}var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes){return false}if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,e);this.data.crrm.ct_nodes=false}if(this.data.crrm.cp_nodes){this.move_node(this.data.crrm.cp_nodes,e,false,true)}this.__callback({obj:e,nodes:t})}}})}(jQuery);!function(e){var t=[];e.jstree._themes=false;e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots;this.data.themes.icons=e.icons;this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(a,s){if(!a){return false}if(!s){s=e.jstree._themes+a+"/style.css"}if(e.inArray(s,t)==-1){e.vakata.css.add_sheet({url:s});t.push(s)}if(this.data.themes.theme!=a){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=a}this.get_container().addClass("jstree-"+a);if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){if(this.data.themes.icons){this.hide_icons()}else{this.show_icons()}}}});e(function(){if(e.jstree._themes===false){e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}})}if(e.jstree._themes===false){e.jstree._themes="themes/"}});e.jstree.defaults.plugins.push("themes")}(jQuery);!function(e){var t=[];function a(t,a){var s=e.jstree._focused(),i;if(s&&s.data&&s.data.hotkeys&&s.data.hotkeys.enabled){i=s._get_settings().hotkeys[t];if(i){return i.call(s,a)}}}e.jstree.plugin("hotkeys",{__init:function(){if(typeof e.hotkeys==="undefined"){throw"jsTree hotkeys: jQuery hotkeys plugin not included."}if(!this.data.ui){throw"jsTree hotkeys: jsTree UI plugin not included."}e.each(this._get_settings().hotkeys,function(s,i){if(i!==false&&e.inArray(s,t)==-1){e(document).bind("keydown",s,function(e){return a(s,e)});t.push(s)}});this.get_container().bind("lock.jstree",e.proxy(function(){if(this.data.hotkeys.enabled){this.data.hotkeys.enabled=false;this.data.hotkeys.revert=true}},this)).bind("unlock.jstree",e.proxy(function(){if(this.data.hotkeys.revert){this.data.hotkeys.enabled=true}},this));this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(e));return false},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(e));return false},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e){if(e.hasClass("jstree-open")){this.close_node(e)}else{this.hover_node(this._get_prev(e))}}return false},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;if(e&&e.length){if(e.hasClass("jstree-closed")){this.open_node(e)}else{this.hover_node(this._get_next(e))}}return false},space:function(){if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").click()}return false},"ctrl+space":function(e){e.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(e)}return false},"shift+space":function(e){e.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(e)}return false},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})}(jQuery);!function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;if(e.progressive_unload){this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})}},defaults:{data:false,ajax:false,correct_state:true,progressive_render:false,progressive_unload:false},_fn:{load_node:function(e,t,a){var s=this;this.load_node_json(e,function(){s.__callback({obj:s._get_node(e)});t.call(this)},a)},_is_loaded:function(t){var a=this._get_settings().json_data;t=this._get_node(t);return t==-1||!t||!a.ajax&&!a.progressive_render&&!e.isFunction(a.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var a=this._get_settings().json_data;if(t&&t!==-1&&a.progressive_unload&&(e.isFunction(a.data)||!!a.ajax)){t.removeData("jstree_children")}return this.__call_old()},load_node_json:function(t,a,s){var i=this.get_settings().json_data,n,r=function(){},l=function(){};t=this._get_node(t);if(t&&t!==-1&&(i.progressive_render||i.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&t.children("ul").children("li").length===0&&t.data("jstree_children")){n=this._parse_json(t.data("jstree_children"),t);if(n){t.append(n);if(!i.progressive_unload){t.removeData("jstree_children")}}this.clean_node(t);if(a){a.call(this)}return}if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t);if(!e){if(t===-1||!t){if(i.correct_state){this.get_container().children("ul").empty()}}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t)}}if(s){s.call(this)}}else{if(t===-1||!t){this.get_container().children("ul").empty().append(e.children())}else{t.append(e).children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading")}this.clean_node(t);if(a){a.call(this)}}},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1){n=this._parse_json(i.data,t);if(n){this.get_container().children("ul").empty().append(n.children());this.clean_node()}else{if(i.correct_state){this.get_container().children("ul").empty()}}}if(a){a.call(this)}break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:r=function(e,a,n){var r=this.get_settings().json_data.ajax.error;if(r){r.call(this,e,a,n)}if(t!=-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(a==="success"&&i.correct_state){this.correct_state(t)}}else{if(a==="success"&&i.correct_state){this.get_container().children("ul").empty()}}if(s){s.call(this)}};l=function(s,n,l){var o=this.get_settings().json_data.ajax.success;if(o){s=o.call(this,s,n,l)||s}if(s===""||s&&s.toString&&s.toString().replace(/^[\s\n]+$/,"")===""||!e.isArray(s)&&!e.isPlainObject(s)){return r.call(this,l,n,"")}s=this._parse_json(s,t);if(s){if(t===-1||!t){this.get_container().children("ul").empty().append(s.children())}else{t.append(s).children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading")}this.clean_node(t);if(a){a.call(this)}}else{if(t===-1||!t){if(i.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(a){a.call(this)}}}}};i.ajax.context=this;i.ajax.error=r;i.ajax.success=l;if(!i.ajax.dataType){i.ajax.dataType="json"}if(e.isFunction(i.ajax.url)){i.ajax.url=i.ajax.url.call(this,t)}if(e.isFunction(i.ajax.data)){i.ajax.data=i.ajax.data.call(this,t)}e.ajax(i.ajax);break}},_parse_json:function(t,a,s){var i=false,n=this._get_settings(),r=n.json_data,l=n.core.html_titles,o,d,c,h,f;if(!t){return i}if(r.progressive_unload&&a&&a!==-1){a.data("jstree_children",i)}if(e.isArray(t)){i=e();if(!t.length){return false}for(d=0,c=t.length;d<c;d++){o=this._parse_json(t[d],a,true);if(o.length){i=i.add(o)}}}else{if(typeof t=="string"){t={data:t}}if(!t.data&&t.data!==""){return i}i=e("<li />");if(t.attr){i.attr(t.attr)}if(t.metadata){i.data(t.metadata)}if(t.state){i.addClass("jstree-"+t.state)}if(!e.isArray(t.data)){o=t.data;t.data=[];t.data.push(o)}e.each(t.data,function(a,s){o=e("<a />");if(e.isFunction(s)){s=s.call(this,t)}if(typeof s=="string"){o.attr("href","#")[l?"html":"text"](s)}else{if(!s.attr){s.attr={}}if(!s.attr.href){s.attr.href="#"}o.attr(s.attr)[l?"html":"text"](s.title);if(s.language){o.addClass(s.language)}}o.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!s.icon&&t.icon){s.icon=t.icon}if(s.icon){if(s.icon.indexOf("/")===-1){o.children("ins").addClass(s.icon)}else{o.children("ins").css("background","url('"+s.icon+"') center center no-repeat")}}i.append(o)});i.prepend("<ins class='jstree-icon'>&#160;</ins>");if(t.children){if(r.progressive_render&&t.state!=="open"){i.addClass("jstree-closed").data("jstree_children",t.children)}else{if(r.progressive_unload){i.data("jstree_children",t.children)}if(e.isArray(t.children)&&t.children.length){o=this._parse_json(t.children,a,true);if(o.length){f=e("<ul />");f.append(o);i.append(f)}}}}}if(!s){h=e("<ul />");h.append(i);i=h}return i},get_json:function(t,a,s,i){var n=[],r=this._get_settings(),l=this,o,d,c,h,f,u;t=this._get_node(t);if(!t||t===-1){t=this.get_container().find("> ul > li")}a=e.isArray(a)?a:["id","class"];if(!i&&this.data.types){a.push(r.types.type_attr)}s=e.isArray(s)?s:[];t.each(function(){c=e(this);o={data:[]};if(a.length){o.attr={}}e.each(a,function(e,t){d=c.attr(t);if(d&&d.length&&d.replace(/jstree[^ ]*/gi,"").length){o.attr[t]=(" "+d).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}});if(c.hasClass("jstree-open")){o.state="open"}if(c.hasClass("jstree-closed")){o.state="closed"}if(c.data()){o.metadata=c.data()}h=c.children("a");h.each(function(){f=e(this);if(s.length||e.inArray("languages",r.plugins)!==-1||f.children("ins").get(0).style.backgroundImage.length||f.children("ins").get(0).className&&f.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length){u=false;if(e.inArray("languages",r.plugins)!==-1&&e.isArray(r.languages)&&r.languages.length){e.each(r.languages,function(e,t){if(f.hasClass(t)){u=t;return false}})}d={attr:{},title:l.get_text(f,u)};e.each(s,function(e,t){d.attr[t]=(" "+(f.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")});if(e.inArray("languages",r.plugins)!==-1&&e.isArray(r.languages)&&r.languages.length){e.each(r.languages,function(e,t){if(f.hasClass(t)){d.language=t;return true}})}if(f.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length){d.icon=f.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}if(f.children("ins").get(0).style.backgroundImage.length){d.icon=f.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}}else{d=l.get_text(f)}if(h.length>1){o.data.push(d)}else{o.data=d}});c=c.find("> ul > li");if(c.length){o.children=l.get_json(c,a,s,true)}n.push(o)});return n}}})}(jQuery);!function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var a=this._get_settings().languages,s=false,i=".jstree-"+this.get_index()+" a";if(!e.isArray(a)||a.length===0){return false}if(e.inArray(t,a)==-1){if(!!a[t]){t=a[t]}else{return false}}if(t==this.data.languages.current_language){return true}s=e.vakata.css.get_css(i+"."+this.data.languages.current_language,false,this.data.languages.language_css);if(s!==false){s.style.display="none"}s=e.vakata.css.get_css(i+"."+t,false,this.data.languages.language_css);if(s!==false){s.style.display=""}this.data.languages.current_language=t;this.__callback(t);return true},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,a){var s=this._get_settings().languages,i=this._get_settings().core.strings;if(e.isArray(s)&&s.length){a=a&&e.inArray(a,s)!=-1?a:this.data.languages.current_language}if(i[a]&&i[a][t]){return i[a][t]}if(i[t]){return i[t]}return t},get_text:function(t,a){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size()){return false}var s=this._get_settings().languages,i=this._get_settings().core.html_titles;if(e.isArray(s)&&s.length){a=a&&e.inArray(a,s)!=-1?a:this.data.languages.current_language;t=t.children("a."+a)}else{t=t.children("a:eq(0)")}if(i){t=t.clone();t.children("INS").remove();return t.html()}else{t=t.contents().filter(function(){return this.nodeType==3})[0];return t.nodeValue}},set_text:function(t,a,s){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size()){return false}var i=this._get_settings().languages,n=this._get_settings().core.html_titles,r;if(e.isArray(i)&&i.length){s=s&&e.inArray(s,i)!=-1?s:this.data.languages.current_language;t=t.children("a."+s)}else{t=t.children("a:eq(0)")}if(n){r=t.children("INS").clone();t.html(a).prepend(r);this.__callback({obj:t,name:a,lang:s});return true}else{t=t.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:t,name:a,lang:s});return t.nodeValue=a}},_load_css:function(){var t=this._get_settings().languages,a="/* languages css */",s=".jstree-"+this.get_index()+" a",i;if(e.isArray(t)&&t.length){this.data.languages.current_language=t[0];for(i=0;i<t.length;i++){a+=s+"."+t[i]+" {";if(t[i]!=this.data.languages.current_language){a+=" display:none; "}a+=" } "}this.data.languages.language_css=e.vakata.css.add_sheet({str:a,title:"jstree-languages"})}},create_node:function(t,a,s,i){var n=this.__call_old(true,t,a,s,function(t){var a=this._get_settings().languages,s=t.children("a"),n;if(e.isArray(a)&&a.length){for(n=0;n<a.length;n++){if(!s.is("."+a[n])){t.append(s.eq(0).clone().removeClass(a.join(" ")).addClass(a[n]))}}s.not("."+a.join(", .")).remove()}if(i){i.call(this,t)}});return n}}})}(jQuery);!function(e){e.jstree.plugin("cookies",{__init:function(){if(typeof e.cookie==="undefined"){throw"jsTree cookie: jQuery cookie plugin not included."}var t=this._get_settings().cookies,a;if(!!t.save_loaded){a=e.cookie(t.save_loaded);if(a&&a.length){this.data.core.to_load=a.split(",")}}if(!!t.save_opened){a=e.cookie(t.save_opened);if(a&&a.length){this.data.core.to_open=a.split(",")}}if(!!t.save_selected){a=e.cookie(t.save_selected);if(a&&a.length&&this.data.ui){this.data.ui.to_select=a.split(",")}}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){if(this._get_settings().cookies.auto_save){this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))}},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(t){if(this.data.core.refreshing){return}var a=this._get_settings().cookies;if(!t){if(a.save_loaded){this.save_loaded();e.cookie(a.save_loaded,this.data.core.to_load.join(","),a.cookie_options)}if(a.save_opened){this.save_opened();e.cookie(a.save_opened,this.data.core.to_open.join(","),a.cookie_options)}if(a.save_selected&&this.data.ui){this.save_selected();e.cookie(a.save_selected,this.data.ui.to_select.join(","),a.cookie_options)}return}switch(t){case"open_node":case"close_node":if(!!a.save_opened){this.save_opened();e.cookie(a.save_opened,this.data.core.to_open.join(","),a.cookie_options)}if(!!a.save_loaded){this.save_loaded();e.cookie(a.save_loaded,this.data.core.to_load.join(","),a.cookie_options)}break;case"select_node":case"deselect_node":if(!!a.save_selected&&this.data.ui){this.save_selected();e.cookie(a.save_selected,this.data.ui.to_select.join(","),a.cookie_options)}break}}}})}(jQuery);!function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var a=this._get_node(t.rslt.obj);a=a===-1?this.get_container().children("ul"):a.children("ul");this.sort(a)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var a=t.rslt.np==-1?this.get_container():t.rslt.np;this.sort(a.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var a=this._get_settings().sort,s=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(a,s)));t.find("> li > ul").each(function(){s.sort(e(this))});this.clean_node(t)}}})}(jQuery);!function(e){var t=false,a=false,s=false,i=false,n=false,r=false,l=false,o=false,d=false;e.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,a,s){if(e.vakata.dnd.is_drag){e.vakata.drag_stop({})}try{t.currentTarget.unselectable="on";t.currentTarget.onselectstart=function(){return false};if(t.currentTarget.style){t.currentTarget.style.MozUserSelect="none"}}catch(i){}e.vakata.dnd.init_x=t.pageX;e.vakata.dnd.init_y=t.pageY;e.vakata.dnd.user_data=a;e.vakata.dnd.is_down=true;e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(s);e(document).bind("mousemove",e.vakata.dnd.drag);e(document).bind("mouseup",e.vakata.dnd.drag_stop);return false},drag:function(t){if(!e.vakata.dnd.is_down){return}if(!e.vakata.dnd.is_drag){if(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5){e.vakata.dnd.helper.appendTo("body");e.vakata.dnd.is_drag=true;e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}else{return}}if(t.type==="mousemove"){var a=e(document),s=a.scrollTop(),i=a.scrollLeft();if(t.pageY-s<20){if(r&&l==="down"){clearInterval(r);r=false}if(!r){l="up";r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150)}}else{if(r&&l==="up"){clearInterval(r);r=false}}if(e(window).height()-(t.pageY-s)<20){if(r&&l==="up"){clearInterval(r);r=false}if(!r){l="down";r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150)}}else{if(r&&l==="down"){clearInterval(r);r=false}}if(t.pageX-i<20){if(n&&o==="right"){clearInterval(n);n=false}if(!n){o="left";n=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150)}}else{if(n&&o==="left"){clearInterval(n);n=false}}if(e(window).width()-(t.pageX-i)<20){if(n&&o==="left"){clearInterval(n);n=false}if(!n){o="right";n=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150)}}else{if(n&&o==="right"){clearInterval(n);n=false}}}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"});e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})},drag_stop:function(t){if(n){clearInterval(n)}if(r){clearInterval(r)}e(document).unbind("mousemove",e.vakata.dnd.drag);e(document).unbind("mouseup",e.vakata.dnd.drag_stop);e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data});e.vakata.dnd.helper.remove();e.vakata.dnd.init_x=0;e.vakata.dnd.init_y=0;e.vakata.dnd.user_data={};e.vakata.dnd.is_down=false;e.vakata.dnd.is_drag=false}};e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})});e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false,mto:false};this.get_container().bind("mouseenter.jstree",e.proxy(function(a){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(this.data.themes){s.attr("class","jstree-"+this.data.themes.theme);if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}if(a.currentTarget===a.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==a.target){var n=e.jstree._reference(a.target),r;if(n.data.dnd.foreign){r=n._get_settings().dnd.drag_check.call(this,{o:t,r:n.get_container(),is_root:true});if(r===true||r.inside===true||r.before===true||r.after===true){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}else{n.prepare_move(t,n.get_container(),"last");if(n.check_move()){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}}}}},this)).bind("mouseup.jstree",e.proxy(function(a){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&a.currentTarget===a.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==a.target){var s=e.jstree._reference(a.currentTarget),i;if(s.data.dnd.foreign){i=s._get_settings().dnd.drag_check.call(this,{o:t,r:s.get_container(),is_root:true});if(i===true||i.inside===true||i.before===true||i.after===true){s._get_settings().dnd.drag_finish.call(this,{o:t,r:s.get_container(),is_root:true})}}else{s.move_node(t,s.get_container(),"last",a[s._get_settings().dnd.copy_modifier+"Key"])}}},this)).bind("mouseleave.jstree",e.proxy(function(t){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line"){return false}if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}}},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var a=this.get_container()[0];if(t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},a),100)}else if(t.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},a),100)}else{if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}}if(t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},a),100)}else if(t.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},a),100)}else{if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}}}},this)).bind("scroll.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&s&&i){s.hide();i.hide()}},this)).delegate("a","mousedown.jstree",e.proxy(function(e){if(e.which===1){this.start_drag(e.currentTarget,e);return false}},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){this.dnd_enter(t.currentTarget)}},this)).delegate("a","mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(!a||!a.length||a.children("a")[0]!==t.currentTarget){this.dnd_enter(t.currentTarget)}if(typeof this.data.dnd.off.top==="undefined"){this.data.dnd.off=e(t.target).offset()}this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0){this.data.dnd.w+=this.data.core.li_height}this.dnd_show()}},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line"){return false}if(s){s.hide()}if(i){i.hide()}this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){this.dnd_finish(t)}},this));e(document).bind("drag_stop.vakata",e.proxy(function(){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.i1=false;this.data.dnd.i2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(s){s.css({top:"-2000px"})}if(i){i.css({top:"-2000px"})}},this)).bind("drag_start.vakata",e.proxy(function(t,a){if(a.data.jstree){var s=e(a.event.target);if(s.closest(".jstree").hasClass("jstree-"+this.get_index())){this.dnd_enter(s)}}},this));var n=this._get_settings().dnd;if(n.drag_target){e(document).delegate(n.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(a){t=a.target;e.vakata.dnd.drag_start(a,{jstree:true,obj:a.target},"<ins class='jstree-icon'></ins>"+e(a.target).text());if(this.data.themes){if(s){s.attr("class","jstree-"+this.data.themes.theme)}if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var n=this.get_container();this.data.dnd.cof=n.offset();this.data.dnd.cw=parseInt(n.width(),10);this.data.dnd.ch=parseInt(n.height(),10);this.data.dnd.foreign=true;a.preventDefault()},this))}if(n.drop_target){e(document).delegate(n.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(a){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(a.target),e:a})){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}},this)).delegate(n.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(t){if(this.data.dnd.active){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},this)).delegate(n.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(a){if(this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(a.target),e:a})}},this))}},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return true},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(e){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!a||!a.length){return}this.data.dnd.off=a.offset();if(this._get_settings().core.rtl){this.data.dnd.off.right=this.data.dnd.off.left+a.width()}if(this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:a});this.data.dnd.after=e.after;this.data.dnd.before=e.before;this.data.dnd.inside=e.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(t,a,"before");this.data.dnd.before=this.check_move();this.prepare_move(t,a,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(a)){this.prepare_move(t,a,"inside");this.data.dnd.inside=this.check_move()}else{this.data.dnd.inside=false}this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared){return}var t=["before","inside","after"],a=false,n=this._get_settings().core.rtl,r;if(this.data.dnd.w<this.data.core.li_height/3){t=["before","inside","after"]}else if(this.data.dnd.w<=this.data.core.li_height*2/3){t=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]}else{t=["after","inside","before"]}e.each(t,e.proxy(function(t,s){if(this.data.dnd[s]){e.vakata.dnd.helper.children("ins").attr("class","jstree-ok");a=s;return false}},this));if(a===false){e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}r=n?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(a){case"before":s.css({left:r+"px",top:this.data.dnd.off.top-6+"px"}).show();if(i){i.css({left:r+8+"px",top:this.data.dnd.off.top-1+"px"}).show()}break;case"after":s.css({left:r+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();if(i){i.css({left:r+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show()}break;case"inside":s.css({left:r+(n?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();
if(i){i.hide()}break;default:s.hide();if(i){i.hide()}break}d=a;return a},dnd_open:function(){this.data.dnd.to2=false;this.open_node(a,e.proxy(this.dnd_prepare,this),true)},dnd_finish:function(e){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside){this._get_settings().dnd.drag_finish.call(this,{o:t,r:a,p:d})}}else{this.dnd_prepare();this.move_node(t,a,d,e[this._get_settings().dnd.copy_modifier+"Key"])}t=false;a=false;s.hide();if(i){i.hide()}},dnd_enter:function(t){if(this.data.dnd.mto){clearTimeout(this.data.dnd.mto);this.data.dnd.mto=false}var s=this._get_settings().dnd;this.data.dnd.prepared=false;a=this._get_node(t);if(s.check_timeout){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),s.check_timeout)}else{this.dnd_prepare()}if(s.open_timeout){if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(a&&a.length&&a.hasClass("jstree-closed")){this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),s.open_timeout)}}else{if(a&&a.length&&a.hasClass("jstree-closed")){this.dnd_open()}}},dnd_leave:function(t){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");s.hide();if(i){i.hide()}if(a&&a[0]===t.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);this.data.dnd.to2=false}}},start_drag:function(a,n){t=this._get_node(a);if(this.data.ui&&this.is_selected(t)){t=this._get_node(null,true)}var r=t.length>1?this._get_string("multiple_selection"):this.get_text(t),l=this.get_container();if(!this._get_settings().core.html_titles){r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")}e.vakata.dnd.drag_start(n,{jstree:true,obj:t},"<ins class='jstree-icon'></ins>"+r);if(this.data.themes){if(s){s.attr("class","jstree-"+this.data.themes.theme)}if(i){i.attr("class","jstree-"+this.data.themes.theme)}e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}this.data.dnd.cof=l.offset();this.data.dnd.cw=parseInt(l.width(),10);this.data.dnd.ch=parseInt(l.height(),10);this.data.dnd.active=true}}});e(function(){var t=""+"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; "+" -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; "+"} "+"#vakata-dragged .jstree-ok { background:green; } "+"#vakata-dragged .jstree-invalid { background:red; } "+"#jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } "+"#jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43; "+" cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666; "+" -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; "+"}"+"";e.vakata.css.add_sheet({str:t,title:"jstree"});s=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){s.hide();i.hide();e.preventDefault();e.stopImmediatePropagation();return false}).appendTo("body");i=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(a&&a.length){a.children("a").trigger(e);e.preventDefault();e.stopImmediatePropagation();return false}}).bind("mouseleave",function(t){var n=e(t.relatedTarget);if(n.is(".jstree")||n.closest(".jstree").length===0){if(a&&a.length){a.children("a").trigger(t);s.hide();i.hide();t.preventDefault();t.stopImmediatePropagation();return false}}}).appendTo("body");e(document).bind("drag_start.vakata",function(e,t){if(t.data.jstree){s.show();if(i){i.show()}}});e(document).bind("drag_stop.vakata",function(e,t){if(t.data.jstree){s.hide();if(i){i.hide()}}})})}(jQuery);!function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui){this.select_node=this.deselect_node=this.deselect_all=e.noop;this.get_selected=this.get_checked}this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){e.preventDefault();if(this._get_node(e.target).hasClass("jstree-checked")){this.uncheck_node(e.target)}else{this.check_node(e.target)}if(this.data.ui&&this.data.checkbox.noui){this.save_selected();if(this.data.cookies){this.save_cookie("select_node")}}else{e.stopImmediatePropagation();return false}},this))},defaults:{override_ui:false,two_state:false,real_checkboxes:false,checked_parent_open:true,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(Math.random()*1e4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){if(t.checked){this.check_node(e,false)}},_prepare_checkboxes:function(t){t=!t||t==-1?this.get_container().find("> ul > li"):this._get_node(t);if(t===false){return}var a,s=this,i,n=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){i=e(this);a=i.is("li")&&(i.hasClass("jstree-checked")||r&&i.children(":checked").length)?"jstree-checked":"jstree-unchecked";i.find("li").andSelf().each(function(){var t=e(this),i;t.children("a"+(s.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(n?"jstree-unchecked":a);if(r){if(!t.children(":checkbox").length){i=l.call(s,t);t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+i[0]+"' name='"+i[0]+"' value='"+i[1]+"' />")}else{t.children(":checkbox").addClass("jstree-real-checkbox")}}if(!n){if(a==="jstree-checked"||t.hasClass("jstree-checked")||t.children(":checked").length){t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").attr("checked","checked")}}else{if(t.hasClass("jstree-checked")||t.children(":checked").length){t.addClass("jstree-checked").children(":checkbox").attr("checked","checked")}}})});if(!n){t.find(".jstree-checked").parent().parent().each(function(){s._repair_state(this)})}},change_state:function(t,a){t=this._get_node(t);var s=false,i=this._get_settings().checkbox.real_checkboxes;if(!t||t===-1){return false}a=a===false||a===true?a:t.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state){if(a){t.removeClass("jstree-checked").addClass("jstree-unchecked");if(i){t.children(":checkbox").removeAttr("checked")}}else{t.removeClass("jstree-unchecked").addClass("jstree-checked");if(i){t.children(":checkbox").attr("checked","checked")}}}else{if(a){s=t.find("li").andSelf();if(!s.filter(".jstree-checked, .jstree-undetermined").length){return false}s.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){s.children(":checkbox").removeAttr("checked")}}else{s=t.find("li").andSelf();if(!s.filter(".jstree-unchecked, .jstree-undetermined").length){return false}s.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){s.children(":checkbox").attr("checked","checked")}if(this.data.ui){this.data.ui.last_selected=t}this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(a){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length){t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){t.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked")}return false}else{t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");if(i){t.children(":checkbox").removeAttr("checked")}}}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length){t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(i){t.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked")}return false}else{t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(i){t.children(":checkbox").attr("checked","checked")}}}})}if(this.data.ui&&this.data.checkbox.noui){this.data.ui.selected=this.get_checked()}this.__callback(t);return true},check_node:function(e){if(this.change_state(e,false)){e=this._get_node(e);if(this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,false,true)})}this.__callback({obj:e})}},uncheck_node:function(e){if(this.change_state(e,true)){this.__callback({obj:this._get_node(e)})}},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,false)});this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,true)});this.__callback()},is_checked:function(e){e=this._get_node(e);return e.length?e.is(".jstree-checked"):false},get_checked:function(e,t){e=!e||e===-1?this.get_container():this._get_node(e);return t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){e=!e||e===-1?this.get_container():this._get_node(e);return t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){e=this._get_node(e);if(!e.length){return}if(this._get_settings().checkbox.two_state){e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").attr("checked","checked");return}var t=this._get_settings().checkbox.real_checkboxes,a=e.find("> ul > .jstree-checked").length,s=e.find("> ul > .jstree-undetermined").length,i=e.find("> ul > li").length;if(i===0){if(e.hasClass("jstree-undetermined")){this.change_state(e,false)}}else if(a===0&&s===0){this.change_state(e,true)}else if(a===i){this.change_state(e,false)}else{e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");if(t){e.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked")}}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,a=this.data.ui.to_select;a=e.map(e.makeArray(a),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();e.each(a,function(e,a){t.check_node(a)});this.__callback()}else{this.__call_old()}},save_loaded:function(){var e=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){if(this.id){e.data.core.to_load.push("#"+this.id)}})}}});e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery);!function(e){e.vakata.xslt=function(t,a,s){var i="",n,r,l,o;if(document.recalc){n=document.createElement("xml");r=document.createElement("xml");n.innerHTML=t;r.innerHTML=a;e("body").append(n).append(r);setTimeout(function(t,a,s){return function(){s.call(null,t.transformNode(a.XMLDocument));setTimeout(function(t,a){return function(){e(t).remove();e(a).remove()}}(t,a),200)}}(n,r,s),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"){t=(new DOMParser).parseFromString(t,"text/xml");a=(new DOMParser).parseFromString(a,"text/xml")}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){l=new XSLTProcessor;o=e.isFunction(l.transformDocument)?typeof window.XMLSerializer!=="undefined":true;if(!o){return false}t=(new DOMParser).parseFromString(t,"text/xml");a=(new DOMParser).parseFromString(a,"text/xml");if(e.isFunction(l.transformDocument)){i=document.implementation.createDocument("","",null);l.transformDocument(t,a,i,null);s.call(null,(new XMLSerializer).serializeToString(i));return true}else{l.importStylesheet(a);i=l.transformToFragment(t,document);s.call(null,e("<div />").append(i).html());return true}}return false};var t={nest:"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" />'+'<xsl:template match="/">'+'	<xsl:call-template name="nodes">'+'		<xsl:with-param name="node" select="/root" />'+"	</xsl:call-template>"+"</xsl:template>"+'<xsl:template name="nodes">'+'	<xsl:param name="node" />'+"	<ul>"+'	<xsl:for-each select="$node/item">'+'		<xsl:variable name="children" select="count(./item) &gt; 0" />'+"		<li>"+'			<xsl:attribute name="class">'+'				<xsl:if test="position() = last()">jstree-last </xsl:if>'+"				<xsl:choose>"+"					<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"					<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"					<xsl:otherwise>jstree-leaf </xsl:otherwise>"+"				</xsl:choose>"+'				<xsl:value-of select="@class" />'+"			</xsl:attribute>"+'			<xsl:for-each select="@*">'+"				<xsl:if test=\"name() != 'class' and name() != 'state' and name() != 'hasChildren'\">"+'					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"				</xsl:if>"+"			</xsl:for-each>"+'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'			<xsl:for-each select="content/name">'+"				<a>"+'				<xsl:attribute name="href">'+"					<xsl:choose>"+'					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"					<xsl:otherwise>#</xsl:otherwise>"+"					</xsl:choose>"+"				</xsl:attribute>"+'				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'				<xsl:for-each select="@*">'+"					<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"					</xsl:if>"+"				</xsl:for-each>"+"					<ins>"+'						<xsl:attribute name="class">jstree-icon '+'							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"						</xsl:attribute>"+'						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"						<xsl:text>&#xa0;</xsl:text>"+"					</ins>"+'					<xsl:copy-of select="./child::node()" />'+"				</a>"+"			</xsl:for-each>"+'			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>'+"		</li>"+"	</xsl:for-each>"+"	</ul>"+"</xsl:template>"+"</xsl:stylesheet>",flat:"<"+'?xml version="1.0" encoding="utf-8" ?>'+'<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >'+'<xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" />'+'<xsl:template match="/">'+"	<ul>"+'	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">'+'		<xsl:call-template name="nodes">'+'			<xsl:with-param name="node" select="." />'+'			<xsl:with-param name="is_last" select="number(position() = last())" />'+"		</xsl:call-template>"+"	</xsl:for-each>"+"	</ul>"+"</xsl:template>"+'<xsl:template name="nodes">'+'	<xsl:param name="node" />'+'	<xsl:param name="is_last" />'+'	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />'+"	<li>"+'	<xsl:attribute name="class">'+'		<xsl:if test="$is_last = true()">jstree-last </xsl:if>'+"		<xsl:choose>"+"			<xsl:when test=\"@state = 'open'\">jstree-open </xsl:when>"+"			<xsl:when test=\"$children or @hasChildren or @state = 'closed'\">jstree-closed </xsl:when>"+"			<xsl:otherwise>jstree-leaf </xsl:otherwise>"+"		</xsl:choose>"+'		<xsl:value-of select="@class" />'+"	</xsl:attribute>"+'	<xsl:for-each select="@*">'+"		<xsl:if test=\"name() != 'parent_id' and name() != 'hasChildren' and name() != 'class' and name() != 'state'\">"+'		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"		</xsl:if>"+"	</xsl:for-each>"+'	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>'+'	<xsl:for-each select="content/name">'+"		<a>"+'		<xsl:attribute name="href">'+"			<xsl:choose>"+'			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>'+"			<xsl:otherwise>#</xsl:otherwise>"+"			</xsl:choose>"+"		</xsl:attribute>"+'		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>'+'		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>'+'		<xsl:for-each select="@*">'+"			<xsl:if test=\"name() != 'style' and name() != 'class' and name() != 'href'\">"+'				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>'+"			</xsl:if>"+"		</xsl:for-each>"+"			<ins>"+'				<xsl:attribute name="class">jstree-icon '+'					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>'+"				</xsl:attribute>"+'				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>'+"				<xsl:text>&#xa0;</xsl:text>"+"			</ins>"+'			<xsl:copy-of select="./child::node()" />'+"		</a>"+"	</xsl:for-each>"+'	<xsl:if test="$children">'+"		<ul>"+'		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">'+'			<xsl:call-template name="nodes">'+'				<xsl:with-param name="node" select="." />'+'				<xsl:with-param name="is_last" select="number(position() = last())" />'+"			</xsl:call-template>"+"		</xsl:for-each>"+"		</ul>"+"	</xsl:if>"+"	</li>"+"</xsl:template>"+"</xsl:stylesheet>"},a=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true,get_skip_empty:false,get_include_preamble:true},_fn:{load_node:function(e,t,a){var s=this;this.load_node_xml(e,function(){s.__callback({obj:s._get_node(e)});t.call(this)},a)},_is_loaded:function(t){var a=this._get_settings().xml_data;t=this._get_node(t);return t==-1||!t||!a.ajax&&!e.isFunction(a.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,a,s){var i=this.get_settings().xml_data,n=function(){},r=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(s){this.parse_xml(s,e.proxy(function(s){if(s){s=s.replace(/ ?xmlns="[^"]*"/gi,"");if(s.length>10){s=e(s);if(t===-1||!t){this.get_container().children("ul").empty().append(s.children())}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(s);t.removeData("jstree_is_loading")}if(i.clean_node){this.clean_node(t)}if(a){a.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(a){a.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}}}},this))},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1){this.parse_xml(i.data,e.proxy(function(s){if(s){s=s.replace(/ ?xmlns="[^"]*"/gi,"");if(s.length>10){s=e(s);this.get_container().children("ul").empty().append(s.children());if(i.clean_node){this.clean_node(t)}if(a){a.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}},this))}break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:n=function(e,a,n){var r=this.get_settings().xml_data.ajax.error;if(r){r.call(this,e,a,n)}if(t!==-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(a==="success"&&i.correct_state){this.correct_state(t)}}else{if(a==="success"&&i.correct_state){this.get_container().children("ul").empty()}}if(s){s.call(this)}};r=function(s,r,l){s=l.responseText;var o=this.get_settings().xml_data.ajax.success;if(o){s=o.call(this,s,r,l)||s}if(s===""||s&&s.toString&&s.toString().replace(/^[\s\n]+$/,"")===""){return n.call(this,l,r,"")}this.parse_xml(s,e.proxy(function(s){if(s){s=s.replace(/ ?xmlns="[^"]*"/gi,"");if(s.length>10){s=e(s);if(t===-1||!t){this.get_container().children("ul").empty().append(s.children())}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(s);t.removeData("jstree_is_loading")}if(i.clean_node){this.clean_node(t)}if(a){a.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(i.correct_state){this.correct_state(t);if(a){a.call(this)}}}else{if(i.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}}}},this))};i.ajax.context=this;i.ajax.error=n;i.ajax.success=r;if(!i.ajax.dataType){i.ajax.dataType="xml"}if(e.isFunction(i.ajax.url)){i.ajax.url=i.ajax.url.call(this,t)}if(e.isFunction(i.ajax.data)){i.ajax.data=i.ajax.data.call(this,t)}e.ajax(i.ajax);break}},parse_xml:function(a,s){var i=this._get_settings().xml_data;e.vakata.xslt(a,t[i.xsl],s)},get_xml:function(t,s,i,n,r){var l="",o=this._get_settings(),d=this,c,h,f,u,_;if(!t){t="flat"}if(!r){r=0}s=this._get_node(s);if(!s||s===-1){s=this.get_container().find("> ul > li")}i=e.isArray(i)?i:["id","class"];if(!r&&this.data.types&&e.inArray(o.types.type_attr,i)===-1){i.push(o.types.type_attr)}n=e.isArray(n)?n:[];if(!r){if(o.xml_data.get_include_preamble){l+="<"+'?xml version="1.0" encoding="UTF-8"?'+">"}l+="<root>"}s.each(function(){l+="<item";f=e(this);e.each(i,function(e,t){var s=f.attr(t);if(!o.xml_data.get_skip_empty||typeof s!=="undefined"){l+=" "+t+'="'+a((" "+(s||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'}});if(f.hasClass("jstree-open")){l+=' state="open"'}if(f.hasClass("jstree-closed")){l+=' state="closed"'}if(t==="flat"){l+=' parent_id="'+a(r)+'"'}l+=">";l+="<content>";u=f.children("a");u.each(function(){c=e(this);_=false;l+="<name";if(e.inArray("languages",o.plugins)!==-1){e.each(o.languages,function(e,t){if(c.hasClass(t)){l+=' lang="'+a(t)+'"';_=t;return false}})}if(n.length){e.each(n,function(e,t){var s=c.attr(t);if(!o.xml_data.get_skip_empty||typeof s!=="undefined"){l+=" "+t+'="'+a((" "+s||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'}})}if(c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length){l+=' icon="'+a(c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'}if(c.children("ins").get(0).style.backgroundImage.length){l+=' icon="'+a(c.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'}l+=">";l+="<![CDATA["+d.get_text(c,_)+"]]>";l+="</name>"});l+="</content>";h=f[0].id||true;f=f.find("> ul > li");if(f.length){h=d.get_xml(t,f,i,n,h)}else{h=""}if(t=="nest"){l+=h}l+="</item>";if(t=="flat"){l+=h}});if(!r){l+="</root>"}return l}}})}(jQuery);!function(e){e.expr[":"].jstree_contains=function(e,t,a){return(e.textContent||e.innerText||"").toLowerCase().indexOf(a[3].toLowerCase())>=0};e.expr[":"].jstree_title_contains=function(e,t,a){return(e.getAttribute("title")||"").toLowerCase().indexOf(a[3].toLowerCase())>=0};e.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=e();if(this._get_settings().search.show_only_matches){this.get_container().bind("search.jstree",function(t,a){e(this).children("ul").find("li").hide().removeClass("jstree-last");a.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})}},defaults:{ajax:false,search_method:"jstree_contains",show_only_matches:false},_fn:{search:function(t,a){if(e.trim(t)===""){this.clear_search();return}var s=this.get_settings().search,i=this,n=function(){},r=function(){};this.data.search.str=t;if(!a&&s.ajax!==false&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=true;n=function(){};r=function(e,t,a){var s=this.get_settings().search.ajax.success;if(s){e=s.call(this,e,t,a)||e}this.data.search.to_open=e;this._search_open()};s.ajax.context=this;s.ajax.error=n;s.ajax.success=r;if(e.isFunction(s.ajax.url)){s.ajax.url=s.ajax.url.call(this,t)}if(e.isFunction(s.ajax.data)){s.ajax.data=s.ajax.data.call(this,t)}if(!s.ajax.data){s.ajax.data={search_string:t}}if(!s.ajax.dataType||/^json/.exec(s.ajax.dataType)){s.ajax.dataType="json"}e.ajax(s.ajax);return}if(this.data.search.result.length){this.clear_search()}this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+s.search_method+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){i.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:t})},clear_search:function(t){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=e()},_search_open:function(t){var a=this,s=true,i=[],n=[];if(this.data.search.to_open.length){e.each(this.data.search.to_open,function(t,a){if(a=="#"){return true}if(e(a).length&&e(a).is(".jstree-closed")){i.push(a)}else{n.push(a)}});if(i.length){this.data.search.to_open=n;e.each(i,function(e,t){a.open_node(t,function(){a._search_open(true)})});s=false}}if(s){this.search(this.data.search.str,true)}}}})}(jQuery);!function(e){e.vakata.context={hide_on_mouseleave:false,cnt:e("<div id='vakata-contextmenu' />"),vis:false,tgt:false,par:false,func:false,data:false,rtl:false,show:function(t,a,s,i,n,r,l){e.vakata.context.rtl=!!l;var o=e.vakata.context.parse(t),d,c;if(!o){return}e.vakata.context.vis=true;e.vakata.context.tgt=a;e.vakata.context.par=r||a||null;e.vakata.context.data=n||null;e.vakata.context.cnt.html(o).css({visibility:"hidden",display:"block",left:0,top:0});if(e.vakata.context.hide_on_mouseleave){e.vakata.context.cnt.one("mouseleave",function(t){e.vakata.context.hide()})}d=e.vakata.context.cnt.height();c=e.vakata.context.cnt.width();if(s+c>e(document).width()){s=e(document).width()-(c+5);e.vakata.context.cnt.find("li > ul").addClass("right")}if(i+d>e(document).height()){i=i-(d+a[0].offsetHeight);e.vakata.context.cnt.find("li > ul").addClass("bottom")}e.vakata.context.cnt.css({left:s,top:i}).find("li:has(ul)").bind("mouseenter",function(t){var a=e(document).width(),s=e(document).height(),i=e(this).children("ul").show();if(a!==e(document).width()){i.toggleClass("right")}if(s!==e(document).height()){i.toggleClass("bottom")}}).bind("mouseleave",function(t){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show();e(document).triggerHandler("context_show.vakata")},hide:function(){e.vakata.context.vis=false;e.vakata.context.cnt.attr("class","").css({visibility:"hidden"});e(document).triggerHandler("context_hide.vakata")},parse:function(t,a){if(!t){return false}var s="",i=false,n=true;if(!a){e.vakata.context.func={}}s+="<ul>";e.each(t,function(t,a){if(!a){return true}e.vakata.context.func[t]=a.action;if(!n&&a.separator_before){s+="<li class='vakata-separator vakata-separator-before'></li>"}n=false;s+="<li class='"+(a._class||"")+(a._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(a.icon&&a.icon.indexOf("/")===-1){s+=" class='"+a.icon+"' "}if(a.icon&&a.icon.indexOf("/")!==-1){s+=" style='background:url("+a.icon+") center center no-repeat;' "}s+=">&#160;</ins><a href='#' rel='"+t+"'>";if(a.submenu){s+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"}s+=a.label+"</a>";if(a.submenu){i=e.vakata.context.parse(a.submenu,true);if(i){s+=i}}s+="</li>";if(a.separator_after){s+="<li class='vakata-separator vakata-separator-after'></li>";n=true}});s=s.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");s+="</ul>";e(document).triggerHandler("context_parse.vakata");return s.length>10?s:false},exec:function(t){if(e.isFunction(e.vakata.context.func[t])){e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par);return true}else{return false}}};e(function(){var t=""+"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } "+"#vakata-contextmenu ul { min-width:180px; *width:180px; } "+"#vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } "+"#vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } "+"#vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } "+"#vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } "+"#vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } "+"#vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } "+"#vakata-contextmenu .right { right:100%; left:auto; } "+"#vakata-contextmenu .bottom { bottom:-1px; top:auto; } "+"#vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"});e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(t){if(!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))){e.vakata.context.hide()}else{e(this).blur()}}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");
e(document).bind("mousedown",function(t){if(e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)){e.vakata.context.hide()}});if(typeof e.hotkeys!=="undefined"){e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var a=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();if(!a.length){a=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()}a.addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var a=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!a.length){a=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()}a.addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","right",function(t){if(e.vakata.context.vis){e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","left",function(t){if(e.vakata.context.vis){e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");t.stopImmediatePropagation();t.preventDefault()}}).bind("keydown","esc",function(t){e.vakata.context.hide();t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click();t.preventDefault()})}});e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault();if(!e(t.currentTarget).hasClass("jstree-loading")){this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)}},this)).delegate("a","click.jstree",e.proxy(function(t){if(this.data.contextmenu){e.vakata.context.hide()}},this)).bind("destroy.jstree",e.proxy(function(){if(this.data.contextmenu){e.vakata.context.hide()}},this));e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{create:{separator_before:false,separator_after:true,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:false,separator_after:false,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:false,icon:false,separator_after:false,label:"Delete",action:function(e){if(this.is_selected(e)){this.remove()}else{this.remove(e)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:false,icon:false,separator_after:false,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,a,s){t=this._get_node(t);var i=this.get_settings().contextmenu,n=t.children("a:visible:eq(0)"),r=false,l=false;if(i.select_node&&this.data.ui&&!this.is_selected(t)){this.deselect_all();this.select_node(t,true)}if(i.show_at_node||typeof a==="undefined"||typeof s==="undefined"){r=n.offset();a=r.left;s=r.top+this.data.core.li_height}l=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:i.items;if(e.isFunction(l)){l=l.call(this,t)}this.data.contextmenu=true;e.vakata.context.show(l,n,a,s,this,t,this._get_settings().core.rtl);if(this.data.themes){e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}}})}(jQuery);!function(t){t.jstree.plugin("types",{__init:function(){var a=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",t.proxy(function(){var e=a.types,s=a.type_attr,i="",n=this;t.each(e,function(e,a){t.each(a,function(e,t){if(!/^(max_depth|max_children|icon|valid_children)$/.test(e)){n.data.types.attach_to.push(e)}});if(!a.icon){return true}if(a.icon.image||a.icon.position){if(e=="default"){i+=".jstree-"+n.get_index()+" a > .jstree-icon { "}else{i+=".jstree-"+n.get_index()+" li["+s+'="'+e+'"] > a > .jstree-icon { '}if(a.icon.image){i+=" background-image:url("+a.icon.image+"); "}if(a.icon.position){i+=" background-position:"+a.icon.position+"; "}else{i+=" background-position:0 0; "}i+="} "}});if(i!==""){t.vakata.css.add_sheet({str:i,title:"jstree-types"})}},this)).bind("before.jstree",t.proxy(function(e,a){var s,i,n=this._get_settings().types.use_data?this._get_node(a.args[0]):false,r=n&&n!==-1&&n.length?n.data("jstree"):false;if(r&&r.types&&r.types[a.func]===false){e.stopImmediatePropagation();return false}if(t.inArray(a.func,this.data.types.attach_to)!==-1){if(!a.args[0]||!a.args[0].tagName&&!a.args[0].jquery){return}s=this._get_settings().types.types;i=this._get_type(a.args[0]);if((s[i]&&typeof s[i][a.func]!=="undefined"||s["default"]&&typeof s["default"][a.func]!=="undefined")&&this._check(a.func,a.args[0])===false){e.stopImmediatePropagation();return false}}},this));if(e){this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,a){var s=a&&a.rslt&&a.rslt.obj&&a.rslt.obj!==-1?this._get_node(a.rslt.obj).parent():this.get_container_ul(),i=false,n=this._get_settings().types;t.each(n.types,function(e,t){if(t.icon&&(t.icon.image||t.icon.position)){i=e==="default"?s.find("li > a > .jstree-icon"):s.find("li["+n.type_attr+"='"+e+"'] > a > .jstree-icon");if(t.icon.image){i.css("backgroundImage","url("+t.icon.image+")")}i.css("backgroundPosition",t.icon.position||"0 0")}})},this))}},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:false,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){if(t.type&&this._get_settings().types.use_data){this.set_type(t.type,e)}},_get_type:function(e){e=this._get_node(e);return!e||!e.length?false:e.attr(this._get_settings().types.type_attr)||"default"},set_type:function(e,t){t=this._get_node(t);var a=!t.length||!e?false:t.attr(this._get_settings().types.type_attr,e);if(a){this.__callback({obj:t,type:e})}return a},_check:function(e,a,s){a=this._get_node(a);var i=false,n=this._get_type(a),r=0,l=this,o=this._get_settings().types,d=false;if(a===-1){if(!!o[e]){i=o[e]}else{return}}else{if(n===false){return}d=o.use_data?a.data("jstree"):false;if(d&&d.types&&typeof d.types[e]!=="undefined"){i=d.types[e]}else if(!!o.types[n]&&typeof o.types[n][e]!=="undefined"){i=o.types[n][e]}else if(!!o.types["default"]&&typeof o.types["default"][e]!=="undefined"){i=o.types["default"][e]}}if(t.isFunction(i)){i=i.call(this,a)}if(e==="max_depth"&&a!==-1&&s!==false&&o.max_depth!==-2&&i!==0){a.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){if(o.max_depth!==-1&&o.max_depth-(t+1)<=0){i=0;return false}r=t===0?i:l._check(e,this,false);if(r!==-1&&r-(t+1)<=0){i=0;return false}if(r>=0&&(r-(t+1)<i||i<0)){i=r-(t+1)}if(o.max_depth>=0&&(o.max_depth-(t+1)<i||i<0)){i=o.max_depth-(t+1)}})}return i},check_move:function(){if(!this.__call_old()){return false}var e=this._get_move(),a=e.rt._get_settings().types,s=e.rt._check("max_children",e.cr),i=e.rt._check("max_depth",e.cr),n=e.rt._check("valid_children",e.cr),r=0,l=1,o;if(n==="none"){return false}if(t.isArray(n)&&e.ot&&e.ot._get_type){e.o.each(function(){if(t.inArray(e.ot._get_type(this),n)===-1){l=false;return false}});if(l===false){return false}}if(a.max_children!==-2&&s!==-1){r=e.cr===-1?this.get_container().find("> ul > li").not(e.o).length:e.cr.find("> ul > li").not(e.o).length;if(r+e.o.length>s){return false}}if(a.max_depth!==-2&&i!==-1){l=0;if(i===0){return false}if(typeof e.o.d==="undefined"){o=e.o;while(o.length>0){o=o.find("> ul > li");l++}e.o.d=l}if(i-e.o.d<0){return false}}return true},create_node:function(e,a,s,i,n,r){if(!r&&(n||this._is_loaded(e))){var l=typeof a=="string"&&a.match(/^before|after$/i)&&e!==-1?this._get_parent(e):this._get_node(e),o=this._get_settings().types,d=this._check("max_children",l),c=this._check("max_depth",l),h=this._check("valid_children",l),f;if(typeof s==="string"){s={data:s}}if(!s){s={}}if(h==="none"){return false}if(t.isArray(h)){if(!s.attr||!s.attr[o.type_attr]){if(!s.attr){s.attr={}}s.attr[o.type_attr]=h[0]}else{if(t.inArray(s.attr[o.type_attr],h)===-1){return false}}}if(o.max_children!==-2&&d!==-1){f=l===-1?this.get_container().find("> ul > li").length:l.find("> ul > li").length;if(f+1>d){return false}}if(o.max_depth!==-2&&c!==-1&&c-1<0){return false}}return this.__call_old(true,e,a,s,i,n,r)}}})}(jQuery);!function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(e,t,a){var s=this;this.load_node_html(e,function(){s.__callback({obj:s._get_node(e)});t.call(this)},a)},_is_loaded:function(t){t=this._get_node(t);return t==-1||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,a,s){var i,n=this.get_settings().html_data,r=function(){},l=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading")){return}else{t.data("jstree_is_loading",true)}}switch(!0){case e.isFunction(n.data):n.data.call(this,t,e.proxy(function(s){if(s&&s!==""&&s.toString&&s.toString().replace(/^[\s\n]+$/,"")!==""){s=e(s);if(!s.is("ul")){s=e("<ul />").append(s)}if(t==-1||!t){this.get_container().children("ul").empty().append(s.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(s).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");t.removeData("jstree_is_loading")}this.clean_node(t);if(a){a.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(n.correct_state){this.correct_state(t);if(a){a.call(this)}}}else{if(n.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}}},this));break;case!n.data&&!n.ajax:if(!t||t==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(a){a.call(this)}break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!t||t===-1):if(!t||t==-1){i=e(n.data);if(!i.is("ul")){i=e("<ul />").append(i)}this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(a){a.call(this)}break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&t&&t!==-1:t=this._get_node(t);r=function(e,a,i){var r=this.get_settings().html_data.ajax.error;if(r){r.call(this,e,a,i)}if(t!=-1&&t.length){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(a==="success"&&n.correct_state){this.correct_state(t)}}else{if(a==="success"&&n.correct_state){this.get_container().children("ul").empty()}}if(s){s.call(this)}};l=function(s,i,l){var o=this.get_settings().html_data.ajax.success;if(o){s=o.call(this,s,i,l)||s}if(s===""||s&&s.toString&&s.toString().replace(/^[\s\n]+$/,"")===""){return r.call(this,l,i,"")}if(s){s=e(s);if(!s.is("ul")){s=e("<ul />").append(s)}if(t==-1||!t){this.get_container().children("ul").empty().append(s.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{t.children("a.jstree-loading").removeClass("jstree-loading");t.append(s).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");t.removeData("jstree_is_loading")}this.clean_node(t);if(a){a.call(this)}}else{if(t&&t!==-1){t.children("a.jstree-loading").removeClass("jstree-loading");t.removeData("jstree_is_loading");if(n.correct_state){this.correct_state(t);if(a){a.call(this)}}}else{if(n.correct_state){this.get_container().children("ul").empty();if(a){a.call(this)}}}}};n.ajax.context=this;n.ajax.error=r;n.ajax.success=l;if(!n.ajax.dataType){n.ajax.dataType="html"}if(e.isFunction(n.ajax.url)){n.ajax.url=n.ajax.url.call(this,t)}if(e.isFunction(n.ajax.data)){n.ajax.data=n.ajax.data.call(this,t)}e.ajax(n.ajax);break}}}});e.jstree.defaults.plugins.push("html_data")}(jQuery);!function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(a){if(!e(a.currentTarget).hasClass("jstree-loading")){e(this).addClass(t.item_h)}}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,a){a.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,a){a.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(e,a){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,a){a.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,a){this.get_container().find("a."+t.item_h).not(a.rslt.obj).removeClass(t.item_h);a.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o);this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,a=["ui-icon"];e.each(t,function(e,t){t=t.split(" ");if(t.length){a=a.concat(t)}});this.get_container().removeClass("ui-widget-content").find("."+a.join(", .")).removeClass(a.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=!e||e==-1?this.get_container_ul():this._get_node(e).parent();e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});e(function(){var t=""+".jstree-themeroller .ui-icon { overflow:visible; } "+".jstree-themeroller a { padding:0 2px; } "+".jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery);!function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,a){var s=[],i=true,n,r;if(a.func=="move_node"){if(a.args[4]===true){if(a.args[0].o&&a.args[0].o.length){a.args[0].o.children("a").each(function(){s.push(e(this).text().replace(/^\s+/g,""))});i=this._check_unique(s,a.args[0].np.find("> ul > li").not(a.args[0].o),"move_node")}}}if(a.func=="create_node"){if(a.args[4]||this._is_loaded(a.args[0])){n=this._get_node(a.args[0]);if(a.args[1]&&(a.args[1]==="before"||a.args[1]==="after")){n=this._get_parent(a.args[0]);if(!n||n===-1){n=this.get_container()}}if(typeof a.args[2]==="string"){s.push(a.args[2])}else if(!a.args[2]||!a.args[2].data){s.push(this._get_string("new_node"))}else{s.push(a.args[2].data)}i=this._check_unique(s,n.find("> ul > li"),"create_node")}}if(a.func=="rename_node"){s.push(a.args[1]);r=this._get_node(a.args[0]);n=this._get_parent(r);if(!n||n===-1){n=this.get_container()}i=this._check_unique(s,n.find("> ul > li").not(r),"rename_node")}if(!i){t.stopPropagation();return false}},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,a,s){var i=[];a.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))});if(!i.length||!t.length){return true}i=i.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if(i.length+t.length!=i.concat(t).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){this._get_settings().unique.error_callback.call(null,t,a,s);return false}return true},check_move:function(){if(!this.__call_old()){return false}var t=this._get_move(),a=[];if(t.o&&t.o.length){t.o.children("a").each(function(){a.push(e(this).text().replace(/^\s+/g,""))});return this._check_unique(a,t.np.find("> ul > li").not(t.o),"check_move")}return true}}})}(jQuery);!function(s){s.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui){throw"jsTree wholerow: jsTree UI plugin not included."}this.data.wholerow.html=false;this.data.wholerow.to=false;this.get_container().bind("init.jstree",s.proxy(function(e,t){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",s.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",s.proxy(function(e,t){if(this.data.to){clearTimeout(this.data.to)}this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",s.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",s.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((s(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",s.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(e.type==="hover_node"){var a=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");a.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=s(e.currentTarget);if(e.target.tagName==="A"||e.target.tagName==="INS"&&t.closest("li").is(".jstree-open, .jstree-closed")){return}t.closest("li").children("a:visible:eq(0)").click();e.stopImmediatePropagation()}).delegate("li","mouseover.jstree",s.proxy(function(e){e.stopImmediatePropagation();if(s(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length){return false}this.hover_node(e.currentTarget);return false},this)).delegate("li","mouseleave.jstree",s.proxy(function(e){if(s(e.currentTarget).children("a").hasClass("jstree-hovered").length){return}this.dehover_node(e.currentTarget)},this));if(t||e){s.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})}},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=!e||e==-1?this.get_container().find("> ul > li"):this._get_node(e);if(e===false){return}e.each(function(){s(this).find("li").andSelf().each(function(){var e=s(this);if(e.children(".jstree-wholerow-span").length){return true}e.prepend("<span class='jstree-wholerow-span' style='width:"+e.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),a=e.html();e.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==a){this.data.wholerow.last_html=a;this.get_container().children(".jstree-wholerow").remove();this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",(e.height()+(t?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}}});s(function(){var i=""+".jstree .jstree-wholerow-real { position:relative; z-index:1; } "+".jstree .jstree-wholerow-real li { cursor:pointer; } "+".jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } "+".jstree .jstree-wholerow { position:relative; z-index:0; height:0; } "+".jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } "+".jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }"+".jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }"+".jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } "+".jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";if(a){i+=""+".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } "+".jstree .jstree-wholerow-real a { border-color:transparent !important; } "}if(t||e){i+=""+".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } "+".jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "}s.vakata.css.add_sheet({str:i,title:"jstree"})})}(jQuery);!function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],a=function(t,a){var s=true;t=t||{};a=[].concat(a);e.each(a,function(a,i){if(!e.isFunction(t[i])){s=false;return false}});return s};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data){throw"jsTree model: jsTree json_data plugin not included."}this._get_settings().json_data.data=function(s,i){var n=s==-1?this._get_settings().model.object:s.data("jstree_model");if(!a(n,t)){return i.call(null,false)}if(this._get_settings().model.async){n.getChildren(e.proxy(function(e){this.model_done(e,i)},this))}else{this.model_done(n.getChildren(),i)}}},defaults:{object:false,id_prefix:false,async:false},_fn:{model_done:function(t,a){var s=[],i=this._get_settings(),n=this;if(!e.isArray(t)){t=[t]}e.each(t,function(t,a){var r=a.getProps()||{};r.attr=a.getAttr()||{};if(a.getChildrenCount()){r.state="closed"}r.data=a.getName();if(!e.isArray(r.data)){r.data=[r.data]}if(n.data.types&&e.isFunction(a.getType)){r.attr[i.types.type_attr]=a.getType()}if(r.attr.id&&i.model.id_prefix){r.attr.id=i.model.id_prefix+r.attr.id}if(!r.metadata){r.metadata={}}r.metadata.jstree_model=a;s.push(r)});a.call(null,s)}}})}(jQuery)}();
!function(a){var e=function(){var e=function(){var e,t,r,c,o,i=a(this).data("canvasPicker"),l=i.locals,n=i.options;if(l.colorFieldActive){e=l.currentX-n.colorField.x;t=l.currentY-n.colorField.y;r=e/(n.colorField.width-1);c=t/(n.colorField.height-1);l.currentSaturation=Math.round(100*r);l.currentValue=Math.round(100*(1-c))}else if(l.hueActive){t=l.currentY-n.colorField.y;c=t/(n.colorField.height-1);l.currentHue=Math.round(360*(1-c))}o=w({h:l.currentHue,s:l.currentSaturation,b:l.currentValue});l.currentRed=o.r;l.currentGreen=o.g;l.currentBlue=o.b;l.$currentColor.css({"background-image":"none","background-color":"rgb("+o.r+", "+o.g+", "+o.b+")"});if(!l.hexInputFocused){l.$hexInput.val("#"+b({r:o.r,g:o.g,b:o.b}))}};var t=function(){var e=a(this).data("canvasPicker"),t=e.locals,r=e.options,c,o=r.markerRadius,i=r.colorField.x,l=r.colorField.y,n=r.colorField.height,s=r.colorField.width,h=t.ctx;c=w({h:t.currentHue,s:100,b:100});h.fillStyle="rgb("+c.r+", "+c.g+", "+c.b+")";h.fillRect(i,l,t.overlayImage.width,t.overlayImage.height);h.drawImage(t.overlayImage,i,l,t.overlayImage.width,t.overlayImage.height);h.clearRect(i-o,l-o,o+s+o,o);h.clearRect(i-o,l+n,o+s+o,o);h.clearRect(i+s,l,o,n);h.clearRect(i-o,l,o,n)};var r=function(){var e=a(this).data("canvasPicker"),t=e.locals,r=e.options,c=t.ctx;c.strokeStyle="#ffffff";c.strokeRect(t.currentColorFieldX-r.markerRadius,t.currentColorFieldY-r.markerRadius,r.markerRadius*2,r.markerRadius*2);c.strokeStyle="#000000";c.strokeRect(t.currentColorFieldX-(r.markerRadius-1),t.currentColorFieldY-(r.markerRadius-1),(r.markerRadius-1)*2,(r.markerRadius-1)*2);c.strokeStyle="#ffffff";c.strokeRect(t.currentColorFieldX-(r.markerRadius-2),t.currentColorFieldY-(r.markerRadius-2),(r.markerRadius-2)*2,(r.markerRadius-2)*2)};var c=function(){e.call(this);t.call(this);r.call(this)};var o=function(){var e=a(this).data("canvasPicker"),t=e.locals,r=e.options,c=t.ctx,o=r.hue.x,i=r.hue.y,l=r.hue.height,n=r.hue.width,s=r.hueMarker.anchorX,h=s*2;c.drawImage(t.hueImage,r.hue.x,r.hue.y,r.hue.width,r.hue.height);c.clearRect(o-s,i-s,n+h,s);c.clearRect(o-s,i+l,n+h,s);c.clearRect(o-s,i,s,l);c.clearRect(o+n,i,s,l)};var i=function(){var e=a(this).data("canvasPicker"),t=e.locals,r=e.options,c,o=1-t.currentHue/360;c=r.hue.y+o*(r.hue.height-1);if(t.hueMarkerImage.loaded){t.ctx.drawImage(t.hueMarkerImage,r.hue.x-r.hueMarker.anchorX,c-r.hueMarker.anchorY+1,r.hueMarker.width,r.hueMarker.height)}};var l=function(){var c=a(this).data("canvasPicker"),l=c.locals,n=c.options;e.call(this);o.call(this);i.call(this);t.call(this);r.call(this);if(typeof n.dragCallback=="function"){n.dragCallback.call(this,C.call(this))}};var n=function(e,t,r){var c=a(this).data("canvasPicker"),o=c.locals,i=c.options;o.currentHue=e;o.currentX=o.currentColorFieldX=i.colorField.x+t/100*(i.colorField.width-1);o.currentY=o.currentColorFieldY=i.colorField.y+(i.colorField.height-1)-r/100*(i.colorField.height-1);l.call(this);if(!o.hexInputFocused&&typeof i.changedCallback=="function"){i.changedCallback.call(this,C.call(this))}};var s=function(e,t,r){var c=a(this).data("canvasPicker"),o=c.locals,i=c.options,l=m({r:e,g:t,b:r});o.colorFieldActive=true;n.call(this,l.h,l.s,l.b);o.colorFieldActive=false};var h=function(e){var t=a(this).data("canvasPicker"),r=t.locals,c=t.options,o;if(c.useFarbtastic){a.farbtastic(r.$farbtasticContainer).setColor(e);r.$hexInput.val(e)}else{o=k(e);s.call(this,o.r,o.g,o.b);if(e=="transparent"&&c.allowTransparency){r.$currentColor.css("background-image","url("+c.imageRootPath+c.transparentImage+")");r.$hexInput.val("transparent");if(typeof c.dragCallback=="function"){c.dragCallback.call(this,"transparent")}else if(typeof c.changedCallback=="function"){c.changedCallback.call(this,"transparent")}}}};var d=function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals,o=t.options,i=r.$canvas.offset(),n=e.pageY!=a(window).scrollLeft()+e.clientX?e.clientX+a(window).scrollLeft():e.pageX,s=e.pageY!=a(window).scrollTop()+e.clientY?e.clientY+a(window).scrollTop():e.pageY,h=Math.floor(n-i.left),d=Math.floor(s-i.top),v,f;if(r.colorFieldActive||r.hueActive){if(r.colorFieldActive){v=o.colorField}else if(r.hueActive){v=o.hue}if(h<v.x){h=v.x}else if(h>=v.x+v.width){h=v.x+v.width-1}if(d<v.y){d=v.y}else if(d>=v.y+v.height){d=v.y+v.height-1}}r.currentX=h;r.currentY=d;if(r.colorFieldActive){r.currentColorFieldX=r.currentX;r.currentColorFieldY=r.currentY}f=u.call(this,h,d);if(f=="colorField"){r.colorFieldActive=true;r.hueActive=false;c.call(this)}else if(f=="hue"){r.hueActive=true;r.colorFieldActive=false;l.call(this)}};var u=function(e,t){var r=a(this).data("canvasPicker"),c=r.locals,o=r.options;if(e>=o.colorField.x&&e<o.colorField.x+o.colorField.width&&t>=o.colorField.y&&t<o.colorField.y+o.colorField.height){return"colorField"}else if(e>=o.hue.x&&e<o.hue.x+o.hue.width&&t>=o.hue.y&&t<o.hue.y+o.hue.height){return"hue"}else{return"neither"}};var v=function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals,c=t.options;if(r.mouseDown){d.call(e.data.context,e);if(typeof c.dragCallback=="function"){c.dragCallback.call(e.data.context,C.call(e.data.context))}}};var f=function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals,c=t.options;r.mouseDown=false;r.colorFieldActive=false;r.hueActive=false;if(typeof c.changedCallback=="function"){c.changedCallback.call(e.data.context,C.call(e.data.context))}if(typeof c.dragCallback=="function"){c.dragCallback.call(e.data.context,C.call(e.data.context))}a(window).unbind("mousemove",v);a(window).unbind("mouseup",f)};var g=function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals,c=t.options,o=r.$canvas.offset(),i=e.pageY!=a(window).scrollLeft()+e.clientX?e.clientX+a(window).scrollLeft():e.pageX,l=e.pageY!=a(window).scrollTop()+e.clientY?e.clientY+a(window).scrollTop():e.pageY,n=Math.floor(i-o.left),s=Math.floor(l-o.top),h=u.call(this,n,s);if(h=="colorField"){r.colorFieldActive=true}else if(h=="hueField"){r.hueActive=true}r.mouseDown=true;d.call(e.data.context,e,true)};var _=function(){var e=a(this).data("canvasPicker"),t=e.locals,r=e.options,c=t.$hexInput.val(),o;if(r.useFarbtastic){a.farbtastic(t.$farbtasticContainer).setColor(c)}else{o=k(c);s.call(this,o.r,o.g,o.b);if(c=="transparent"&&r.allowTransparency){t.$currentColor.css("background-image","url("+r.imageRootPath+r.transparentImage+")")}}};var p=function(){a(window).unbind("mousemove",v).bind("mouseup",f)};var k=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}};var m=function(a){var e={h:0,s:0,b:0};var t=Math.min(a.r,a.g,a.b);var r=Math.max(a.r,a.g,a.b);var c=r-t;e.b=r;if(r!=0){}e.s=r!=0?255*c/r:0;if(e.s!=0){if(a.r==r){e.h=(a.g-a.b)/c}else if(a.g==r){e.h=2+(a.b-a.r)/c}else{e.h=4+(a.r-a.g)/c}}else{e.h=-1}e.h*=60;if(e.h<0){e.h+=360}e.s*=100/255;e.b*=100/255;return e};var w=function(a){var e={};var t=Math.round(a.h);var r=Math.round(a.s*255/100);var c=Math.round(a.b*255/100);if(r==0){e.r=e.g=e.b=c}else{var o=c;var i=(255-r)*c/255;var l=(o-i)*(t%60)/60;if(t==360)t=0;if(t<60){e.r=o;e.b=i;e.g=i+l}else if(t<120){e.g=o;e.b=i;e.r=o-l}else if(t<180){e.g=o;e.r=i;e.b=i+l}else if(t<240){e.b=o;e.r=i;e.g=o-l}else if(t<300){e.b=o;e.g=i;e.r=i+l}else if(t<360){e.r=o;e.g=i;e.b=o-l}else{e.r=0;e.g=0;e.b=0}}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}};var b=function(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];a.each(t,function(a,e){if(e.length==1){t[a]="0"+e}});return t.join("")};var x=function(){return C.call(this,true)};var C=function(e){var t=a(this).data("canvasPicker"),r=t.locals,c=t.options;if(c.useFarbtastic){return r.$hexInput.val()}else{if(r.$hexInput.val()=="transparent"&&c.allowTransparency){return"transparent"}else{if(!!e){return r.$hexInput.val()}else{return"#"+b({r:r.currentRed,g:r.currentGreen,b:r.currentBlue})}}}};var F=function(a){return'<div class="h24_color_swatch_item" data-description="'+$h24.utils.htmlspecialchars(a.description)+'" data-color="'+a.color+'" style="background-color:'+a.color+';"></div>'};var y=function(a,e){var t="";switch(a){case 0:case 1:case 2:case 3:t="h24_color_swatch_item_delete_up";break;case 4:case 5:case 6:case 7:t="h24_color_swatch_item_delete_down";break}if(typeof e!="undefined"){return'<div class="h24_color_swatch_item" data-index="'+a+'" style="background-color:'+e+';" data-color="'+e+'"><div class="h24_color_swatch_clear '+t+'"></div></div>'}else{return'<div class="h24_color_swatch_item h24_color_swatch_empty" data-index="'+a+'"  data-color=""><div class="h24_color_swatch_clear '+t+'"></div></div>'}};return{init:function(e){return this.each(function(){var t=this,r,c,o,l=a(this),n,s,d,u,p="",k="",m="",w="";var b={color:"#ff0000",dialogIdentifier:"h24_ccpicker",imageRootPath:"/",transparentImage:"transparent.png",hueMarker:{image:"hue_marker.png",width:25,height:7,anchorX:4,anchorY:4},colorField:{x:5,y:5,width:150,height:150,image:"overlay.png"},hue:{x:165,y:5,width:17,height:150,image:"hue.png"},markerRadius:5,dragCallback:null,changedCallback:null,allowTransparency:false,useFarbtastic:!window.CanvasRenderingContext2D,showSwatches:true,inputTimeout:500};var x=a.extend(true,b,e);if(x.useFarbtastic){n='<div class="h24_canvas_color_picker_farbtastic"></div>'}else{n='<canvas width="188" height="160" class="h24_canvas_color_picker"></canvas>'}x.imageRootPath=$h24.publicdir+"css/common/images/canvas-colorpicker/";if(x.allowTransparency&&!x.useFarbtastic){c='<div style="background-image:url('+x.imageRootPath+x.transparentImage+');" class="h24_canvas_color_picker_transparent_swatch"></div>';o=187}else{c="";o=215}s=x.useFarbtastic?205:170;d=x.showSwatches?415:415;if(x.showSwatches){p='<div class="h24_color_swatches"></div>';k='<div class="h24_color_favorites"></div>';m='<h3 class="h24_color_picker_heading_swatches">'+$h24.phrase.GUIPhrase("General","Colors in use")+"</h3>";w='<h3 class="h24_color_picker_heading_favorites">'+$h24.phrase.GUIPhrase("General","Saved favorite colors")+"</h3>"}r='<div class="h24_canvas_color_picker_container" style="height:'+s+"px;width:"+d+'px;" unselectable="on">'+n+'<div class="h24_canvas_color_picker_current"></div>'+'<div style="background-color:'+x.color+';" class="h24_canvas_color_picker_old"></div>'+'<div style="left:'+o+'px;" class="h24_canvas_color_picker_quick_swatches">'+'<div class="h24_canvas_color_picker_black_swatch"></div>'+'<div class="h24_canvas_color_picker_white_swatch"></div>'+c+"</div>"+'<div class="h24_canvas_color_picker_hex_container"><input type="text" name="hex" value="'+x.color+'" class="h24_canvas_color_picker_hex" /></div>'+'<div class="h24_color_picker_swatches_container">'+p+k+"</div>"+"</div>";l.html(r);l.addClass("h24_initiated_canvas_picker");var I=l.find(".h24_canvas_color_picker_container");if(x.showSwatches){var P=I.find(".h24_color_swatches");var R=I.find(".h24_color_favorites");P.bind("click",{context:l[0]},function(e){var t=a(e.target);if(t.hasClass("h24_color_swatch_item")){h.call(e.data.context,t.data("color"))}});R.bind("click",{context:l[0]},function(e){var t=a(e.target),r,c=C.call(e.data.context);if(t.hasClass("h24_color_swatch_item")){if(t.hasClass("h24_color_swatch_empty")){t.css("background-color",c).removeClass("h24_color_swatch_empty");t.data("color",c);$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,model:"DesignManager",modelaction:"saveColorSwatchFavorite",homepageid:$h24.homepageid,index:t.data("index"),color:c})}else{h.call(e.data.context,t.data("color"))}}else if(t.hasClass("h24_color_swatch_clear")){r=t.parent();r.css("background-color","").addClass("h24_color_swatch_empty");r.data("color","");$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,model:"DesignManager",modelaction:"clearColorSwatchFavorite",homepageid:$h24.homepageid,index:r.data("index"),color:c})}});P.loadingSpinner(true);R.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"DesignManager",modelaction:"getSwatchColors"},function(a){var e="",t="";for(var r=0;r<a.used.length;r++){e+=F(a.used[r])}P.html(m+e);P.loadingSpinner(false);for(var r=0;r<8;r++){if(typeof a.favorites[r]!="undefined"){t+=y(r,a.favorites[r])}else{t+=y(r)}}if(a.used.length>8){P.css("overflow-y","scroll")}R.html(w+t);R.loadingSpinner(false)})}var $=I.find("input[name=hex]");var M=I.find(".h24_canvas_color_picker_current");var S=I.find(".h24_canvas_color_picker_old");var Y=I.find(".h24_canvas_color_picker_transparent_swatch");var A=I.find(".h24_canvas_color_picker_black_swatch");var X=I.find(".h24_canvas_color_picker_white_swatch");Y.bind("click",{context:l[0]},function(e){var t=a(e.data.context).data("canvasPicker"),r=t.options;h.call(l[0],"transparent")});A.click(function(){h.call(l[0],"#000000")});X.click(function(){h.call(l[0],"#ffffff")});S.bind("click",{context:l[0]},function(e){var t=a(e.data.context).data("canvasPicker"),r=t.options;h.call(e.data.context,r.color)});$.bind("keyup",{context:l[0]},function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals;_.call(e.data.context);if(r.hexInputTimer!=-1){clearTimeout(r.hexInputTimer)}r.hexInputTimer=setTimeout(function(){if(typeof x.dragCallback=="function"){x.dragCallback.call(e.data.context,C.call(e.data.context))}if(typeof x.changedCallback=="function"){x.changedCallback.call(e.data.context,C.call(e.data.context))}},x.inputTimeout)}).bind("focus",{context:l[0]},function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals;r.hexInputFocused=true}).bind("blur",{context:l[0]},function(e){var t=a(e.data.context).data("canvasPicker"),r=t.locals;r.hexInputFocused=false});if(x.useFarbtastic){u=I.find(".h24_canvas_color_picker_farbtastic");l.data("canvasPicker",{options:x,locals:{$hexInput:$,$currentColor:M,$oldColor:S,$farbtasticContainer:u,hexInputFocused:false}});a.farbtastic(u,function(e){var t=a(this.wheel).closest(".h24_initiated_canvas_picker"),r=t.data("canvasPicker"),c=r.options,o=r.locals;o.$currentColor.css("background-color",e);o.$hexInput.val(e);if(typeof c.dragCallback=="function"){c.dragCallback.call(t[0],e)}},function(e){var t=a(this.wheel).closest(".h24_initiated_canvas_picker"),r=t.data("canvasPicker"),c=r.options;if(typeof c.changedCallback=="function"){c.changedCallback.call(t[0],e)}});a.farbtastic(u).setColor(x.color)}else{var T=I.find(".h24_canvas_color_picker");var D=T[0].getContext("2d");if(x.color=="transparent"){S.css("background-image","url("+x.imageRootPath+x.transparentImage)+")"}var G=new Image;G.src=x.imageRootPath+x.hue.image;G.context=l[0];var H=new Image;H.src=x.imageRootPath+x.colorField.image;H.context=l[0];var L=new Image;L.src=x.imageRootPath+x.hueMarker.image;L.loaded=false;L.context=l[0];G.onload=function(){D.drawImage(this,x.hue.x,x.hue.y,this.width,this.height)};H.onload=function(){var e=a(this.context).data("canvasPicker"),t=e.locals,r=e.options;h.call(this.context,r.color)};L.onload=function(){this.loaded=true;i.call(this.context)};T.bind("mousedown",{context:l[0]},function(e){a(window).bind("mousemove",{context:l[0]},v);a(window).bind("mouseup",{context:l[0]},f);if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}g.call(e.data.context,e)});l.data("canvasPicker",{options:x,locals:{$canvas:T,ctx:D,$hexInput:$,$currentColor:M,$oldColor:S,hueImage:G,overlayImage:H,hueMarkerImage:L,currentX:5,currentY:5,currentHue:0,currentSaturation:0,currentValue:0,currentRed:0,currentGreen:0,currentBlue:0,currentColorFieldX:5,currentColorFieldY:5,mouseDown:false,colorFieldActive:false,hueActive:false,hexInputFocused:false,hexInputTimer:-1}})}})},setColor:h,getColor:x}}();a.fn.extend({canvasPicker:e.init,canvasPickerSetColor:e.setColor,canvasPickerGetColor:e.getColor})}(jQuery);
$.fn.draghover=function(r){return this.each(function(){var r=$(),t=$(this);t.on("dragenter",function(e){if(r.size()===0)t.trigger("draghoverstart");r=r.add(e.target)});t.on("dragleave drop",function(e){setTimeout(function(){r=r.not(e.target);if(r.size()===0)t.trigger("draghoverend")},1)})})};
!function(e){e.fn.timePicker=function(t){var r=e.extend({},e.fn.timePicker.defaults,t);return this.each(function(){e.timePicker(this,r)})};e.timePicker=function(t,r){var s=e(t)[0];return s.timePicker||(s.timePicker=new jQuery._timePicker(s,r))};e.timePicker.version="0.3";e._timePicker=function(s,n){var f=false;var u=false;var l=i(n.startTime,n);var c=i(n.endTime,n);var v="selected";var h="li."+v;e(s).attr("autocomplete","OFF");var p=[];var d=new Date(l);while(d<=c){p[p.length]=r(d,n);d=new Date(d.setMinutes(d.getMinutes()+n.step))}var m=e('<div class="time-picker'+(n.show24Hours?"":" time-picker-12hours")+'"></div>');var g=e("<ul></ul>");for(var k=0;k<p.length;k++){g.append("<li>"+p[k]+"</li>")}m.append(g);m.appendTo("body").hide();m.mouseover(function(){f=true}).mouseout(function(){f=false});e("li",g).mouseover(function(){if(!u){e(h,m).removeClass(v);e(this).addClass(v)}}).mousedown(function(){f=true}).click(function(){t(s,this,m,n);f=false});var w=function(){if(m.is(":visible")){return false}e("li",m).removeClass(v);var t=e(s).offset();m.css({top:t.top+s.offsetHeight,left:t.left});m.show();var i=s.value?a(s.value,n):l;var f=l.getHours()*60+l.getMinutes();var u=i.getHours()*60+i.getMinutes()-f;var h=Math.round(u/n.step);var p=o(new Date(0,0,0,0,h*n.step+f,0));p=l<p&&p<=c?p:l;var d=e("li:contains("+r(p,n)+")",m);if(d.length){d.addClass(v);m[0].scrollTop=d[0].offsetTop}return true};e(s).focus(w).click(w);e(s).blur(function(){if(!f){m.hide()}});var T=e.browser.opera||e.browser.mozilla?"keypress":"keydown";e(s)[T](function(r){var i;u=true;var a=m[0].scrollTop;switch(r.keyCode){case 38:if(w()){return false};i=e(h,g);var o=i.prev().addClass(v)[0];if(o){i.removeClass(v);if(o.offsetTop<a){m[0].scrollTop=a-o.offsetHeight}}else{i.removeClass(v);o=e("li:last",g).addClass(v)[0];m[0].scrollTop=o.offsetTop-o.offsetHeight}return false;break;case 40:if(w()){return false};i=e(h,g);var f=i.next().addClass(v)[0];if(f){i.removeClass(v);if(f.offsetTop+f.offsetHeight>a+m[0].offsetHeight){m[0].scrollTop=a+f.offsetHeight}}else{i.removeClass(v);f=e("li:first",g).addClass(v)[0];m[0].scrollTop=0}return false;break;case 13:if(m.is(":visible")){var l=e(h,g)[0];t(s,l,m,n)}return false;break;case 27:m.hide();return false;break}return true});e(s).keyup(function(e){u=false});this.getTime=function(){return a(s.value,n)};this.setTime=function(t){s.value=r(i(t,n),n);e(s).change()}};e.fn.timePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,0),separator:":",show24Hours:true,onChange:""};function t(t,r,s,a){var o={oldTime:i(t.value,a),newTime:i(e(r).text(),a)};t.value=e(r).text();e(t).change();if(!e.browser.msie){t.focus()}s.hide();if(typeof a.onChange=="function"){a.onChange.call(this,o)}}function r(e,t){var r=e.getHours();var i=t.show24Hours?r:(r+11)%12+1;var a=e.getMinutes();return s(i)+t.separator+s(a)+(t.show24Hours?"":r<12?" AM":" PM")}function s(e){return(e<10?"0":"")+e}function i(e,t){return typeof e=="object"?o(e):a(e,t)}function a(e,t){if(e){var r=e.split(t.separator);var s=parseFloat(r[0]);var i=parseFloat(r[1]);if(!t.show24Hours){if(s===12&&e.indexOf("AM")!==-1){s=0}else if(s!==12&&e.indexOf("PM")!==-1){s+=12}}var a=new Date(0,0,0,s,i,0);return o(a)}return null}function o(e){e.setFullYear(2001);e.setMonth(0);e.setDate(0);return e}}(jQuery);
!function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}}(function(e,t){var n=6,i=e.event.add,a=e.event.remove,r=function(t,n,i){e.event.trigger(n,i,t)},o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){e()},25)}}(),u={textarea:true,input:true,select:true,button:true},c={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},d={move:"touchmove",cancel:"touchend",end:"touchend"};function f(e){var t=e,n=false,i=false;function a(e){if(n){t();o(a);i=true;n=false}else{i=false}}this.kick=function(e){n=true;if(!i){a()}};this.end=function(e){var a=t;if(!e){return}if(!i){e()}else{t=n?function(){a();e()}:e;n=true}}}function m(){return true}function s(){return false}function v(e){e.preventDefault()}function g(e){if(u[e.target.tagName.toLowerCase()]){return}e.preventDefault()}function p(e){return e.which===1&&!e.ctrlKey&&!e.altKey}function l(e,t){var n,i;if(e.identifiedTouch){return e.identifiedTouch(t)}n=-1;i=e.length;while(++n<i){if(e[n].identifier===t){return e[n]}}}function h(e,t){var n=l(e.changedTouches,t.identifier);if(!n){return}if(n.pageX===t.pageX&&n.pageY===t.pageY){return}return n}function X(e){var t;if(!p(e)){return}t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};i(document,c.move,Y,t);i(document,c.cancel,w,t)}function Y(e){var t=e.data;q(e,t,e,y)}function w(e){y()}function y(){a(document,c.move,Y);a(document,c.cancel,w)}function T(e){var t,n;if(u[e.target.tagName.toLowerCase()]){return}t=e.changedTouches[0];n={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier};i(document,d.move+"."+t.identifier,S,n);i(document,d.cancel+"."+t.identifier,k,n)}function S(e){var t=e.data,n=h(e,t);if(!n){return}q(e,t,n,_)}function k(e){var t=e.data,n=l(e.changedTouches,t.identifier);if(!n){return}_(t.identifier)}function _(e){a(document,"."+e,S);a(document,"."+e,k)}function q(e,t,i,a){var r=i.pageX-t.startX,o=i.pageY-t.startY;if(r*r+o*o<n*n){return}F(e,t,i,r,o,a)}function A(){this._handled=m;return false}function D(e){e._handled()}function F(e,t,n,i,a,o){var u=t.target,c,d;c=e.targetTouches;d=e.timeStamp-t.timeStamp;t.type="movestart";t.distX=i;t.distY=a;t.deltaX=i;t.deltaY=a;t.pageX=n.pageX;t.pageY=n.pageY;t.velocityX=i/d;t.velocityY=a/d;t.targetTouches=c;t.finger=c?c.length:1;t._handled=A;t._preventTouchmoveDefault=function(){e.preventDefault()};r(t.target,t);o(t.identifier)}function R(e){var t=e.data.event,n=e.data.timer;L(t,e,e.timeStamp,n)}function x(e){var t=e.data.event,n=e.data.timer;b();N(t,n,function(){setTimeout(function(){a(t.target,"click",s)},0)})}function b(e){a(document,c.move,R);a(document,c.end,x)}function j(e){var t=e.data.event,n=e.data.timer,i=h(e,t);if(!i){return}e.preventDefault();t.targetTouches=e.targetTouches;L(t,i,e.timeStamp,n)}function C(e){var t=e.data.event,n=e.data.timer,i=l(e.changedTouches,t.identifier);if(!i){return}K(t);N(t,n)}function K(e){a(document,"."+e.identifier,j);a(document,"."+e.identifier,C)}function L(e,t,n,i){var a=n-e.timeStamp;e.type="move";e.distX=t.pageX-e.startX;e.distY=t.pageY-e.startY;e.deltaX=t.pageX-e.pageX;e.deltaY=t.pageY-e.pageY;e.velocityX=.3*e.velocityX+.7*e.deltaX/a;e.velocityY=.3*e.velocityY+.7*e.deltaY/a;e.pageX=t.pageX;e.pageY=t.pageY;i.kick()}function N(e,t,n){t.end(function(){e.type="moveend";r(e.target,e);return n&&n()})}function O(e,t,n){i(this,"movestart.move",D);return true}function z(e){a(this,"dragstart drag",v);a(this,"mousedown touchstart",g);a(this,"movestart",D);return true}function Q(e){if(e.namespace==="move"||e.namespace==="moveend"){return}i(this,"dragstart."+e.guid+" drag."+e.guid,v,t,e.selector);i(this,"mousedown."+e.guid,g,t,e.selector)}function B(e){if(e.namespace==="move"||e.namespace==="moveend"){return}a(this,"dragstart."+e.guid+" drag."+e.guid);a(this,"mousedown."+e.guid)}e.event.special.movestart={setup:O,teardown:z,add:Q,remove:B,_default:function(e){var n,a;if(!e._handled()){return}n={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};a={event:n,timer:new f(function(t){r(e.target,n)})};if(e.identifier===t){i(e.target,"click",s);i(document,c.move,R,a);i(document,c.end,x,a)}else{e._preventTouchmoveDefault();i(document,d.move+"."+e.identifier,j,a);i(document,d.end+"."+e.identifier,C,a)}}};e.event.special.move={setup:function(){i(this,"movestart.move",e.noop)},teardown:function(){a(this,"movestart.move",e.noop)}};e.event.special.moveend={setup:function(){i(this,"movestart.moveend",e.noop)},teardown:function(){a(this,"movestart.moveend",e.noop)}};i(document,"mousedown.move",X);i(document,"touchstart.move",T);if(typeof Array.prototype.indexOf==="function"){!function(e,t){var n=["changedTouches","targetTouches"],i=n.length;while(i--){if(e.event.props.indexOf(n[i])===-1){e.event.props.push(n[i])}}}(e)}});
!function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}}(function(e,t){var i=e.event.add,s=e.event.remove,n=function(t,i,s){e.event.trigger(i,s,t)},r={threshold:.4,sensitivity:6};function d(e){var t,i,s;t=e.target.offsetWidth;i=e.target.offsetHeight;s={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/t>r.threshold||e.velocityX*e.distX/t*r.sensitivity>1){s.type="swiperight";n(e.currentTarget,s)}}else{if(-e.distY/i>r.threshold||e.velocityY*e.distY/t*r.sensitivity>1){s.type="swipeup";n(e.currentTarget,s)}}}else{if(e.distX>-e.distY){if(e.distY/i>r.threshold||e.velocityY*e.distY/t*r.sensitivity>1){s.type="swipedown";n(e.currentTarget,s)}}else{if(-e.distX/t>r.threshold||e.velocityX*e.distX/t*r.sensitivity>1){s.type="swipeleft";n(e.currentTarget,s)}}}}function o(t){var i=e.data(t,"event_swipe");if(!i){i={count:0};e.data(t,"event_swipe",i)}return i}e.event.special.swipe=e.event.special.swipeleft=e.event.special.swiperight=e.event.special.swipeup=e.event.special.swipedown={setup:function(e,t,s){var e=o(this);if(e.count++>0){return}i(this,"moveend",d);return true},teardown:function(){var e=o(this);if(--e.count>0){return}s(this,"moveend",d);return true},settings:r}});
!function(e){var t={init:function(t){return this.each(function(){var a=e(this),n={delay:300,hover:function(){},hoverEnd:function(){}};if(typeof a.data("delayedHover")!="undefined"){a.delayedHover("destroy")}e.extend(n,t);a.data("delayedHover",{triggered:false,timer:null,options:n,enabled:true});a.mouseenter(function(){var t=e(this),a=e(this).data("delayedHover"),n=a.options;if(!a.enabled){return}t.data("delayedHover").timer=setTimeout(function(){t.data("delayedHover").timer=null;t.data("delayedHover").triggered=true;n.hover.call(this)},n.delay)});a.mouseleave(function(t){var a=e(this),n=e(this).data("delayedHover"),r=n.timer,d=n.options;if(!n.enabled){return}if(typeof r=="number"){clearTimeout(r);a.data("delayedHover").timer=null}if(a.data("delayedHover").triggered){a.data("delayedHover").triggered=false;d.hoverEnd.call(this)}})})},disable:function(){return this.each(function(){var t=e(this);t.data("delayedHover").enabled=false;options.hoverEnd.call(this)})},enable:function(){return this.each(function(){var t=e(this);t.data("delayedHover").enabled=false})},destroy:function(){return this.each(function(){var t=e(this);t.data("delayedHover",undefined);t.unbind("mouseenter");t.unbind("mouseleave")})}};e.fn.delayedHover=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}}}(jQuery);
!function(t){var o={topShadowCSS:{position:"absolute",top:"0px",left:"0px",height:"10px","box-shadow":"inset 1px 10px 10px -6px rgba(0,0,0,0.4)",display:"none",cursor:"pointer"},bottomShadowCSS:{position:"absolute",top:"0px",left:"0px",height:"10px","box-shadow":"inset 1px -10px 10px -6px rgba(0,0,0,0.4)",display:"none",cursor:"pointer"},width:0,zIndex:10};var i=function(o){var i=0;o.children().each(function(){var o=t(this);if(o.css("position")!="absolute"&&o.css("position")!="fixed"){i+=o.height()}});return i};var e={init:function(i){t.extend(o,i);return this.each(function(){var i=t(this),e=i.data("scrollify"),r,s,n;if(!e){if(["relative","absolute","fixed"].indexOf(i.parent().css("position"))==-1){if(console&&console.error){console.error("jquery.scrollify error: Container's parent must be positioned",this)}return}s=t("<div />").css(o.topShadowCSS);n=t("<div />").css(o.bottomShadowCSS);r=s.add(n);r.css("z-index",o.zIndex);if(o.width==0){r.width(i.width())}else{r.width(o.width)}s.insertBefore(i);n.insertBefore(i);i.on({"scroll.scrollify":function(){var o=t(this),i=o.scrollTop(),e=o.data("scrollify"),r=e.topShadow,s=e.bottomShadow,n=o[0].scrollHeight,l=o.height();if(!e.enabled){return}r.css({top:o.position().top,left:o.position().left});s.css({top:o.position().top+o.height()-s.height(),left:o.position().left});if(n>l){if(i==0){r.hide();s.show()}else if(i==n-l){r.show();s.hide()}else{r.show();s.show()}}}});r.on("click.scrollify",function(o){t(this).hide();t(document.elementFromPoint(o.clientX,o.clientY)).trigger("click");t(this).show()});i.data("scrollify",{topShadow:s,bottomShadow:n,enabled:true})}i.trigger("scroll.scrollify")})},destroy:function(){return this.each(function(){var o=t(this);o.off(".scrollify");o.data("scrollify").topShadow.remove();o.data("scrollify").bottomShadow.remove();jQuery.removeData(o,"scrollify")})},disable:function(){return this.each(function(){var o=t(this);o.data("scrollify").topShadow.hide();o.data("scrollify").bottomShadow.hide();o.data("enabled",false)})},enable:function(){return this.each(function(){var o=t(this);o.data("enabled",true);o.trigger("scroll.scrollify")})}};t.fn.scrollify=function(t){if(typeof t=="undefined"){return e.init.apply(this)}else if(e[t]){return e[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return e.init.apply(this,arguments)}}}(jQuery);
!function(t,o,e){"use strict";var i="slinky";var n=t.fn[i]=function(s){s=t.extend({},n.options,s);return this.each(function(){var n=t(this);if(n.data(i)){return}n.data(i,true);var s=n.children().first();var r,c,a,h;function f(){c.forEach(function(t){var o="";var e=t.$parent.position().top;if(e<=t.top){o="top"}else if(e+t.height>=a-t.bottom){o="bottom"}if(o){if(t.position!=o){t.$parent.css("paddingTop",t.height);t.$.css("position","absolute").css(o,t[o]).css(o=="top"?"bottom":"top","");t.position=o}}else{t.$parent.css("paddingTop","");t.$.css("position","");t.position=""}})}function u(){a=s.outerHeight();c=[];r=s.children();r.each(function(){var o=t(this);var e=o.children().first();c.push({$:e,$parent:o,height:e.outerHeight(),position:""})});c.forEach(function(t,o){t.top=o>0?c[o-1].top+c[o-1].height:0;o=c.length-o-1;c[o].bottom=o<c.length-1?c[o+1].bottom+c[o+1].height:0});f()}function p(){r.css("pointer-events","");h=e}u();s.on("wheel."+i,function(){if(h){clearTimeout(h)}else{r.css("pointer-events","none")}h=setTimeout(p,100)}).on("scroll."+i,f);t(o).on("resize."+i,u);var l=l||o.WebKitMutationObserver;if(l){var v=new l(u);v.observe(s[0],{childList:true,characterData:true,subtree:true})}n.on("remove."+i,function(){s.off("wheel."+i+" scroll."+i);t(o).off("resize."+i,u);if(v){v.disconnect()}})})}}(jQuery,window);
!function(t,e,i){var o=["webkit","Moz","ms","O"],r={},n;function a(t,i){var o=e.createElement(t||"div"),r;for(r in i)o[r]=i[r];return o}function s(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var f=function(){var t=a("style",{type:"text/css"});s(e.getElementsByTagName("head")[0],t);return t.sheet||t.styleSheet}();function l(t,e,i,o){var a=["opacity",e,~~(t*100),i,o].join("-"),s=.01+i/o*100,l=Math.max(1-(1-t)/e*(100-s),t),p=n.substring(0,n.indexOf("Animation")).toLowerCase(),u=p&&"-"+p+"-"||"";if(!r[a]){f.insertRule("@"+u+"keyframes "+a+"{"+"0%{opacity:"+l+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+l+"}"+"}",f.cssRules.length);r[a]=1}return a}function p(t,e){var r=t.style,n,a;if(r[e]!==i)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(a=0;a<o.length;a++){n=o[a]+e;if(r[n]!==i)return n}}function u(t,e){for(var i in e)t.style[p(t,i)||i]=e[i];return t}function c(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)if(t[r]===i)t[r]=o[r]}return t}function d(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function m(t){if(!this.spin)return new m(t);this.opts=c(t||{},m.defaults,h)}m.defaults={};c(m.prototype,{spin:function(t){this.stop();var e=this,i=e.opts,o=e.el=u(a(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),r=i.radius+i.length+i.width,s,f;if(t){t.insertBefore(o,t.firstChild||null);f=d(t);s=d(o);u(o,{left:(i.left=="auto"?f.x-s.x+(t.offsetWidth>>1):parseInt(i.left,10)+r)+"px",top:(i.top=="auto"?f.y-s.y+(t.offsetHeight>>1):parseInt(i.top,10)+r)+"px"})}o.setAttribute("aria-role","progressbar");e.lines(o,e.opts);if(!n){var l=0,p=i.fps,c=p/i.speed,h=(1-i.opacity)/(c*i.trail/100),m=c/i.lines;!function y(){l++;for(var t=i.lines;t;t--){var r=Math.max(1-(l+t*m)%c*h,i.opacity);e.opacity(o,i.lines-t,r,i)}e.timeout=e.el&&setTimeout(y,~~(1e3/p))}()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=i}return this},lines:function(t,e){var i=0,o;function r(t,o){return u(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(;i<e.lines;i++){o=u(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:n&&l(e.opacity,e.trail,i,e.lines)+" "+1/e.speed+"s linear infinite"});if(e.shadow)s(o,u(r("#000","0 0 4px "+"#000"),{top:2+"px"}));s(t,s(o,r(e.color,"0 0 1px rgba(0,0,0,.1)")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});!function(){function t(t,e){return a("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=u(a("group"),{behavior:"url(#default#VML)"});if(!p(e,"transform")&&e.adj){f.addRule(".spin-vml","behavior:url(#default#VML)");m.prototype.lines=function(e,i){var o=i.length+i.width,r=2*o;function n(){return u(t("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}var a=-(i.width+i.length)*2+"px",f=u(n(),{position:"absolute",top:a,left:a}),l;function p(e,r,a){s(f,s(u(n(),{rotation:360/i.lines*e+"deg",left:~~r}),s(u(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(l=1;l<=i.lines;l++)p(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)p(l);return s(e,f)};m.prototype.opacity=function(t,e,i,o){var r=t.firstChild;o=o.shadow&&o.lines||0;if(r&&e+o<r.childNodes.length){r=r.childNodes[e+o];r=r&&r.firstChild;r=r&&r.firstChild;if(r)r.opacity=i}}}else n=p(e,"animation")}();if(typeof define=="function"&&define.amd)define(function(){return m});else t.Spinner=m}(window,document);
jQuery.fn.farbtastic=function(e){$.farbtastic(this,e);return this};jQuery.farbtastic=function(e,t,a){var e=$(e).get(0);return e.farbtastic||(e.farbtastic=new jQuery._farbtastic(e,t,a))};jQuery._farbtastic=function(e,t,a){var o=this;$(e).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var r=$(".farbtastic",e);o.wheel=$(".wheel",e).get(0);o.radius=84;o.square=100;o.width=194;o.mouseUpCallback=a;if(navigator.appVersion.match(/MSIE [0-6]\./)){$("*",r).each(function(){if(this.currentStyle.backgroundImage!="none"){var e=this.currentStyle.backgroundImage;e=this.currentStyle.backgroundImage.substring(5,e.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+e+"')"})}})}o.linkTo=function(e){if(typeof o.callback=="object"){$(o.callback).unbind("keyup",o.updateValue)}o.color=null;if(typeof e=="function"){o.callback=e}else if(typeof e=="object"||typeof e=="string"){o.callback=$(e);o.callback.bind("keyup",o.updateValue);if(o.callback.get(0).value){o.setColor(o.callback.get(0).value)}}return this};o.updateValue=function(e){if(this.value&&this.value!=o.color){o.setColor(this.value)}};o.setColor=function(e){var t=o.unpack(e);if(o.color!=e&&t){o.color=e;o.rgb=t;o.hsl=o.RGBToHSL(o.rgb);o.updateDisplay();if(typeof o.mouseUpCallback=="function"){o.mouseUpCallback.call(o,e)}}return this};o.setHSL=function(e){o.hsl=e;o.rgb=o.HSLToRGB(e);o.color=o.pack(o.rgb);o.updateDisplay();return this};o.widgetCoords=function(e){var t,a;var r=e.target||e.srcElement;var s=o.wheel;if(typeof e.offsetX!="undefined"){var n={x:e.offsetX,y:e.offsetY};var i=r;while(i){i.mouseX=n.x;i.mouseY=n.y;n.x+=i.offsetLeft;n.y+=i.offsetTop;i=i.offsetParent}var i=s;var u={x:0,y:0};while(i){if(typeof i.mouseX!="undefined"){t=i.mouseX-u.x;a=i.mouseY-u.y;break}u.x+=i.offsetLeft;u.y+=i.offsetTop;i=i.offsetParent}i=r;while(i){i.mouseX=undefined;i.mouseY=undefined;i=i.offsetParent}}else{var n=o.absolutePosition(s);if($(o.wheel).parent().parent().hasClass("h24_canvas_color_picker_farbtastic")){n.y+=$(window).scrollTop()}t=(e.pageX||0*(e.clientX+$("html").get(0).scrollLeft))-n.x;a=(e.pageY||0*(e.clientY+$("html").get(0).scrollTop))-n.y}return{x:t-o.width/2,y:a-o.width/2}};o.mousedown=function(e){if(!document.dragging){$(document).bind("mousemove",o.mousemove).bind("mouseup",o.mouseup);document.dragging=true}var t=o.widgetCoords(e);o.circleDrag=Math.max(Math.abs(t.x),Math.abs(t.y))*2>o.square;o.mousemove(e);return false};o.mousemove=function(e){var t=o.widgetCoords(e);if(o.circleDrag){var a=Math.atan2(t.x,-t.y)/6.28;if(a<0)a+=1;o.setHSL([a,o.hsl[1],o.hsl[2]])}else{var r=Math.max(0,Math.min(1,-(t.x/o.square)+.5));var s=Math.max(0,Math.min(1,-(t.y/o.square)+.5));o.setHSL([o.hsl[0],r,s])}return false};o.mouseup=function(){$(document).unbind("mousemove",o.mousemove);$(document).unbind("mouseup",o.mouseup);document.dragging=false;if(typeof o.mouseUpCallback=="function"){a.call(o,o.color)}};o.updateDisplay=function(){var e=o.hsl[0]*6.28;$(".h-marker",r).css({left:Math.round(Math.sin(e)*o.radius+o.width/2)+"px",top:Math.round(-Math.cos(e)*o.radius+o.width/2)+"px"});$(".sl-marker",r).css({left:Math.round(o.square*(.5-o.hsl[1])+o.width/2)+"px",top:Math.round(o.square*(.5-o.hsl[2])+o.width/2)+"px"});$(".color",r).css("backgroundColor",o.pack(o.HSLToRGB([o.hsl[0],1,.5])));if(typeof o.callback=="object"){$(o.callback).css({backgroundColor:o.color,color:o.hsl[2]>.5?"#000":"#fff"});$(o.callback).each(function(){if(this.value&&this.value!=o.color){this.value=o.color}})}else if(typeof o.callback=="function"){o.callback.call(o,o.color)}};o.absolutePosition=function(e){var t={x:e.offsetLeft,y:e.offsetTop};if(e.offsetParent){var a=o.absolutePosition(e.offsetParent);t.x+=a.x;t.y+=a.y}return t};o.pack=function(e){var t=Math.round(e[0]*255);var a=Math.round(e[1]*255);var o=Math.round(e[2]*255);return"#"+(t<16?"0":"")+t.toString(16)+(a<16?"0":"")+a.toString(16)+(o<16?"0":"")+o.toString(16)};o.unpack=function(e){if(e.length==7){return[parseInt("0x"+e.substring(1,3))/255,parseInt("0x"+e.substring(3,5))/255,parseInt("0x"+e.substring(5,7))/255]}else if(e.length==4){return[parseInt("0x"+e.substring(1,2))/15,parseInt("0x"+e.substring(2,3))/15,parseInt("0x"+e.substring(3,4))/15]}};o.HSLToRGB=function(e){var t,a,o,r,s;var n=e[0],i=e[1],u=e[2];a=u<=.5?u*(i+1):u+i-u*i;t=u*2-a;return[this.hueToRGB(t,a,n+.33333),this.hueToRGB(t,a,n),this.hueToRGB(t,a,n-.33333)]};o.hueToRGB=function(e,t,a){a=a<0?a+1:a>1?a-1:a;if(a*6<1)return e+(t-e)*a*6;if(a*2<1)return t;if(a*3<2)return e+(t-e)*(.66666-a)*6;return e};o.RGBToHSL=function(e){var t,a,o,r,s,n;var i=e[0],u=e[1],l=e[2];t=Math.min(i,Math.min(u,l));a=Math.max(i,Math.max(u,l));o=a-t;n=(t+a)/2;s=0;if(n>0&&n<1){s=o/(n<.5?2*n:2-2*n)}r=0;if(o>0){if(a==i&&a!=u)r+=(u-l)/o;if(a==u&&a!=l)r+=2+(l-i)/o;if(a==l&&a!=i)r+=4+(i-u)/o;r/=6}return[r,s,n]};$("*",r).mousedown(o.mousedown);o.setColor("#000000");if(t){o.linkTo(t)}};
window.Modernizr=function(e,t,n){function r(e){v.cssText=e}function o(e,t){return r(E.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function c(e,t){for(var r in e){var o=e[r];if(!a(o,"-")&&v[o]!==n)return t=="pfx"?o:!0}return!1}function l(e,t,r){for(var o in e){var a=t[e[o]];if(a!==n)return r===!1?e[o]:i(a,"function")?a.bind(r||t):a}return!1}function s(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+j.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?c(o,t):(o=(e+" "+C.join(r+" ")+r).split(" "),l(o,t,n))}function u(){d.input=function(n){for(var r=0,o=n.length;r<o;r++)T[n[r]]=n[r]in y;return T.list&&(T.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),T}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var f="2.6.2",d={},p=!0,m=t.documentElement,h="modernizr",g=t.createElement(h),v=g.style,y=t.createElement("input"),b={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),w="Webkit Moz O ms",j=w.split(" "),C=w.toLowerCase().split(" "),S={svg:"http://www.w3.org/2000/svg"},x={},N={},T={},k=[],F=k.slice,M,L=function(e,n,r,o){var i,a,c,l,s=t.createElement("div"),u=t.body,f=u||t.createElement("body");if(parseInt(r,10))while(r--)c=t.createElement("div"),c.id=o?o[r]:h+(r+1),s.appendChild(c);return i=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),s.id=h,(u?s:f).innerHTML+=i,f.appendChild(s),u||(f.style.background="",f.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(f)),a=n(s,e),u?s.parentNode.removeChild(s):(f.parentNode.removeChild(f),m.style.overflow=l),!!a},O={}.hasOwnProperty,D;!i(O,"undefined")&&!i(O.call,"undefined")?D=function(e,t){return O.call(e,t)}:D=function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=F.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(F.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(F.call(arguments)))};return r}),x.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:L(["@media (",E.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},x.boxshadow=function(){return s("boxShadow")},x.cssanimations=function(){return s("animationName")},x.csscolumns=function(){return s("columnCount")},x.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+E.join(n+e)).slice(0,-e.length)),a(v.backgroundImage,"gradient")},x.svg=function(){return!!t.createElementNS&&!!t.createElementNS(S.svg,"svg").createSVGRect};for(var z in x)D(x,z)&&(M=z.toLowerCase(),d[M]=x[z](),k.push((d[M]?"":"no-")+M));return d.input||u(),d.addTest=function(e,t){if(typeof e=="object")for(var r in e)D(e,r)&&d.addTest(r,e[r]);else{e=e.toLowerCase();if(d[e]!==n)return d;t=typeof t=="function"?t():t,typeof p!="undefined"&&p&&(m.className+=" "+(t?"":"no-")+e),d[e]=t}return d},r(""),g=y=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=v.elements;return typeof e=="string"?e.split(" "):e}function o(e){var t=h[e[p]];return t||(t={},m++,e[p]=m,h[m]=t),t}function i(e,n,r){n||(n=t);if(g)return n.createElement(e);r||(r=o(n));var i;return r.cache[e]?i=r.cache[e].cloneNode():f.test(e)?i=(r.cache[e]=r.createElem(e)).cloneNode():i=r.createElem(e),i.canHaveChildren&&!u.test(e)?r.frag.appendChild(i):i}function a(e,n){e||(e=t);if(g)return e.createDocumentFragment();n=n||o(e);var i=n.frag.cloneNode(),a=0,c=r(),l=c.length;for(;a<l;a++)i.createElement(c[a]);return i}function c(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var r=o(e);return v.shivCSS&&!d&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),g||c(e,r),e}var s=e.html5||{},u=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d,p="_html5shiv",m=0,h={},g;!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,g=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){d=!0,g=!0}}();var v={elements:s.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:s.shivCSS!==!1,supportsUnknownElements:g,shivMethods:s.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:a};e.html5=v,l(t)}(this,t),d._version=f,d._prefixes=E,d._domPrefixes=C,d._cssomPrefixes=j,d.testProp=function(e){return c([e])},d.testAllProps=s,d.testStyles=L,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+k.join(" "):""),d}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==m.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function c(){var e=h.shift();g=1,e?e.t?d(function(){("c"==e.t?T.injectCss:T.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),c()):g=0}function l(e,n,r,o,i,l,s){function u(t){if(!m&&a(f.readyState)&&(E.r=m=1,!g&&c(),f.onload=f.onreadystatechange=null,t)){"img"!=e&&d(function(){b.removeChild(f)},50);for(var r in S[n])S[n].hasOwnProperty(r)&&S[n][r].onload()}}var s=s||T.errorTimeout,f=t.createElement(e),m=0,v=0,E={t:r,s:n,e:i,a:l,x:s};1===S[n]&&(v=1,S[n]=[]),"object"==e?f.data=n:(f.src=n,f.type=e),f.width=f.height="0",f.onerror=f.onload=f.onreadystatechange=function(){u.call(this,v)},h.splice(o,0,E),"img"!=e&&(v||2===S[n]?(b.insertBefore(f,y?null:p),d(u,s)):S[n].push(f))}function s(e,t,n,r,i){return g=0,t=t||"j",o(e)?l("c"==t?w:E,e,t,this.i++,n,r,i):(h.splice(this.i++,0,e),1==h.length&&c()),this}function u(){var e=T;return e.loader={load:s,i:0},e}var f=t.documentElement,d=e.setTimeout,p=t.getElementsByTagName("script")[0],m={}.toString,h=[],g=0,v="MozAppearance"in f.style,y=v&&!!t.createRange().compareNode,b=y?f:p.parentNode,f=e.opera&&"[object Opera]"==m.call(e.opera),f=!!t.attachEvent&&!f,E=v?"object":f?"script":"img",w=f?"script":E,j=Array.isArray||function(e){return"[object Array]"==m.call(e)},C=[],S={},x={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},N,T;T=function(e){function t(e){var e=e.split("!"),t=C.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},o,i,a;for(i=0;i<r;i++)a=e[i].split("="),(o=x[a.shift()])&&(n=o(n,a));for(i=0;i<t;i++)n=C[i](n);return n}function a(e,o,i,a,c){var l=t(e),s=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,i,a,c):(S[l.url]?l.noexec=!0:S[l.url]=1,i.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(o)||r(s))&&i.load(function(){u(),o&&o(l.origUrl,c,a),s&&s(l.origUrl,c,a),S[l.url]=2})))}function c(e,t){function n(e,n){if(e){if(o(e))n||(s=function(){var e=[].slice.call(arguments);u.apply(this,e),f()}),a(e,s,t,0,c);else if(Object(e)===e)for(p in d=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--d&&(r(s)?s=function(){var e=[].slice.call(arguments);u.apply(this,e),f()}:s[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(u[p])),a(e[p],s,t,p,c))}else!n&&f()}var c=!!e.test,l=e.load||e.both,s=e.callback||i,u=s,f=e.complete||i,d,p;n(c?e.yep:e.nope,!!l),l&&n(l)}var l,s,f=this.yepnope.loader;if(o(e))a(e,0,f,0);else if(j(e))for(l=0;l<e.length;l++)s=e[l],o(s)?a(s,0,f,0):j(s)?T(s):Object(s)===s&&c(s,f);else Object(e)===e&&c(e,f)},T.addPrefix=function(e,t){x[e]=t},T.addFilter=function(e){C.push(e)},T.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",N=function(){t.removeEventListener("DOMContentLoaded",N,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=c,e.yepnope.injectJs=function(e,n,r,o,l,s){var u=t.createElement("script"),f,m,o=o||T.errorTimeout;u.src=e;for(m in r)u.setAttribute(m,r[m]);n=s?c:n||i,u.onreadystatechange=u.onload=function(){!f&&a(u.readyState)&&(f=1,n(),u.onload=u.onreadystatechange=null)},d(function(){f||(f=1,n(1))},o),l?u.onload():p.parentNode.insertBefore(u,p)},e.yepnope.injectCss=function(e,n,r,o,a,l){var o=t.createElement("link"),s,n=l?c:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(s in r)o.setAttribute(s,r[s]);a||(p.parentNode.insertBefore(o,p),d(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i;for(i in e){if(t.style[i]!==undefined){return e[i]}}}();return t&&{end:t}}()})}(window.jQuery);!function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){var i=t(this),n=i.attr("data-target"),s;if(!n){n=i.attr("href");n=n&&n.replace(/.*(?=#[^\s]*$)/,"")}s=t(n);e&&e.preventDefault();s.length||(s=i.hasClass("alert")?i:i.parent());s.trigger(e=t.Event("close"));if(e.isDefaultPrevented())return;s.removeClass("in");function o(){s.trigger("closed").remove()}t.support.transition&&s.hasClass("fade")?s.on(t.support.transition.end,o):o()};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),s=n.data("alert");if(!s)n.data("alert",s=new i(this));if(typeof e=="string")s[e].call(n)})};t.fn.alert.Constructor=i;t.fn.alert.noConflict=function(){t.fn.alert=n;return this};t(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.$element=t(e);this.options=t.extend({},t.fn.button.defaults,i)};e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";t=t+"Text";n.resetText||i.data("resetText",i[s]());i[s](n[t]||this.options[t]);setTimeout(function(){t=="loadingText"?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)};e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active");this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),s=n.data("button"),o=typeof i=="object"&&i;if(!s)n.data("button",s=new e(this,o));if(i=="toggle")s.toggle();else if(i)s.setState(i)})};t.fn.button.defaults={loadingText:"loading..."};t.fn.button.Constructor=e;t.fn.button.noConflict=function(){t.fn.button=i;return this};t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);if(!i.hasClass("btn"))i=i.closest(".btn");i.button("toggle")})}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.$element=t(e);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.options.pause=="hover"&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(e){var i=this.getActiveIndex(),n=this;if(e>this.$items.length-1||e<0)return;if(this.sliding){return this.$element.one("slid",function(){n.to(e)})}if(i==e){return this.pause().cycle()}return this.slide(e>i?"next":"prev",t(this.$items[e]))},pause:function(e){if(!e)this.paused=true;if(this.$element.find(".next, .prev").length&&t.support.transition.end){this.$element.trigger(t.support.transition.end);this.cycle(true)}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(e,i){var n=this.$element.find(".item.active"),s=i||n[e](),o=this.interval,a=e=="next"?"left":"right",r=e=="next"?"first":"last",h=this,l;this.sliding=true;o&&this.pause();s=s.length?s:this.$element.find(".item")[r]();l=t.Event("slide",{relatedTarget:s[0],direction:a});if(s.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var e=t(h.$indicators.children()[h.getActiveIndex()]);e&&e.addClass("active")})}if(t.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(l);if(l.isDefaultPrevented())return;s.addClass(e);s[0].offsetWidth;n.addClass(a);s.addClass(a);this.$element.one(t.support.transition.end,function(){s.removeClass([e,a].join(" ")).addClass("active");n.removeClass(["active",a].join(" "));h.sliding=false;setTimeout(function(){h.$element.trigger("slid")},0)})}else{this.$element.trigger(l);if(l.isDefaultPrevented())return;n.removeClass("active");s.addClass("active");this.sliding=false;this.$element.trigger("slid")}o&&this.cycle();return this}};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),s=n.data("carousel"),o=t.extend({},t.fn.carousel.defaults,typeof i=="object"&&i),a=typeof i=="string"?i:o.slide;if(!s)n.data("carousel",s=new e(this,o));if(typeof i=="number")s.to(i);else if(a)s[a]();else if(o.interval)s.pause().cycle()})};t.fn.carousel.defaults={interval:5e3,pause:"hover"};t.fn.carousel.Constructor=e;t.fn.carousel.noConflict=function(){t.fn.carousel=i;return this};t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i=t(this),n,s=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},s.data(),i.data()),a;s.carousel(o);if(a=i.attr("data-slide-to")){s.data("carousel").pause().to(a).cycle()}e.preventDefault()})}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.$element=t(e);this.options=t.extend({},t.fn.collapse.defaults,i);if(this.options.parent){this.$parent=t(this.options.parent)}this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,i,n,s;if(this.transitioning||this.$element.hasClass("in"))return;e=this.dimension();i=t.camelCase(["scroll",e].join("-"));n=this.$parent&&this.$parent.find("> .accordion-group > .in");if(n&&n.length){s=n.data("collapse");if(s&&s.transitioning)return;n.collapse("hide");s||n.data("collapse",null)}this.$element[e](0);this.transition("addClass",t.Event("show"),"shown");t.support.transition&&this.$element[e](this.$element[0][i])},hide:function(){var e;if(this.transitioning||!this.$element.hasClass("in"))return;e=this.dimension();this.reset(this.$element[e]());this.transition("removeClass",t.Event("hide"),"hidden");this.$element[e](0)},reset:function(t){var e=this.dimension();this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth;this.$element[t!==null?"addClass":"removeClass"]("collapse");return this},transition:function(e,i,n){var s=this,o=function(){if(i.type=="show")s.reset();s.transitioning=0;s.$element.trigger(n)};this.$element.trigger(i);if(i.isDefaultPrevented())return;this.transitioning=1;this.$element[e]("in");t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),s=n.data("collapse"),o=t.extend({},t.fn.collapse.defaults,n.data(),typeof i=="object"&&i);if(!s)n.data("collapse",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.collapse.defaults={toggle:true};t.fn.collapse.Constructor=e;t.fn.collapse.noConflict=function(){t.fn.collapse=i;return this};t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var i=t(this),n,s=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(s).data("collapse")?"toggle":i.data();i[t(s).hasClass("in")?"addClass":"removeClass"]("collapsed");t(s).collapse(o)})}(window.jQuery);!function(t){"use strict";var e="[data-toggle=dropdown]",i=function(e){var i=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(e){var i=t(this),o,a;if(i.is(".disabled, :disabled"))return;o=s(i);a=o.hasClass("open");n();if(!a){o.toggleClass("open")}i.focus();return false},keydown:function(i){var n,o,a,r,h,l;if(!/(38|40|27)/.test(i.keyCode))return;n=t(this);i.preventDefault();i.stopPropagation();if(n.is(".disabled, :disabled"))return;r=s(n);h=r.hasClass("open");if(!h||h&&i.keyCode==27){if(i.which==27)r.find(e).focus();return n.click()}o=t("[role=menu] li:not(.divider):visible a",r);if(!o.length)return;l=o.index(o.filter(":focus"));if(i.keyCode==38&&l>0)l--;if(i.keyCode==40&&l<o.length-1)l++;if(!~l)l=0;o.eq(l).focus()}};function n(){t(e).each(function(){s(t(this)).removeClass("open")})}function s(e){var i=e.attr("data-target"),n;if(!i){i=e.attr("href");i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}n=i&&t(i);if(!n||!n.length)n=e.parent();return n}var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),s=n.data("dropdown");if(!s)n.data("dropdown",s=new i(this));if(typeof e=="string")s[e].call(n)})};t.fn.dropdown.Constructor=i;t.fn.dropdown.noConflict=function(){t.fn.dropdown=o;return this};t(document).on("click.dropdown.data-api",n).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",e,i.prototype.toggle).on("keydown.dropdown.data-api",e+", [role=menu]",i.prototype.keydown)}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.options=i;this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i);if(this.isShown||i.isDefaultPrevented())return;this.isShown=true;this.escape();this.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");if(!e.$element.parent().length){e.$element.appendTo(document.body)}e.$element.show();if(i){e.$element[0].offsetWidth}e.$element.addClass("in").attr("aria-hidden",false);e.enforceFocus();i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")})},hide:function(e){e&&e.preventDefault();var i=this;e=t.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();t(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){if(e.$element[0]!==t.target&&!e.$element.has(t.target).length){e.$element.focus()}})},escape:function(){var t=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&t.hide()})}else if(!this.isShown){this.$element.off("keyup.dismiss.modal")}},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end);e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i);e.hideModal()})},hideModal:function(){var t=this;this.$element.hide();this.backdrop(function(){t.removeBackdrop();t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this));if(s)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!e)return;s?this.$backdrop.one(t.support.transition.end,e):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()}else if(e){e()}}};var i=t.fn.modal;t.fn.modal=function(i){return this.each(function(){var n=t(this),s=n.data("modal"),o=t.extend({},t.fn.modal.defaults,n.data(),typeof i=="object"&&i);if(!s)n.data("modal",s=new e(this,o));if(typeof i=="string")s[i]();else if(o.show)s.show()})};t.fn.modal.defaults={backdrop:true,keyboard:true,show:true};t.fn.modal.Constructor=e;t.fn.modal.noConflict=function(){t.fn.modal=i;return this};t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());e.preventDefault();s.modal(o).one("hide",function(){i.focus()})})}(window.jQuery);!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var s,o,a,r,h;this.type=e;this.$element=t(i);this.options=this.getOptions(n);this.enabled=true;a=this.options.trigger.split(" ");for(h=a.length;h--;){r=a[h];if(r=="click"){this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this))}else if(r!="manual"){s=r=="hover"?"mouseenter":"focus";o=r=="hover"?"mouseleave":"blur";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this));this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e},enter:function(e){var i=t.fn[this.type].defaults,n={},s;this._options&&t.each(this._options,function(t,e){if(i[t]!=e)n[t]=e},this);s=t(e.currentTarget)[this.type](n).data(this.type);if(!s.options.delay||!s.options.delay.show)return s.show();clearTimeout(this.timeout);s.hoverState="in";this.timeout=setTimeout(function(){if(s.hoverState=="in")s.show()},s.options.delay.show)},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!i.options.delay||!i.options.delay.hide)return i.hide();i.hoverState="out";this.timeout=setTimeout(function(){if(i.hoverState=="out")i.hide()},i.options.delay.hide)},show:function(){var e,i,n,s,o,a,r=t.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(r);if(r.isDefaultPrevented())return;e=this.tip();this.setContent();if(this.options.animation){e.addClass("fade")}o=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement;e.detach().css({top:0,left:0,display:"block"});this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);i=this.getPosition();n=e[0].offsetWidth;s=e[0].offsetHeight;switch(o){case"bottom":a={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":a={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":a={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":a={top:i.top+i.height/2-s/2,left:i.left+i.width};break}this.applyPlacement(a,o);this.$element.trigger("shown")}},applyPlacement:function(t,e){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,o,a,r,h;i.offset(t).addClass(e).addClass("in");o=i[0].offsetWidth;a=i[0].offsetHeight;if(e=="top"&&a!=s){t.top=t.top+s-a;h=true}if(e=="bottom"||e=="top"){r=0;if(t.left<0){r=t.left*-2;t.left=0;i.offset(t);o=i[0].offsetWidth;a=i[0].offsetHeight}this.replaceArrow(r-n+o,o,"left")}else{this.replaceArrow(a-s,a,"top")}if(h)i.offset(t)},replaceArrow:function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e);t.removeClass("fade in top bottom left right")},hide:function(){var e=this,i=this.tip(),n=t.Event("hide");this.$element.trigger(n);if(n.isDefaultPrevented())return;i.removeClass("in");function s(){var e=setTimeout(function(){i.off(t.support.transition.end).detach()},500);i.one(t.support.transition.end,function(){clearTimeout(e);i.detach()})}t.support.transition&&this.$tip.hasClass("fade")?s():i.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var t=this.$element;if(t.attr("title")||typeof t.attr("data-original-title")!="string"){t.attr("data-original-title",t.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},typeof e.getBoundingClientRect=="function"?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,i=this.options;t=e.attr("data-original-title")||(typeof i.title=="function"?i.title.call(e[0]):i.title);return t},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("tooltip"),o=typeof i=="object"&&i;if(!s)n.data("tooltip",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.tooltip.Constructor=e;t.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};t.fn.tooltip.noConflict=function(){t.fn.tooltip=i;return this}}(window.jQuery);!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e);t.find(".popover-content")[this.options.html?"html":"text"](i);t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,i=this.options;t=(typeof i.content=="function"?i.content.call(e[0]):i.content)||e.attr("data-content");return t},tip:function(){if(!this.$tip){this.$tip=t(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),s=n.data("popover"),o=typeof i=="object"&&i;if(!s)n.data("popover",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.popover.Constructor=e;t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.fn.popover.noConflict=function(){t.fn.popover=i;return this}}(window.jQuery);!function(t){"use strict";function e(e,i){var n=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e),o;this.options=t.extend({},t.fn.scrollspy.defaults,i);this.$scrollElement=s.on("scroll.scroll-spy.data-api",n);this.selector=(this.options.target||(o=t(e).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=t("body");this.refresh();this.process()}e.prototype={constructor:e,refresh:function(){var e=this,i;this.offsets=t([]);this.targets=t([]);i=this.$body.find(this.selector).map(function(){var i=t(this),n=i.data("target")||i.attr("href"),s=/^#\w/.test(n)&&t(n);return s&&s.length&&[[s.position().top+(!t.isWindow(e.$scrollElement.get(0))&&e.$scrollElement.scrollTop()),n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]);e.targets.push(this[1])})},process:function(){var t=this.$scrollElement.scrollTop()+this.options.offset,e=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=e-this.$scrollElement.height(),n=this.offsets,s=this.targets,o=this.activeTarget,a;if(t>=i){return o!=(a=s.last()[0])&&this.activate(a)}for(a=n.length;a--;){o!=s[a]&&t>=n[a]&&(!n[a+1]||t<=n[a+1])&&this.activate(s[a])}},activate:function(e){var i,n;this.activeTarget=e;t(this.selector).parent(".active").removeClass("active");n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]';i=t(n).parent("li").addClass("active");if(i.parent(".dropdown-menu").length){i=i.closest("li.dropdown").addClass("active")}i.trigger("activate")}};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),s=n.data("scrollspy"),o=typeof i=="object"&&i;if(!s)n.data("scrollspy",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.scrollspy.Constructor=e;t.fn.scrollspy.defaults={offset:10};t.fn.scrollspy.noConflict=function(){t.fn.scrollspy=i;return this};t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery);!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.attr("data-target"),s,o,a;if(!n){n=e.attr("href");n=n&&n.replace(/.*(?=#[^\s]*$)/,"")}if(e.parent("li").hasClass("active"))return;s=i.find(".active:last a")[0];a=t.Event("show",{relatedTarget:s});e.trigger(a);if(a.isDefaultPrevented())return;o=t(n);this.activate(e.parent("li"),i);this.activate(o,o.parent(),function(){e.trigger({type:"shown",relatedTarget:s})})},activate:function(e,i,n){var s=i.find("> .active"),o=n&&t.support.transition&&s.hasClass("fade");function a(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");e.addClass("active");if(o){e[0].offsetWidth;e.addClass("in")}else{e.removeClass("fade")}if(e.parent(".dropdown-menu")){e.closest("li.dropdown").addClass("active")}n&&n()}o?s.one(t.support.transition.end,a):a();s.removeClass("in")}};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),s=n.data("tab");if(!s)n.data("tab",s=new e(this));if(typeof i=="string")s[i]()})};t.fn.tab.Constructor=e;t.fn.tab.noConflict=function(){t.fn.tab=i;return this};t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();t(this).tab("show")})}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.$element=t(e);this.options=t.extend({},t.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=t(this.options.menu);this.shown=false;this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(t)).change();return this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var i;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}i=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source;return i?this.process(i):this},process:function(e){var i=this;e=t.grep(e,function(t){return i.matcher(t)});e=this.sorter(e);if(!e.length){return this.shown?this.hide():this}return this.render(e.slice(0,this.options.items)).show()},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){var e=[],i=[],n=[],s;while(s=t.shift()){if(!s.toLowerCase().indexOf(this.query.toLowerCase()))e.push(s);else if(~s.indexOf(this.query))i.push(s);else n.push(s)}return e.concat(i,n)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;e=t(e).map(function(e,n){e=t(i.options.item).attr("data-value",n);e.find("a").html(i.highlighter(n));return e[0]});e.first().addClass("active");this.$menu.html(e);return this},next:function(e){var i=this.$menu.find(".active").removeClass("active"),n=i.next();if(!n.length){n=t(this.$menu.find("li")[0])}n.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),i=e.prev();if(!i.length){i=this.$menu.find("li").last()}i.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",t.proxy(this.keydown,this))}this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;if(!e){this.$element.setAttribute(t,"return;");e=typeof this.$element[t]==="function"}return e},move:function(t){if(!this.shown)return;switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault();this.prev();break;case 40:t.preventDefault();this.next();break}t.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]);this.move(e)},keypress:function(t){if(this.suppressKeyPressRepeat)return;this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation();t.preventDefault()},focus:function(t){this.focused=true},blur:function(t){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(t){t.stopPropagation();t.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");t(e.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var i=t.fn.typeahead;t.fn.typeahead=function(i){return this.each(function(){var n=t(this),s=n.data("typeahead"),o=typeof i=="object"&&i;if(!s)n.data("typeahead",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};t.fn.typeahead.Constructor=e;t.fn.typeahead.noConflict=function(){t.fn.typeahead=i;return this};t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var i=t(this);if(i.data("typeahead"))return;i.typeahead(i.data())})}(window.jQuery);!function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.affix.defaults,i);this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this));this.$element=t(e);this.checkPosition()};e.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var e=t(document).height(),i=this.$window.scrollTop(),n=this.$element.offset(),s=this.options.offset,o=s.bottom,a=s.top,r="affix affix-top affix-bottom",h;if(typeof s!="object")o=a=s;if(typeof a=="function")a=s.top();if(typeof o=="function")o=s.bottom();h=this.unpin!=null&&i+this.unpin<=n.top?false:o!=null&&n.top+this.$element.height()>=e-o?"bottom":a!=null&&i<=a?"top":false;if(this.affixed===h)return;this.affixed=h;this.unpin=h=="bottom"?n.top-i:null;this.$element.removeClass(r).addClass("affix"+(h?"-"+h:""))};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),s=n.data("affix"),o=typeof i=="object"&&i;if(!s)n.data("affix",s=new e(this,o));if(typeof i=="string")s[i]()})};t.fn.affix.Constructor=e;t.fn.affix.defaults={offset:0};t.fn.affix.noConflict=function(){t.fn.affix=i;return this};t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{};i.offsetBottom&&(i.offset.bottom=i.offsetBottom);i.offsetTop&&(i.offset.top=i.offsetTop);e.affix(i)})})}(window.jQuery);
!function(){if(typeof window.h24core=="undefined"){window.h24core=function(e){var i={publicdir:"/public/",webroot:"",uploadtarget:"/Upload/",lang:"sv-SE",devmode:false,editmode:false,ckeditor_html_enabled:false,pageci:0,smartydesignid:0,smartythemeid:0,design_id:0,theme_id:0,design_revision_id:0,browser:"",navigation_selectors:"",overflow_item_selector:"",overflow_width:"",overflowing_menu_allowed:true,storage:"s3",editorBrandname:"Hemsida24",isMobile:false,isTouchDevice:"ontouchstart"in document.documentElement,editorSettings:{preferredUploaderType:"auto"},pigeonName:false,jsBundles:false,hasActiveStore:false};$.extend(true,i,e);this.navigation_selectors=i.navigation_selectors;this.browser=typeof H24_RESOURCES!="undefined"&&typeof H24_RESOURCES.browser!="undefined"?H24_RESOURCES.browser:i.browser;this.publicdir=i.publicdir;this.webroot=i.webroot;this.slashwebroot="/"+i.webroot;this.uploadtarget=i.uploadtarget;this.language=i.lang.substring(0,2);this.fullLanguage=i.lang;this.pageid=i.pageid;this.pageci=i.pageci;this.homepageid=i.homepageid;this.smartydesignid=i.smartydesignid;this.smartythemeid=i.smartythemeid;this.design_id=i.design_id;this.theme_id=i.theme_id;this.design_revision_id=i.design_revision_id;this.devmode=i.devmode;this.ckeditor_html_enabled=i.ckeditor_html_enabled;this.editmode=i.editmode;this.sessionid=i.sessionid;this.preferred_file_storage=i.storage;this.overflow_item_selector=i.overflow_item_selector;this.overflow_width=i.overflow_width;this.overflowing_menu_allowed=i.overflowing_menu_allowed;this.editorBrandname=i.editorBrandname;this.isMobile=i.isMobile;this.isTouchDevice=i.isTouchDevice;this.hasActiveStore=i.hasActiveStore;var o=i.imageViewer;var t=false;if(i.editmode){this.editorSettings=i.editorSettings}if(!!i.pigeonName){this.design_system=2}else if(i.design_id>0)this.design_system=1;else this.design_system=0;this.eyecandy=true;this.execOnInit=[];this.addToExecOnInit=function(e,i){this.execOnInit.push({scope:e,fn:i})};this.logStackTrace=function(){if(this.devmode)console.log((new Error).stack)};this.addBlock=function(e,i){if(typeof this.block[e]!="function"){this.block[e]=function(i,o){this.innerblocktype=e;this.blockid=o}}this.blocks[i]=new this.block[e](this,i)};this.removeBlock=function(e){delete this.blocks[e];for(var i=0;i<this.execOnInit.length;i++){if(typeof this.execOnInit[i]!="undefined"&&this.execOnInit[i].scope.blockid==e){this.execOnInit[i]=undefined;break}}};this.blocks={};if(typeof i.blocks==="object"){for(var n in i.blocks){for(var a=0;a<i.blocks[n].length;a++){this.addBlock(n,i.blocks[n][a])}}}this.uploaders={};this.dialogs={};this.dragUploads={};this.initialize=function(){for(var e=0;e<$h24.execOnInit.length;e++){if(typeof $h24.execOnInit[e]!="undefined"){var o=$h24.execOnInit[e];if(isNaN(e))continue;var n=$("#block_container_"+o.scope.blockid);if(!n.hasClass("initialized")){try{o.fn.call(o.scope)}catch(a){}n.addClass("initialized")}}}if(!$h24.tooltips.initialized)$h24.tooltips.init();if($h24.editmode){var s=false;$(".sitepreview").on("scroll.h24_bcp",function(){s=true});setInterval(function(){if(!s)return;s=false;$h24.block.repositionBottomControlPanel()},150)}if(i.editmode&&!$h24.design_manager.hoverButtonsInitialized)$h24.design_manager.initHoverButtons();if($h24.design_system==1&&!$h24.common.navigationSelectorsParsed)$h24.common.parseNavigationSelectors();$h24.fauxSections.reposition();$(window).load(function(){$h24.fauxSections.reposition();setTimeout(function(){$h24.menuOverflow.check();$h24.fauxSections.reposition()},2e3)}).resize(function(){$h24.fauxSections.reposition()});var d=$("#nav_superfish");var l=$("#nav.fixTouchNav");if(d.length){if(!d.hasClass("h24_dropdown_nav_initialized")){if(d.hasClass("supersubs")){d.supersubs().superfish()}else{d.superfish()}if($h24.isTouchDevice&&!d.hasClass("h24_touch_initialized")&&$("html").hasClass("touch-menu-fix")){$h24.common.replaceDropdownsWithSelects(d)}d.hasClass("h24_dropdown_nav_initialized")}}else if(l.length){if($h24.isTouchDevice&&!l.hasClass("h24_touch_initialized")&&$("html").hasClass("touch-menu-fix")){$h24.common.replaceDropdownsWithSelects(l)}}if($h24.editmode&&$h24.browser=="Firefox"){try{document.designMode="on";document.execCommand("enableObjectResizing",null,false);document.execCommand("enableInlineTableEditing",null,false);document.designMode="off"}catch(r){}}if(!$("body").data("clickedOutsideEventBound")){$("body").on("click.clickedOutside",function(){$(this).trigger("clickedOutside")}).data("clickedOutsideEventBound",true)}if($h24.editmode&&$h24.design_id==51&&$h24.theme_id==277){$("#wrapper").css("position","static")}if($h24.editmode&&$h24.design_id==49){$("#nav_superfish").css("zIndex","4")}if($h24.editmode&&$h24.design_system==1){if($h24.browser=="safari"||$h24.browser=="ie9"||$h24.browser=="ie10"){$(".h24-PageBackground-video").hide()}}if(!$h24.editmode&&$h24.design_system==1){window.onbeforeunload=function(){$(".h24-PageBackground-video").hide()}}if($h24.editmode){if(!t){$h24.socialBox.init();t=true}}if($h24.editmode){$h24.helpcenterModal.init()}if($h24.editmode){$h24.account.initLoggedInCheck()}if($("html").hasClass("faux-section-support")){if($h24.editmode&&!!$(".sitepreview").length){$("html").off(".h24-HeaderSection").on("click.h24-HeaderSection",function(e){var i=$(e.target),o=i.closest("[data-action]"),t=o.data("action");switch(t){case"toogleHeaderMenu":break;case"disableToggle":break;default:$(".h24-HeaderSection-menu").addClass("u-hidden");if(!$(e.toElement).is(".h24-HeaderSection-container")){var n=$h24.header.getHeaderSelector();if(typeof n!="undefined"&&n.length>0){n.removeClass("h24-hoverBorderColor")}$(".h24-HeaderSection-container").removeClass("hover")}}})}}if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition();if($h24.editmode&&!!$(".sitepreview").length){$("html").off(".h24-FauxSection").on("click.h24-FauxSection",function(e){var i=$(e.target),o=i.closest("[data-action]"),t=o.data("action"),n=o.is(".disabled, :disabled");if(n)return;switch(t){case"FauxSectionSettings":$h24.fauxSections.toggleMenu(null,false);$h24.fauxSections.settings(o.closest(".pp-FauxSection-container").children(".pp-FauxSection").data("index"));break;case"FauxSectionDisable":$h24.fauxSections.toggleMenu(null,false);$h24.fauxSections.disable(o.closest(".pp-FauxSection-container").children(".pp-FauxSection").data("index"));break;case"FauxSectionDelete":$h24.fauxSections.toggleMenu(null,false);$h24.fauxSections.remove(o.closest(".pp-FauxSection-container").children(".pp-FauxSection").data("index"));break;case"FauxSectionToggleMenu":$h24.fauxSections.toggleAddSection(null,false);$h24.fauxSections.toggleMenu(o.parent());break;case"FauxSectionSetLayout":if(o.parent(".js-section-layouts").length){$h24.fauxSections.applyLayout(o)}else{if(o.hasClass("current"))return;$h24.fauxSections.changeLayout(o.data("layout"),o.closest(".pp-FauxSection-container").children(".pp-FauxSection").data("index"))}break;case"FauxToggleAddSection":$h24.fauxSections.toggleMenu(null,false);$h24.fauxSections.toggleAddSection(o);break;case"FauxNoToggle":break;default:if(o.hasClass("pp-FauxSection-hovertop, pp-FauxSection-hoverbottom"))return;$h24.fauxSections.toggleAddSection(null,false);$h24.fauxSections.toggleMenu(null,false)}});$(".pp-FauxSection-container").off(".h24-FauxSection").on("mouseenter.h24-FauxSection",".pp-FauxSection-hovertop",function(e){$h24.fauxSections.hoverAction($(this),"top",true)}).on("mouseenter.h24-FauxSection",".pp-FauxSection-hoverbottom",function(e){$h24.fauxSections.hoverAction($(this),"bottom",true)});$(".pp-FauxSection-container,.h24_content_container,#main").on("mouseout.h24-FauxSection",$h24.fauxSections.mouseoutAction)}}};if($("html").hasClass("js-bundles")){this.docReady=function(){$h24.phrase.jsPhrases=H24_RESOURCES.jsPhrases;$h24.phrase.jsHomepagePhrases=H24_RESOURCES.jsHomepagePhrases;$h24.phrase.visitorLanguage=H24_RESOURCES.visitorLanguage;$h24.imageViewer.setCurrent(o);if($h24.editmode){$("body").on("click.dropdown.data-api","[data-no-toggle=dropdown]",function(e){e.stopPropagation()});$h24.design_manager.initLayouts();var e=$("body").data("tooltip-guide");if(typeof e=="string"){$h24.tooltipGuide.load(H24_RESOURCES.toolTipGuides);$h24.tooltipGuide.showStep(e,$("body").data("tooltip-guide-step"))}}if($h24.design_system==0){FLIR.init({path:$h24.publicdir+"js/facelift/"})}$h24.block.initCollections();if($h24.editmode){$h24.utils.detectTouchMode($h24.block.initBlocks)}if($("html").hasClass("password-protected")){$h24.common.openPasswordDialog()}reload_ClearDialogBoxStorage();if($h24.editmode&&!!$(".sitepreview").length){if($h24.design_system==0){$h24.legacy.reloadSortables();$h24.style_manager.initiate_header_hover()}else if($h24.design_system==1){$h24.block.reloadSortables()}$h24.page_manager.initFlagList();$h24.legacy.initiate_tabs();$h24.adminPanel.init()}if($h24.hasActiveStore){$h24.store_manager.initMiniCart()}var i=2;if(!$.cookie("webshop_panel_state")){i=$.cookie("webshop_panel_state")}$h24.common.initiate_webshop_mode(i);if(!$h24.editmode&&$("html").hasClass("toggle-legacy-shopping-cart")){var i=1;if(!!$.cookie("webshop_panel_state")){i=$.cookie("webshop_panel_state")}$h24.common.toggleWebShopMode(i)}if($("html").hasClass("legacy-webshop-payment-made")){$h24.webshop_slider.webShopSlide(3)}if($("html").hasClass("show-announcement-dialog")){$.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Announcement",modelaction:"announcementMarkup"},function(e){if(e!=0)$h24.announcement.createDialog(e)})}if($.cookie("SEO_dialog",{path:"/"})!=null){$h24.SEOGuide["dialog_"+$.cookie("SEO_dialog",{path:"/"})]();$.cookie("SEO_dialog",null,{path:"/"})}if($("html").hasClass("open-domain-center")){$h24.domain_center.openDomainCenter()}if($("html").hasClass("open-domain-guide")){$h24.domain_guide.openDialog($h24.phrase.GUIPhrase("Domain-Guide","Domain Guide"))}if($("html").hasClass("open-page-manager")){$h24.page_manager.openDialog()}if($("html").hasClass("open-email-manager")){$h24.emailCenter.overviewDialog()}if($("html").hasClass("h24_frontpage")){$h24.frontpage.init()}if($h24.editmode){if(!Modernizr.input.placeholder){$("html").addClass("no-placeholder")}}if($h24.editmode&&$h24.design_system==0){$h24.design_manager.oldDesignSystemDisabledDialog()}}}this.errorcodes={UNAUTHORIZED:0};this.already_logging_out=false;this.handleError=function(e){switch(e){case 0:if(typeof window.already_logging_out=="undefined")window.already_logging_out=true;else return;hide_loading_overlay();alert($h24.phrase.GUIPhrase("Account","You have been logged out due to inactivity. Please log in again."));var i=window.location.href.split("/");var o=i[2].split(".");o[0]="";var t="http://www"+o.join(".");window.location.href=t;break}};this.prepareParamsForJSONPost=function(e){var i={};var o=[];for(var t in e){if(t=="__skip_loading_overlay"||t=="__keep_loading_overlay")continue;if(typeof e[t]=="object"||typeof e[t]=="boolean"||typeof e[t]=="array"){i[t]=JSON.stringify(e[t]);i["_parse_json"]=1;o[o.length]=t}else i[t]=e[t]}if(typeof i["_parse_json"]!=undefined&&i["_parse_json"]===1)i["_json_fields"]=JSON.stringify(o);return i};this.ajaxPreCallback=function(e,i,o,t,n){var a=true;if(typeof e=="string"){if(e=="statuscode/0"){$h24.handleError($h24.errorcodes.UNAUTHORIZED);a=false}}else if(typeof e=="object"&&typeof e.successful!="undefined"&&typeof e.error!="undefined"&&typeof $h24.errorcodes[e.error]!="undefined"){if(!e.successful){$h24.handleError($h24.errorcodes[e.error]);a=false}}if(a&&typeof t==="function"){if(typeof n=="undefined"||typeof n!="undefined"&&n===true)$h24.utils.ajaxLoaderStop();t.call(this,e,i,o,t);$h24.fauxSections.reposition()}};this.post=function(e,i,o,t){if(typeof i=="undefined"){$h24.utils.ajaxLoaderStart();$.post(e,function(e){$h24.utils.ajaxLoaderStop()})}else if(typeof o=="undefined"&&typeof i=="function"){$h24.utils.ajaxLoaderStart();$.post(e,function(e,o,t){$h24.ajaxPreCallback(e,o,t,i)})}else if(typeof o=="undefined"&&typeof i=="object"){if(typeof i.__skip_loading_overlay=="undefined"||typeof i.__skip_loading_overlay!="undefined"&&i.__skip_loading_overlay===false)$h24.utils.ajaxLoaderStart();if(typeof i.homepageid!="undefined"&&typeof i.model!="undefined"&&typeof i.modelaction!="undefined")e+="?__homepageid="+i.homepageid+"&__model="+i.model+"&__modelaction="+i.modelaction;else if(typeof i.blockid!="undefined"&&typeof i.modelaction!="undefined")e+="?__blockid="+i.blockid+"&__modelaction="+i.modelaction;i=this.prepareParamsForJSONPost(i);$.post(e,i,function(e){if(typeof i.__keep_loading_overlay=="undefined"||typeof i.__keep_loading_overlay!="undefined"&&i.__keep_loading_overlay===false)$h24.utils.ajaxLoaderStop()})}else{if(typeof i.__skip_loading_overlay=="undefined"||typeof i.__skip_loading_overlay!="undefined"&&i.__skip_loading_overlay===false)$h24.utils.ajaxLoaderStart();var n=typeof i.__keep_loading_overlay=="undefined"||typeof i.__keep_loading_overlay!="undefined"&&i.__keep_loading_overlay===false;if(typeof i.homepageid!="undefined"&&typeof i.model!="undefined"&&typeof i.modelaction!="undefined")e+="?__homepageid="+i.homepageid+"&__model="+i.model+"&__modelaction="+i.modelaction;else if(typeof i.blockid!="undefined"&&typeof i.modelaction!="undefined")e+="?__blockid="+i.blockid+"&__modelaction="+i.modelaction;i=this.prepareParamsForJSONPost(i);$.post(e,i,function(e,i,t){$h24.ajaxPreCallback(e,i,t,o,n)},t)}};this.get=function(e,i,o,t){$h24.utils.ajaxLoaderStart();if(typeof i=="undefined"){$.get(e,function(e){$h24.utils.ajaxLoaderStop()})}else if(typeof o=="undefined"&&typeof i=="function"){$.get(e,function(e,o,t){$h24.ajaxPreCallback(e,o,t,i)})}else if(typeof o=="undefined"&&typeof i=="object"){$.get(e,i,function(e){if(typeof i.__keep_loading_overlay=="undefined"||typeof i.__keep_loading_overlay!="undefined"&&i.__keep_loading_overlay===false)$h24.utils.ajaxLoaderStop()})}else{var n=typeof i.__keep_loading_overlay=="undefined"||typeof i.__keep_loading_overlay!="undefined"&&i.__keep_loading_overlay===false;$.get(e,i,function(e,i,t){$h24.ajaxPreCallback(e,i,t,o,n)},t)}}}}}();
h24core.prototype.charts=function(){var e;function t(t,a,l,n){var r=$(t);var i={type:"line",data:{fill:true,labels:a,datasets:[{data:l,label:"",backgroundColor:"rgba(230,250,225,0.4)",borderColor:"#469C23",borderWidth:1}]},options:{responsive:true,maintainAspectRatio:false,title:{display:true,text:n.period},legend:{display:false},scales:{yAxes:[{display:true,scaleLabel:{display:true,labelString:n.xAxisDescription}}]},tooltips:{callbacks:{label:function(e,t){if(typeof Intl!=="undefined"){if(n.language!=null){return new Intl.NumberFormat(n.language).format(e.yLabel)+" "+(n.unit!=null?n.unit:"")}else{return new Intl.NumberFormat("sv-SE").format(e.yLabel)+" "+(n.unit!=null?n.unit:"")}}else{return e.yLabel+" "+(n.unit!=null?n.unit:"")}}}}}};e=new Chart(r,i);return e}function a(e,t,a,l,n){e.data.labels=t;e.data.datasets[0].data=a;e.options.title.text=l.period;e.options.title.text=l.period;e.options.scales.yAxes[0].scaleLabel.labelString=l.xAxisDescription;if(typeof n==="undefined"){e.update()}else{e.update(n)}}function l(){return e}return{getCurrentChart:l,updateChart:a,renderDefaultChart:t}}();
h24core.prototype.tracking_manager=function(){function e(e,t,a){var n=["email","firstName","lastName","name"];if(typeof t==="object"){for(i in n){if(t.hasOwnProperty(n[i])){delete t[n[i]]}}}if(typeof analytics!="undefined"){analytics.track(e,t,a)}}function t(e,t){var a=["email","firstName","lastName","name"];if(typeof t==="object"){for(i in a){if(t.hasOwnProperty(a[i])){delete t[a[i]]}}}if(typeof analytics!="undefined"){analytics.identify(e,t)}}return{track:e,identify:t}}();
h24core.prototype.account=function(){initLoggedInCheck=function(){var n=setInterval(function(){$.post($h24.slashwebroot+"Account/Login-Check/",function(e){if(e.successful&&!e.loggedIn){clearInterval(n);$h24.handleError($h24.errorcodes.UNAUTHORIZED)}})},6e5)};return{initLoggedInCheck:initLoggedInCheck}}();
h24core.prototype.accountManager=function(){var e;function a(a){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"AccountManager",modelaction:"getCreateAccountMarkup",homepageid:$h24.homepageid},function(c){if(c.already_created===true){window.location.reload()}else if(c.status===1){e=$(".h24-CreateAccountPanel");e.html(c.markup);$(document).on("click.h24-CreateAccountPanel",function(e){if(!$(e.target).closest("[data-no-toggle=createAccountPanel], [data-dialog=createAccount], .h24_dialog_overlay, #jqmOverlay, #h24_preloaded_dialog_box").length){t()}});e.on("click.h24-CreateAccountPanel","[data-action]",function(e){var a=$(this);switch(a.data("action")){case"closePanel":t();e.preventDefault();break}});$(".h24-CreateAccountPanel").addClass("h24-CreateAccountPanel__isVisible");if(a){a()}}})}function t(){$(".h24-CreateAccountPanel").removeClass("h24-CreateAccountPanel__isVisible");e.html("");$(document).off("click.h24-CreateAccountPanel");e.off("click.h24-CreateAccountPanel")}return{showCreateAccountPanel:a}}();
h24core.prototype.block=function(){var e=-1;function o(e,o,i){if(typeof i=="undefined")var i=0;var t=$h24.block.getBlockOrder();var l=t.blockOrder[o];var n=[];for(var a=0;a<l.length;a++){var s=l[a];if(s.newBlock){if(s.template!=""){n[n.length]=s.template+"__"+s.innerblocktype}else{n[n.length]=s.innerblocktype}}else{n[n.length]="liblock_"+s.blockid}}var c=n.join(";");if(c.length>1){$h24.post($h24.slashwebroot+"Block/Drag-Report/",{blockstring:c,collection:o,pageid:$h24.pageid},function(e){if(typeof e.errorMessage&&e.errorMessage.length>0){$h24.utils.notification(e.errorMessage,"alert")}for(var t=0;t<e.blocks.length;t++){var l=e.blocks[t];$h24.addBlock(l.innerblocktype,l.blockid)}if(e.init_prompt){if(typeof $h24.blocks[l.blockid].initPrompt=="function")$h24.blocks[l.blockid].initPrompt.call($h24.blocks[l.blockid],e,o);else $h24.block.initPrompt(e.blocks[0].blockid,o)}else if(i==1){reloadColumn(o)}if(e.show_help_video){if(e.help_video_markup!="")$h24.help.createDialogVideo(e.help_video_markup)}})}}var i=function(e,o,i){var t,l,n,a;if(typeof i=="undefined"){var i=[]}if(typeof o=="undefined"){var o=[]}if(i.length==0&&o.length==0){t=l=true}else{t=l=false}if(o.length>0){var s=[];for(var c=0;c<o.length;c++){var r=o[c];var d=-1;if(typeof $h24.blocks[r]!="undefined"&&typeof $h24.blocks[r].adjustForNewCollection=="function"){for(var h in e){var f=e[h];for(var p=0;p<f.length;p++){if(!f[p].newBlock&&f[p].blockid==r){d=h}}}if(d>-1){n=$("#collection"+d);t=l=true;a=$h24.blocks[r].adjustForNewCollection(n.width(),h);if(typeof a=="boolean"){if(a){delete o[c]}}}}if(typeof o[c]!="undefined"){s[s.length]=o[c]}}o=s}$h24.post($h24.slashwebroot+"Block/Update-Blocks",{pageid:$h24.pageid,blockOrder:e,reloadTheseCollections:i,reloadTheseBlocks:o,__skip_loading_overlay:t,__keep_loading_overlay:l},function(e){if(typeof e.errorMessage!="undefined"&&e.errorMessage.length>0){$h24.utils.notification(e.errorMessage,"alert")}for(var t=0;t<e.blocks.length;t++){var l=e.blocks[t];$h24.addBlock(l.innerblocktype,l.blockid)}if(e.init_prompt){if(typeof $h24.blocks[l.blockid].initPrompt=="function"){$h24.blocks[l.blockid].initPrompt.call($h24.blocks[l.blockid],e,e.blocks[0].collection)}else{$h24.block.initPrompt(e.blocks[0].blockid,e.blocks[0].collection)}}if(e.show_help_video){if(e.help_video_markup!="")$h24.help.createDialogVideo(e.help_video_markup)}if(i.length>0){if(typeof e.collections!="undefined"){for(var n in e.collections){$("#ulcollection"+n+" .block_container").each(function(){var e=$(this).data("blockid");if(!!e&&!!$h24.blocks[e]&&typeof $h24.blocks[e].destroy=="function"){$h24.blocks[e].destroy()}});$("#ulcollection"+n).html(e.collections[n]);$h24.block.initCollection(n);if($("html").hasClass("faux-section-support")){var a=$("#ulcollection"+n+" img"),s=a.length;a.one("load.h24-fauxInit",function(){if(--s==0)$h24.fauxSections.reposition()})}}}}if(o.length>0){if(typeof e.blockMarkup!="undefined"){for(var c in e.blockMarkup){b(c,e.blockMarkup[c])}}}for(var t=0;t<e.blocks.length;t++){var r=$("#liblock_"+e.blocks[t].blockid);r.addClass("h24_block_new");setTimeout(function(){r.removeClass("h24_block_new")},2e3)}if(e.first_block){}})};function t(e,o){$h24.get($h24.slashwebroot+"Block/Init-Prompt/",{blockid:e},function(i){if(i.length>10){var t='<div id="block_init_prompt">'+i+"</div>";var l=$h24.dialog.create("block_init_prompt",t,{width:600,noCloseFlap:true,overlayZIndex:3800});var n=l.markup;var a=$("#block_"+e+"_init_save_and_close");var s=$("#block_"+e+"_init_close");if(a.length==1){a.click(function(){var i=$h24.utils.getParameters(n,".save_parameter");var t={blockid:e,modelaction:"save_init_settings",save_parameters:i};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",t,function(e){if(!e.successful&&$h24.devmode)console.log(e);else{reloadColumn(o);l.close()}});return false})}if(s.length==1){s.click(function(){return false})}}else reloadColumn(o)})}function l(e){$h24.get($h24.slashwebroot+"Block/Move-To-Page-Dialog/",{blockid:e},function(e){if(e.length>10){var o=$h24.dialog.create("move_to_page_dialog",e,{width:600,title:$h24.phrase.GUIPhrase("General","Move to page"),transparentOverlay:true,draggable:false})}})}function n(e,o,i){$h24.post($h24.publicdir+"../Block/Move-To-Page",{blockid:e,page_ci:o},function(t){$("#liblock_"+e).hide(400,function(){$(this).remove();$h24.block.addSnippetOnEmptyCollections();if(o==i){reloadColumn(0)}else{$h24.removeBlock(e)}$h24.dialogs.move_to_page_dialog.close()})})}function a(e){$h24.get($h24.slashwebroot+"Block/Copy-Block-Dialog/",{blockid:e},function(e){if(e.length>10){var o=$h24.dialog.create("copy_block_dialog",e,{width:600,title:$h24.phrase.GUIPhrase("General","Copy block"),transparentOverlay:true,draggable:false})}})}function s(e,o,i){$h24.post($h24.publicdir+"../Block/Copy-Block",{blockid:e,page_ci:o},function(e){if(e["successful"]){if(o==i){$h24.addBlock(e["innerblocktype"],e["blockid"]);reloadColumn(e["collection"])}}else if(e["error"]&&e["errorMessage"].length>0){$h24.utils.notification(e["errorMessage"],"alert")}if(typeof $h24.dialogs.copy_block_dialog!="undefined"){$h24.dialogs.copy_block_dialog.close()}})}function c(e,o,i,t){if(typeof t=="undefined"){var t=false}if(typeof i=="undefined"){if(typeof o!="undefined"){confirmDelete=confirm(o)}else{confirmDelete=true}}else confirmDelete=true;if(confirmDelete){$h24.post($h24.publicdir+"../Block/Delete",{blockid:e},function(o){$h24.removeBlock(e);$("#liblock_"+e).hide(400,function(){$(this).remove();$h24.block.addSnippetOnEmptyCollections();if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}if($("ul.sortable:visible > li.sortable").length<1){$("#h24_choose_layout_box").fadeIn()}var o={link_start:'<a href="#" class="h24_notification_action" data-dismiss="notification" data-undo-block-delete="'+e+'">',link_end:"</a>"};$h24.utils.notificationClear("[data-undo-block-delete]");$h24.utils.notification($h24.phrase.GUIPhrase("Block-General","You deleted a block. %link_start%Undo?%link_end%",o),"accept",{timeout:false})})})}if(t){return confirmDelete}}function r(){var e=$("#h24_content_container"),o=$();$("div.h24_collection > ul.sortable",e).each(function(e){var i=$(this);var t=i.attr("id").substr(12);i.droppable({accept:".h24_add_content_panel_block"}).sortable({appendTo:".sitepreview",placeholder:"sort_helper",handle:".h24_bcp_move_container",revert:false,cursorAt:{top:50,left:50},zIndex:1200,helper:function(e,o){return $('<div class="h24_move_block_helper"><svg class="h24-BlockIcon" viewBox="0 0 32 32"><use xlink:href="#h24-BlockIcon-'+$(o).data("blockicon")+'">')},connectWith:"#h24_content_container div.h24_collection > ul.sortable",activate:function(e,o){var i=$h24.block.getBlockOrder();$h24.block.lastSerializedBlockOrderCollections=i.serializedBlockOrderCollections;$("html").addClass("h24_block-sorting");o.helper.css({width:101,height:100,opacity:.8});if($h24.design_system==1){$("#h24_content_container div.single_block_msg").hide()}if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}},start:function(e,i){i.placeholder.html($("#h24_sortable_placeholder").html());o=$(this);o.addClass("h24_sortable_is-receiver");o.sortable("refreshPositions");if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}if(!$(i.item).hasClass("h24_add_content_panel_block")){var t=$(i.item).attr("id").replace(/\D+/g,"");P("explicitSave",t)}},over:function(e,i){o.removeClass("h24_sortable_is-receiver");o=$(this);o.addClass("h24_sortable_is-receiver");if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}},out:function(e,i){o.removeClass("h24_sortable_is-receiver")},deactivate:function(e,i){o.removeClass("h24_sortable_is-receiver")},stop:function(e,t){var l=t.item;l.find(".h24_add_content_badge").remove();var n=$h24.block.getBlockOrder();var a=[];var s;if($h24.design_system==1){var n=$h24.block.getBlockOrder();if(n.newBlockFound){var c={};c[n.newBlockCollection]=n.blockOrder[n.newBlockCollection];$h24.block.updateBlocks(c,[],[n.newBlockCollection])}}if(!n.newBlockFound){for(var r in $h24.block.lastSerializedBlockOrderCollections){if($h24.block.lastSerializedBlockOrderCollections[r]!=n.serializedBlockOrderCollections[r]){if($h24.block.lastSerializedBlockOrderCollections[r].length<n.serializedBlockOrderCollections[r].length){s=r}a[a.length]=r}}var c={};if(a.length==0){}else if(a.length==1){c[a[0]]=n.blockOrder[a[0]];$h24.block.updateBlocks(c)}else if(a.length==2){c[a[0]]=n.blockOrder[a[0]];c[a[1]]=n.blockOrder[a[1]];if(l.hasClass("h24_force_reload")){if(l.hasClass("h24_block_reloadable")){$h24.block.updateBlocks(c,[l.attr("id").substring(8)])}else{$h24.block.updateBlocks(c,[],[s])}}else{$h24.block.updateBlocks(c)}}}l.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");o.removeClass("h24_sortable_is-receiver");$("ul.sortable li.h24_empty_li").remove();i.sortable("refresh");$h24.block.addSnippetOnEmptyCollections();if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}if(!$(t.item).hasClass("h24_add_content_panel_block")){var d=$(t.item).attr("id").replace(/\D+/g,"");P("reloadSettingsPanel",d)}},receive:function(e,o){var i=0;if(o.item.hasClass("h24_force_reload")==true||o.item.hasClass("sortable")==false){var i=1}$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})})}function d(o,i,t){var l=$h24.blocks[i],n=null;if(i==e&&!!l&&o==l.action){return}if(typeof t=="undefined"){t=$("#block_container_"+i)}switch(o){case"focus":if(e!=i){d("deselect")}e=i;l.action="focused";t.parent().addClass("h24_bcp_is-focused");break;case"select":if(e!=i){d("deselect")}$(".h24_bcp_text-editor-enabled").removeClass("h24_bcp_text-editor-enabled");e=i;l.action="selected";t.parent().addClass("h24_bcp_is-active");if($h24.utils.touchMode&&l.isContentEditableActive){l.initCKEDitor()}if($("html").hasClass("angularjs-in-edit-mode")){if(l.sidepanel!==false){x(i)}else{x(-1)}if(!!$h24.GUI.instances.blockDrawer)$h24.GUI.instances.blockDrawer.hide()}break;case"deselect":if(!!l){t.parent().removeClass("h24_bcp_is-active h24_bcp_text-editor-enabled h24_bcp_is-focused");l.action="";if($h24.utils.touchMode&&!!a.ckeditor){l.destroyCKEditor()}if(e==i){e=-1}}else if(e>0){var a=$h24.blocks[e];if($h24.utils.touchMode&&!!a&&!!a.ckeditor){a.destroyCKEditor()}n=$("#liblock_"+e+" .h24_bcp_resize_handle");if(!!n.data("popover")){n.popover("hide")}$(".h24_bcp_is-active, .h24_bcp_text-editor-enabled, .h24_bcp_is-focused").removeClass("h24_bcp_is-active h24_bcp_text-editor-enabled h24_bcp_is-focused");if(!!a){a.action=""}e=-1}break;case"edit":if(e!=i){d("deselect");x(-1)}e=i;l.action="edit";break;case"mouseover":if(l.isContentEditableActive&&!$h24.utils.touchMode&&!l.ckeditor){l.initCKEDitor()}if(!l.action){l.action="mouseover"}break;case"mouseout":if(!!l&&l.action=="mouseover"){n=$("#liblock_"+e+" .h24_bcp_resize_handle");if(!!n.data("popover")){n.popover("hide")}l.action=""}break}}function h(){if(!$h24.utils.touchMode){$(".h24_bcp_controls").tooltip({selector:".h24_collection_is-narrow [data-toggletip=tooltip]"})}if($h24.utils.touchMode){$(".sitepreview").on("click.h24-block",function(e){if(!$(e.target).closest("li.sortable").length){d("deselect")}})}$("html").on("click.h24-block",function(e){var o=$(e.target),i=o.closest("li.sortable");var t=o.closest(".block_container"),l=t.data("blockid"),n=o.closest(".h24_bcp_actions_container [data-toggle=dropdown]"),a=o.closest("[data-action]");if($h24.utils.touchMode&&!!t.length){if($h24.blocks[l].action!="edit"){d("select",l,t)}}else if(!!n.length){t=i.find(".block_container");l=t.data("blockid");if(n.parent().hasClass("open")){d("deselect",l,t)}else{d("focus",l,t);if(!!i.find(".h24_bcp_resize_handle").data("popover")){i.find(".h24_bcp_resize_handle").popover("hide")}}}else if(!!a.length){action=a.data("action"),parameters=a.data("parameters");t=i.find(".block_container");l=t.data("blockid");if(typeof l!="undefined"){if(action!=="blockSettings"||"sidepanel"in $h24.blocks[l]&&!$h24.blocks[l].sidepanel){$h24.block.toggleBlock("deselect");$h24.block.settingsPanel(-1)}if(typeof $h24.blocks[l].BCPActions!="undefined"&&typeof $h24.blocks[l].BCPActions[action]!="undefined"){$h24.blocks[l].BCPActions[action].call($h24.blocks[l],parameters)}else if(action=="deleteBlock"){$h24.block.remove(l)}else if(action=="copyBlock"){$h24.block.copyBlockDialog(l)}else if(action=="moveBlock"){$h24.block.moveToPageDialog(l)}else if(action=="duplicateBlock"){$h24.block.copyBlock(l,$h24.pageci,$h24.pageci)}else if(action=="blockSettings"){if(typeof $h24.block[$h24.blocks[l].innerblocktype].settings!="undefined"){$h24.block[$h24.blocks[l].innerblocktype].settings(l)}else{$h24.block.settingsDialog(l)}}e.preventDefault()}}else if(!!$("#block_"+l+"_text_content.cke_editable").length){$h24.block.toggleBlock("edit",l,t);$h24.blocks[l].ckeditor.fire("focus")}else{d("deselect")}})}var f=function(){var e=$(".h24_collection > ul > li:hover");if(!e.length)return;var o=$(".sitepreview"),i=15,t=20,l=e.find(".h24_bcp_controls"),n=o.height(),a=o.scrollTop(),s=e.offset(),c=e.height(),r=l.height()+i,d=a+n-(s.top+c+r);if(c+r+s.top<n){l.css({bottom:"",top:""})}else{var h=c+s.top-n+i,f=c-r-t;if(h>f)h=f;l.css({bottom:h,top:"auto"})}};function p(e){var o=$h24.design_system==1?$("#h24_content_container"):$(".h24_design"),i,t=$h24.design_system==1?o.find("> .h24_collection > ul > li:not(.h24_empty_li)"):o.find("ul.sortable li.sortable");if(typeof e!="undefined"){i=$("#collection"+e+" ul.sortable li.sortable")}else{i=t}if(!$h24.utils.touchMode){t.on("hover",function(e){f();var o=$(this),i=$h24.blocks[o.find(".block_container").data("blockid")];if(i&&i.isContentEditableActive&&!$h24.utils.touchMode&&!i.ckeditor){i.initCKEDitor()}})}i.each(function(){var e=$(this),o=e.find("> .block_container"),i;if(!$h24.utils.touchMode){e.find("[data-toggletip=tooltip]:not(.btn)").tooltip()}e.on("change",".h24_bcp_dimensions > input",function(o){o.preventDefault();if(typeof e.data("block-height-margin")==="undefined"){e.data("block-height-margin",t.outerHeight()-t.height())}var i=$(this),t=e.find(".block_container"),l=i.val(),n=t.data("blockid"),a=t.find("> .h24_block_content").height()+e.data("block-height-margin"),s,c=i.data("change-timeout");clearTimeout(c);if(l>=a){s=l-e.data("block-height-margin");t.css("min-height",s)}else{i.val(a);s=0}if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}c=setTimeout(function(){$h24.post($h24.slashwebroot+"Block/Update-Height",{blockid:n,height:s,__skip_loading_overlay:true,__keep_loading_overlay:true})},1e3);i.data("change-timeout",c)});e.on("keyup",".h24_bcp_dimensions > input",function(e){var o=$(this);switch(e.keyCode){case 27:o.blur();o.closest(".dropdown-menu").siblings("[data-toggle=dropdown]").dropdown("toggle");break}});e.on("mouseenter",".h24_bcp_resize_handle",function(o){var i=$(this),t=e.height(),l=$(o.delegateTarget).find(".block_container"),n=l.data("blockid");if(typeof e.data("block-height-margin")==="undefined"){e.data("block-height-margin",l.outerHeight()-l.height());e.resizable("option","minHeight",l.find("> .h24_block_content").height()+e.data("block-height-margin"))}if(!i.data("popover")){i.popover({template:'<div class="popover h24_bcp_dimension_popover"><div class="arrow"></div><div class="popover-content"><label class="h24_bcp_dimensions">'+i.data("title")+': <input type="number" name="height" maxlength="4" class="h24_inp_soft h24_inp_small" value="'+t+'"> px</label></div></div>',trigger:"manual",placement:"top",container:i.parent(),animation:false})}}).on("mousedown",".h24_bcp_resize_handle",function(e){var o=$(this);o.popover("show")});e.on("mouseenter",".h24_bcp_resize_handle, .h24_bcp_dimension_popover",function(e){clearTimeout(i);i=null});e.on("mouseleave",".h24_bcp_resize_handle, .h24_bcp_dimension_popover",function(e){var o;if(e.target.classList.contains("h24_bcp_resize_handle")){o=$(this)}else{o=$(this).siblings(".h24_bcp_resize_handle")}if(typeof i==="number"){return}i=setTimeout(function(){if($h24.block.blockResizeInProgress||document.activeElement.parentNode.classList.contains("h24_bcp_dimensions")){return}i=null;o.popover("hide")},500)});e.resizable({handles:{s:".h24_bcp_resize_handle"},start:function(){var i;e=$(this);o=e.find("> .block_container");e.resizable("option","minHeight",o.find("> .h24_block_content").height()+e.data("block-height-margin"));$handle=e.find(".h24_bcp_resize_handle");$h24.block.blockResizeInProgress=true;$dimensionContainer=e.find(".h24_bcp_dimensions > input")},stop:function(){var i=e.height(),t=i<=o.find("> .h24_block_content").height()+e.data("block-height-margin"),l;if(t){l=0;o.css("min-height",0)}else{l=i-e.data("block-height-margin");o.css("min-height",l+"px")}e.css({height:"",width:""});$h24.post($h24.slashwebroot+"Block/Update-Height",{blockid:o.data("blockid"),height:l,__skip_loading_overlay:true,__keep_loading_overlay:true});if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}$h24.block.blockResizeInProgress=false},resize:function(i,t){var l=e.height();o.css("min-height",l-e.data("block-height-margin")+"px");$dimensionContainer.val(l)}})})}function _(e){$h24.initialize();if(!!e){$h24.imageViewer.init($("#collection"+e+" .h24-js-iv"))}else{$h24.imageViewer.init()}if($h24.design_system==0)reload_facelift();if($h24.editmode)$h24.block.initiate_hover_functions(e);if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}}var u=function(e,o){var i={hideLoadingSpinner:false,onComplete:function(e){}};var t,l=$("#block_container_"+e);var n={blockid:e};if(typeof o=="object"){var o=$.extend(true,i,o);if(o.hideLoadingSpinner){var a=true}}if(typeof a=="undefined"){l.loadingSpinner(true)}n.__skip_loading_overlay=true;n.__keep_loading_overlay=true;$h24.post($h24.slashwebroot+"Block/Render-Edit",n,function(i){b(e,i,o);l.loadingSpinner(false);if(typeof o!="undefined"){o.onComplete.call(this,i)}if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}})};var b=function(e,o,i){var t={runExecOnInit:true};var i=$.extend(true,t,i);var l,n=$("#block_container_"+e),a=$("#block_container_"+e+" .h24_block_content"),s,c=$("#liblock_"+e);o=o.replace(/<script/g,"<temporaryscript").replace(/<\/script/g,"</temporaryscript");l=$(o).find(".h24_block_content");var r=l.html().replace(/<temporaryscript/g,"<script").replace(/<\/temporaryscript/g,"</script");a.html(r);if(!!$h24.blocks[e]&&typeof $h24.blocks[e].destroy=="function"){$h24.blocks[e].destroy()}if(i.runExecOnInit){for(var d=0;d<$h24.execOnInit.length;d++){if(typeof $h24.execOnInit[d]!="undefined"&&$h24.execOnInit[d].scope.blockid==e){$h24.execOnInit[d].fn.call($h24.execOnInit[d].scope);a.addClass("initialized")}}}if(c.hasClass("h24_requires_media_viewer")){if($h24.design_system==1){$h24.imageViewer.init($("#collection"+c.closest(".h24_collection").attr("id").substring(10)+" .h24-js-iv"))}else{$h24.imageViewer.init()}}};var k=function(e,o){var i,t,l;var n=$("#liblock_"+e).offset().left;var a=$(window).width()/2;l=n>a?"left":"right";i={dialogSettings:{transparentOverlay:true,width:400,alignment:l,fixedWhenScrolling:true,draggable:true,title:$h24.phrase.GUIPhrase("Dialogs","Settings")}};if(typeof o=="number"){i.dialogSettings.width=o;t=i}else{t=$.extend(true,i,o)}$h24.block.settingsDialog(e,t)};var g=function(e){var o=$("#settings_block_"+e);o.find(".save_parameter").each(function(e){var o=$(this),i;if(!o.is("[revert]")){return}i=o.attr("revert");if(o.is("input")){if(o.attr("type")=="text"||o.attr("type")=="hidden"){o.val(i)}else if(o.attr("type")=="checkbox"||o.attr("type")=="radio"){if(i=="0"||i=="false"||i==""){this.checked=false}else if(i=="1"||i=="true"||i=="checked"){this.checked=true}}}else if(o.is("textarea")){o.val(i)}else if(o.is("select")){o.find("option[value="+i+"]").attr("selected","selected")}});o.removeClass("h24_modified_settings")};function v(e,o){var i={onReady:function(){},onClose:null,dialogSettings:{checkForHelp:false,title:$h24.phrase.GUIPhrase("General","Settings"),overlayZIndex:2999},onSave:function(e){$h24.block.saveSettings(e)},onRevert:function(e){$h24.block.revertSettings(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}});this.close()},postParameters:{},modelaction:"settings"};if(typeof o=="number"){i.dialogSettings.width=o;var t=i}else var t=$.extend(true,i,o);if(typeof t.onClose=="function")t.dialogSettings.closeCallback=t.onClose;if(typeof $h24.blocks[e]!="undefined"){var l=$h24.blocks[e].innerblocktype;if(typeof $h24.data!="undefined"&&typeof $h24.data.help[$h24.fullLanguage].blocks[l]!="undefined"){var n=$h24.data.help[$h24.fullLanguage].blocks[l];if(typeof n.video!="undefined"){t.dialogSettings.videoHelpFlap=true;if(typeof n.video.vimeoId!="undefined"){t.dialogSettings.videoHelpCallback=function(){$h24.utils.vimeoVideo(n.video.vimeoId,{videoWidth:n.video.width,videoHeight:n.video.height})}}else{t.dialogSettings.videoHelpCallback=function(){$h24.utils.loadVideo(n.video.src,{videoWidth:n.video.width,videoHeight:n.video.height})}}}if(typeof n.url!="undefined"){t.dialogSettings.helpFlap=true;t.dialogSettings.helpUrl=n.url}}}var a={blockid:e,modelaction:t.modelaction};var s=$.extend(true,a,t.postParameters);$h24.post($h24.slashwebroot+"Block/Edit-Communicator",s,function(o){var i=$h24.dialog.create("block_"+e+"_settings_dialog",o,t.dialogSettings);var l=$("#block_"+e+"_settings_save_and_close");if(l.length==1){l.click(function(){if($(this).hasClass("h24_disabled_button")){return false}t.onSave.call(i,e);if(typeof t.onClose=="function")t.onClose.call(i,e);else $h24.dialogs["block_"+e+"_settings_dialog"].close();return false})}var n=$("#block_"+e+"_settings_save");if(n.length==1){n.click(function(){if($(this).hasClass("h24_disabled_button")){return false}t.onSave.call(i,e);return false})}var a=$("#block_"+e+"_settings_close");if(a.length==1){a.click(function(){if($(this).hasClass("h24_disabled_button")){return false}if(typeof t.onClose=="function")t.onClose.call(i,e);else $h24.dialogs["block_"+e+"_settings_dialog"].close();return false})}var s=$("#block_"+e+"_settings_revert");if(s.length==1){s.click(function(){if($(this).hasClass("h24_disabled_button")){return false}t.onRevert.call(i,e);return false})}t.onReady.call(i)})}function m(e,o){var i={onClose:function(o,i){if($h24.design_system==1){var t=$("#liblock_"+e).closest(".h24_collection").attr("id").substring(10);reloadColumn(t)}else reloadColumns();this.close()},hideLoadingSpinner:false,keepLoadingSpinner:false,modelaction:"save_settings",extraParams:{}};var o=$.extend(true,i,o);var t=$h24.dialogs["block_"+e+"_settings_dialog"];var l=t.markup;var n=$h24.utils.getParameters(l,".save_parameter");var a=o.extraParams;a.blockid=e;a.modelaction=o.modelaction;a.save_parameters=n;if(o.keepLoadingSpinner)a.__keep_loading_overlay=true;if(o.hideLoadingSpinner)a.__skip_loading_overlay=true;$h24.post($h24.slashwebroot+"Block/Edit-Communicator",a,function(e){o.onClose.call(t,e,n)})}var y=function(e,o,i){var t=$("#block_img_"+e),l=$("#settings_block_"+e),n=$("#block_"+e),a=$("#block_container_"+e),s=$("#settings_block_"+e+"_size_controls"),c=s.find(".slider_controls"),r=c.find("input[name=size]"),d=s.find("input[name=size_setting]:checked").val(),h=$("#settings_block_"+e+"_alignment_controls"),f=h.find("input[name=alignment]:checked").val(),p=h.find(".slider_controls"),_=p.find(".h24_slider"),u=p.find("input[name=custom_alignment]"),b=n.find("> div"),k=r.val(),g=$("#settings_block_"+e+"_hidden"),v=l.find("input[name=originalPictureId]").val(),m,y,C,B;if(!$h24.eyecandy){o=false}if(g.val()<=0){m=v}else{m=g.val()}l.loadingSpinner(true);a.loadingSpinner(true);if(t.hasClass("h24_pib_rotated_90_deg")){C=90}else if(t.hasClass("h24_pib_rotated_180_deg")){C=180}else if(t.hasClass("h24_pib_rotated_270_deg")){C=270}else{C=0}if(d=="max"){k=0}if(k==0&&f==3){k=parseInt(r.data("collectionsize"),10)-u.val()}B=$h24.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+e+"&pictureid="+m+"&degrees="+C+"&width="+k+"&anticache="+Math.random();t.removeClass("h24_load_triggered");if(typeof i=="function"){t.data("loadTemporaryImageCallback",i)}if(o){t.animate({opacity:0},500,function(){t.attr("src",B);t.css("width","")});t.loadWithTimeout({timeout:5e3,onLoad:function(){var e=$(this),o=e.data();e.animate({opacity:1},500,function(){e.removeAttr("style")});if(typeof o.loadTemporaryImageCallback=="function"){o.loadTemporaryImageCallback.call(this)}l.loadingSpinner(false);a.loadingSpinner(false);e.removeAttr("style")}})}else{t.attr("src",B);t.loadWithTimeout({timeout:5e3,onLoad:function(){var e=$(this),o=e.data();if(typeof o.loadTemporaryImageCallback=="function"){o.loadTemporaryImageCallback.call(this)}e.removeAttr("style");l.loadingSpinner(false);a.loadingSpinner(false);e.addClass("h24_load_triggered")}})}};function C(){var e;if($h24.design_system==0){e=$("#ulcollection0,#ulcollection1,#ulcollection2,#ulcollection3,#ulcollection4").filter(":visible")}else if($h24.design_system==1){e=$("#h24_content_container .h24_collection > ul:visible")}e.each(function(){var e=$(this);var o=e.children().length;var i=e.children(":not(.empty_collection_msg_container)").length;if(o==0){e.append('<li class="h24_empty_li empty_collection_msg_container"><span class="empty_collection_msg"><span>'+$h24.phrase.GUIPhrase("Block-General","Drag and drop blocks here")+"</span><br/>"+$h24.phrase.GUIPhrase("Block-General",'Find blocks in "Create content"')+"</span></li>")}if($h24.design_system==1){var t=e.closest("div.h24_collection").find("div.single_block_msg");if(t.length>0){if(i==1){e.closest("div.h24_collection").find("div.single_block_msg").show()}else{e.closest("div.h24_collection").find("div.single_block_msg").hide()}}}})}var B=function(){var e={},o=[],i=false,t,l;if($h24.design_system==0){l=$("#ulcollection0,#ulcollection1,#ulcollection2,#ulcollection3,#ulcollection4")}else{l=$("#h24_content_container .h24_collection > ul")}l.each(function(){var l=$(this),n=l.attr("id").substring(12),a=l.find("> li");if(typeof e[n]=="undefined"){e[n]=[];o[n]=""}a.each(function(){var l=$(this),a=l.attr("id"),s,c,r;if(l.hasClass("h24_add_content_panel_block")){c=l.data("innerblocktype");r=l.data("template");i=true;t=n;e[n][e[n].length]={newBlock:true,innerblocktype:c,template:r};o[n]+=c+","}else if(typeof a!="undefined"&&a.substring(0,7)=="liblock"){s=a.substring(8);e[n][e[n].length]={newBlock:false,blockid:s};o[n]+=s+","}})});return{blockOrder:e,serializedBlockOrderCollections:o,newBlockFound:i,newBlockCollection:t}};var w={};function S(e){$h24.post($h24.publicdir+"../Block/Undo-Delete",{blockid:e},function(e){var o=false;if(typeof e.success!="undefined"){if(e.success&&typeof e.block!="undefined"){var i=e.block;$h24.addBlock(i.innerblocktype,i.blockid);reloadColumn(i.collection);$h24.utils.notification($h24.phrase.GUIPhrase("Block-General","The block is now restored")+"!","accept");o=true}}if(!o){$h24.utils.notification($h24.phrase.GUIPhrase("Block-General","Couldn't restore block"),"alert")}})}function x(e){var o=function(){if(e>0){window.location.hash="/block/"+e+"/settings";$h24.adminPanel.togglePanel(true)}else{window.location.hash="";$h24.adminPanel.togglePanel(false)}};if(!!$(".pp-Sidepanel-body").scope()&&"explicitSave"in $(".pp-Sidepanel-body").scope()){$(".pp-Sidepanel-body").scope().explicitSave({callback:o})}else{o()}}function P(e,o){if(typeof $(".pp-Sidepanel").scope()!="undefined"){var i=$(".pp-Sidepanel").scope();switch(e){case"explicitSave":if("explicitSave"in i&&i.blockid==o){i.explicitSave({reloadBlock:false})}break;case"reloadSettingsPanel":if(i.blockid==o){i.reload()}break}}}return{dragReport:o,initPrompt:t,moveToPageDialog:l,moveToPage:n,copyBlockDialog:a,copyBlock:s,remove:c,reloadSortables:r,initiate_hover_functions:p,initCollection:_,initCollections:_,settingsDialog:v,saveSettings:m,previewSettingsDialog:k,reloadBlock:u,revertSettings:g,loadTemporaryImage:y,addSnippetOnEmptyCollections:C,getBlockOrder:B,updateBlocks:i,lastSerializedBlockOrderCollections:w,undoDelete:S,blockResizeInProgress:false,initBlocks:h,toggleBlock:d,repositionBottomControlPanel:f,settingsPanel:x,angularActionIfBlockSettingsPanel:P}}();
h24core.prototype.dialog=function(e,a,i){var o={closeCallback:function(){this.close();this.scrollToDialogBelow()},overlayZIndex:3999,title:"",closeTitle:"Close",width:700,height:0,transparentOverlay:false,hidePreviousDialogs:false,noCloseFlap:false,fixedWhenScrolling:false,draggable:true,dragStart:function(){},dragStop:function(e,a){if(a.position.top<0)a.helper.css("top",0)},sidePadding:0,alignment:"center",videoHelpFlap:false,videoHelpCallback:function(){},videoHelpUrl:"#",helpFlap:false,helpCallback:false,helpUrl:"#",checkForHelp:true};$.extend(o,i);this.settings=o;this.hiddenDialogs=null;var l=this;if(o.hidePreviousDialogs)this.hiddenDialogs=$(".h24_dialog_overlay, .h24_transparent_overlay").hide();var t=o.transparentOverlay?"":"h24_dialog_overlay";var n=$("<div/>",{"class":t});if(o.transparentOverlay){var r=$("<div/>",{"class":"h24_fixed_transparent_overlay"})}var s=function(e){if(typeof $h24.phrase=="undefined"){return translatedString(e)}else{return $h24.phrase.GUIPhrase("Dialogs",e)}};var d=$("<div/>",{"class":"h24-FloatingPanel"}).html('<header class="h24-FloatingPanel-header" data-handle="move">'+'<h1 class="h24-FloatingPanel-title">'+o.title+"</h1>"+'<div class="h24-FloatingPanel-moveHandle"></div>'+'<div class="h24-FloatingPanel-headerBtnGroup">'+(o.noCloseFlap?"":'<button type="button" class="h24-FloatingPanel-headerBtn" data-action="dismiss">'+s(o.closeTitle)+' <span data-icon="&#xC37B;" aria-hidden="true" class="h24_icon_left_space h24_icon_letterpress"></span></button>')+"</div>"+"</header>"+'<div class="h24-FloatingPanel-container'+(!!$(a).find(".h24-FloatingPanel-body").length?"":" h24-FloatingPanel-body")+'">'+a+"</div>"+"</div>").width(o.width);d.find(".h24-FloatingPanel-container").css({"padding-left":o.sidePadding,"padding-right":o.sidePadding});if(o.alignment=="center"){d.css("left","50%");d.css("margin-left",-(o.width/2))}else if(o.alignment=="right"){d.css("right","20px")}else if(o.alignment=="left"){d.css("left","20px")}if(!$h24.editmode)d.css("top",$(window).scrollTop());if(o.height>0)d.find(".h24-FloatingPanel-container").height(o.height).css("overflow","auto");var h=$("[data-action=dismiss]",d).click(function(){o.closeCallback.call(l);return false});n.appendTo("body");d.appendTo(n);$("html").addClass("h24-FloatingPanel__VisibleOnPage");if(o.transparentOverlay){r.appendTo("body")}if(o.draggable){var g=d.find("[data-handle=move]");d.draggable({handle:g,start:o.dragStart,stop:o.dragStop})}else{d.find(".h24-FloatingPanel-moveHandle").hide()}var f=0;for(var c in $h24.dialogs)f++;var v=o.overlayZIndex+1+f*2;var p=v-1;n.css("z-index",p);d.css("z-index",v);d.css("margin-top","10px");if(o.transparentOverlay){r.css({"z-index":p,"background-color":"#000000"})}this.baseTop=d.css("top");if(o.fixedWhenScrolling){$(window).bind("scroll.h24_dialog",{dialog:l},function(e){var a=e.data.dialog.markup.find(".h24-FloatingPanel-body").height();var i=$(window).height();if(i<=a)e.data.dialog.settings.fixedWhenScrolling=false;else e.data.dialog.settings.fixedWhenScrolling=true;if(e.data.dialog.settings.fixedWhenScrolling){var o=$(this).scrollTop()}})}d.show();this.markup=n;this.contents=d;$("body").trigger("dialogCreated",[e]);this.close=function(a){if(this.settings.hidePreviousDialogs){if($h24.eyecandy&&(typeof a=="undefined"||typeof a!="undefined"&&a===false))this.hiddenDialogs.fadeIn();else this.hiddenDialogs.show()}if(this.settings.fixedWhenScrolling){$(window).unbind("scroll.h24_dialog");$(window).unbind("resize")}var i=this.markup;if($h24.eyecandy&&(typeof a=="undefined"||typeof a!="undefined"&&a===false)){this.markup.fadeOut(function(){i.remove();if(o.transparentOverlay){r.remove()}})}else{i.remove();if(o.transparentOverlay){r.remove()}}delete $h24.dialogs[e];$("html").removeClass("h24-FloatingPanel__VisibleOnPage");$("body").trigger("dialogClosed",[e])};this.changeWidth=function(e){if(this.settings.width==e)return;var a=this.markup.find("div:first");this.settings.width=e;a.width(e);if(this.settings.alignment=="center"){a.css("margin-left",-(e/2))}};this.getDialogBelow=function(){var a=parseInt(n.css("z-index"));var i=-1;var o;for(var l in $h24.dialogs){if(l==e)continue;var t=parseInt($h24.dialogs[l].markup.css("z-index"));if(t<a&&t>i){i=t;o=$h24.dialogs[l]}}if(typeof o!="undefined")return o;else return false};this.scrollToDialogBelow=function(){var e=this.getDialogBelow();if(e!==false){$(window).scrollTop(e.contents.offset().top)}}};h24core.prototype.dialog.create=function(e,a,i){var o=new $h24.dialog(e,a,i);if(typeof $h24.dialogs[e]!="undefined")$h24.dialogs[e].close(true);$h24.dialogs[e]=o;return o};h24core.prototype.dialog.boxOverlayStorage=[];h24core.prototype.dialog.createBoxOverlay=function(e){if($h24.dialog.boxOverlayStorage.length>0){for(var a=0;a<$h24.dialog.boxOverlayStorage.length;a++){if(typeof $h24.dialog.boxOverlayStorage[a]!="undefined"){$h24.dialog.boxOverlayStorage[a].remove();delete $h24.dialog.boxOverlayStorage[a]}}}var i=$("<div/>",{"class":"h24_transparent_overlay"}).css({"z-index":990});$h24.dialog.boxOverlayStorage[$h24.dialog.boxOverlayStorage.length]=i;i.appendTo("body");if(e.y>0){var o=$("<div/>",{"class":"h24_boxed_overlay"}).css({top:0,left:0,width:"100%","z-index":1e3,height:e.y});$h24.dialog.boxOverlayStorage[$h24.dialog.boxOverlayStorage.length]=o;o.appendTo("body")}};h24core.prototype.dialog.closeBoxOverlay=function(){for(var e=0;e<$h24.dialog.boxOverlayStorage.length;e++){if(typeof $h24.dialog.boxOverlayStorage[e]!="undefined"){$h24.dialog.boxOverlayStorage[e].remove();delete $h24.dialog.boxOverlayStorage[e]}}$("#admin_control_panel").show()};
h24core.prototype.coreDialog=function(e,o,i){if(typeof $h24.coreDialogs=="undefined"){$h24.coreDialogs={}}var t={baseZ:5e3,identifier:e,overlayZ:undefined,overlayOpacity:.85,overlayBackground:"#ffffff",useOverlay:true,overlayClickToClose:false,transparentOverlay:false,contentContainer:'<div class="h24-FloatingPanel">'+'<header class="h24-FloatingPanel-header" data-handle="move">'+'<h1 class="h24-FloatingPanel-title"></h1>'+'<div class="h24-FloatingPanel-moveHandle"></div>'+'<div class="h24-FloatingPanel-headerBtnGroup">'+'<button type="button" class="h24-FloatingPanel-headerBtn" data-js-role="help" data-toggle="dropdown"><span data-icon="&#xC351;" aria-hidden="true" class="h24_icon_right_space h24_icon_letterpress"></span> '+$h24.phrase.GUIPhrase("General","Help")+"</button>"+'<ul class="dropdown-menu" data-js-role="help">'+'<li data-help-type="guide"><a href="#" target="_blank"><span data-icon="&#xD106;" aria-hidden="true" class="h24_icon_right_space"></span>'+$h24.phrase.GUIPhrase("Dialogs","Show Guide in Help Center")+"</a></li>"+'<li data-help-type="video"><a href="#" target="_blank" data-action="showVideo"><span data-icon="&#xC3BA;" aria-hidden="true" class="h24_icon_right_space"></span>Watch Video</a></li>'+"</ul>"+'<span class="h24-FloatingPanel-btnSeparator" data-js-role="help"></span>'+'<button type="button" class="h24-FloatingPanel-headerBtn" data-action="dismiss">'+$h24.phrase.GUIPhrase("Dialogs","Close")+' <span data-icon="&#xC37B;" aria-hidden="true" class="h24_icon_left_space h24_icon_letterpress"></span></button>'+"</div>"+"</header>"+'<div class="h24-FloatingPanel-container"></div>'+"</div>",fullsizeContainer:'<div class="h24core_dialog_outer_container" style="position:absolute;height:100%;width:100%;">'+'<div style="position:relative;height:100%;" class="h24core_dialog_content_container">'+'<div class="h24core_dialog_content" style="position:relative;height:100%;box-sizing:border-box;-moz-box-sizing:border-box;"></div>'+"</div>"+"</div>",videoContainer:'<div style="position:absolute; background-color: #000000; border-radius: 10px 10px 10px 10px; border: 15px solid #111111; box-shadow: 0pt 0pt 17px 5px; margin-top: 20px;" class="h24core_dialog_outer_container">'+'<div style="position: relative; min-height: 100px;" class="h24core_dialog_content_container">'+'<div style="width: 32px; height: 36px; position: absolute; right: -30px; top: -30px;" class="h24_video_dialog_close_x" data-action="dismiss"></div>'+'<div class="h24core_dialog_content"></div>'+"</div>"+"</div>",title:"Dialog",showTitle:true,titleClass:"h24-FloatingPanel-title",contentSelector:".h24-FloatingPanel-container",bodyClass:"h24-FloatingPanel-body",showCloseButton:true,closeButtonSelector:'[data-action="dismiss"]',showHelpUrlButton:false,useFooter:false,footerSelector:".h24-FloatingPanel-footer",showHelpVideoButton:false,helpVideoButtonUrl:"#",helpVideoButtonCallback:function(){console.log("help video");return false},width:500,height:"auto",minHeight:100,contentContainerCss:{},eyecandy:typeof $h24.eyecandy!="undefined"?$h24.eyecandy:true,animationTime:500,draggable:true,draggableSelector:".h24-FloatingPanel-moveHandle",alignment:"center",onAfterClose:function(){},onClose:function(){},fixed:false,containerMode:"default",checkForHelp:true,removeBottomPadding:false,removeBottomPaddingPadding:false,removeSidePadding:false};$.extend(true,t,i);this.options=t;this.identifier=e;var n=this,a=this.options.baseZ,s,l,r,l,h,d,c;if(typeof this.options.overlayZ=="undefined"){for(var p in $h24.coreDialogs){if($h24.coreDialogs[p].options.overlayZ>a){a=$h24.coreDialogs[p].options.overlayZ}}this.options.overlayZ=a+10}this.options.containerZ=this.options.overlayZ+1;if(this.options.useOverlay){this.overlay=$h24.coreDialog.createOverlay(this.options)}switch(this.options.containerMode){case"fullsize":l=$(this.options.fullsizeContainer);this.options.contentSelector=".h24core_dialog_content";this.options.fixed=true;this.options.width="100%";this.options.height="100%";break;case"video":l=$(this.options.videoContainer);this.options.contentSelector=".h24core_dialog_content";break;default:l=$(this.options.contentContainer);l.css("top",20);break}if(this.options.fixed){l.css("position","fixed");l.css("top",0)}else if(!$(".sitepreview").length){l.css("top",$(window).scrollTop()+20)}l.css("z-index",this.options.containerZ);l.data("coreDialogIdentifier",e);if(this.options.removeBottomPadding){l.find(".h24-FloatingPanel-container").css("padding-bottom",0)}if(this.options.removeTopPadding){l.find(".h24-FloatingPanel-container").css("padding-top",0)}if(this.options.removeSidePadding){l.find(".h24-FloatingPanel-container").css("padding-left",0);l.find(".h24-FloatingPanel-container").css("padding-right",0)}if(!this.options.useFooter){l.find(this.options.contentSelector).css({"margin-bottom":0})}l.on("click","[data-action]",function(e){var o=$(this),i=o.data("action"),t=l.data("coreDialogIdentifier"),n;e.preventDefault();if(typeof $h24.coreDialogs[t]!="undefined"){n=$h24.coreDialogs[t]}else{return true}switch(i){case"dismiss":n.close();return true;break;case"showVideo":return n.options.helpVideoButtonCallback.call(n);break}});this.container=l;l.width(this.options.width);l.height(this.options.height);l.css({minHeight:this.options.minHeight});switch(this.options.alignment){case"center":l.css("left","50%");var f=this.options.width;if(typeof f=="string"&&f.substr(f.length-1)=="%"){f=f.substr(0,f.length-1);l.css("margin-left",-f/2+"%")}else{l.css("margin-left",-f/2)}break;case"left":l.css("left","20px");break;case"right":l.css("right","20px");break}if(this.options.showTitle)l.find("."+this.options.titleClass).text(this.options.title);if(!this.options.showCloseButton){l.find(this.options.closeButtonSelector).hide()}if(this.options.checkForHelp&&typeof $h24.data!="undefined"&&typeof $h24.data.help[$h24.fullLanguage].h24coreDialogs[e]!="undefined"){c=$h24.data.help[$h24.fullLanguage].h24coreDialogs[e];if(typeof c.url!="undefined"){this.options.helpUrlButtonUrl=c.url;this.options.showHelpUrlButton=true;l.find('[data-help-type="guide"] > a').prop("href",this.options.helpUrlButtonUrl)}if(typeof c.video!="undefined"){this.options.helpVideoButtonUrl=c.video.src;this.options.showHelpVieoButton=true;l.find('[data-help-type="video"] > a').prop("href",this.options.helpVideoButtonUrl)}}if(this.options.showHelpUrlButton||this.options.showHelpVideoButton){if(!this.options.showHelpUrlButton){l.find('[data-help-type="guide"]').remove()}else{l.find('[data-help-type="video"]').remove()}}else{l.find("[data-js-role]").remove()}l.css(this.options.contentContainerCss);this.contentContainer=l;r=l.find(this.options.contentSelector);r.html(o);if(!r.find("."+this.options.bodyClass).length){r.addClass(this.options.bodyClass)}this.content=r;if(this.options.eyecandy&&$h24.browser!="ie8"&&$h24.browser!="ie7"){l.css("opacity",0);this.container.appendTo("body");l.animate({opacity:1},this.options.animationTime)}else{this.container.appendTo("body")}if(this.options.draggable){this.container.draggable({handle:l.find('[data-handle="move"]'),stop:function(e,o){if(o.position.top<0)o.helper.css("top",0)}})}else{l.find(this.options.draggableSelector).hide()}this.close=function(){var e=this,o;o=this.options.onClose.call(e);if(typeof o=="boolean"&&o===false){return false}if(this.options.eyecandy&&$h24.browser!="ie8"&&$h24.browser!="ie7"){if(typeof this.overlay!="undefined"){this.overlay.animate({opacity:0},this.options.animationTime-10,function(){$(this).remove()})}this.container.animate({opacity:0},this.options.animationTime,function(){$(this).remove();e.options.onAfterClose.call(e)});delete $h24.coreDialogs[this.identifier];$h24.coreDialog.scrollToTopDialog()}else{if(typeof this.overlay!="undefined"){this.overlay.remove()}this.container.remove();delete $h24.coreDialogs[this.identifier];$h24.coreDialog.scrollToTopDialog();e.options.onAfterClose.call(e)}};this.closeWithoutCallbacks=function(){var e=this,o;if(typeof o=="boolean"&&o===false){return false}if(this.options.eyecandy&&$h24.browser!="ie8"&&$h24.browser!="ie7"){if(typeof this.overlay!="undefined"){this.overlay.animate({opacity:0},this.options.animationTime-10,function(){$(this).remove()})}this.container.animate({opacity:0},this.options.animationTime,function(){$(this).remove()});delete $h24.coreDialogs[this.identifier];$h24.coreDialog.scrollToTopDialog()}else{if(typeof this.overlay!="undefined"){this.overlay.remove()}this.container.remove();delete $h24.coreDialogs[this.identifier];$h24.coreDialog.scrollToTopDialog()}}};h24core.prototype.coreDialog.scrollToTopDialog=function(){var e=0,o;for(i in $h24.coreDialogs){if($h24.coreDialogs[i].options.overlayZ>e){e=$h24.coreDialogs[i].options.overlayZ;o=i}}if(typeof o!="undefined"){$(window).scrollTop($h24.coreDialogs[o].container.css("top"))}};h24core.prototype.coreDialog.pop=function(){var e=0,o;for(i in $h24.coreDialogs){if($h24.coreDialogs[i].options.overlayZ>e){e=$h24.coreDialogs[i].options.overlayZ;o=i}}if(typeof o!="undefined"){$h24.coreDialogs[o].close()}};h24core.prototype.coreDialog.create=function(e,o,i){var t=new $h24.coreDialog(e,o,i);$h24.coreDialogs[e]=t;return t};h24core.prototype.coreDialog.createOverlay=function(e){var o={baseZ:1e3,overlayZ:999,overlayOpacity:.5,overlayBackground:"#000000",useOverlay:true,overlayClickToClose:false,identifier:"",transparentOverlay:false,animationTime:500,overlayId:""};$.extend(o,e,true);var i;i=$("<div />",{style:"position:fixed;top:0;left:0;width:100%;height:100%;z-index:"+o.overlayZ+";"});i.css("background",o.overlayBackground);i.css("opacity",0);if(!o.transparentOverlay){if(o.eyecandy&&$h24.browser!="ie8"&&$h24.browser!="ie7"){i.css("opacity",0);i.animate({opacity:o.overlayOpacity},o.animationTime)}else{i.css("opacity",o.overlayOpacity)}}i.data("coreDialogIdentifier",o.identifier);if(o.overlayClickToClose){i.click(function(){$h24.coreDialog.pop()})}if(o.overlayId!=""){i.attr("id",o.overlayId)}i.appendTo("body");return i};
h24core.prototype.picnik=function(){function e(e,a,i,o){if(e=="block"){var l=$h24.slashwebroot+"Page/Inline-Load";var r={homepageid:$h24.homepageid,model:"StyleManager",parameter0:"load_picnik_url",pictureid:a,blockid:i,type:"block"}}else if(e=="gallery"){var l=$h24.slashwebroot+"Page/Inline-Load";var r={homepageid:$h24.homepageid,model:"StyleManager",parameter0:"load_picnik_url",pictureid:a,type:"gallery"}}else if(e=="collage"){var l=$h24.slashwebroot+"Page/Inline-Load";var r={homepageid:$h24.homepageid,model:"StyleManager",parameter0:"load_picnik_url",pictureid:a,type:"collage"}}else if(e=="store"){var l=$h24.slashwebroot+"H24-Store/Load-Picnik-Url/";var r={pictureid:a}}if(typeof o=="function")$h24.picnik.callbackOnReturn=o;else $h24.picnik.callbackOnReturn=null;show_loading_overlay();$.get(l,r,function(e){hide_loading_overlay();if(e=="")return;$("#h24_picnik_iframe").attr("src",e);$("#h24_picnik_container").overlay({top:20,expose:{color:"#000",loadSpeed:200,opacity:.4},closeOnClick:false,api:true}).load()})}function a(e,a){$("#h24_picnik_container").hide();try{$("#h24_picnik_container").overlay().close()}catch(i){}if(typeof $h24.picnik.callbackOnReturn=="function"){$h24.picnik.callbackOnReturn.call(this,e,a)}}return{open:e,close:a}}();
h24core.prototype.editors=function(){function e(e){var t={save:function(e){var t=$(this).data("h24_editor");$(t.source).html(e)},type:"block",force_fontface:undefined,force_fontface_type:undefined,force_fontface_loading_string:undefined,force_content:undefined,force_global:0,revert:false};var e=$.extend(t,e);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"tinymce",type:e.type},function(t){var o=$h24.dialog.create("h24_tinymce_dialog",t,{width:1e3,title:"Text",closeCallback:function(){i.tinymce().remove();this.close();this.scrollToDialogBelow()}});$h24.utils.showLoadingSpinner();var n=o.markup;var i=$("#h24_editor_content");e.editor=i;e.dialog=o;i.data("h24_editor",e);if(typeof e.force_content=="undefined")i.html($(e.source).html());else i.html(e.force_content);var a=parseInt($(e.source).width(),10)+20;if(a>1e3){a=1e3}i.width(a);if(typeof e.force_fontface!="undefined"&&typeof e.blockid!="undefined")$("#h24_editor_new_fontface").val(e.force_fontface);if(e.revert)$("#h24_editor_new_fontface").val("_revert");n.find("div.buttons a, div.h24_buttons_dialog a").click(function(){var t=$(this);if(t.hasClass("save_and_close")){i.tinymce().setProgressState(true);var n=$h24.editors.postParsing(i).html();var a=$("#h24_editor_new_fontface").val();var c=e.save.call(i[0],n,true,a);if(typeof c=="boolean"&&c===false)return false;i.tinymce().setProgressState(false);i.tinymce().remove();o.close()}else if(t.hasClass("save")){i.tinymce().setProgressState(true);var a=$("#h24_editor_new_fontface").val();var n=$h24.editors.postParsing(i).html();var c=e.save.call(i[0],n,false,a);if(typeof c=="boolean"&&c===false)return false;i.tinymce().setProgressState(false);$("#h24_editor_save_cancel_buttons span.h24_cancel_text").hide();$("#h24_editor_save_cancel_buttons span.h24_close_text").show()}else if(t.hasClass("cancel")){var a=$("#h24_editor_new_fontface").val();if(a!="")refreshBrowser();else{i.tinymce().remove();o.close()}}return false});$("#h24_editor_mceLink").click(function(e){e.preventDefault();i.tinymce().execCommand("mceh24link")});$("#h24_editor_unlink").click(function(e){e.preventDefault();i.tinymce().execCommand("mceh24unlink")});$("#h24_editor_table").click(function(e){e.preventDefault();i.tinymce().execCommand("mceInsertTable")});$("#h24_editor_remove_formatting").click(function(e){e.preventDefault();i.tinymce().execCommand("RemoveFormat")});$("#h24_editor_special_char").click(function(e){e.preventDefault();i.tinymce().execCommand("mceCharMap")});$("#h24_editor_paste_word").click(function(e){e.preventDefault();i.tinymce().execCommand("mcePasteWord")});$("#h24_editor_fontface").click(function(e){$("#h24_editor_fontface_menu").toggle()});if(e.type=="block"&&typeof e.blockid!="undefined"){$(".h24_editor_reset_fontface").click(function(){$("#h24_editor_fontface_menu").hide();if($h24.browser=="ie8"){var t=i.html();o.close(true);e.force_global=1;$h24.editors.text(e)}else{$("#h24_editor_new_fontface").val("_revert");var n=$h24.dialogs.h24_tinymce_dialog.markup.find("iframe").contents().find("head");n.find("link.dynamic_fontface").remove();$("<link/>",{rel:"stylesheet",type:"text/css",href:$h24.slashwebroot+"Page/Tinymce-CSS?bg="+encodeURIComponent(s)+"&fg="+encodeURIComponent(l)+"&type="+e.type+"&v=1"}).addClass("dynamic_fontface").appendTo(n);$("#h24_editor_fontface_menu .h24_editor_reset_fontface").addClass("h24_item_disabled")}return false});$(".h24_editor_change_default_fontface").click(function(){$("#h24_editor_fontface_menu").hide();var t=function(t,n,a,c){if($h24.browser=="ie8"){var r=i.html();o.close(true);this.close(true);e.force_fontface=t;if(typeof c!="undefined")e.force_fontface_loading_string=c;e.force_fontface_type=a;e.force_content=r;e.revert=false;$h24.editors.text(e)}else{$("#h24_editor_new_fontface").val(t);var d=$h24.dialogs.h24_tinymce_dialog.markup.find("iframe").contents().find("head");d.find("link.dynamic_fontface").remove();if(a=="uploaded")var f=$h24.design_manager.loadFonts(c,"uploaded");else var f=$h24.design_manager.loadFonts(t,a);$("<link/>",f).appendTo(d);$("<link/>",{rel:"stylesheet",type:"text/css",href:$h24.slashwebroot+"Page/Tinymce-CSS?bg="+encodeURIComponent(s)+"&fg="+encodeURIComponent(l)+"&type="+e.type+"&v=1&blockid="+e.blockid+"&force_fontface="+encodeURIComponent(t)}).addClass("dynamic_fontface").appendTo(d);$("#h24_editor_fontface_menu .h24_editor_reset_fontface").addClass("h24_item_disabled");this.close(true)}};$h24.design_manager.genericFontPicker({useFontLoaderOnOk:false,okCallback:function(e,o,n,i){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_fonts",data:[{slot_type:"global",id:3,fontface:e}]},t.call(this,e,o,n,i))}});return false});$("#h24_editor_fontface_menu .h24_editor_set_fontface").click(function(){var t=$("#h24_editor_new_fontface").val();var n=$("#block_"+e.blockid+"_fontface").val();var a=t!=""?t:n;$("#h24_editor_fontface_menu").hide();$("#h24_editor_fontface_menu .h24_editor_reset_fontface").removeClass("h24_item_disabled");$h24.design_manager.genericFontPicker({current:a,useFontLoaderOnOk:false,okCallback:function(t,n,a,c){if($h24.browser=="ie8"){var r=i.html();o.close(true);this.close(true);e.force_fontface=t;if(typeof c!="undefined")e.force_fontface_loading_string=c;e.force_fontface_type=a;e.force_content=r;e.revert=false;$h24.editors.text(e)}else{$("#h24_editor_new_fontface").val(t);var d=$h24.dialogs.h24_tinymce_dialog.markup.find("iframe").contents().find("head");d.find("link.dynamic_fontface").remove();if(a=="uploaded")var f=$h24.design_manager.loadFonts(c,"uploaded");else var f=$h24.design_manager.loadFonts(t,a);$("<link/>",f).appendTo(d);$("<link/>",{rel:"stylesheet",type:"text/css",href:$h24.slashwebroot+"Page/Tinymce-CSS?bg="+encodeURIComponent(s)+"&fg="+encodeURIComponent(l)+"&type="+e.type+"&v=1&blockid="+e.blockid+"&force_fontface="+encodeURIComponent(t)}).addClass("dynamic_fontface").appendTo(d);$("#h24_editor_fontface_menu .h24_editor_reset_fontface").removeClass("h24_item_disabled");this.close()}}});return false})}$("#h24_editor_buttons_tooltips_invalid_link,#h24_editor_buttons_tooltips_unmodifiable_link").mouseenter(function(){$(this).hide()});if($h24.devmode)var c=$h24.publicdir+"js/tinymce/tiny_mce_src.js";else var c=$h24.publicdir+"js/tinymce/tiny_mce_gzip.php?v=3";var r={script_url:c,mode:"none",theme:"advanced",language:$h24.language,plugins:"inlinepopups,table,h24link,paste",paste_text_sticky:true,setup:function(e){e.onInit.add(function(e){e.pasteAsPlainText=true})},relative_urls:false,convert_urls:false,document_base_url:$h24.slashwebroot,paste_preprocess:$h24.editors.tinyMcePreProcess,remove_script_host:false,strict_loading_mode:false,theme_advanced_buttons2:"row_props, cell_props,|,row_before,row_after,delete_row,|,col_before,col_after,delete_col,|,split_cells,merge_cells,charmap,removeformat,table",theme_advanced_buttons3:"",theme_advanced_font_sizes:"8 - ABC abc=8px,9 - ABC abc=9px,10 - ABC abc=10px,11 - ABC abc=11px,12 - ABC abc=12px,13 - ABC abc=13px,14 - ABC abc=14px,16 - ABC abc=16px,18 - ABC abc=18px,20 - ABC abc=20px,22 - ABC abc=22px,24 - ABC abc=24px,26 - ABC abc=26px,28 - ABC abc=28px,36 - ABC abc=36px,48 - ABC abc=48px,72 - ABC abc=72px",theme_advanced_toolbar_location:"external",height:350,theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",oninit:function(){$h24.utils.hideLoadingSpinner()},entity_encoding:"named",entities:"160,nbsp,38,amp,34,quot,60,lt,62,gt"};if($h24.design_system==0){r.theme_advanced_buttons1="fontselect,fontsizeselect,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,|,backcolor,forecolor,|,sub,sup,|,undo,redo,|,anchor";r.theme_advanced_fonts="Andale Mono=andale mono,times;"+"Arial=arial,helvetica,sans-serif;"+"Arial Black=arial black,avant garde;"+"Book Antiqua=book antiqua,palatino;"+"Comic Sans MS=comic sans ms,sans-serif;"+"Courier New=courier new,courier;"+"Georgia=georgia,palatino;"+"Helvetica=helvetica;"+"Impact=impact,chicago;"+"Lucida=Lucida Sans Unicode,Lucida Grande,sans-serif;"+"Symbol=symbol;"+"Tahoma=tahoma,arial,helvetica,sans-serif;"+"Terminal=terminal,monaco;"+"Times New Roman=times new roman,times;"+"Trebuchet MS=trebuchet ms,geneva;"+"Verdana=verdana,geneva;"+"Webdings=webdings;"+"Wingdings=wingdings,zapf dingbats"}else if($h24.design_system==1){r.theme_advanced_buttons1="fontsizeselect,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,|,backcolor,forecolor,|,sub,sup,|,undo,redo,|,anchor"}if(!$("#h24_editor_content").hasClass("h24_editor_restricted")){r.theme_advanced_buttons1+=",code"}var l,s;l="";if($h24.design_system==0||e.type=="footer"){if($(e.source).find("p").length>0)l=$(e.source).find("p").extractColor();else l=$(e.source).extractColor()}s=$(e.source).extractBackground();r.content_css=$h24.slashwebroot+"Page/Tinymce-CSS?bg="+encodeURIComponent(s)+"&fg="+encodeURIComponent(l)+"&type="+e.type+"&v=1&force_global="+e.force_global;if(typeof e.blockid!="undefined"){var d=[];var f=$("#block_"+e.blockid+"_fontface_css");if(f.length==1){r.content_css+="&blockid="+e.blockid;if(f.val()!=""){d[d.length]=f.val()}}if(typeof e.force_fontface!="undefined"&&typeof e.force_fontface_type!="undefined"){r.content_css+="&force_fontface="+e.force_fontface;if(typeof e.force_fontface_loading_string!="undefined"){var _=$h24.design_manager.loadFonts(e.force_fontface_loading_string,"uploaded");var h=_.href.split("?family=");if(h.length==2){d[d.length]=h[0]+"?family="+escape(h[1])}}else{if(e.force_fontface_type!="webfont"){var _=$h24.design_manager.loadFonts(e.force_fontface,e.force_fontface_type);d[d.length]=_.href}}}for(var m=0;m<d.length;m++){r.content_css+=", "+d[m]}}$("head link.fontface").each(function(e){var t=$(this).prop("href");var o=t.split("?family=");if(o.length==2)r.content_css+=", "+o[0]+"?family="+escape(o[1])});i.tinymce(r)})}function t(){if($h24.design_system==0){var e=$("#h24_footer_text_id")}else{var e=$("#h24_footer #h24_footer_content")}$h24.editors.text({source:e,save:function(t){var o=$(this).data("h24_editor");$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"save_footer_content",pageid:$h24.pageid,content:t},function(t){e.html(t.parsedContent);if(typeof o.editor!="undefined"&&typeof o.editor.tinymce()!="undefined"){o.editor.tinymce().setProgressState(false)}if(!t.successful&&$h24.devmode){console.log(t)}else if(t.wordWarning){alert(translatedString("tinymce_word_alert"))}if(t.successful){$h24.fauxSections.reposition()}})},type:"footer"})}function o(e,t){$h24.editors.sourceType="block";$h24.editors.editorType="html";$h24.editors.title="HTML";$h24.editors.blockid=e;$h24.editors.callbackOnCompletion=t;var o=$("#custom_html_block_"+e+"_title");var n=$("#custom_html_block_"+e+"_content");$h24.editors.customHtmlBlockTitle=o.val();$h24.editors.content=n.val();$h24.editors.backgroundColor=n.extractBackground();$h24.editors.color=n.extractColor();$h24.editors.width="800px";$h24.editors.dialog()}function n(){show_loading_overlay();$("#h24_editor").removeClass("h24_tinymce_style_editor").removeClass("h24_html_style_editor");$.get($h24.slashwebroot+"Page/Inline-Load",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"editor_dialog",type:$h24.editors.editorType},function(e){$("#h24_editor").html(e);createDialog("#h24_editor",975,0,$h24.editors.title,"supertop","modal",-1,null,false,true);if($h24.editors.editorType=="html")$h24.editors.applyHtmlEditor();$h24.editors.initButtons();if($h24.editors.editorType=="tinymce"){try{var t=$("#h24_editor_content").tinymce().getContent();$("#h24_editor_content").tinymce().setContent(t)}catch(o){}}})}function i(){$("#h24_editor").addClass("h24_html_style_editor");$("#h24_editor_title").val($h24.editors.customHtmlBlockTitle);$("#h24_editor_content").val($h24.editors.content);reload_HideLoadingMessage()}function a(){if($h24.editors.editorType=="tinymce"){$("#h24_editor_mceLink").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("mceh24link")});$("#h24_editor_unlink").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("mceh24unlink")});$("#h24_editor_table").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("mceInsertTable")});$("#h24_editor_remove_formatting").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("RemoveFormat")});$("#h24_editor_special_char").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("mceCharMap")});$("#h24_editor_paste_word").unbind().click(function(e){e.preventDefault();$("#h24_editor_content").tinymce().execCommand("mcePasteWord")})}$("#h24_dialog_box_div_close_button").unbind().click(function(e){e.preventDefault();var t=$("#h24_editor_title");var o=$("#h24_editor_content");if($h24.editors.sourceType=="block"){var n={blockid:$h24.editors.blockid}}else var n={};$h24.editors.callbackOnCompletion.call(this,t,o,n,"cancel")});$("#h24_editor_cancel").unbind().click(function(e){e.preventDefault();var t=$("#h24_editor_title");var o=$("#h24_editor_content");if($h24.editors.sourceType=="block"){var n={blockid:$h24.editors.blockid}}else var n={};$h24.editors.callbackOnCompletion.call(this,t,o,n,"cancel")});$("#h24_editor_save_only").unbind().click(function(e){e.preventDefault();var t=$("#h24_editor_title");var o=$("#h24_editor_content");if($h24.editors.sourceType=="block"){var n={blockid:$h24.editors.blockid}}else var n={};$h24.editors.callbackOnCompletion.call(this,t,o,n,"save")});$("#h24_editor_save").unbind().click(function(e){e.preventDefault();var t=$("#h24_editor_title");var o=$("#h24_editor_content");if($h24.editors.sourceType=="block"){var n={blockid:$h24.editors.blockid}}else var n={};$h24.editors.callbackOnCompletion.call(this,t,o,n,"save_and_close")})}function c(){$("#h24_editor").unbind().empty()}function r(e,t){var o=t.content;var n=$("<span />").html(o);n.find("script").remove();n.find("[id]").removeAttr("id");t.content=n.html()}function l(e){return e}return{blockHtml:o,footer:t,dialog:n,applyHtmlEditor:i,initButtons:a,unbind:c,tinyMcePreProcess:r,text:e,postParsing:l}}();
h24core.prototype.link=function(){function e(e,i,n,a,l,t){if(typeof l!="undefined")$h24.link.callbackOnCompletion=l;else delete $h24.link.callbackOnCompletion;var o=Math.random()*9999;var r={type:e,scope:i,target:n,homepageid:$h24.homepageid,model:"DialogManager",modelaction:"generic_linking",contain:1};if(typeof a=="object"&&a!==null)$.extend(r,a);$h24.post($h24.slashwebroot+"Page/Inline-Load",r,function(e){var i={closeCallback:function(){if(typeof $h24.link.callbackOnCompletion=="function"){$h24.link.callbackOnCompletion.call(this,"cancel",r)}else{$h24.dialogs.h24_generic_linking_dialog.close()}},width:735};$.extend(i,t);var n=$h24.dialog.create("h24_generic_linking_dialog",e,i);var a=$("#h24_generic_linking_pre_selected_tab").val();$("#generic_linking_dialog_tabs").tabs({activate:function(e,i){var n=i.newPanel.prop("id");$("#h24_generic_linking_active_tab").val(n)},active:a}).find("li:visible:last").addClass("h24_sideMenuLastItem");n.markup.find(".h24d_ld_page_query_container").each(function(){var e=$(this),i=e.find(".h24_ld_page_query"),n=e.find(".h24_ld_page_query_results"),a=e.data("scope");i.inputTimeout({onTimeout:function(e){if(jQuery.trim(e)==""){return}i.addClass("h24_small_loading_spinner");$h24.post($h24.slashwebroot+"Page/Edit-Communicator",{model:"DialogManager",modelaction:"pageQueryInLinkDialog",homepageid:$h24.homepageid,query:e,scope:a,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){n.html(e).show();n.show();n.find(".h24_ld_page_query_row").click(function(){var e=$(this),i;if(a=="internal"){i=$("#h24s_mypages_link option[value="+e.data("ci")+"]")}else if(a=="posts"){i=$("#h24s_posts_link option[value="+e.data("ci")+"]")}i.attr("selected","selected");n.hide()});i.removeClass("h24_small_loading_spinner")})},onKeyUp:function(e){if(jQuery.trim(e)==""){$("#h24_ld_internal_query_results").hide()}},delay:200})})})}function i(){var e=$("#h24_generic_linking_active_tab").val();var i=$("#h24_generic_linking_type").val();var n=$("#h24_generic_linking_scope").val();var a=$("#h24_generic_linking_target").val();var l=$("#"+e+"_link").val();var t=$("#"+e+"_link_target");var o=$("#"+e+"_link_metadata");if(t.length==1){if(typeof t[0].checked!="undefined")if(t[0].checked==true)var r="_blank";else var r="";else var r=""}else var r="";if(o.length==1)var s=o.val();else var s="";var _="";switch(e){case"h24s_mypages":var _="internal";break;case"h24s_website":var _="external";break;case"h24s_myfiles":var _="file";break;case"h24s_posts":var _="post";break;case"h24s_mail":var _="mailto";break;case"h24s_video":var _="video";var s="width:"+$("#h24s_video input[name=width]").val()+";height:"+$("#h24s_video input[name=height]").val();var c="";break;case"h24s_store":var _="store";break}if(_=="")return;show_loading_overlay();var d={homepageid:$h24.homepageid,type:i,scope:n,target:a,link:l,link_target:r,link_type:_,link_metadata:s};$.post($h24.slashwebroot+"Page/Inline-Save/model/DialogManager/modelaction/save_generic_link",d,function(e){if(e=="statuscode/0"){showReloginDialog();return}if(typeof $h24.link.callbackOnCompletion!="undefined"){reload_HideLoadingMessage();$h24.link.callbackOnCompletion.call(this,"save",d)}else{reloadColumns();$h24.dialogs.h24_generic_linking_dialog.close()}})}function n(){var e=$("#h24_generic_linking_active_tab").val();var i=$("#h24_generic_linking_type").val();var n=$("#h24_generic_linking_scope").val();var a=$("#h24_generic_linking_target").val();show_loading_overlay();var l={homepageid:$h24.homepageid,type:i,scope:n,target:a};$.post($h24.slashwebroot+"Page/Inline-Save/model/DialogManager/modelaction/delete_generic_link",l,function(e){if(e=="statuscode/0"){showReloginDialog();return}if(typeof $h24.link.callbackOnCompletion!="undefined"){reload_HideLoadingMessage();$h24.link.callbackOnCompletion.call(this,"remove",l)}else{reloadColumns();$h24.dialogs.h24_generic_linking_dialog.close()}})}function a(){var e=$("#h24s_video_link option:selected").val();if(isNaN(e)||e==0)return;$("#h24s_video input[name=width]").attr("disabled","disabled");$("#h24s_video input[name=height]").attr("disabled","disabled");$.get($h24.slashwebroot+"Page/Inline-Load/model/DialogManager/modelaction/video_dimensions",{homepageid:$h24.homepageid,user_file_id:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}var i=e.split("/");$("#h24s_video input[name=width]").removeAttr("disabled");$("#h24s_video input[name=height]").removeAttr("disabled");if(i[1]=="1"){var n=i[3];var a=i[5];$("#h24s_video input[name=width]").val(n);$("#h24s_video input[name=height]").val(a)}else{alert($h24.phrase.GUIPhrase("Dialog-Linking","Sorry, we could not determine the dimensions automatically."))}})}function l(){if(typeof $h24.link.callbackOnCompletion!="undefined"){$h24.link.callbackOnCompletion.call(this,"cancel",[])}else{$h24.dialogs.h24_generic_linking_dialog.close()}}function t(e){var i=$(e);var n=i.prop("href");if(typeof n=="undefined")n="";var a=i.prop("target");if(typeof a=="undefined")a="";var l=i.prop("rel");if(typeof l=="undefined")l="";var t=i.prop("rev");if(typeof t=="undefined")t="";var o=i.attr("class");s="";if(typeof o!="undefined"){var r=o.split("{");if(r.length==2){var s=r[1].substring(0,r[1].length-1)}}var _=new Object;if(n!=""&&t==""){_.convert_href=n}_.link_target=a;_.link_metadata=s;_.link_type=t;_.link=l;return _}function o(e,i){if(!i){var i=$("<a />")}i.prop("target",e.link_target);i.prop("rel",e.link);i.prop("rev",e.link_type);i.attr("class","h24link {"+e.link_metadata+"}");switch(e.link_type){case"post":case"internal":i.prop("href","?ci="+e.link);break;case"external":var n=e.link.toLowerCase();if(n.substring(0,11)=="javascript:")i.prop("href",e.link);else if(n.substring(0,4)=="tel:")i.prop("href",e.link);else if(n.substr(0,1)=="#")i.prop("href",e.link);else if((n.length<7||n.length>=7&&n.substring(0,7)!="http://")&&n.length>0&&n.substring(0,1)!="/"&&n.substring(0,1)!="?"){if(n.length<8||n.length>=8&&n.substring(0,8)!="https://")i.prop("href","http://"+e.link);else i.prop("href",e.link)}else i.prop("href",e.link);break;case"file":var n=$h24.link.fileUrl(e.link);i.prop("href","");if(typeof n!="undefined")i.prop("href",n);break;case"video":var a=e.link_metadata.split(";");i.prop("href","");if(a.length==2){var l=a[0].split(":");if(l.length==2)var t=l[1];var o=a[1].split(":");if(o.length==2)var r=o[1];var n=$h24.link.realFileUrl(e.link);if(typeof n!="undefined"&&typeof t!="undefined"&&typeof r!="undefined")i.prop("href","javascript:$h24.utils.loadVideo('"+n+"',{videoWidth:"+t+",videoHeight:"+r+"});")}break;case"mailto":i.prop("href","mailto:"+e.link);break;case"store":var n="#";if(e.link==""||e.link=="store"){n="?store=product_list"}else if(e.link_metadata==""){n="?store=product_list&category="+e.link}else if(e.link_metadata!=""){var s=e.link_metadata.split(":");if(s.length==2){var _=s[1];n="?store=product&category="+e.link+"&product="+_}}i.prop("href",n);break}return i}function r(e){return $("#h24s_fileinfo input[name=file_"+e+"_real_url]").val()}function s(e){return $("#h24s_fileinfo input[name=file_"+e+"_url]").val()}function _(e){var i=20;var n=e;var a=null;for(var l=0;l<i;l++){var t=n.parent();if(typeof t[0]=="undefined")break;if(t.is("body"))break;if(t.is("a")){a=t;break}n=t}return a}function c(e,i,n,a){if(typeof a=="undefined")var a=false;if($("#block_"+i+"_behavior_5").length>0)$("#block_"+i+"_behavior_5")[0].checked=true;var l=$("#settings_block_"+i+" input[name=link]").val();var t=$("#settings_block_"+i+" input[name=link_type]").val();var o=$("#settings_block_"+i+" input[name=link_target]").val();var r=$("#settings_block_"+i+" input[name=link_metadata]").val();if(l!=""){var s={link:l,link_type:t,link_target:o,link_metadata:r}}else{var s={}}$.extend(s,n);var _=function(i,n){$h24.block[e].linkingCallback(i,n)};if(a)$h24.link.h24coreDialog("block",i,"",s,_);else $h24.link.dialog("block",i,"",s,_)}function d(e,i){if(i==5){$("#block_"+e+"_generic_link").show()}else{$("#block_"+e+"_generic_link").hide()}}function h(e,i,n,a,l){if(typeof l=="undefined")var l=false;var t=n.scope;if(typeof a=="undefined")a=0;if(i=="save"){$("#block_"+t+"_generic_link button.modify").show();$("#block_"+t+"_generic_link button.create").hide();$("#settings_block_"+t+" input[name=link]").val(n.link);$("#settings_block_"+t+" input[name=link_type]").val(n.link_type);$("#settings_block_"+t+" input[name=link_target]").val(n.link_target);$("#settings_block_"+t+" input[name=link_metadata]").val(n.link_metadata);$("#block_"+t+"_link_description").hide()}else if(i=="remove"){$("#block_"+t+"_generic_link button.modify").show();$("#block_"+t+"_generic_link button.create").hide();if($("#settings_block_"+t+" input[name=behavior]").length>0){$("#settings_block_"+t+" input[name=behavior][value="+a+"]")[0].checked=true;$h24.block[e].pickBehavior(t,a)}$("#block_"+t+"_link_description").hide()}else if(i=="cancel"){}$h24.dialogs.h24_generic_linking_dialog.close()}function p(e,i,n,a){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"get_link_description",link:e,link_type:i,link_metadata:n},function(e){if(typeof a.val!="undefined")$(a.val).val(e);if(typeof a.text!="undefined")$(a.text).text(e);if(typeof a.html!="undefined")$(a.html).html(e)})}function g(){var e=$("select#h24s_store_link").val();if(e>0||e=="store"){var i={model:"DialogManager",modelaction:"storeProductList",homepageid:$h24.homepageid,link:e};$h24.post($h24.slashwebroot+"Page/Inline-load/",i,function(e){if(e!=""){$("select#h24s_store_link_metadata").replaceWith(e)}})}}return{h24coreDialog:e,save:i,remove:n,cancel:l,getVideoDimensions:a,anchorToObject:t,objectToAnchor:o,fileUrl:s,realFileUrl:r,findAncestorAnchor:_,blockLinkDialog:c,blockPickBehavior:d,blockLinkingCallback:h,getLinkDescription:p,getStoreProductList:g}}();
h24core.prototype.tooltips=function(){function e(){$h24.tooltips.initialized=true;if($("#ap_dePublishLi").length>0){$("#ap_dePublishLi").uitooltip({tip:"#toolTipDePublishInfo",relative:true,position:"center left",offset:[-10,-20],delay:300})}var e=$("#h24_footer_recommendation_tooltip_container");var o=$("#h24_footer_recommendation_link");if(e.length==1&&o.length==1){o.hover(function(){var i=o.width();var t=$("#h24_footer_recommendation_link").offset().top;var l=$("#h24_footer_recommendation_link").offset().left;e.css("top",t-e.height()+"px");e.css("left",l-200+i/2+"px");e.show()});e.mouseleave(function(){e.hide()})}var i=$("#h24_edit_help_tooltip");i.find("a").click(function(){var e=i;var o=$(this);if(o.hasClass("h24_hide")){e.hide();return false}else if(o.hasClass("h24_hide_forever")){e.hide();$h24.tooltips.blockTooltip("edit_help");return false}});i.show();var t=$("#h24_edit_store_start_tooltip");t.find("a").click(function(){var e=t;var o=$(this);if(o.hasClass("h24_hide")){e.hide();return false}else if(o.hasClass("h24_hide_forever")){e.hide();$h24.tooltips.blockTooltip("edit_store_start");return false}});t.show()}function o(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"TooltipManager",modelaction:"block_tooltip",identifier:e,__skip_loading_overlay:true},function(e){if($h24.devmode&&!e.successful)console.log(e)})}return{init:e,initialized:false,blockTooltip:o}}();
h24core.prototype.file_manager=function(){function dialog(e,a){var i={tab:0,blockid:0};$.extend(i,e);var t=Math.random()*9999;$("#file_manager_dialog_tab_1").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$.get($h24.slashwebroot+"Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/FileManager/modelaction/tab1/anticache/"+t,{blockid:i.blockid},function(e){if(e=="statuscode/0")showReloginDialog();$("#file_manager_dialog_tab_1").html(e);$h24.file_manager.initUploader()});showDialog("#file_manager_dialog",i.tab);$("#h24_dialog_box_div_close_button").unbind().click(function(e){e.preventDefault();$h24.file_manager.close()});if(typeof a!="undefined")$h24.file_manager.callbackOnClose=a;else $h24.file_manager.callbackOnClose=null}function close(){$h24.uploader.destroy("file_manager_upload_uploader");if(typeof $h24.file_manager.callbackOnClose==="function"){var e=$("#file_manager_upload_hidden").val();$h24.file_manager.callbackOnClose.call(this,e)}else{closeDialogBox();reloadColumns()}}function deleteFile(e){if(confirm($h24.phrase.GUIPhrase("File-Manager","Are you sure you want to delete this file?"))!=true)return;var a=Math.random()*9999;$.post($h24.slashwebroot+"Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/FileManager/modelaction/delete/anticache/"+a,{user_file_id:e},function(a){if(a=="statuscode/0")showReloginDialog();var i=a.split("/");var t=i[1];if(t==1)$("#file_manager_dialog .user_file_"+e).remove()})}function initUploader(){var e=$("#file_manager_upload_blockid").val();$h24.uploader.create("file","file_manager_upload_uploader",{file_queue_limit:50,file_types:"*.*",file_types_description:"All files",file_size_limit:"300MB",restart_iframe_uploaders:true,post_params:{blockid:e},thumbs:true,thumbs_placeholder:"file_manager_upload_preview ul.h24_file_list",before_upload:function(e,a){if(!a)$("#file_manager_upload_save_button").aDisable()},uploads_complete:function(e){$("#file_manager_upload_save_button").aEnable()}})}function generateHTMLFileList($target,file_types,callback){var rand=Math.random()*9999;var $no_file_option=null;$.get($h24.slashwebroot+"Page/Inline-Load",{rand:rand,homepageid:$h24.homepageid,model:"FileManager",modelaction:"file_list",file_types:file_types},function(data){if(typeof data!="object")eval("var data = "+data);if($target.is("select")){$target.children().each(function(e){if($(this).val()==0)var a=$(this).clone()});$target.empty();if($no_file_option!=null)$target.append($no_file_option)}for(var i=0;i<data.length;i++){var user_file_id=data[i].user_file_id;var filename=data[i].filename;var newest=data[i].newest;if($target.is("select")){if(newest)$target.append('<option value="'+user_file_id+'" selected="selected">'+filename+"</option>");else $target.append('<option value="'+user_file_id+'">'+filename+"</option>")}}if(typeof callback=="function")callback.call($target)}),"json"}function openDialog(e,a,i){if(typeof e=="undefined")var e=0;if(typeof a=="undefined"){var a=false}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"FileManager",modelaction:"getDialog",blockid:e},function(t){if(typeof t["markup"]!="undefined"){var r=false;if($h24.browser=="ie8"||$h24.browser=="ie9"){if(parseInt($("#admin_panel").css("margin-top"),10)==0){r=true}}$h24.dialog.create("h24_file_manager_dialog",t["markup"],{title:$h24.phrase.GUIPhrase("File-Manager","My Files"),width:540,closeCallback:function(){closeDialog()},manualCloseCallback:i,blockid:e,openBlockSettingsOnClose:a,toggleAdminPanel:r});initFileManager(t["jsTree"])}})}function closeDialog(){if(typeof $h24.dialogs.h24_file_manager_dialog=="object"){var e=$h24.dialogs.h24_file_manager_dialog;var a=e.settings.blockid;var i=e.settings.openBlockSettingsOnClose;var t=e.settings.toggleAdminPanel;var r=e.settings.manualCloseCallback;$h24.coreUploader.destroy("h24_file_manager_upload_uploader");e.close();if(typeof r=="function"){r.call(this)}if(t){}if(a>0){$h24.block.reloadBlock(a);if(i){$h24.block.UserFileBlock.settings(a)}}}}function initFileManager(e){if(typeof e!="object")return;var a=$("#h24_file_manager_dialog");var i=a.find("#h24_file_manager_jstree");i.hide();a.loadingSpinner(true);a.loadingSpinner(true);i.jstree({core:{strings:{new_node:$h24.phrase.GUIPhrase("File-Manager","New Folder")}},themes:{theme:"default-h24"},json_data:{data:e,progressive_render:true},contextmenu:{items:jsTreeContextmenu},types:{max_depth:9,min_depth:1,types:{root:{valid_children:["file","folder"],start_drag:false,move_node:false,rename:false,remove:false,icon:{image:$h24.publicdir+"css/common/images/fugue3/drive.png"}},folder:{valid_children:["file","folder"],icon:{image:$h24.publicdir+"css/common/images/fugue3/folder-horizontal-open.png"}},file:{valid_children:"none",icon:{image:$h24.publicdir+"css/common/images/fugue3/document.png"}}}},ui:{select_limit:1},crrm:{move:{check_move:function(e){if(e.np[0]==e.op[0]||e.cr==-1){return false}else{return true}}}},sort:function(e,a){return this.get_text(e).toLowerCase()>this.get_text(a).toLowerCase()?1:-1},plugins:["themes","json_data","ui","dnd","crrm","contextmenu","types","sort"]}).bind("move_node.jstree rename.jstree create_node.jstree remove.jstree open.jstree open_node open_node.jstree",function(e,t){if(typeof t=="undefined"){$(this).unbind();return}var r=e.type;if(r=="open_node"){h=$(t.rslt.obj);if(h.attr("rendered")==0){h.find("li span").remove();var o=a.find("#h24_file_manager_jstree_cog div");h.find("li a").after($("<span>").html(o.clone()));h.find("li[rel=file]").each(function(){var e=$(this);var a=e.attr("ext");e.find("span").prepend(a)});h.attr("rendered",1)}}else if(r=="move_node"){var l=$(this).jstree("get_json",$(t.rslt.o))[0];var n=$(this).jstree("get_json",$(t.rslt.np))[0];var s=n.metadata.id;var d=$(this).jstree("get_json",$(t.rslt.op))[0];var f=d.metadata.id;var c=l.metadata;var _=c.id;var r=c.type;if(r=="file"){modelaction="moveFile"}else if(r=="folder"){modelaction="moveFolder"}else{return}if(s!=f){startJsTreeLoader();$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"FileManager",modelaction:modelaction,id:_,folderId:s},function(e){if(e["success"]){stopJsTreeLoader()}})}}else if(r=="rename"){var m=t.rslt.old_name;var g=t.rslt.new_name;var h=$(t.rslt.obj);var l=$(this).jstree("get_json",h)[0];var c=l.metadata;var _=c.id;var r=c.type;if(r=="file"){modelaction="renameFile"}else if(r=="folder"){modelaction="renameFolder"}else{return}if(m!=g&&g!=""){startJsTreeLoader();$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"FileManager",modelaction:modelaction,name:g,id:_},function(e){if(e["success"]){i.jstree("rename_node",h,e["name"]);stopJsTreeLoader()}else{i.jstree("rename_node",h,m);stopJsTreeLoader()}})}}else if(r=="create_node"){var h=$(t.rslt.obj);var o=a.find("#h24_file_manager_jstree_cog div");h.find("a").after($("<span>").html(o.clone()));if(h.attr("rel")=="file"){var l=$(this).jstree("get_json",h)[0];var c=l.metadata;h.find("span").prepend(c.extension)}}else if(r=="remove"){var l=$(this).jstree("get_json",$(t.rslt.obj))[0];var c=l.metadata;var _=c.id;var r=c.type;if(r=="file"){modelaction="removeFile"}else if(r=="folder"){modelaction="removeFolder"}else{return}startJsTreeLoader();$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"FileManager",modelaction:modelaction,id:_},function(e){if(e["success"]){stopJsTreeLoader()}})}}).bind("loaded.jstree",function(){var e=a.find("#h24_file_manager_jstree_cog div");i.find("li a").after($("<span>").html(e.clone()));i.find("li[rel=file]").each(function(){var e=$(this);var a=e.attr("ext");e.find("span").prepend(a)});i.find(".h24_file_manager_jstree_cog").live("click",function(){var e=$(this);var a=e.closest("li");i.jstree("select_node",a,"select_limit");i.jstree("show_contextmenu")});i.find("ul:first > li:first > ins").remove();a.loadingSpinner(false);i.show()});a.find("a.h24_javascript_link").click(function(e){e.preventDefault();var a=$(this);var i=a.attr("name");switch(i){case"createFolder":createFolder();break;case"closeFileManager":closeDialog();break}});initFileUploader()}function startJsTreeLoader(){$("#h24_file_manager_jstree_container").loadingSpinner(true)}function stopJsTreeLoader(){$("#h24_file_manager_jstree_container").loadingSpinner(false)}function jsTreeContextmenu(e){var a=$(e).attr("rel");var i=$("#h24_file_manager_jstree");var t={ccp:false};if(a=="folder"||a=="root"){t.create={label:$h24.phrase.GUIPhrase("File-Manager","Create Folder"),action:function(e){i.jstree("deselect_all");this.select_node(e);createFolder()}}}if(a=="folder"||a=="file"){t.rename={label:$h24.phrase.GUIPhrase("File-Manager","Rename"),action:function(e){this.rename(e)}};t.remove={label:$h24.phrase.GUIPhrase("File-Manager","Delete"),action:function(e){var a=e.attr("rel");if(a=="file"){var i=confirm($h24.phrase.GUIPhrase("File-Manager","Do you want to delete this file?"))}else{var i=confirm($h24.phrase.GUIPhrase("File-Manager","Do you want to delete this folder?")+"\n\n"+$h24.phrase.GUIPhrase("File-Manager","All files in this folder and possible subfolders will also be deleted."))}if(!i)return false;if(this.is_selected(e)){this.remove()}else{this.remove(e)}}}}if(a=="file"){var r=i.jstree("get_json",e)[0];var o=r.metadata.extension;var l=r.metadata.download;t.download={label:$h24.phrase.GUIPhrase("File-Manager","Download"),separator_before:true,action:function(e){if(o!=".swf"){window.location.href=l}}};if(o==".swf"){t.download._disabled=true}t.size={label:r.metadata.size,separator_before:true,_disabled:true};if(r.metadata.date!=""){t.date={label:r.metadata.date,_disabled:true}}}return t}function createFolder(){var e=$("#h24_file_manager_jstree");var a=selectAndGetParentFolder();type=a.attr("rel");if(type=="root"||type=="folder"){var i=e.jstree("get_json",a)[0];var t=i.metadata.id;if(t>0||type=="root"){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("File-Manager","Enter name of folder"),requireInput:true,okCallback:function(a){if(a!=""){startJsTreeLoader();$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"FileManager",modelaction:"createFolder",parentId:t,name:a,type:type},function(a){if(a["success"]){e.jstree("create",null,"inside",a["node"],null,true);stopJsTreeLoader()}})}}})}}}function selectAndGetParentFolder(){var e=$("#h24_file_manager_jstree");var a=e.jstree("get_selected");if(a.length==0){e.jstree("select_node","[name=jstree_root]","select_limit");a=e.jstree("get_selected")}var i=a.attr("rel");if(i=="file"){var t=jQuery.jstree._reference(e)._get_parent(a);e.jstree("select_node",t,"select_limit");a=e.jstree("get_selected")}return a}function initFileUploader(){var e=$("#h24_file_manager_jstree");var a=0;var i="";$h24.coreUploader.create("h24_file_manager_upload_uploader",$("#h24_file_manager_upload_uploader"),{type:"default",mode:$h24.coreUploader.FILE_UPLOADER_MODE,maxQueuedFiles:50,maxFileSize:"300mb",beforeUpload:function(){if(e.jstree.length==1){i=selectAndGetParentFolder();var t=e.jstree("get_json",i)[0];a=t.metadata.id}startJsTreeLoader()},fileUploaded:function(t){if(t.successful){$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"FileManager",modelaction:"setAndGetUploadedFile",id:t.user_file_id,folderId:a},function(a){if(a.success){if(e.jstree.length==1){e.jstree("create",i,"inside",a.node,null,true)}}})}},allFilesUploaded:function(){stopJsTreeLoader()}})}function saveSuccessful(){alert("Successfully saved changes!")}return{dialog:dialog,close:close,deleteFile:deleteFile,initUploader:initUploader,generateHTMLFileList:generateHTMLFileList,openDialog:openDialog,initFileManager:initFileManager,saveSuccessful:saveSuccessful,createFolder:createFolder,closeDialog:closeDialog}}();
h24core.prototype.style_manager=function(){function font_file_manager(e,a){closeDialogBox(true);$h24.file_manager.openDialog(null,null,function(){closeDialogBox();reloadColumns(function(){showDialog("#style_manager",2);$h24.style_manager.loadStyleManagerTabs();$h24.style_manager.fontDialog(e,a,7)})})}function pattern_file_manager(e){var a=$("#style_manager_pattern_selector input[name=target]").val();closeDialogBox(true);$h24.file_manager.openDialog(null,null,function(){closeDialogBox();reloadColumns(function(){showDialog("#style_manager",3);$h24.style_manager.loadStyleManagerTabs();$h24.style_manager.patternDialog(a,e,8)})})}function fontDialog(e,a,i,o){showDialog("#style_manager_font_selector");if(typeof i=="undefined")var i=0;var t=Math.random()*9999;$("#style_manager_font_selector").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm4_fonts/parameter1/"+e+"/parameter2/"+a+"/anticache/"+t,function(t){$("#style_manager_font_selector").html(t);$("#font_dialog_tabs").tabs().tabs("option","active",i);$h24.style_manager.initFontUploader(e,a,o)})}function patternDialog(e,a,i){if(typeof i=="undefined")var i=0;var o=Math.random()*9999;$("#style_manager_pattern_selector").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.slashwebroot+"Page/Communicator/anticache/"+o,{homepageid:$h24.homepageid,model:"StyleManager",modelaction:"load_sm5_patterns",parameter1:a},function(a){$("#style_manager_pattern_selector").html(a);showDialog("#style_manager_pattern_selector");$("#style_manager_pattern_selector input[name=target]").val(e);$("#pattern_dialog_tabs").tabs().tabs("option","active",i)})}function initFontUploader(e,a,i){var o={file_queue_limit:1,file_types:"*.ttf",file_types_description:"Font files",file_size_limit:"2MB",uploads_complete:function(i,o){if(typeof o=="undefined"){var t=$h24.uploaders["h24_style_manager_font_file_uploader"].getCurrentUploaderType();$h24.uploader.destroy("h24_style_manager_font_file_uploader");fontDialog(e,a,7,t)}}};if(typeof i!="undefined")o.uploader_start_mode=i;$h24.uploader.create("file","h24_style_manager_font_file_uploader",o)}function initPatternUploader(e,a){var i={file_queue_limit:1,file_types:"*.jpg;*.jpeg;*.png;*.gif",file_types_description:"Image files",file_size_limit:"5MB",uploads_complete:function(a,i){if(typeof i=="undefined"){var o=$h24.uploaders["h24_style_manager_pattern_file_uploader"].getCurrentUploaderType();$h24.uploader.destroy("h24_style_manager_pattern_file_uploader");$("#pattern_tab_9").load($h24.slashwebroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm5_pattern_tab",{parameter1:e,parameter2:"pattern_tab_9"},function(a){$h24.style_manager.initPatternUploader(e,o)})}}};if(typeof a!="undefined")i.uploader_start_mode=a;$h24.uploader.create("file","h24_style_manager_pattern_file_uploader",i)}function pickPattern(e,a){var i=$("#style_manager_pattern_selector input[name=target]").val();$("#"+i).val(e);if(a=="internal")$("#"+i+"_preview").css("background","url("+$h24.publicdir+"images/patterns/"+e+")");else if(a=="s3")$("#"+i+"_preview").css("background","url("+e+")");$h24.uploader.destroy("h24_style_manager_pattern_file_uploader");closeDialogBox(true)}function setFont(e,a,i){if(a=="color"){$("#font_preview_color_span_"+e).css("color",i);$("#font_preview_color_span_"+e).text(i)}$h24.post($h24.slashwebroot+"Page/Communicator",{model:"StyleManager",homepageid:$h24.homepageid,modelaction:"set_font",parameter1:e,parameter2:a,parameter3:i},function(e){splitdata=e.split("/");if(splitdata[1]==1){$h24.uploader.destroy("h24_style_manager_font_file_uploader");closeDialogBox(true);$h24.style_manager.loadStyleManagerTab4()}})}function initiate_header_hover(){var e=$(".legacy_header_bg_button"),a=$(".h24_bg_image"),i=$("#h24_homepage_title_button"),o=$(".h24_homepage_title"),t=$("#h24_footer_button"),r=$(".h24_footer");e.removeClass("visibility_hidden").hide();e.appendTo(a);i.appendTo(o).css({top:0,left:0});t.appendTo(r).css({top:0,left:0});if($h24.smartydesignid==30){e.css("top",120)}a.delayedHover({hover:function(){e.show()},hoverEnd:function(){e.hide()}});o.delayedHover({hover:function(){if($h24.smartydesignid!=19&&$h24.smartydesignid!=1&&$h24.smartydesignid!=8){o.css("position","relative")}i.show()},hoverEnd:function(){if($h24.smartydesignid!=19&&$h24.smartydesignid!=1&&$h24.smartydesignid!=8){o.css("position","")}i.hide()}});r.delayedHover({hover:function(){if($h24.smartydesignid!=27&&$h24.smartydesignid!=9){r.css("position","relative")}t.show()},hoverEnd:function(){if($h24.smartydesignid!=27&&$h24.smartydesignid!=9){r.css("position","")}t.hide()}});i.click(function(){showDialog("#title_edit_text_div");return false})}function pickCollectionLayout(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"StyleManager",modelaction:"change_collection_layout",pageid:$h24.pageid,collection_layout_id:e},function(e){if(e.successful)refreshBrowser();else if($h24.devmode)console.log(e)})}function changeDesign(e,a){if(typeof a!="undefined"){if(a==1){var i=confirm(translatedString("change_theme_conf"));if(i!=true)return}else if(a==2){var i=confirm(translatedString("change_design_conf"));if(i!=true)return}}if(e>0){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"StyleManager",modelaction:"change_design",smarty_theme_id:e},function(e){if(e.successful)refreshBrowser();else if($h24.devmode)console.log(e)})}}function loadCroppingDialog(e,a,i,o,t,r,n,l,g,d){if(typeof r=="undefined")r="";if(typeof n=="undefined")n=0;if(typeof l=="undefined")l=0;if(typeof g=="undefined")g=0;var m=Math.random()*9999;$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_cropping_dialog/anticache/"+m,{pictureid:e,width:a,height:i,passdata:r,allow_resize:o,allow_select:t,ignore_perfect_fit:n,scaled_cropping:l,auto_select:g,type:d},function(e){if(e=="")return;var i=parseInt(a)+20;if(i<300)i=300;showDialog("#image_cropping_dialog",null,i);$("#image_cropping_dialog").html(e)})}function performImageCropping(e,a){var i=$("#jcrop_id").val();var o=$("#jcrop_picture_type").val();var t=$("#jcrop_src_width").val();var r=$("#jcrop_src_height").val();var n=$("#jcrop_selection_xcoord").val();var l=$("#jcrop_selection_ycoord").val();var g=$("#jcrop_selection_width").text();var d=$("#jcrop_selection_height").text();var m=$("#jcrop_scaled_cropping").val();if(t==g&&r==d){$h24.style_manager.performImageCroppingAction(e,a);return}$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/crop",{parameter1:i,parameter2:o,parameter3:n,parameter4:l,parameter5:g,parameter6:d,parameter7:m},function(i){$h24.style_manager.performImageCroppingAction(e,a)})}function performImageCroppingAction(e,a){if(e=="genericbg"){$h24.style_manager.saveGenericBG(a[0],e)}else if(e=="blockbtn"){refreshBrowser()}}function loadGenericBGUploader(e,a,i,o){var t=Math.random()*9999;showDialog("#generic_bgpic_uploader");$("#generic_bgpic_uploader").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_generic_bgpic_uploader/anticache/"+t,{parameter1:e,parameter2:$h24.smartydesignid,parameter3:a,parameter4:i},function(e){$("#generic_bgpic_uploader").html(e)})}function loadExtGenBGUploader(e,a,i,o,t){var r=Math.random()*9999;showDialog("#generic_bgpic_uploader");$("#generic_bgpic_uploader").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_generic_bgpic_uploader/anticache/"+r,{parameter1:e,parameter2:$h24.smartydesignid,parameter3:a,parameter4:i,parameter5:o,parameter6:t},function(a){$("#generic_bgpic_uploader").html(a);$h24.header.old_initUploader(e,o,t)})}function saveGenericBG(e,a){var i=$("#gen_bgpic_upl_"+e+" input[name=picturetype]:checked").val();var o=$("#gen_bgpic_upl_"+e+" input[name=homepage_css_id]").val();var t=$("#gen_bgpic_upl_"+e+" input[name=scale_to_standard]")[0].checked;var r=$("#gen_bgpic_upl_"+e+" input[name=width]").val();var n=$("#gen_bgpic_upl_"+e+" input[name=height]").val();var l=$("#gen_bgpic_upl_"+e+"_hidden").val();if(typeof a!="undefined"&&a=="genericbg")t=$("#jcrop_scale_to_standard")[0].checked;$h24.post($h24.publicdir+"../Page/Communicator/model/StyleManager/modelaction/set_generic_bgpic",{homepageid:$h24.homepageid,parameter1:i,parameter2:l,parameter3:o,parameter4:$h24.smartydesignid,parameter5:e,parameter6:r,parameter7:n,scale_to_standard:t},function(e){window.location.href=window.location.href})}function showColorDialog(application,color,target,exec){$h24.utils.colorPicker({color:color,saveCallback:function(color){var homepage_font_id=application;if(target=="style_manager"){$("#font_preview_color_span_"+homepage_font_id).css("color",color);$("#font_preview_color_span_"+homepage_font_id).text(color);$h24.post($h24.slashwebroot+"Page/Communicator",{model:"StyleManager",homepageid:$h24.homepageid,modelaction:"set_font",parameter1:homepage_font_id,parameter2:"color",parameter3:color},function(e){var a=e.split("/");if(a[1]==1){$h24.uploader.destroy("h24_style_manager_font_file_uploader");$h24.style_manager.loadStyleManagerTab4()}})}else{$("#"+target).val(color);$("#"+application).css("background-color",color)}if(exec!=""){eval(exec)}}})}function pickDesign(e){var a=Math.random()*9999;$("#stylemanager_tab2_themes").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm2_themes/anticache/"+a,{parameter1:e},function(e){$("#stylemanager_tab2_themes").html(e)})}function loadStyleManagerTabs(e){if(typeof e!="undefined"&&e==0)$h24.design_manager.changeDesignSystemDialog();$h24.style_manager.loadStyleManagerTab1();$h24.style_manager.loadStyleManagerTab2();$h24.style_manager.loadStyleManagerTab3();$h24.style_manager.loadStyleManagerTab4();$h24.style_manager.loadStyleManagerTab5()}function loadStyleManagerTab1(){var e=Math.random()*9999;$("#style_manager_1").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm1/anticache/"+e,function(e){$("#style_manager_1").html(e)})}function loadStyleManagerTab2(){var e=Math.random()*9999;$("#style_manager_2").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm2/anticache/"+e,{parameter1:$h24.smartydesignid,parameter2:$h24.smartythemeid},function(e){$("#style_manager_2").html(e)})}function loadStyleManagerTab3(){var e=Math.random()*9999;$("#style_manager_3").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm3/anticache/"+e,{parameter1:$h24.pageid},function(e){$("#style_manager_3").html(e)})}function loadStyleManagerTab4(){var e=Math.random()*9999;$("#style_manager_4").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm4/anticache/"+e,function(e){$("#style_manager_4").html(e)})}function loadStyleManagerTab5(){var e=Math.random()*9999;$("#style_manager_5").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$("#style_manager_5").load();$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm5/anticache/"+e,function(e){$("#style_manager_5").html(e)})}function loadStyleManagerSizeDialog(e,a){var i=Math.random()*9999;$("#style_manager_size_selector").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/StyleManager/modelaction/load_sm4_sizes/parameter1/"+e+"/parameter2/"+a+"/anticache/"+i,function(e){$("#style_manager_size_selector").html(e)})}function saveStyleManagerCSS(){var e="";$("#style_manager_5 .homepage_css_row").each(function(a){var i=$(this).find("input[name=active]")[0].checked;var o=$(this).find("input[name=homepage_css_id]").val();var t=$(this).find("input[name=value]").val();if(typeof t=="undefined")var t=$(this).find("select[name=value] option:selected").val();if(e!="")e+="/";t=t.replace(/\//g,"&#47;");e+=o+"/"+t+"/"+i});$h24.post($h24.publicdir+"../Page/Communicator/model/StyleManager/homepageid/"+$h24.homepageid+"/modelaction/save_css",{parameter1:e},function(e){refreshBrowser()})}return{fontDialog:fontDialog,patternDialog:patternDialog,font_file_manager:font_file_manager,pattern_file_manager:pattern_file_manager,initFontUploader:initFontUploader,initPatternUploader:initPatternUploader,pickPattern:pickPattern,setFont:setFont,initiate_header_hover:initiate_header_hover,pickCollectionLayout:pickCollectionLayout,changeDesign:changeDesign,loadCroppingDialog:loadCroppingDialog,performImageCropping:performImageCropping,performImageCroppingAction:performImageCroppingAction,loadGenericBGUploader:loadGenericBGUploader,loadExtGenBGUploader:loadExtGenBGUploader,saveGenericBG:saveGenericBG,showColorDialog:showColorDialog,pickDesign:pickDesign,loadStyleManagerTabs:loadStyleManagerTabs,loadStyleManagerTab1:loadStyleManagerTab1,loadStyleManagerTab2:loadStyleManagerTab2,loadStyleManagerTab3:loadStyleManagerTab3,loadStyleManagerTab4:loadStyleManagerTab4,loadStyleManagerTab5:loadStyleManagerTab5,loadStyleManagerSizeDialog:loadStyleManagerSizeDialog,saveStyleManagerCSS:saveStyleManagerCSS}}();function loadGenericBGUploader(e,a,i,o){return $h24.style_manager.loadGenericBGUploader(e,a,i,o)}
h24core.prototype.adminPanel=function(){var e=function(e){$("html").toggleClass("h24_admin_panel_hidden",e);if(!e&&!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}},a=function(e){$h24.utils.showLoadingSpinner();window.location="?ci="+e},n=function(){$(".h24-ControlPanel").addClass("h24-ControlPanel__isVisible");$(document).on("click.h24-controlPanel",function(e){if(!$(e.target).closest("[data-no-toggle=controlPanel], [data-dialog=controlPanel], .h24_dialog_overlay, #jqmOverlay, #h24_preloaded_dialog_box").length){t()}$('[data-action="closeControlPanel"]').on("click.h24-controlPanel",function(e){t()})})},t=function(){$(".h24-ControlPanel").removeClass("h24-ControlPanel__isVisible");$(document).off("click.h24-controlPanel")},o=function(){if(!!$h24.GUI.instances.MobileSidepanel){$h24.GUI.destroy("MobileSidepanel");$(".h24-mobileWebsite").remove();var e=$('[data-action="showEditView"]');e.addClass("active");e.siblings().removeClass("active")}},i=function(){$("#h24_btn_manage_pages").click(function(){setTimeout(function(){$("#h24_admin_page_search").focus()},10)});$("#h24_admin_page_goto").on("change",function(){$h24.adminPanel.changePage(this.value)});$(".h24_admin_panel [data-toggle=popover]").popover({html:true,placement:"top"});$(".h24_admin_panel, .h24_floating_action_container").on("click","[data-dialog]",function(e){var a=$(e.target).closest("[data-dialog]");var t=a.data("dialog");switch(t){case"changePageLayout":if($h24.design_system==1){$h24.design_manager.managerDialog("layouts")}else if($h24.design_system==0){showDialog("#style_manager",1);$h24.style_manager.loadStyleManagerTabs()}break;case"customizeTweaks":if($h24.design_system==1){$h24.design_manager.managerDialog("tweaks")}else if($h24.design_system==0){showDialog("#style_manager",3);$h24.style_manager.loadStyleManagerTabs()}break;case"customizeFonts":if($h24.design_system==1){$h24.design_manager.managerDialog("fonts")}else if($h24.design_system==0){showDialog("#style_manager",2);$h24.style_manager.loadStyleManagerTabs()}break;case"pageManager":$h24.page_manager.openDialog();break;case"pageOptions":$h24.page_manager.pagePropertiesDialog($h24.pageid);break;case"userAccount":$h24.homepage_settings.loadHomepageSettings(0);break;case"emailSettings":$h24.emailCenter.overviewDialog();break;case"domainManager":$h24.domain_center.openDomainCenter();break;case"recommendations":if(a.hasClass("h24-Button__shimmer")){a.removeClass("h24-Button__shimmer")}$h24.recommendation.openRecommendationDialog(0);$h24.recommendation.setRecommendationClicked();break;case"statistics":$h24.homepage_settings.loadHomepageSettings(5);break;case"seo":$h24.SEOGuide.dialog_overview();$("a[href=#h24_admin_siteActions]").tab("show");break;case"translations":$h24.phrase.openHp();break;case"chatSettings":$h24.chat_settings.openDialog();break;case"advancedSettings":$h24.homepage_settings.loadHomepageSettings(3);break;case"comments":$h24.comment_manager.loadCommentManager(0);break;case"formResponses":$h24.form_entry_manager.openDialog(null,"all");break;case"files":$h24.file_manager.openDialog();break;case"images":showDialog("#image_manager",1);loadImageManagerTabs(0,-2);break;case"activities":$h24.calendar_manager.open();break;case"help":$h24.help.createHelpDialog();break;case"homepageName":$h24.homepage_settings.homepageNamePrompt(false,a.data("value"));break;case"subscription":$h24.homepage_settings.loadHomepageSettings(1);break;case"websiteEmail":$h24.homepage_settings.accountEmailPrompt(a.data("value"));break;case"controlPanel":n();break;case"instructionVideos":$h24.instructionVideos.showVideoPanel();break;case"createAccount":$h24.accountManager.showCreateAccountPanel();break;case"pageBackground":$h24.pageBackgroundManager.settings();break;case"FontPicker":$h24.design_manager.managerDialog("fonts");break}e.preventDefault()});$(".h24_admin_panel, .h24_floating_action_container").on("click","[data-action]",function(e){var a=$(e.target).closest("[data-action]").data("action");switch(a){case"publish":$h24.publishing_manager.publish();break;case"unpublish":$h24.publishing_manager.dePublish(true);break;case"togglePanel":$h24.adminPanel.togglePanel();break;case"activateStore":$h24.store_manager.createStore();break;case"confirm-logout":if(!confirm($h24.phrase.GUIPhrase("Control-Panel","You haven't saved your website! Do you really want to log out and lose all of its contents?"))){e.preventDefault()}break;case"showPreviewMode":var n=$('<div class="h24-Preview"><span class="h24-Preview-close"><span data-icon="" aria-hidden="true"></span></span><iframe src="/'+$h24.webroot+"Page/Mobile"+location.search+'" class="h24-Preview-content">');$("body").append(n);$("html").addClass("h24_previewing");n.loadingSpinner(true);n.find("iframe").load(function(){n.loadingSpinner(false)});$(".h24-Preview-close").click(function(){$(".h24-Preview").remove();$("html").removeClass("h24_previewing")});break;case"showMobileView":if(!!$h24.GUI.instances.MobileSidepanel){return}if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}var t=[],i=[];$.each([{type:"primary",text:$h24.phrase.GUIPhrase("General","Done"),action:"mobileDone",icon:"E207"}],function(e,a){dust.render("Button",a,function(e,a){t.push(a)})});$h24.GUI.create("SidePanel","MobileSidepanel",{controls:t});var s=$(this);s.addClass("active");s.siblings().removeClass("active");$("body").append('<div class="h24-mobileWebsite"><div class="h24-mobileWebsiteViewContainer"><iframe src="/'+$h24.webroot+"Page/Mobile"+location.search+'" class="h24-mobileWebsiteView">');$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"getInitParameters",__skip_loading_overlay:true},function(e){var a="#121212";var n=e.mobile_menu_color?e.mobile_menu_color:a;dust.render("SwitchControl",{checked:!!e.mobile_status,label:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Mobile homepage"),id:"mobile_switch",action:"toogle_activate_mobile",onText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","On"),offText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Off")},function(e,a){i.push(a)});dust.render("SwitchControl",{checked:!!e.mobile_header_state,label:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Header"),id:"header_switch",action:"toogle_activate_header",onText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","On"),offText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Off")},function(e,a){i.push(a)});dust.render("SwitchControl",{checked:!!e.mobile_menu_name_state,label:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Website's name"),id:"title_switch",action:"toogle_activate_title",onText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","On"),offText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Off")},function(e,a){i.push(a)});dust.render("SwitchControl",{checked:!!e.mobile_menu_sidebar,label:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Side menu"),id:"sidebar_switch",action:"toogle_activate_sidebar",onText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","On"),offText:$h24.phrase.GUIPhrase("Mobile-Sidepanel","Off")},function(e,a){i.push(a)});var t='<a title="'+$h24.phrase.GUIPhrase("PageBackgroundManager","Revert color changes")+'" style="margin-left:5px;'+(n==a?"display:none;":"")+'" class="h24-PageBackgroundManager-colorButton h24_flexbutton h24_flexbutton_gray h24_flexbutton_mini" href="#" data-action="revert_color">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Revert")+"</a>";var o='<a title="'+$h24.phrase.GUIPhrase("PageBackgroundManager","Open Color Picker")+'" class="h24-PageBackgroundManager-colorButton h24_flexbutton h24_flexbutton_gray h24_flexbutton_mini" href="#" data-action="choose_color"><span class="h24-PageBackgroundManager-colorButtonIcon">&nbsp;</span>'+$h24.phrase.GUIPhrase("PageBackgroundManager","Pick Color")+"</a>";var s='<div class="h24-PageBackgroundManager-section">'+'<span class="h24-PageBackgroundManager-heading">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Menu Color")+"</span>"+'<div style="background-color:'+n.toUpperCase()+'" class="h24-PageBackgroundManager-colorSwatch" data-function="colorSwatch"></div>'+'<input style="margin-right: 3px;" type="text" class="h24-PageBackgroundManager-colorValue" data-function="backgroundColor" data-action="changeBackgroundColor" data-default="'+a+'" value="'+n.toUpperCase()+'">'+'<span style="margin: 0;">'+o+"</span>"+'<span style="margin: 0;">'+t+"</span>"+"</div>";var l='<span class="h24-PageBackgroundManager-heading">'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Website's name")+"</span>"+"<br />"+'<div class="h24_mobile_title_font">'+'<a title="'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Change font, size & color")+'" class="h24_flexbutton h24_flexbutton_gray h24_flexbutton_mini" href="#" data-action="change_title_styles">'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Change font, size & color")+"</a>"+"</div>"+"<br />";var r='<span class="h24-PageBackgroundManager-heading">'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Headings")+"</span>"+"<br />"+'<div class="h24_mobile_title_font">'+'<a title="'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Change font size for small heading")+'" class="h24_flexbutton h24_flexbutton_gray h24_flexbutton_mini" href="#" data-action="change_small_heading_styles">'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Small heading")+"</a> "+' <a title="'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Change font size for big heading")+'" class="h24_flexbutton h24_flexbutton_gray h24_flexbutton_mini" href="#" data-action="change_big_heading_styles">'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Big heading")+"</a> "+"</div>"+"<br />";var h='<a href="https://'+($h24.editorBrandname=="Hemsida24"?"edit.hemsida24.se/help/item/guide/mobilhemsida-6273":"edit.pagepicnic.com/help/item/guide/using-the-mobile-website-view-6317")+'" class="btn-info btn btn-small" target="_blank">'+$h24.phrase.GUIPhrase("General","Guide")+"</a>";var c='<h1 class="h24-SidePanelMobile-heading h24-SidePanel-headingM">'+$h24.phrase.GUIPhrase("General","Settings")+"</h1>"+'<div class="h24-PageBackgroundManager-section">'+"<ul>"+'<li class="h24-SidePanel-settingsItem">'+i[0]+"</li>"+'<li class="h24-SidePanel-settingsItem">'+i[1]+'<input type="button" '+(!e.mobile_header_state?'style="display:none;"':"")+' data-id="choose_image_button" data-action="choose_image" class="h24-SidePanel-changeImageButton btn btn-mini btn-inverse" value="'+$h24.phrase.GUIPhrase("Mobile-Sidepanel","Change")+'"/>'+"</li>"+'<li class="h24-SidePanel-settingsItem">'+i[2]+"</li>"+'<li class="h24-SidePanel-settingsItem">'+i[3]+"</li>"+"</ul>"+"</div>"+'<div class="h24-PageBackgroundManager-section">'+s+"</div>"+'<div class="h24-PageBackgroundManager-section">'+l+"</div>"+'<div class="h24-PageBackgroundManager-section">'+r+"</div>"+'<div class="h24-PageBackgroundManager-section">'+h+"</div>";$h24.GUI.instances.MobileSidepanel.innerContent.html(c);$h24.mobile_admin.init()});break;case"showEditView":o();break;case"toggleBlockDrawer":if(!!$h24.GUI.instances.blockDrawer){if($h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide();$h24.adminPanel.togglePanel(false)}else{$h24.GUI.instances.blockDrawer.show();$h24.adminPanel.togglePanel(true)}}else{$h24.adminPanel.togglePanel(true);var l=$(".h24_add_content_wrapper");$h24.GUI.create("SidePanel","blockDrawer",{side:"left",content:l.html()});l.remove();var r;$(".h24_add_content_panel_block").draggable({appendTo:".sitepreview",distance:0,cursorAt:{top:50,left:50},zIndex:1300,cancel:".h24_add_content_disabled",helper:"clone",revert:function(e){if(!e){var a=$(this),n=a.children(".h24_add_content_panel_bubble");setTimeout(function(){n.show();setTimeout(function(){n.hide()},3e3)},400)}return!e},revertDuration:350,start:function(e,a){$("html").addClass("h24_block-sorting");$(".h24_add_content_panel_bubble").hide();$h24.block.toggleBlock("deselect");a.helper.find(".h24_add_content_badge").remove();if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}},stop:function(e,a){$("html").removeClass("h24_block-sorting");$("#h24_choose_layout_box").fadeOut();$("html").removeClass("h24_block-sorting");$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections();if($("html").hasClass("faux-section-support")){$h24.fauxSections.reposition()}},connectToSortable:$h24.design_system==0?["#ulcollection0,#ulcollection1,#ulcollection2,#ulcollection3,#ulcollection4"]:"#h24_content_container div.h24_collection > ul.sortable"});if($.support.touch){var h;$(".h24_add_content_scroller").on("touchstart.h24-addContentIntent",function(e){var a=e.originalEvent.changedTouches[0].pageY;var n=$(".h24_add_content_scroller").scrollTop();$(this).on("touchmove.h24-addContentIntent",function(e){var t=e.originalEvent.changedTouches[0].pageY;var o=a-t;$(".h24_add_content_scroller").scrollTop(n+o)}).on("touchend.h24-addContentIntent",function(e){$(this).off("touchmove.h24-addContentIntent")})})}if(!$h24.utils.touchMode){var c=$h24.utils.getScrollbarWidth();if(c>0){$(".h24_add_content_category_title").css("width",231-c)}$("#h24_add_content_container").slinky();var d=$(".h24_add_content_category_title:eq(0)").outerHeight();$(".h24_add_content_category_title").on("click",function(e){var a=$(this),n=a.parent().prevAll().length,t=$(".h24_add_content_scroller").scrollTop(),o=a.parent().offset().top;$(".h24_add_content_scroller").animate({scrollTop:t+o-n*d})})}$('[data-toggle="dropdown"]').on("click.h24-showBlockDrawer",function(e){if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}$h24.adminPanel.togglePanel(false)})}break}});$("#h24_admin_page_search").typeahead({source:function(e,a){pages=[];map={};$("#h24_admin_page_goto option").each(function(){var e=$(this),a=e.text(),n=e.val();map[n]=a;pages.push(n)});a(pages)},updater:function(e){$h24.adminPanel.changePage(e);return map[e]},matcher:function(e){if(map[e].toLowerCase().indexOf(this.query.trim().toLowerCase())!=-1){return true}},sorter:function(e){var a=[],n=[],t=[],o;while(o=e.shift()){if(!map[o].toLowerCase().indexOf(this.query.toLowerCase()))a.push(o);else if(~map[o].indexOf(this.query))n.push(o);else t.push(o)}return a.concat(n,t)},highlighter:function(e){var a=new RegExp("("+this.query+")","gi");var n=map[e].replace(a,"<strong>$1</strong>");return n}});$("#h24_admin_page_search").on("click focus",function(){$this=$(this);if($this.val()!=""&&!$this.data("typeahead").shown)$this.data("typeahead").lookup()});$(".h24_admin_panel [title]:not([data-toggle=popover])").tooltip();$("#h24_admin_siteActions .h24-CircleButton").hoverintent(function(){if(!$("#h24_admin_siteActions > .open").length&&!($h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible())){$(this).parent().addClass("h24__hoverIntent")}},function(){$(this).parent().removeClass("h24__hoverIntent")},{enterTimeout:0,leaveTimeout:0}).on("click.h24-hoverintent",function(e){$(this).parent(".h24__hoverIntent").removeClass("h24__hoverIntent");if($(e.target).data("action")!=="toggleBlockDrawer")$h24.adminPanel.togglePanel(false);$h24.block.settingsPanel(-1);$h24.block.toggleBlock("deselect")})};var s=function(e){var a=null,n="",t=$(e),o=0,i=0,s=0,l="",r=$("form[name=searchForm]"),h,c={lines:10,length:3.5,width:2,radius:3.5,corners:1,rotate:0,direction:1,color:"#000",speed:1.1,trail:48,shadow:false,hwaccel:false,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},d=new Spinner(c).spin(),g=$(d.el);h=r.closest("div").find(".dropdown-menu");t.blur(function(e){if(h.data("mousedown")!=true){h.hide()}}).click(function(){if(h.is(":empty")==false){h.show()}}).keydown(function(e){if(e.keyCode==27||e.keyCode==13){h.hide()}});h.mousedown(function(){h.data("mousedown",true)}).mouseup(function(){h.data("mousedown",false).hide()}).focusout(function(){h.data("mousedown",false).hide()});t.after(g.hide());a=setInterval(function(){l=$.trim(t.val());if(l==n){return}if(l.length<2){h.empty().hide();return}n=l;i++;s++;g.show();$h24.post($h24.slashwebroot+"help/item-suggest",{__skip_loading_overlay:true,keywords:l,searchId:i,limit:11},function(e){s--;if(s==0){g.hide()}if(parseInt(e.searchId,10)>parseInt(o,10)){var a=$.trim(t.val());o=e.searchId;h.empty();if(a.length<2){return}if(typeof e.result=="object"){$.each(e.result,function(){var e="";if($h24.webroot!=""){e="/"+$h24.webroot.substr(0,$h24.webroot.length-1)}var a='<li><a href="'+e+this.url_rel+'" target="_blank"><small>'+this.type+"</small>"+(this.internal==1?"<small>internal</small>":"");if(typeof this.highlight!="undefined"&&typeof this.highlight.title!="undefined"&&this.highlight.title!=""){a+=this.highlight.title.replace(/em>/g,"strong>")}else{a+=this.title}a+="</a></li>";h.append(a)})}if(h.is(":empty")){var n='<li><a href="/H24-Helpdesk" target="_blank"><span class="h24_help_result_title">'+$h24.phrase.GUIPhrase("Help-Center","Sorry, no match. Contact the Support?")+' <span data-icon="&#xc287;" aria-hidden="true"></span></span></a></li>';h.append(n)}else{if(h.find("li").length>10){var n='<li><a href="/'+$h24.webroot+"help/search/keywords/"+encodeURIComponent(l)+'" target="_blank"><span class="h24_help_result_title">'+$h24.phrase.GUIPhrase("Help-Center","More matches available in the Help Center")+' <span data-icon="&#xc287;" aria-hidden="true"></span></span></a></li>'}else{var n='<li><a href="/H24-Helpdesk" target="_blank"><span class="h24_help_result_title">'+$h24.phrase.GUIPhrase("Help-Center","Not your issue? Contact the Support")+' <span data-icon="&#xc287;" aria-hidden="true"></span></span></a></li>'}h.append(n)}h.show()}})},200)};return{togglePanel:e,changePage:a,init:i,initHelpSearch:s,hideMobilePanel:o}}();
h24core.prototype.instructionVideos=function(){var e,t,a;function i(i){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"InstructionVideoManager",modelaction:"renderMarkup",homepageid:$h24.homepageid},function(o){e=$(".h24-VideoPanel");e.html(o);t=e.find(".h24-VideoPanel-videoSection-videoPlayer");a=e.find(".h24-VideoPanel-videoSection-videoBrowser");$(document).on("click.h24-videoPanel",function(e){if(!$(e.target).closest("[data-no-toggle=videoPanel], [data-dialog=instructionVideos], .h24_dialog_overlay, #jqmOverlay, #h24_preloaded_dialog_box").length){r()}});e.on("click.h24-videoPanel","[data-action]",function(e){var t=$(this);switch(t.data("action")){case"closeVideoPanel":r();e.preventDefault();break;case"changeVideo":var a=$(this).parent().data("videoid"),i=$(this).parent().data("title"),o=$(this).parent().data("description");n(a,i,o);e.preventDefault();break;case"restartGuide":$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"TooltipGuide",modelaction:"restartGuide",guide:"homepage_intro"},function(e){if(e.successful){$(".h24-VideoPanel-container").loadingSpinner(true);location.reload()}});e.preventDefault();break}});$h24.instructionVideos.initialized=true;if(i){i()}})}function o(e){if(!$h24.instructionVideos.initialized){if(typeof e!="undefined"&&e>0){i(function(){var t=a.find('li[data-key="'+e+'"]'),i=t.data("videoid"),o=t.data("title"),d=t.data("description");n(i,o,d)})}else{i()}}$(".h24-VideoPanel").addClass("h24-VideoPanel__isVisible")}function n(e,i,o){var n=t.find("iframe"),r=t.find("b"),l=t.find("p");var s="//player.vimeo.com/video/"+e+"?title=0&byline=0&portrait=0&badge=0&autoplay=1";if(n.attr("src")!=s){n.attr("src",s)}r.text(i);l.text(o);$(".h24-VideoPanel-videoSection").animate({scrollTop:0},400);var c=a.find('li[data-videoid="'+e+'"]').data("key");d(c,i)}function d(e,t){if(!$h24.third_party.segmentInitiated){$h24.third_party.initSegment("ttxih351ay")}if(typeof analytics!="undefined"){var a={id:e,title:t};analytics.track("Watched video",a)}}function r(){$(".h24-VideoPanel").removeClass("h24-VideoPanel__isVisible");e.html("");$h24.instructionVideos.initialized=false;$(document).off("click.h24-videoPanel");e.off("click.h24-videoPanel")}function l(e,t){var a=$(".h24_admin_panel [data-dialog=instructionVideos]");a.popover("destroy");if(typeof e=="undefined"||e<1){e=1}var i="",n="Steg "+e+" av 9",d=e<=9?'<button style="margin-right:10px" type="button" class="btn btn-primary btn-xs" data-action="showVideo" data-step="'+e+'">Se video</button>':"",r=e<=8?'<button type="button" class="btn btn-info btn-xs" data-action="nextPopover" data-step="'+(e+1)+'">Nästa</button>':"",s=e<9?'<a href="#" data-action="forceQuitPopup">Avsluta guide</a>':"",c="";if(e==9){c='<button type="button" class="btn btn-info btn-xs" data-action="nextPopover" data-step="10">Slutför</button>'}else if(e==10){if(t){n="Avslutad guide";i='Du har valt att avbryta introduktionen. Klicka på knappen "Hjälp" för att se den igen.'}else{n="Bra jobbat!";i="Du har genomfört hela vår introduktion. Lycka till med din hemsida!"}c='<button type="button" class="btn btn-info btn-xs" data-action="closePopover" data-step="10">Stäng</button>'}var p=['<div class="popover">','<div class="arrow"></div>','<h3 class="popover-title"></h3>','<div class="popover-content"></div>','<div class="popover-bottom">',d,r,c,s,"</div>","</div>"].join("");switch(e){case 1:i="Introduktion och hur man jobbar med bilder.";break;case 2:i="Så fungerar våra block och så jobbar du med rubriker.";break;case 3:i="Jobba med text på hemsidan samt punktlistor och länkar.";break;case 4:i="Så ändrar du sidhuvudet på din hemsida och så lägger du till en logotyp.";break;case 5:i="Lägg till nya sidor på din hemsida.";break;case 6:i="Bildgallerier samt hur du ändrar antalet kolumner för block med sektioner.";break;case 7:i="Ändra bakgrund, färger och typsnitt på hemsidan.";break;case 8:i="Genomgång av våra abonnemang och hur du beställer.";break;case 9:i="Så publicerar du din färdiga hemsida.";break}a.popover({trigger:"manual",content:i,template:p,title:n,placement:"top",html:true});a.popover("show");$(".h24_admin_panel").find(".popover").addClass("popover-adjustment");$('[data-action="closePopover"]').on("click.h24_admin_panel",function(e){a.popover("destroy")});$('[data-action="showVideo"]').on("click.h24_admin_panel",function(e){o($(this).data("step"))});$('[data-action="nextPopover"]').on("click.h24_admin_panel",function(e){l($(this).data("step"),false)});$('[data-action="forceQuitPopup"]').on("click.h24_admin_panel",function(e){l(10,true)})}return{initialized:false,showVideoPanel:o}}();
h24core.prototype.helpcenterModal=function(){var e,n,i;function o(){if(!$h24.instructionVideos.initialized){$("body").on("click",".pp-Sidepanel-help",function(e){a($(this).prop("href"));e.preventDefault()});$h24.helpcenterModal.initialized=true}}function t(o){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"helpcenterModalManager",modelaction:"getMarkup",homepageid:$h24.homepageid},function(t){$("body").append(t);e=$("#h24-helpcenterModal");n=e.find(".modal-body");i=n.find("iframe");if(o){o()}})}function a(n){t(function(){if(typeof n!="undefined"){n=n+"/layout/0";i.parent().loadingSpinner(true);i.attr("src",n);i.load(function(){i.parent().loadingSpinner(false)});e.modal("show");e.on("hidden",function(n){e.remove()})}})}return{init:o,initialized:false}}();
h24core.prototype.utils=function(){var e=false;var t=null;var i=null;var a;function r(){if(typeof show_loading_overlay=="function"){show_loading_overlay()}else if($h24.devmode){console.log("Tried to show loading overlay - Function missing")}$h24.utils.ajaxLoaderLoading=true;$h24.utils.ajaxLoaderStillWorkingTimer=setTimeout("$h24.utils.ajaxLoaderStillWorking();",5e3);$h24.utils.ajaxLoaderTimer=setTimeout("$h24.utils.ajaxLoaderTimeout();",3e4)}function o(){var e=document.createElement("div");$(e).css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:" -9999px"}).appendTo("body");var t=e.offsetWidth-e.clientWidth;document.body.removeChild(e);return t}function n(e,t,i){var a=i&&i.lexicographical,r=i&&i.zeroExtend,o=e.split("."),n=t.split(".");function s(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}if(!o.every(s)||!n.every(s)){return NaN}if(r){while(o.length<n.length)o.push("0");while(n.length<o.length)n.push("0")}if(!a){o=o.map(Number);n=n.map(Number)}for(var l=0;l<o.length;++l){if(n.length==l){return 1}if(o[l]==n[l]){continue}else if(o[l]>n[l]){return 1}else{return-1}}if(o.length!=n.length){return-1}return 0}function s(){if($h24.utils.ajaxLoaderLoading){if(typeof add_slow_connection_msg_to_loader=="function"){add_slow_connection_msg_to_loader(true)}else if($h24.devmode){console.log('Tried to add "Slow connection" message to loading overlay - Function missing')}}}function l(e){$("body").on("mousemove.h24-touch-detect touchstart.h24-touch-detect",function(t){$(this).off(".h24-touch-detect");$h24.utils.touchMode=t.type=="touchstart";if(typeof e=="function"){e.call()}})}function c(){if($h24.utils.ajaxLoaderLoading)$("#h24_still_working").fadeIn()}function f(){$h24.utils.ajaxLoaderLoading=false;clearTimeout($h24.utils.ajaxLoaderTimer);clearTimeout($h24.utils.ajaxLoaderStillWorkingTimer);if(typeof reload_HideLoadingMessage=="function"){reload_HideLoadingMessage()}else if($h24.devmode){console.log("Tried to hide loading overlay - Function missing")}}function d(e){var t='<div class="h24-Spinner-overlay"></div>';switch(e){case"show":var i=$(".h24-Spinner-overlay");if(i.length>0){i.addClass("h24-Spinner-overlayToFront h24-Spinner-overlaySpinner");i.show()}else{$("body").prepend(t);i=$(".h24-Spinner-overlay");i.addClass("h24-Spinner-overlayToFront h24-Spinner-overlaySpinner");i.show()}break;case"hide":var i=$(".h24-Spinner-overlay");i.removeClass("h24-Spinner-overlayToFront h24-Spinner-overlaySpinner");i.hide();break}}function u(e){var t=/^([A-Za-z0-9_\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,8})$/;if(t.test(e)==false)return false;else return true}function h(e,t){var i={};if(typeof t!="undefined")var a=$(t,e);else var a=$("input, select, textarea",e);a.each(function(t){var a=$(this);if(a.hasClass("skip_me"))return;var r=a.attr("name");if(a.is("input")){var o=a.attr("type");if(typeof o=="undefined"){o="text"}switch(o){case"text":default:case"hidden":var n=a.val();break;case"radio":var n=$('input[name="'+r+'"]:checked',e).val();if(typeof n=="undefined")var n="undefined";break;case"checkbox":if(a.hasClass("multi_select")&&this.checked)var n=a.val();else if(a.hasClass("multi_select")&&!this.checked)return;else var n=this.checked;break}}else if(a.is("select")){var n=a.find(":selected").val()}else if(a.is("textarea")){var n=a.val()}if(typeof i[r]=="undefined")i[r]=n;else if(typeof i[r]!="undefined"&&o=="checkbox"){i[r]+=","+n}});return i}function p(e){if(typeof e=="string"){var t=e.split(",");if(t.length==4){if(parseInt(t[3],10)<255){return"transparent"}}e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*\d+)?\)$/);function i(e){return("0"+parseInt(e).toString(16)).slice(-2)}return"#"+("0"+parseInt(e[1]).toString(16)).slice(-2)+("0"+parseInt(e[2]).toString(16)).slice(-2)+("0"+parseInt(e[3]).toString(16)).slice(-2)}else{var a=Math.round(e[0]*255);var r=Math.round(e[1]*255);var o=Math.round(e[2]*255);return"#"+(a<16?"0":"")+a.toString(16)+(r<16?"0":"")+r.toString(16)+(o<16?"0":"")+o.toString(16)}}function v(e){if(e.length==7){return[parseInt("0x"+e.substring(1,3)),parseInt("0x"+e.substring(3,5)),parseInt("0x"+e.substring(5,7))]}else if(e.length==4){return[parseInt("0x"+e.substring(1,2))/15*255,parseInt("0x"+e.substring(2,3))/15*255,parseInt("0x"+e.substring(3,4))/15*255]}}function g(e){var t=$h24.utils.hexToRgb(e);if(typeof t=="undefined"){return"#ffffff"}if(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])){return"#ffffff"}var i=$h24.utils.RGBToHSL(t);var a=i[2];if(a<200)return"#ffffff";else return"#000000"}function m(e){var t={color:"#123456",coreDialog:false};if(typeof e=="object")t=$.extend(t,e);else if(typeof e=="function")t.saveCallback=e;var i={width:400};if(typeof t.dialogSettings=="object")i=$.extend(i,t.dialogSettings);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"color_picker_dialog",color:t.color},function(e){if(t.coreDialog){var a=$h24.coreDialog.create("color_picker_dialog",e,i);var r=a.content}else{var a=$h24.dialog.create("color_picker_dialog",e,i);var r=a.markup}var o=r.find("#h24_generic_color_picker_input");var n=$.farbtastic(r.find("#h24_generic_color_picker"),function(e){o.val(e);o.css("background-color",e);o.css("color",g(e));if(typeof t.dragCallback=="function")t.dragCallback.call(this,e)}).setColor(t.color);if(typeof t.saveCallback=="function"){r.find(".buttons a").click(function(){t.saveCallback.call(this,n.color);a.close();return false})}o.keyup(function(e){var t=e.currentTarget.value;var i=t.replace("#","");if(i.length==6)n.setColor("#"+i)})})}function _(e){var t={cancelCallback:function(){},input:"",inputType:"text",description:"",helptext:"",leftHelptext:"",context:this,requireInput:true,applyColon:false,okButtonText:$h24.phrase.GUIPhrase("General","Save")};if(typeof e=="object")var t=$.extend(t,e);else if(typeof e=="function")t.okCallback=e;this.injectStatusMessage=function(e,t){$h24.dialogs.prompt_dialog.markup.find(".prompt_status_message").attr("class","prompt_status_message").text(e).addClass(t).show()};this.hideStatusMessage=function(){$h24.dialogs.prompt_dialog.markup.find(".prompt_status_message").hide()};if(typeof t.description=="string")t.descriptions=[t.description];else t.descriptions=t.description;if(typeof t.input!="object")t.inputs=[t.input];else t.inputs=t.input;if(typeof t.inputType=="string")t.inputTypes=[t.inputType];else t.inputTypes=t.inputType;if(typeof t.helptext=="string")t.helptexts=[t.helptext];else t.helptexts=t.helptext;if(typeof t.leftHelptext=="string")t.leftHelptexts=[t.leftHelptext];else t.leftHelptexts=t.leftHelptext;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"prompt_dialog",settings:t},function(e){var i=$h24.dialog.create("prompt_dialog",e,{closeCallback:function(){t.cancelCallback.call(t.context);$h24.dialogs.prompt_dialog.close()},width:515});var a=i.markup;var r=a.find("input[type]");r.each(function(e){if(e==0)this.focus()});a.find("a.ok").click(function(){a.find(".prompt_status_message").hide();var e=false;var i=[];r.each(function(t){var a=$(this);var r=a.val();if(r.length==0)e=true;i[t]=r});if(t.requireInput){if(e){r.css("borderColor","red");return false}}var o=r.length==1?r.val():i;var n=t.okCallback.call(t.context,o);if(typeof n=="boolean"&&n===false)return false;$h24.dialogs.prompt_dialog.close();return false});a.find("form").submit(function(){a.find(".prompt_status_message").hide();var e=false;var i=[];r.each(function(t){var a=$(this);var r=a.val();if(r.length==0)e=true;i[t]=r});if(t.requireInput){if(e){r.css("borderColor","red");return false}}var o=r.length==1?r.val():i;var n=t.okCallback.call(t.context,o);if(typeof n=="boolean"&&n===false)return false;$h24.dialogs.prompt_dialog.close();return false});a.find("a.cancel").click(function(){a.find(".prompt_status_message").hide();var e=t.cancelCallback.call(t.context);if(typeof e=="boolean"&&e===false)return false;$h24.dialogs.prompt_dialog.close();return false})})}function b(e){var t,i,a,r,o,n;var s=e[0],l=e[1],c=e[2];t=Math.min(s,Math.min(l,c));i=Math.max(s,Math.max(l,c));a=i-t;n=(t+i)/2;o=0;if(n>0&&n<1){o=a/(n<.5?2*n:2-2*n)}r=0;if(a>0){if(i==s&&i!=l)r+=(l-c)/a;if(i==l&&i!=c)r+=2+(c-s)/a;if(i==c&&i!=s)r+=4+(s-l)/a;r/=6}return[r,o,n]}function y(e){var t,i,a,r,o;var n=e[0],s=e[1],l=e[2];i=l<=.5?l*(s+1):l+s-l*s;t=l*2-i;return[$h24.utils.hueToRGB(t,i,n+.33333),$h24.utils.hueToRGB(t,i,n),$h24.utils.hueToRGB(t,i,n-.33333)]}function k(e,t,i){i=i<0?i+1:i>1?i-1:i;if(i*6<1)return e+(t-e)*i*6;if(i*2<1)return t;if(i*3<2)return e+(t-e)*(.66666-i)*6;return e}var C=function(e,t){var i={videoWidth:1e3,videoHeight:514,shrinkHeightToFit:true,shrinkWidthToFit:true,onAfterClose:function(){},apiEvents:{finish:function(){var e=$h24.coreDialogs.h24_help_video_vimeo.content,t=e.find("iframe"),i=t.height(),a=t.width(),r=e.find(".h24_vimeo_player_buttons"),o=r.height(),n=parseInt(i/2-o/2,10),s=r.find(".h24_vimeo_player_exit_video"),l=s.width(),c=r.find(".h24_vimeo_player_replay_video"),f=c.width();if(!r.hasClass("h24_initialized")){s.css("left",parseInt(a/2-l/2,10));c.css("left",parseInt(a/2-f/2,10));r.css({"padding-top":n,height:i-n,width:a});r.css("padding-top",parseInt(i/2-o/2,10))}r.css({opacity:0,visibility:"visible"});r.animate({opacity:1});r.addClass("h24_initialized")}}};var t=$.extend(true,i,t);var a,r,o,n,s;if(t.shrinkHeightToFit&&$(window).height()<t.videoHeight){r=t.videoHeight/t.videoWidth;t.videoHeight=parseInt($(window).height()-15,10);t.videoWidth=parseInt(t.videoHeight/r,10)}if(t.shrinkWidthToFit&&$(window).width()<t.videoWidth){r=t.videoWidth/t.videoHeight;t.videoWidth=parseInt($(window).width()-50,10);t.videoHeight=parseInt(t.videoWidth/r,10)}a='<iframe src="//player.vimeo.com/video/'+e+'?title=0&autoplay=1&byline=0&portrait=0&api=1&color=5ABD32" width="'+t.videoWidth+'" height="'+t.videoHeight+'" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>'+'<div class="h24_vimeo_player_buttons" style="visibility:hidden;position:absolute;background-image:url(\''+$h24.publicdir+"css/common/images/transparent-black-50.png');top:0;\">"+'<div><a href="#" class="h24_button_primary h24_vimeo_player_exit_video" style="">'+$h24.phrase.GUIPhrase("Dialog-Vimeo","Close the video and continue")+"</a></div>"+'<div><a href="#" class="h24_button h24_vimeo_player_replay_video" style="margin-top:30px;">'+$h24.phrase.GUIPhrase("Dialog-Vimeo","Replay the video")+"</a></div>"+"</div>";o=$h24.coreDialog.create("h24_help_video_vimeo",a,{containerMode:"video",overlayClickToClose:true,width:t.videoWidth,onAfterClose:t.onAfterClose,eyecandy:false});n=o.content.find("> iframe");s=window.Froogaloop(n[0]);s.addEvent("ready",function(){for(var e in t.apiEvents){s.addEvent(e,t.apiEvents[e])}});n.data("vimeoPlayer",s);$h24.coreDialogs.h24_help_video_vimeo.content.find(".h24_vimeo_player_buttons").click(function(e){var t=$(e.target);if(t.hasClass("h24_vimeo_player_exit_video")){$h24.coreDialogs.h24_help_video_vimeo.close()}else if(t.hasClass("h24_vimeo_player_replay_video")){s.api("seekTo",0);s.api("play");$h24.coreDialogs.h24_help_video_vimeo.content.find(".h24_vimeo_player_buttons").animate({opacity:0},function(){$(this).css("visibility","hidden")})}return false});return s};function x(e,t){var i=$("<div />",{id:"h24_video_player_placeholder",href:e}).css({height:t.videoHeight,width:t.videoWidth}).appendTo("body");var a=$h24.coreDialog.create("video-player",i,{containerMode:"video",height:t.videoHeight,width:t.videoWidth,overlayClickToClose:true,onClose:function(){$f(0).stop();$f(0).unload();if($h24.browser=="ie8"||$h24.browser=="ie7"){var e=document.getElementById("h24_video_player_placeholder_api");if(e){for(var t in e){if(typeof e[t]=="function"){e[t]=null}}e.parentNode.removeChild(e)}}}});a.content.css("padding",0);$f("h24_video_player_placeholder",{src:$h24.publicdir+"js/flowplayer-3.2.6/flowplayer-3.2.6.swf",wmode:"transparent"},{onLoad:function(){this.setVolume(100)},clip:{scaling:"fit"},canvas:{background:"transparent none inherit inherit inherit"},plugins:{controls:{url:$h24.publicdir+"js/flowplayer-3.2.6/flowplayer.controls-3.2.4.swf",autoHide:"always",hideDelay:1e3,volumeSliderGradient:"none",progressColor:"#bababa",timeColor:"#bababa",borderRadius:"0px",backgroundGradient:[.6,.3,0,0,0],tooltipColor:"#777777",buttonOverColor:"#777777",volumeSliderColor:"#000000",bufferGradient:"none",progressGradient:"medium",buttonColor:"#949494",tooltipTextColor:"#ffffff",durationColor:"#b5b5b5",backgroundColor:"#222222",sliderColor:"#666666",sliderGradient:"none",bufferColor:"#666666",timeBgColor:"#555555",height:24,opacity:1}},onBeforeUnload:function(){return false}}).play()}function T(e,t){var i=e.substr(1,2);var a=e.substr(3,2);var r=e.substr(5,2);var o=parseInt(i,16);var n=parseInt(a,16);var s=parseInt(r,16);var l=$h24.utils.rgbToHsv(o,n,s);l["2"]+=t;if(l["2"]>100)l["2"]=100;var c=$h24.utils.hsvToRgb(l["0"],l["1"],l["2"]);var f=c["0"].toString(16);if(f.length==1)f="0"+f;var d=c["1"].toString(16);if(d.length==1)d="0"+d;var u=c["2"].toString(16);if(u.length==1)u="0"+u;return"#"+f+d+u}function w(e,t){var i=e.substr(1,2);var a=e.substr(3,2);var r=e.substr(5,2);var o=parseInt(i,16);var n=parseInt(a,16);var s=parseInt(r,16);var l=$h24.utils.rgbToHsv(o,n,s);l["2"]-=t;if(l["2"]<0)l["2"]=0;var c=$h24.utils.hsvToRgb(l["0"],l["1"],l["2"]);var f=c["0"].toString(16);if(f.length==1)f="0"+f;var d=c["1"].toString(16);if(d.length==1)d="0"+d;var u=c["2"].toString(16);if(u.length==1)u="0"+u;return"#"+f+d+u}function S(e){var t=e.substr(1,2);var i=e.substr(3,2);var a=e.substr(5,2);var r=parseInt(t,16);var o=parseInt(i,16);var n=parseInt(a,16);var s=$h24.utils.rgbToHsv(r,o,n);var l=s["2"];if(l<50)var c="#CCCCCC";else var c="#000000";return c}function I(e,t,i){var t=t/100,i=i/100;var a=Math.floor(e/60%6);var r=e/60-a;var o=i*(1-t);var n=i*(1-r*t);var s=i*(1-(1-r)*t);var l=[];switch(a){case 0:l=[i,s,o];break;case 1:l=[n,i,o];break;case 2:l=[o,i,s];break;case 3:l=[o,n,i];break;case 4:l=[s,o,i];break;case 5:l=[i,o,n];break}var c=Math.min(255,Math.round(l[0]*256)),f=Math.min(255,Math.round(l[1]*256)),d=Math.min(255,Math.round(l[2]*256));return[c,f,d]}function D(e,t,i){var e=e/255,t=t/255,i=i/255;var a=Math.min(Math.min(e,t),i),r=Math.max(Math.max(e,t),i),o=r-a;var n=r,s,l;if(r==a){l=0}else if(r==e){l=60*((t-i)/(r-a))%360}else if(r==t){l=60*((i-e)/(r-a))+120}else if(r==i){l=60*((e-t)/(r-a))+240}if(l<0){l+=360}if(r==0){s=0}else{s=1-a/r}return[Math.round(l),Math.round(s*100),Math.round(n*100)]}function L(e,t,i){var a=$(t).css("color");a=$h24.utils.rgbToHex(a);var r=$.farbtastic(i);r.linkTo(function(i){$(e).attr({value:i});$(e).attr({style:"background-color:"+i});$(t).attr({style:"color:"+i})});r.setColor(a)}var M=function(e){var t;var i=function(e,t){return e<<t|e>>>32-t};var a=function(e,t){var i,a,r,o,n;r=e&2147483648;o=t&2147483648;i=e&1073741824;a=t&1073741824;n=(e&1073741823)+(t&1073741823);if(i&a){return n^2147483648^r^o}if(i|a){if(n&1073741824){return n^3221225472^r^o}else{return n^1073741824^r^o}}else{return n^r^o}};var r=function(e,t,i){return e&t|~e&i};var o=function(e,t,i){return e&i|t&~i};var n=function(e,t,i){return e^t^i};var s=function(e,t,i){return t^(e|~i)};var l=function(e,t,o,n,s,l,c){e=a(e,a(a(r(t,o,n),s),c));return a(i(e,l),t)};var c=function(e,t,r,n,s,l,c){e=a(e,a(a(o(t,r,n),s),c));return a(i(e,l),t)};var f=function(e,t,r,o,s,l,c){e=a(e,a(a(n(t,r,o),s),c));return a(i(e,l),t)};var d=function(e,t,r,o,n,l,c){e=a(e,a(a(s(t,r,o),n),c));return a(i(e,l),t)};var u=function(e){var t;var i=e.length;var a=i+8;var r=(a-a%64)/64;var o=(r+1)*16;var n=new Array(o-1);var s=0;var l=0;while(l<i){t=(l-l%4)/4;s=l%4*8;n[t]=n[t]|e.charCodeAt(l)<<s;l++}t=(l-l%4)/4;s=l%4*8;n[t]=n[t]|128<<s;n[o-2]=i<<3;n[o-1]=i>>>29;return n};var h=function(e){var t="",i="",a,r;for(r=0;r<=3;r++){a=e>>>r*8&255;i="0"+a.toString(16);t=t+i.substr(i.length-2,2)}return t};var p=[],v,g,m,_,b,y,$,k,C,x=7,T=12,w=17,S=22,I=5,D=9,L=14,M=20,H=4,j=11,N=16,A=23,W=6,O=10,G=15,E=21;e=$h24.utils.utf8_encode(e);p=u(e);y=1732584193;$=4023233417;k=2562383102;C=271733878;t=p.length;for(v=0;v<t;v+=16){g=y;m=$;_=k;b=C;y=l(y,$,k,C,p[v+0],x,3614090360);C=l(C,y,$,k,p[v+1],T,3905402710);k=l(k,C,y,$,p[v+2],w,606105819);$=l($,k,C,y,p[v+3],S,3250441966);y=l(y,$,k,C,p[v+4],x,4118548399);C=l(C,y,$,k,p[v+5],T,1200080426);k=l(k,C,y,$,p[v+6],w,2821735955);$=l($,k,C,y,p[v+7],S,4249261313);y=l(y,$,k,C,p[v+8],x,1770035416);C=l(C,y,$,k,p[v+9],T,2336552879);k=l(k,C,y,$,p[v+10],w,4294925233);$=l($,k,C,y,p[v+11],S,2304563134);y=l(y,$,k,C,p[v+12],x,1804603682);C=l(C,y,$,k,p[v+13],T,4254626195);k=l(k,C,y,$,p[v+14],w,2792965006);$=l($,k,C,y,p[v+15],S,1236535329);y=c(y,$,k,C,p[v+1],I,4129170786);C=c(C,y,$,k,p[v+6],D,3225465664);k=c(k,C,y,$,p[v+11],L,643717713);$=c($,k,C,y,p[v+0],M,3921069994);y=c(y,$,k,C,p[v+5],I,3593408605);C=c(C,y,$,k,p[v+10],D,38016083);k=c(k,C,y,$,p[v+15],L,3634488961);$=c($,k,C,y,p[v+4],M,3889429448);y=c(y,$,k,C,p[v+9],I,568446438);C=c(C,y,$,k,p[v+14],D,3275163606);k=c(k,C,y,$,p[v+3],L,4107603335);$=c($,k,C,y,p[v+8],M,1163531501);y=c(y,$,k,C,p[v+13],I,2850285829);C=c(C,y,$,k,p[v+2],D,4243563512);k=c(k,C,y,$,p[v+7],L,1735328473);$=c($,k,C,y,p[v+12],M,2368359562);y=f(y,$,k,C,p[v+5],H,4294588738);C=f(C,y,$,k,p[v+8],j,2272392833);k=f(k,C,y,$,p[v+11],N,1839030562);$=f($,k,C,y,p[v+14],A,4259657740);y=f(y,$,k,C,p[v+1],H,2763975236);C=f(C,y,$,k,p[v+4],j,1272893353);k=f(k,C,y,$,p[v+7],N,4139469664);$=f($,k,C,y,p[v+10],A,3200236656);y=f(y,$,k,C,p[v+13],H,681279174);C=f(C,y,$,k,p[v+0],j,3936430074);k=f(k,C,y,$,p[v+3],N,3572445317);$=f($,k,C,y,p[v+6],A,76029189);y=f(y,$,k,C,p[v+9],H,3654602809);C=f(C,y,$,k,p[v+12],j,3873151461);k=f(k,C,y,$,p[v+15],N,530742520);$=f($,k,C,y,p[v+2],A,3299628645);y=d(y,$,k,C,p[v+0],W,4096336452);C=d(C,y,$,k,p[v+7],O,1126891415);k=d(k,C,y,$,p[v+14],G,2878612391);$=d($,k,C,y,p[v+5],E,4237533241);y=d(y,$,k,C,p[v+12],W,1700485571);C=d(C,y,$,k,p[v+3],O,2399980690);k=d(k,C,y,$,p[v+10],G,4293915773);$=d($,k,C,y,p[v+1],E,2240044497);y=d(y,$,k,C,p[v+8],W,1873313359);C=d(C,y,$,k,p[v+15],O,4264355552);k=d(k,C,y,$,p[v+6],G,2734768916);$=d($,k,C,y,p[v+13],E,1309151649);y=d(y,$,k,C,p[v+4],W,4149444226);C=d(C,y,$,k,p[v+11],O,3174756917);k=d(k,C,y,$,p[v+2],G,718787259);$=d($,k,C,y,p[v+9],E,3951481745);y=a(y,g);$=a($,m);k=a(k,_);C=a(C,b)}var F=h(y)+h($)+h(k)+h(C);return F.toLowerCase()};var H=function(e){if(e===null||typeof e==="undefined"){return""}var t=e+"";var i="",a,r,o=0;a=r=0;o=t.length;for(var n=0;n<o;n++){var s=t.charCodeAt(n);var l=null;if(s<128){r++}else if(s>127&&s<2048){l=String.fromCharCode(s>>6|192)+String.fromCharCode(s&63|128)}else{l=String.fromCharCode(s>>12|224)+String.fromCharCode(s>>6&63|128)+String.fromCharCode(s&63|128)}if(l!==null){if(r>a){i+=t.slice(a,r)}i+=l;a=r=n+1}}if(r>a){i+=t.slice(a,o)}return i};function j(e,t){if(typeof e=="undefined"){var e=10}if(typeof t!="undefined"&&t){var i="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789"}else{var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"}var a="";for(var r=0;r<e;r++){var o=Math.floor(Math.random()*i.length);a+=i.substring(o,o+1)}return a}var N=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};var A=function(e){var t={color:"#000000",dialogSettings:{fixed:true,width:470,draggable:true,transparentOverlay:false,title:$h24.phrase.GUIPhrase("Dialogs","Choose Color")},dragCallback:null,changedCallback:null,saveCallback:function(e){},allowTransparency:true,hideTopPanel:true,showSwatches:true};var i='<div class="h24_canvas_picker"></div>'+'<div class="h24_buttons_dialog h24_canvas_picker_bottom_buttons"><a href="#" class="h24_button_primary h24_button_icon h24_canvas_picker_ok_button"><img class="noborder h24_canvas_picker_ok_button" src="'+$h24.publicdir+'css/common/images/tick-white.png" /> '+$h24.phrase.GUIPhrase("General","Select color")+"</a></div>",a,r,o,n=false;e=$.extend(true,t,e);if(e.hideTopPanel){o=$("#admin_panel");if(parseInt(o.css("margin-top"),10)<0){n=false}else{n=true}}r=$h24.coreDialog.create("h24_canvas_picker",i,e.dialogSettings);a=r.content.find(".h24_canvas_picker");a.canvasPicker({color:e.color,allowTransparency:e.allowTransparency,showSwatches:e.showSwatches,dragCallback:e.dragCallback,changedCallback:e.changedCallback});r.content.find(".h24_canvas_picker_bottom_buttons").click(function(t){var i=$(t.target);if(i.hasClass("h24_canvas_picker_ok_button")){if(n){}e.saveCallback.call(r,a.canvasPickerGetColor());r.close();return false}})};var W=function(e){var t={};var i=e.split("/");for(var a=0;a<i.length;a++){if(typeof i[a+1]!="undefined"){t[i[a]]=i[a+1];a++}else{break}}return t};function O(e,t,i){var a={title:"",timeout:true,timeoutTime:5,closeButton:true};i=$.extend(a,i);if(typeof i.container!="undefined"){var r=$("#"+i.container)}else{var r=$("#h24_notification_container");if(r.length==0){r=$('<div id="h24_notification_container">').appendTo("body")}}var o=$('<div class="h24_notification"><p class="clearfix">'+e+"</p></div>");if(!!t&&t!=""){o.addClass("h24_notification_has-icon h24_notification_"+t)}if(!!i.css&&i.css!=""){o.css(i.css)}if(i.title!=""){o.prepend('<h3 class="h24_notification_title">'+i.title+"</h3>")}if(i.closeButton==true){o.prepend('<button type="button" class="close" data-dismiss="notification">×</button>')}r.prepend(o);if(i.timeout==true){var n=setTimeout(function(){if(Modernizr.cssanimations)o.addClass("h24_notification_dismissed");else o.remove()},i.timeoutTime*1e3);o.data("notificationTimer",n)}if(r.data("init")!=true){r.data("init",true);r.on("click","[data-dismiss=notification]",function(e){var t=$(e.target).closest(".h24_notification");e.preventDefault();if(Modernizr.cssanimations)t.addClass("h24_notification_dismissed");else t.remove();clearTimeout(t.data("notificationTimer"))});r.on("click","[data-undo-block-delete]",function(e){e.preventDefault();$h24.block.undoDelete($(e.target).data("undo-block-delete"))});r.on("webkitAnimationEnd oAnimationEnd msAnimationEnd animationend",".h24_notification",function(e){if(e.originalEvent.animationName==="slide"){$(e.target).closest(".h24_notification").remove()}})}}var G=function(e){$(function(){if(typeof e=="object"){for(var t in e){var i=e[t];if(typeof i.type=="undefined"){i.type=""}if(typeof i.params!="object"){i.params={}}$h24.utils.notification(i.text,i.type,i.params)}}})};var E=function(e){if(typeof e!="undefined"){$notifications=$("#h24_notification_container "+e).closest(".h24_notification")}else{$notifications=$("#h24_notification_container .h24_notification")}if(Modernizr.cssanimations){$notifications.addClass("h24_notification_dismissed")}else{$notifications.remove()}$notifications.each(function(){clearTimeout($(this).data("notificationTimer"))})};var F=function(e,t,i,a){var i=typeof i=="undefined"?{}:i,r=1e4,a=typeof a!="function"?function(){}:a;if(typeof $h24.preloadedData=="undefined"){$h24.preloadedData={}}else if(typeof $h24.preloadedData[e]!="undefined"){return $h24.preloadedData[e]}$h24.preloadedData[e]={loaded:false,data:"",onLoad:a};i.__skip_loading_overlay=true;$h24.post(t,i,function(t){$h24.preloadedData[e].data=t;$h24.preloadedData[e].loaded=true;$h24.preloadedData[e].onLoad(t)});return $h24.preloadedData[e]};var R=function(e,t,i,a){if(typeof $h24.preloadedData=="undefined"||typeof $h24.preloadedData!="undefined"&&typeof $h24.preloadedData[e]=="undefined"){$h24.utils.preloadData(e,t,i,a);return}if($h24.preloadedData[e].loaded){a($h24.preloadedData[e].data)}else{$h24.preloadedData[e].onLoad=a}};var P=function(e,t,i){if(typeof i=="undefined"){var i=".."}if(e.length>t){return e.substring(0,t)+i}else{return e}};var z=function(e){return!isNaN(parseInt(e,10))&&parseFloat(e,10)==parseInt(e,10)};var B=function(e){var t="";for(var i in e){if(!!i){t+=i+" { \n";for(var a in e[i]){t+=a+": "+e[i][a]+";\n"}t+="}\n"}}return t};var U=function(e){var t=$(e),i=t.prev("input[type=text]"),a=t.siblings("div#info"),r=i.val(),o=u(r);var n="";if(o){$h24.post($h24.slashwebroot+"H24-Third-Party/Mailchimp-Subscribe",{email:r},function(e){if(e){n="Tack för att du registrerade dig! Du kommer månadsvis att få vårt nyhetsbrev med de senaste nyheterna och inläggen från Hemsida24";a.css("color","green")}else{n="Något gick fel, försök igen senare.";a.css("color","#A40000")}a.text(n)})}else{n="Vänligen se över din e-postadress, det är något som inte stämmer.";a.css("color","#A40000");a.text(n)}};var V=function(e,t){var i=$("<div>"+t+"</div>"),a=$("#block_"+e+"_text_content").css("font-size"),r=$("#block_"+e+"_text_content").css("font-style"),o,n,s,l,c;i.find("a").each(function(){var e=$(this);if(!e.attr("href")&&!e.attr("name")){e.replaceWith(e.html())}});i.find("[style]").each(function(){var e=$(this),t=e.attr("style"),i=t.split(";"),r=[];for(var f=0;f<i.length;f++){r.push(jQuery.trim(i[f].split(":")[0]))}if(r.indexOf("line-height")>-1){e.css("line-height","")}if(r.indexOf("letter-spacing")>-1){e.css("letter-spacing","")}if(r.indexOf("font-family")>-1&&$h24.design_system==1){e.css("font-family","")}o=r.indexOf("font-style")>-1&&e.css("font-style")=="normal";n=r.indexOf("font-size")>-1&&parseInt(e.css("font-size"),10)===parseInt(a,10);if(o||n){s=e.parentsUntil(".text_content");l=true;c=true;s.each(function(){var e=$(this),t=e.attr("style"),i=typeof t=="string"&&t.indexOf("font-style")>-1,r=typeof t=="string"&&t.indexOf("font-size")>-1;if(o&&i){if(e.css("font-style"!=="normal")){l=false;return false}else{return true}}if(n&&r){if(parseInt(e.css("font-size"),1)!==parseInt(a,10)){c=false;return false}else{return true}}});if(o&&l){e.css("font-style","")}if(n&&c){e.css("font-size","")}}if(typeof e.attr("style")=="string"&&jQuery.trim(e.attr("style")).length==0){e.removeAttr("style")}});return i.html()};return{NOTIFICATION_STYLE_ACCEPT:"accept",NOTIFICATION_STYLE_INFO:"info",NOTIFICATION_STYLE_WARNING:"warning",NOTIFICATION_STYLE_ERROR:"error",NOTIFICATION_STYLE_HELP:"help",ajaxLoaderLoading:e,ajaxLoaderStart:r,ajaxLoaderStop:f,ajaxLoaderTimeout:s,ajaxLoaderStillWorking:c,ajaxLoaderTimer:t,mailValidation:u,blueOverlaySpinner:d,getParameters:h,rgbToHex:p,promptDialog:_,RGBToHSL:b,HSLToRGB:y,hexToRgb:v,getBackgroundShade:g,hueToRGB:k,colorPickerDialog:m,colorPicker:A,showLoadingSpinner:r,hideLoadingSpinner:f,loadVideo:x,enlightenColor:T,endarkenColor:w,getReadibleTextColor:S,hsvToRgb:I,rgbToHsv:D,openColorWheel:L,md5:M,utf8_encode:H,getRandomString:j,vimeoVideo:C,htmlspecialchars:N,legacyAjaxToObject:W,notification:O,notificationClear:E,preloadData:F,getPreloadedData:R,shortenString:P,isInt:z,objectToCss:B,notifications:G,filterContenteditable:V,getScrollbarWidth:o,touchMode:a,detectTouchMode:l,versionCompare:n,addNewsletterSubscriber:U}}();
h24core.prototype.image_manager=function(){var e;function a(){closeDialogBox();if(typeof $h24.image_manager.imageManagerCloseCallback=="function"){$h24.image_manager.imageManagerCloseCallback.call(this)}}function o(e){saveCommonPictureUpload(e)}function i(){saveAndCloseImageManager()}var l=function(e,a,o,i){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"imageEditors"},function(l){var n=$h24.dialog.create("image_editors",l,{width:500,overlayZIndex:6e3});if(!swfobject.hasFlashPlayerVersion("10.0.23")){$("#h24_image_editors_flash_warning").show()}n.markup.find(".h24_image_editors_dialog_container").on("click","button",function(l){var r=$(l.target),t;if(r.hasClass("h24_image_editors_dialog_choice")){t=r}else{t=r.closest(".h24_image_editors_dialog_choice")}if(t.length==1){if(t.hasClass("h24_image_editors_pixlr_picnik")){n.close();if(e=="gallery"){$h24.picnik.open(e,a,null,function(e){if(e){$h24.utils.ajaxLoaderStart();reloadColumns()}})}else if(e=="store"){$h24.picnik.open("store",a,null,function(e){var o=$h24.store.getProductImageOrderArray();if(typeof e!="undefined"){if(e>0){for(var i in o){if(o[i]==a){o[i]=e}}$h24.store.updateImageManager(o)}}})}else if(e=="imageManager"){$h24.picnik.open("gallery",a,null,function(){var e=$("#im_current_category option:selected").val();imageManagerSaveChanges();imageManagerChangeCategory(e)})}else if(e=="collage"){$h24.picnik.open(e,a,o,function(e,a){if(typeof i=="function"){i(a)}})}else if(e=="block"){$h24.picnik.open(e,a,o,function(e,a){var o=e?"save":"cancel";if(typeof i=="function"){i.call(this,o,a)}if(e){$h24.utils.ajaxLoaderStart();reloadColumns()}})}else{$h24.picnik.open(e,a,o,function(e){if(e){$h24.utils.ajaxLoaderStart();reloadColumns()}})}return false}}})})};function n(e){$h24.block.remove(e,$h24.phrase.GUIPhrase("Block-General","Do you want to remove this gallery? (Doesn't affect any other galleries and no images are deleted)"))}function r(){$h24.image_database.open({uploadCallback:function(e){if(e>0){var a=$("#common_picture_upload_hidden").val();if(a!=-1){$("#common_picture_upload_hidden").val(a+"/"+e)}else{$("#common_picture_upload_hidden").val(e)}var o={id:e,type:"picture",size:50,square:1};$.get($h24.slashwebroot+"Upload/Generic-Thumbnail",o,function(e){$("#common_picture_upload_preview").append(e)})}},customUploader:function(){$h24.coreUploader.create("h24_image_database_uploader",$("#h24_image_database_uploader"),{fileUploaded:function(e){var a=$("#common_picture_upload_hidden"),o=a.val(),i;if(e.successful){if(o==-1){i=[]}else{i=o.split("/")}i.push(e.pictureid);a.val(i.join("/"));$.get($h24.slashwebroot+"H24-Upload/Legacy-Generic-Thumbnail",{type:"picture",square:1,size:50,id:e.pictureid},function(e){$("#common_picture_upload_preview").append(e)})}},allFilesUploaded:function(){$h24.image_database.closeDialog()},maxQueuedFiles:100,mode:$h24.coreUploader.IMAGE_UPLOADER_MODE,maxFileSize:"10mb"})}})}function t(e){var a={selectedTab:0,uploadCategory:0,manageCategory:0,blockid:0,selectCreateCategory:false,defaultCategoryName:"",closeCallback:null};var e=$.extend(true,a,e);$h24.image_manager.imageManagerCloseCallback=e.closeCallback;showDialog("#image_manager",e.selectedTab);loadImageManagerTabs(e.uploadCategory,e.manageCategory,e.blockid,e.selectCreateCategory,e.defaultCategoryName)}return{imageEditors:l,close:a,_saveCommonPictureUpload:o,_saveAndCloseImageManager:i,galleryDelete:n,imageDatabase:r,imageManager:t,imageManagerCloseCallback:e}}();
h24core.prototype.customer_analytics=function(){var e=this;var a=null;var t={identifier:"",name:"chartPageViews",freq:"Day",startDate:"",endDate:""};function n(e){$.extend(t,e);var a=false;$h24.customer_analytics.selInterval(a);r();m()}function o(e){if(typeof e!=="function"){if($h24.devmode){console.error("customer_analytics.getChartData() Callback is not a function")}else{console.error("customer_analytics could not load chart data")}}else{$.getJSON("/"+$h24.webroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/HomepageSettingsModel/modelaction/load_hs6_chart_json/name/"+t.name+"/start/"+t.startDate+"/end/"+t.endDate+"/freq/"+t.freq,e)}}function r(){o(function(e){a=$h24.charts.renderDefaultChart(t.identifier,e.labels,e.data,e.options)})}function l(){o(function(e){var t=0;$h24.charts.updateChart(a,e.labels,e.data,e.options,t)})}function s(){t.startDate=$("#h24_startDate").val();t.endDate=$("#h24_endDate").val();f()}function i(){$("#h24_personalInterval, #h24_wrongIntervalTip").hide().fadeOut()}function h(){$("#h24_personalInterval").show().fadeIn();$("#h24_wrongIntervalTip").hide().fadeOut()}function d(e){if($("#h24_selInterval").val()=="personalInterval"){$("#h24_personalInterval").show().fadeIn()}else{$("#h24_personalInterval").hide().fadeOut();var a=$("#h24_selInterval option:selected").val().split(",");t.startDate=a[0];t.endDate=a[1];if(e==true){f()}}}function c(e){t.freq=e;f()}function f(){l();m()}function u(e){t.name=e;f()}function m(){$("#fragment-6").loadingSpinner(true);$.ajax({method:"get",url:$h24.slashwebroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/HomepageSettingsModel/modelaction/load_hs6_chart_table/name/"+t.name+"/start/"+t.startDate+"/end/"+t.endDate+"/freq/"+t.freq+"/",success:function(e){$("#h24_statTable").html(e);$("#fragment-6").loadingSpinner(false)}})}return{init:n,setPersonalInterval:s,hidePersonalIntervalBox:i,showPersonalIntervalBox:h,selInterval:d,setFreq:c,changeChart:u,updateTable:m,updateChart:l}}();
h24core.prototype.uploader=function(type,placeholder,init_settings){var settings={uploader_start_mode:"flash",file_upload_limit:50,file_queue_limit:1,file_iframe_queue_limit:0,file_types:"*.*",file_size_limit:"150MB",file_types_description:"All files",post_params:{homepageid:$h24.homepageid},thumbs:false,thumbs_placeholder:null,thumbs_picture_size:50,thumbs_picture_square:true,thumbs_file_icon:"large",file_upload_success:function(e,s,t){},before_upload:function(e,s){},uploads_complete:function(e,s){},swfupload_loaded_handler:function(){},restart_iframe_uploaders:true,show_status_message:true,background_decoration:false,preventModeSwitching:false,slimMode:true};var post_params={homepageid:$h24.homepageid,number_of_files:1,uploader_type:"flash",_sessionid:$h24.sessionid,design_revision_id:0,theme_id:0};var uploader_object=this;$.extend(settings,init_settings);$.extend(post_params,settings.post_params);post_params.file_types=settings.file_types;settings.post_params=post_params;this.type=type;this.placeholder=placeholder;this.thumbs=settings.thumbs;this.thumbs_placeholder=settings.thumbs_placeholder;this.thumbs_picture_size=settings.thumbs_picture_size;this.thumbs_picture_square=settings.thumbs_picture_square;this.thumbs_file_icon=settings.thumbs_file_icon;this.restart_iframe_uploaders=settings.restart_iframe_uploaders;this.file_upload_success=settings.file_upload_success;this.before_upload=settings.before_upload;this.uploads_complete=settings.uploads_complete;this.swfupload_loaded_handler=settings.swfupload_loaded_handler;this.uploaded_file_ids=[];var swf_upload_settings={debug:false,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,file_size_limit:settings.file_size_limit,file_types:settings.file_types,file_types_description:settings.file_types_description,file_upload_limit:settings.file_upload_limit,file_queue_limit:settings.file_queue_limit,flash_url:$h24.publicdir+"js/swfupload-2.2.0.1/swfupload.swf",button_placeholder_id:placeholder+"_swfupload",post_params:settings.post_params};if(type=="picture"){swf_upload_settings.upload_url=$h24.uploadtarget+"Generic-Picture";if(settings.file_queue_limit==1){swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/button_h24.png";swf_upload_settings.button_width=158;swf_upload_settings.button_height=29}else{swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/button_h24_images.png";swf_upload_settings.button_width=175;swf_upload_settings.button_height=29}}else if(type=="file"){swf_upload_settings.upload_url=$h24.uploadtarget+"Generic-User-File";if(settings.file_queue_limit==1){swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/upload_h24_file.png";swf_upload_settings.button_width=92;swf_upload_settings.button_height=29}else{swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/button_h24_files.png";swf_upload_settings.button_width=164;swf_upload_settings.button_height=29}}else if(type=="design"){swf_upload_settings.upload_url=$h24.uploadtarget+"Generic-Design-File";if(settings.file_queue_limit==1){swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/upload_h24_file.png";swf_upload_settings.button_width=139;swf_upload_settings.button_height=29}else{swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/button_h24_files.png";swf_upload_settings.button_width=200;swf_upload_settings.button_height=29}}else if(type=="theme"){swf_upload_settings.upload_url=$h24.uploadtarget+"Generic-Theme-File";if(settings.file_queue_limit==1){swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/upload_h24_file.png";swf_upload_settings.button_width=139;swf_upload_settings.button_height=29}else{swf_upload_settings.button_image_url=$h24.publicdir+"css/common/images/swfupload/button_h24_files.png";swf_upload_settings.button_width=200;swf_upload_settings.button_height=29}}swf_upload_settings.file_queued_handler=function(){};swf_upload_settings.file_queue_error_handler=function(e,s,t){if(s===SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){alert($h24.phrase.GUIPhrase("Uploader","You have attempted to queue too many files")+".\n"+(t===0?$h24.phrase.GUIPhrase("Uploader","You have reached the upload limit")+".":t>1?$h24.phrase.GUIPhrase("Uploader","You may select up to %number% files",{number:t})+".":$h24.phrase.GUIPhrase("Uploader","You may select one file")+"."));return}switch(s){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:alert($h24.phrase.GUIPhrase("Uploader","File is too big")+".");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:alert($h24.phrase.GUIPhrase("Uploader","Cannot upload zero byte files")+".");break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:alert($h24.phrase.GUIPhrase("Uploader","Invalid file type")+".");break;default:if(e!==null){alert($h24.phrase.GUIPhrase("Uploader","Unexpected error")+".")}break}};swf_upload_settings.file_dialog_complete_handler=function(e,s){if(e>0)var t=false;else var t=true;settings.before_upload.call(uploader_object,"flash",t);$("#"+placeholder+" div.h24_upload_status_messages p").hide();this.startUpload()};swf_upload_settings.upload_start_handler=function(e){$("#"+placeholder+" .image_progress_bar").show();if(settings.slimMode){$("#"+placeholder+" .swfupload").height(0)}return true};swf_upload_settings.upload_progress_handler=function(e,s,t){var o=Math.floor(s/t*100);var l=Math.floor(o*1.2);l=l-119;if(l==0){l=1}if(l==-119){l=-120}$("#"+placeholder+" .uploader_progress").text(o+"%");$("#"+placeholder+" .percentImage1").css("background-position",l+"px 0");if(l==1&&$h24.preferred_file_storage=="s3"){$("#"+placeholder+" .s3_progress").show()}};swf_upload_settings.upload_error_handler=function(e,s,t){switch(s){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:uploader_object.error("flash",$h24.uploader.UPLOAD_LIMIT_EXCEEDED);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:settings.uploads_complete.call(uploader_object,"flash",$h24.uploader.GENERAL_ERROR);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break;default:uploader_object.error("flash",$h24.uploader.GENERAL_ERROR);break}};swf_upload_settings.upload_success_handler=function(file,serverData){if($h24.devmode&&typeof console=="object"){$h24.uploader.consoleLog("Uploader AJAX response:");$h24.uploader.consoleLog(serverData)}eval("var json_object = "+serverData);uploader_object.run_file_upload_success("flash",json_object)};swf_upload_settings.upload_complete_handler=function(e){},swf_upload_settings.queue_complete_handler=function(e){$("#"+placeholder+" .s3_progress").hide();$("#"+placeholder+" .image_progress_bar").hide();$("#"+placeholder+" .percentImage1").css("background-position","-120px 0");$("#"+placeholder+" .uploader_progress").text("0%");settings.uploads_complete.call(uploader_object,"flash");if(settings.slimMode){$("#"+placeholder+" .swfupload").height(swf_upload_settings.button_height)}};swf_upload_settings.swfupload_loaded_handler=settings.swfupload_loaded_handler;var background_decoration=settings.background_decoration?1:0;var slimMode=settings.slimMode?1:0;var preventModeSwitching=settings.preventModeSwitching?1:0;var get_params={placeholder:this.placeholder,type:this.type,files:settings.file_queue_limit,iframe_limit:settings.file_iframe_queue_limit,file_types:swf_upload_settings.file_types,uploader_start_mode:settings.uploader_start_mode,background_decoration:background_decoration,slimMode:slimMode,preventModeSwitching:preventModeSwitching};$.extend(get_params,post_params);$.get($h24.slashwebroot+"Upload/Generic-Uploader",get_params,function(e){$("#"+uploader_object.placeholder).replaceWith(e);$("#"+uploader_object.placeholder+" span.h24_max_upload_file_size").text(settings.file_size_limit);uploader_object.swf_upload=new SWFUpload(swf_upload_settings)});this.reset=function(){var e=$("#"+uploader_object.placeholder+" input[name=iframe_src]").val();$("#"+uploader_object.placeholder+" iframe").attr("src",e)};this.run_file_upload_success=function(e,s,t){var o=false;var l=[];if(e=="flash"&&s.success){if(uploader_object.type=="picture"){l[0]=s.pictureid}else if(uploader_object.type=="file"){l[0]=s.user_file_id}else if(uploader_object.type=="design"){l[0]=s.design_file_id}else if(uploader_object.type=="theme"){l[0]=s.original_theme_file_id}if(settings.show_status_message&&settings.slimMode==false){$("#"+placeholder+" p.h24_upload_status_success").show()}o=true}else if(e=="flash"&&!s.success){uploader_object.error(e,$h24.uploader[s.error])}else if(e=="iframe"){if(uploader_object.type=="picture"){for(var a=0;a<s.pictures.length;a++){if(s.pictures[a].success){l[a]=s.pictures[a].pictureid;if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_success").show();o=true}else{uploader_object.error(e,$h24.uploader[s.pictures[a].error])}}}else if(uploader_object.type=="file"){for(var a=0;a<s.files.length;a++){if(s.files[a].success){l[a]=s.files[a].user_file_id;if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_success").show();o=true}else{uploader_object.error(e,$h24.uploader[s.files[a].error])}}}else if(uploader_object.type=="design"){for(var a=0;a<s.files.length;a++){if(s.files[a].success){l[a]=s.files[a].design_file_id;if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_success").show();o=true}else{uploader_object.error(e,$h24.uploader[s.files[a].error])}}}else if(uploader_object.type=="theme"){for(var a=0;a<s.files.length;a++){if(s.files[a].success){l[a]=s.files[a].original_theme_file_id;if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_success").show();o=true}else{uploader_object.error(e,$h24.uploader[s.files[a].error])}}}}if(o){for(var a=0;a<l.length;a++){uploader_object.uploaded_file_ids[uploader_object.uploaded_file_ids.length]=l[a]}if(settings.thumbs)uploader_object.createThumbs(e,l);uploader_object.file_upload_success.call(uploader_object,e,s,l);if(typeof t=="function")t.call(this)}};this.error=function(e,s){switch(s){case $h24.uploader.FORM_ERROR:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_form_error").show();break;case $h24.uploader.GENERAL_ERROR:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_general_error").show();break;case $h24.uploader.INSUFFICIENT_SPACE_ERROR:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_insufficient_space_error").show();break;case $h24.uploader.FORMAT_ERROR:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_format_error").show();break;case $h24.uploader.UPLOAD_LIMIT_EXCEEDED:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_upload_limit_exceeded").show();break;case $h24.uploader.STORAGE_BACKEND_ERROR:if(settings.show_status_message)$("#"+placeholder+" p.h24_upload_status_storage_backend_error").show();break}try{uploader_object.swf_upload.cancelQueue()}catch(t){}settings.uploads_complete.call(uploader_object,e,s)};this.createThumbs=function(e,s){if(uploader_object.thumbs_placeholder!=null){var t={type:uploader_object.type};if(uploader_object.type=="picture"){t.size=uploader_object.thumbs_picture_size;if(uploader_object.thumbs_picture_square)t.square=1;else t.square=0}else if(uploader_object.type=="file"){t.size=uploader_object.thumbs_file_icon}else if(uploader_object.type=="design_file_id"){t.size=uploader_object.thumbs_file_icon}for(var o=0;o<s.length;o++){t.id=s[o];$.get($h24.slashwebroot+"Upload/Generic-Thumbnail",t,function(e){$("#"+uploader_object.thumbs_placeholder).append(e)})}}};this.iframe_upload_finished=function(e){if($h24.devmode&&typeof console=="object"){$h24.uploader.consoleLog("Uploader iframe response:");$h24.uploader.consoleDir(e)}this.run_file_upload_success("iframe",e,function(){this.uploads_complete("iframe")})};this.getCurrentUploaderType=function(){if($("#"+placeholder+"_flash_uploader").is(":visible"))return"flash";else return"iframe"}};h24core.prototype.uploader.create=function(e,s,t){var o=new $h24.uploader(e,s,t);$h24.uploaders[s]=o;return o};h24core.prototype.uploader.consoleLog=function(e){if(typeof console=="object"&&typeof console.log=="function"){console.log(e)}};h24core.prototype.uploader.consoleDir=function(e){if(typeof console=="object"&&typeof console.dir=="function"){console.dir(e)}};h24core.prototype.uploader.destroy=function(e){if($h24.devmode)$h24.uploader.consoleLog("Destroyed uploader: "+e);if(typeof $h24.uploaders[e]=="object")if(typeof $h24.uploaders[e].swf_upload=="object")$h24.uploaders[e].swf_upload.destroy()};h24core.prototype.uploader.switchUploader=function(e,s){$("#"+e+" div.h24_upload_status_messages p").hide();if(s=="flash"){$("#"+e+"_flash_uploader").show();$("#"+e+"_iframe_uploader").hide()}else if(s=="iframe"){$("#"+e+"_iframe_uploader").show();$("#"+e+"_flash_uploader").hide()}};h24core.prototype.uploader.INSUFFICIENT_SPACE_ERROR=0;h24core.prototype.uploader.FORMAT_ERROR=1;h24core.prototype.uploader.GENERAL_ERROR=2;h24core.prototype.uploader.UPLOAD_LIMIT_EXCEEDED=3;h24core.prototype.uploader.FORM_ERROR=4;h24core.prototype.uploader.STORAGE_BACKEND_ERROR=5;
h24core.prototype.coreUploader=function(e,t){if(typeof $h24.slashwebroot=="undefined"||typeof $h24.publicdir=="undefined"){console.log("Required variables missing: $h24.slashwebroot, $h24.publicdir");return}if(typeof $h24.coreUploaders=="undefined"){$h24.coreUploaders={}}if(typeof $h24.editorSettings!="undefined"&&typeof $h24.editorSettings.preferredUploaderType!="undefined"){var r=$h24.editorSettings.preferredUploaderType}else{var r="auto"}var o;switch(r){default:case"auto":if($h24.browser=="ie10"){o="flash,silverlight,html4"}else if($h24.browser=="safari5"){o="flash,html4"}else{o="html5,flash,silverlight,html4"}break;case"flash":case"html5":case"html4":case"silverlight":o=r;break}var s={type:"default",mode:$h24.coreUploader.IMAGE_UPLOADER_MODE,querystringParams:{},maxQueuedFiles:10,maxFileSize:"10mb",pluploaderOptions:{runtimes:o,flash_swf_url:$h24.publicdir+"js/plupload/plupload.flash.swf",silverlight_xap_url:$h24.publicdir+"js/plupload/plupload.silverlight.xap",url:null,multipart_params:{},multipart:true},fileUploaded:function(e){},allFilesUploaded:function(){},filesAdded:function(){},beforeUpload:function(){}};$.extend(true,s,t);this.options=s;this.devmode=typeof $h24.devmode=="boolean"?$h24.devmode:false;this.html5files=[];var a,i,n;a=$(e);if(!a.length){if(this.devmode){console.log("Invalid coreUploader target parameter")}return}if(!a.is("[id]")){a.attr("id","h24_cu_generated_id_"+Math.ceil(Math.random()*1e6))}this.$targetContainer=a;if(typeof $h24.coreUploader.uploaderTypes[s.type]=="undefined"){if(this.devmode){console.log("Invalid coreUploader type: "+s.type)}return}this.currentType=$h24.coreUploader.uploaderTypes[s.type];this._loadMarkupCallback=function(){var e=this,t=this.options.pluploaderOptions,r,o;o=this.$targetContainer.find(".h24_cu_browse");if(!o.length){if(this.devmode){console.log("Missing browse element")}return}if(!o.is("[id]")){o.attr("id","h24_cu_generated_id_"+Math.ceil(Math.random()*1e6))}this.$browseElement=o;if(typeof this.$targetContainer.data("buttonText")!="undefined"){this.$browseElement.text(this.$targetContainer.data("buttonText"))}t.container=this.$targetContainer.attr("id");t.browse_button=this.$browseElement.attr("id");t.max_file_size=this.options.maxFileSize;this.options.querystringParams["_sessionid"]=$h24.sessionid;switch(this.options.mode){case $h24.coreUploader.CUSTOM_UPLOADER_MODE:t.url+="?"+jQuery.param(this.options.querystringParams);break;case $h24.coreUploader.IMAGE_UPLOADER_MODE:t.url=$h24.slashwebroot+"H24-Upload/Image-Target?"+jQuery.param(this.options.querystringParams);t.filters=[$h24.coreUploader.IMAGE_FILES_FILTER];break;case $h24.coreUploader.FILE_UPLOADER_MODE:t.url=$h24.slashwebroot+"H24-Upload/File-Target?"+jQuery.param(this.options.querystringParams);delete t.filters;break;case $h24.coreUploader.GENERIC_USER_FILE_MODE:t.url=$h24.slashwebroot+"H24-Upload/File-Target?"+jQuery.param(this.options.querystringParams);break;case $h24.coreUploader.FONTFACE_UPLOADER_MODE:this.options.querystringParams["specialMode"]="fontface";t.url=$h24.slashwebroot+"H24-Upload/File-Target?"+jQuery.param(this.options.querystringParams);t.filters=[$h24.coreUploader.ZIP_FILES_FILTER];break;case $h24.coreUploader.BLOCK_UPLOADER_MODE:this.options.querystringParams["specialMode"]="block";if(typeof this.options.querystringParams.blockid=="undefined"&&this.devmode){console.log("Missing blockid parameter for BLOCK_UPLOADER_MODE")}t.url=$h24.slashwebroot+"H24-Upload/File-Target?"+jQuery.param(this.options.querystringParams);t.filters=[$h24.coreUploader.ZIP_FILES_FILTER];break}r=this.$targetContainer.find(".h24_cu_dropzone");if(r.length){if(!r.is("[id]")){r.attr("id","h24_cu_generated_id_"+Math.ceil(Math.random()*1e6))}t.drop_element=r.attr("id")}this.pluploader=new plupload.Uploader(t);this.currentType.preInit.call(this);this.pluploader.bind("Destroy",function(){$(window).unbind("dragenter dragleave drop draghoverstart draghoverend");r.removeClass("h24_cu_initialized_dropzone")});this.pluploader.init();if(this.pluploader.features.dragdrop){if(!r.hasClass("h24_cu_initialized_dropzone")){$(window).draghover().on({draghoverstart:function(){e.currentType.dragStart.call(e)},draghoverend:function(){e.currentType.dragEnd.call(e)}});r.addClass("h24_cu_initialized_dropzone")}}};this.currentType.loadMarkup.call(this,this._loadMarkupCallback);this.errors=[];this.filterFiles=function(){var e=this.pluploader.files,t,r=e.length,o={},s=0,a=[];for(var i=0;i<e.length;i++){t=e[i];if(t.size==0){a.push(t);if(this.devmode){console.log("Filtered out a zero-byte file: "+t.name)}s++}if(t.percent==100){a.push(t);s++}if(typeof o[t.name]=="undefined"){o[t.name]=true}else{a.push(t);if(this.devmode){console.log("Filtered out a duplicate file: "+t.name)}s++}}for(var i in a){this.pluploader.removeFile(a[i])}if(s==r&&this.devmode){console.log("No files left after filtering")}if(s>0){this.pluploader.refresh()}return this.pluploader.files};this.disableBrowseButton=function(){var e=this.$targetContainer.find(".h24_cu_browse"),t=$("<div />"),r=e.position();t.css({position:"absolute",left:r.left-1,right:r.right-1,"z-index":9999999,"background-color":"#fff",opacity:0,width:e.width()+2,height:e.height()+2,"padding-top":e.css("padding-top"),"padding-left":e.css("padding-left"),"padding-bottom":e.css("padding-bottom"),"padding-right":e.css("padding-right")});t.prependTo(this.$targetContainer);this.$buttonCover=t};this.enableBrowseButton=function(){if(typeof this.$buttonCover!="undefined"){this.$buttonCover.remove()}};this.parseResponse=function(e,t){var r=e.response,o;if(this.devmode){console.log("Received ajax response from file "+t.id+" upload:");console.log(e)}if(e.response.substring(0,1)=="<"){r=$(r).text()}try{o=JSON.parse(r)}catch(s){o=r}return o};this.startUpload=function(){if(typeof this.options.beforeUpload=="function"){this.options.beforeUpload.call(this)}this.pluploader.start()}};h24core.prototype.coreUploader.create=function(e,t,r){var o=new $h24.coreUploader(t,r);$h24.coreUploaders[e]=o;return o};h24core.prototype.coreUploader.destroy=function(e){if($h24.devmode){console.log("Destroying uploader: "+e)}if(typeof $h24.coreUploaders!="undefined"&&typeof $h24.coreUploaders[e]!="undefined"){$h24.coreUploaders[e].pluploader.destroy();delete $h24.coreUploaders[e]}};h24core.prototype.coreUploader.recreate=function(e,t){var r=$h24.coreUploaders[e].options,o=$h24.coreUploaders[e].$targetContainer;$h24.coreUploader.destroy(e);r.pluploaderOptions.runtimes=t;$h24.coreUploader.create(e,o,r)};h24core.prototype.coreUploader.INSUFFICIENT_SPACE_ERROR=0;h24core.prototype.coreUploader.FORMAT_ERROR=1;h24core.prototype.coreUploader.GENERAL_ERROR=2;h24core.prototype.coreUploader.UPLOAD_LIMIT_EXCEEDED=3;h24core.prototype.coreUploader.FORM_ERROR=4;h24core.prototype.coreUploader.STORAGE_BACKEND_ERROR=5;h24core.prototype.coreUploader.MAX_FILE_COUNT_EXCEEDED=6;h24core.prototype.coreUploader.IMAGE_UPLOADER_MODE=6;h24core.prototype.coreUploader.FILE_UPLOADER_MODE=7;h24core.prototype.coreUploader.FONTFACE_UPLOADER_MODE=8;h24core.prototype.coreUploader.BLOCK_UPLOADER_MODE=9;h24core.prototype.coreUploader.GENERIC_USER_FILE_MODE=10;h24core.prototype.coreUploader.CUSTOM_UPLOADER_MODE=11;h24core.prototype.coreUploader.UPLOAD_COUNT_EXCEEDED=12;h24core.prototype.coreUploader.UPLOAD_TYPE_ERROR=13;h24core.prototype.coreUploader.IMAGE_FILES_FILTER={title:"Image files",extensions:"jpg,jpeg,gif,png"};h24core.prototype.coreUploader.ZIP_FILES_FILTER={title:"ZIP files",extensions:"zip"};h24core.prototype.coreUploader.FLASH_FILES_FILTER={title:"Flash files",extensions:"swf"};h24core.prototype.coreUploader.MOVIE_FILES_FILTER={title:"Movie files",extensions:"flv,f4v,mov,mp4"};h24core.prototype.coreUploader.uploaderTypes={"default":{loadMarkup:function(e){var t=this;if(!this.$targetContainer.find(".h24_cu_browse").length){$.post($h24.slashwebroot+"H24-Upload/Load-Uploader-Markup",{type:"default"},function(r){var o=$(r),s=o.find(".h24_cu_container");t.$targetContainer.html(o).addClass(o.attr("class"));t.currentType.resetGUI.call(t);e.call(t)})}else{if(!t.$targetContainer.hasClass("h24_cu_container")){t.$targetContainer.find(".h24_cu_container").removeClass("h24_cu_container");t.$targetContainer.addClass("h24_cu_container")}t.currentType.resetGUI.call(t);e.call(this)}},dragStart:function(){this.$targetContainer.find(".h24_cu_dropzone").addClass("h24_cu_dragging")},dragEnd:function(){this.$targetContainer.find(".h24_cu_dropzone").removeClass("h24_cu_dragging")},preInit:function(){var e=this,t,r,o=[],s,a,i;if(typeof this.pluploader.settings.filters!="undefined"&&typeof this.pluploader.settings.filters.length!="undefined"&&this.pluploader.settings.filters.length>0){s=this.$targetContainer.find(".h24_cu_file_type_text");s.show();for(var n=0;n<this.pluploader.settings.filters.length;n++){r=this.pluploader.settings.filters[n].extensions.split(",");for(var l=0;l<r.length;l++){o.push(r[l].toUpperCase())}}s.find(".h24_cu_file_types").text(o.join(", "))}a=this.$targetContainer.find(".h24_cu_max_file_size");a.text(this.pluploader.settings.max_file_size.toUpperCase());e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_LIMIT_EXCEEDED+" span").text(e.pluploader.settings.max_file_size.toUpperCase());this.pluploader.bind("QueueChanged",function(t,r){var o,s,a,i,n,l,d=e.$targetContainer.find(".h24_cu_progress_text_queue_count");if(!r){e.$targetContainer.find(".h24_cu_status_message").hide();i=e.filterFiles.call(e);if(e.options.maxQueuedFiles<i.length){e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_COUNT_EXCEEDED).show().children("span").text(e.options.maxQueuedFiles);e.pluploader.splice();return}e.$targetContainer.find(".h24_cu_dropzone").removeClass("h24_cu_dragging");e.$targetContainer.find(".h24_cu_text_container").slideUp();e.$targetContainer.find(".h24_cu_progress_container").show();e.$targetContainer.find(".h24_cu_progress_text_queue_count").show().text(i.length);d.text(i.length);e.$targetContainer.find(".h24_cu_browse").addClass("h24_disabled_button");e.disableBrowseButton();e.startUpload.call(e)}});this.pluploader.bind("UploadComplete",function(t,r){e.$targetContainer.find(".h24_cu_browse").removeClass("h24_disabled_button");e.enableBrowseButton();e.pluploader.splice();e.$targetContainer.find(".h24_cu_progress_text").removeClass("h24_cu_spinner_background");e.$targetContainer.find(".h24_cu_progress_text_queue_count").hide();e.$targetContainer.find(".h24_cu_progress_text_done").show();e.pluploader.refresh();e.options.allFilesUploaded.call(e,r)});this.pluploader.bind("FileUploaded",function(t,r,o){var s=e.parseResponse(o,r),a=e.$targetContainer.find(".h24_cu_progress_text_queue_count");if(typeof s=="object"&&typeof s.successful=="boolean"&&s.successful===false&&typeof s.errorCode!="undefined"){e.$targetContainer.find(".h24_cu_unsuccessful_message_"+s.errorCode).show();e.errors.push({type:"unsuccessful",data:s.errorCode})}a.text(parseInt(a.text(),10)-1);e.options.fileUploaded.call(e,s)});this.pluploader.bind("UploadProgress",function(t,r){var o=e.$targetContainer.find(".h24_cu_progress");$progressText=e.$targetContainer.find(".h24_cu_progress_text");o.css("width",r.percent+"%");if(r.percent=="100"){$progressText.addClass("h24_cu_spinner_background")}else{$progressText.removeClass("h24_cu_spinner_background")}});this.pluploader.bind("Error",function(t,r){switch(r.code){case-600:e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_LIMIT_EXCEEDED).show();break;case-601:var o,s=[];for(var a=0;a<e.pluploader.settings.filters.length;a++){o=e.pluploader.settings.filters[a].extensions.split(",");for(var i=0;i<o.length;i++){s.push(o[i].toUpperCase())}}e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_TYPE_ERROR).show().children("span").text(s.join(", "));break}e.pluploader.refresh()});this.pluploader.bind("FilesAdded",function(t,r,o){e.options.filesAdded.call(e,r,o)})},error:function(e){that.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.GENERAL_ERROR).show();that.errors.push({type:"pluploader",error:e});if(that.devmode){console.log(e)}},resetGUI:function(){var e=this,t,r,o=this.$targetContainer.find(".h24_cu_browse");this.$targetContainer.find(".h24_cu_text_container").show();this.$targetContainer.find(".h24_cu_progress_text_done").hide();this.$targetContainer.find(".h24_cu_progress_container").hide();this.$targetContainer.find(".h24_cu_progress").width(0);this.$targetContainer.find(".h24_cu_progress_text_queue_count").show();t=o.width()+parseInt(o.css("padding-left"),10)+parseInt(o.css("padding-right"),10);r=o.parent().width();o.css("margin-left",parseInt(r/2-t/2,10))}},store:{loadMarkup:function(e){var t=this;if(!t.$targetContainer.hasClass("h24_cu_container")){t.$targetContainer.find(".h24_cu_container").removeClass("h24_cu_container");t.$targetContainer.addClass("h24_cu_container")}t.currentType.resetGUI.call(t);e.call(this)},dragStart:function(){this.$targetContainer.find(".h24_cu_dropzone").addClass("h24_cu_dragging")},dragEnd:function(){this.$targetContainer.find(".h24_cu_dropzone").removeClass("h24_cu_dragging")},preInit:function(){var e=this,t;e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_LIMIT_EXCEEDED+" span").text(e.pluploader.settings.max_file_size.toUpperCase());this.pluploader.bind("QueueChanged",function(t,r){var o,s,a,i,n,l,d=e.$targetContainer.find(".h24_cu_progress_text_queue_count");if(!r){e.$targetContainer.find(".h24_cu_status_message").hide();i=e.filterFiles.call(e);if(e.options.maxQueuedFiles<i.length){e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_COUNT_EXCEEDED).show().children("span").text(e.options.maxQueuedFiles);e.pluploader.splice();return}e.$targetContainer.find(".h24_cu_dropzone").removeClass("h24_cu_dragging");e.$targetContainer.find(".h24_cu_text_container").slideUp();e.$targetContainer.find(".h24_cu_progress_container").show();e.$targetContainer.find(".h24_cu_progress_text_queue_count").show().text(i.length);d.text(i.length);e.$targetContainer.find(".h24_cu_browse").addClass("disabled");e.startUpload.call(e)}});this.pluploader.bind("UploadComplete",function(t,r){e.$targetContainer.find(".h24_cu_browse").removeClass("disabled");e.pluploader.splice();e.$targetContainer.find(".h24_cu_progress_text").removeClass("h24_cu_spinner_background");e.$targetContainer.find(".h24_cu_progress_text_queue_count").hide();e.$targetContainer.find(".h24_cu_progress_text_done").show();e.pluploader.refresh();e.options.allFilesUploaded.call(e,r)});this.pluploader.bind("FileUploaded",function(t,r,o){var s=e.parseResponse(o,r),a=e.$targetContainer.find(".h24_cu_progress_text_queue_count");if(typeof s=="object"&&typeof s.successful=="boolean"&&s.successful===false&&typeof s.errorCode!="undefined"){e.$targetContainer.find(".h24_cu_unsuccessful_message_"+s.errorCode).show();e.errors.push({type:"unsuccessful",data:s.errorCode})}a.text(parseInt(a.text(),10)-1);e.options.fileUploaded.call(e,s)});this.pluploader.bind("UploadProgress",function(t,r){var o=e.$targetContainer.find(".h24_cu_progress");$progressText=e.$targetContainer.find(".h24_cu_progress_text");o.css("width",r.percent+"%");if(r.percent=="100"){$progressText.addClass("h24_cu_spinner_background")}else{$progressText.removeClass("h24_cu_spinner_background")}});this.pluploader.bind("Error",function(t,r){switch(r.code){case-600:e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_LIMIT_EXCEEDED).show();break;case-601:var o,s=[];for(var a=0;a<e.pluploader.settings.filters.length;a++){o=e.pluploader.settings.filters[a].extensions.split(",");for(var i=0;i<o.length;i++){s.push(o[i].toUpperCase())}}e.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.UPLOAD_TYPE_ERROR).show().children("span").text(s.join(", "));break}e.pluploader.refresh()})},error:function(e){that.$targetContainer.find(".h24_cu_unsuccessful_message_"+$h24.coreUploader.GENERAL_ERROR).show();that.errors.push({type:"pluploader",error:e});if(that.devmode){console.log(e)}},resetGUI:function(){var e=this,t,r,o=this.$targetContainer.find(".h24_cu_browse");this.$targetContainer.find(".h24_cu_text_container").show();this.$targetContainer.find(".h24_cu_progress_text_done").hide();this.$targetContainer.find(".h24_cu_progress_container").hide();this.$targetContainer.find(".h24_cu_progress").width(0);this.$targetContainer.find(".h24_cu_progress_text_queue_count").show();t=o.width()+parseInt(o.css("padding-left"),10)+parseInt(o.css("padding-right"),10);r=o.parent().width();o.css("margin-left",parseInt(r/2-t/2,10))}}};
h24core.prototype.header=function(){function e(e,a,o){$h24.uploader.create("picture","gen_bgpic_upl_"+e+"_uploader",{file_queue_limit:1,file_types:"*.jpg;*.jpeg;*.png;*.gif",file_types_description:"Image files",file_size_limit:"10MB",restart_iframe_uploaders:true,background_decoration:true,file_upload_success:function(a,o,i){$("#gen_bgpic_upl_"+e+"_hidden").val(i[0])},before_upload:function(e,a){if(!a&&!$("#genericbgpic_upload_save_button").hasClass("h24_disabled"))$("#genericbgpic_upload_save_button").aDisable()},uploads_complete:function(i,n){$("#genericbgpic_upload_save_button").aEnable();if(typeof n=="undefined"){$("#gen_bgpic_upl_"+e+" .upload_radiobutton")[0].checked=true;var t="gen_bgpic_upl_"+e;var r=$("#gen_bgpic_upl_"+e+"_hidden").val();var s="['"+e+"']";var d=1;var c=0;var l=a;var h=o;$("#"+t+"_cropping_link").attr("href","javascript:$h24.style_manager.loadCroppingDialog("+r+","+l+","+h+","+d+","+c+',"'+s+'",1,0,1,"genericbg");');$("#"+t+"_cropping_tr").show();$h24.style_manager.loadCroppingDialog(r,l,h,d,c,s,0,0,1,"genericbg")}}})}function a(){var e=$("#title_edit_text_form_name").val();var a=$("#title_edit_text_form_caption").val();var o=$("#title_edit_text_form_invisible")[0].checked;$h24.post($h24.publicdir+"../Page/Communicator/model/HeaderModel/modelaction/edit_text",{__keep_loading_overlay:true,homepageid:$h24.homepageid,name:e,caption:a,invisible_header_text:o},function(o){$("#logo-text_h1").text(e);$("#intro_p").text(a);closeDialogBox();refreshBrowser()})}var o=function(){var e=$("#h24_header_collage_editor_button");var a=e.find("input[name=selector]").val();var o=e.find("input[name=header_button_selector]").val();if(o!=""||a!=""){if(o!=""){var i=$(o)}else{var i=$(a)}}return i};var i=function(){var e=$('<div class="h24-HeaderSection-container">'+'<div class="h24-HeaderSection">'+'<div class="h24-HeaderSection-controls">'+'<span class="h24-HeaderSection-button" data-action="toogleHeaderMenu">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Header")+"</span>"+'<ul class="h24-HeaderSection-menu u-hidden" data-action="disableToggle" role="menu">'+'<li style="position:relative;z-index:1;background-color:#FFFFFF;" data-action="openHeaderSettings"><a href="#"><span data-icon="&#50607;" aria-hidden="true"></span>'+$h24.phrase.GUIPhrase("PageBackgroundManager","Edit header")+"</a></li>"+'<li data-action="openPageSettings"><a href="#"><span data-icon="&#49568;" aria-hidden="true"></span>'+$h24.phrase.GUIPhrase("PageBackgroundManager","Manage Pages")+"</a></li>"+'<li data-action="openSocialSettings"><a href="#"><span data-icon="&#50444;" aria-hidden="true"></span>'+$h24.phrase.GUIPhrase("PageBackgroundManager","Edit social links")+"</a></li>"+"</ul>"+"</div>"+"</div></div>");e.prependTo(".h24-u-documentBackgroundHolder");var a=$('#header [data-section="socialBoxContainer"]');var i=o();$(".h24-HeaderSection-container, #header").off(".h24-HeaderSection").on("mouseenter.h24-HeaderSection",function(e){n(e)}).on("mouseleave.h24-HeaderSection",function(e){n(e)}).on("click.h24-HeaderSection",function(e){var o=$(e.target),n=o.closest("[data-action]"),t=n.data("action");switch(t){case"toogleHeaderMenu":$(".h24-HeaderSection-menu").toggleClass("u-hidden");break;case"openHeaderSettings":if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}a.data("active",false);$h24.socialBox.init();$("html").addClass("headerOpen");i.removeClass("h24-hoverBorderColor");$(".h24-HeaderSection-container").removeClass("hover");$(i).collage({mode:"header"});break;case"openSocialSettings":$h24.socialBox.openSettings();break;case"openPageSettings":$h24.page_manager.openDialog();break}});$h24.fauxSections.reposition()};var n=function(e){var a=$('#header [data-section="socialBoxContainer"]');var i=$(".h24-HeaderSection-container");var n=o();switch(e.type){case"mouseenter":if($("html").hasClass("headerOpen")||$("html").hasClass("h24-hoverBorderColor")||$("html").hasClass("h24_block-sorting")){return false}i.addClass("hover");$(".pp-FauxSection-container, .pp-FauxSection-hovertop, .pp-FauxSection-hoverbottom").removeClass("hover");if(typeof n!="undefined"&&n.length>0){n.addClass("h24-hoverBorderColor")}a.show();break;case"mouseleave":if($(e.toElement).is("#header")||$(e.toElement).is(".h24-HeaderSection-container")||!$(".h24-HeaderSection-menu").hasClass("u-hidden")){return false}else{i.removeClass("hover");if(typeof n!="undefined"&&n.length>0){n.removeClass("h24-hoverBorderColor")}if(a.data("appearance")=="sidebar_closed"&&a.data("linked")=="no"&&!a.hasClass("ui-draggable-dragging")){a.hide()}}break}};var t=function(e){if($(".h24-HeaderSection-container").length==0){i()}$firstFauxSection=e[0];$headerSection=$(".h24-HeaderSection-container");$headerSection.css("height",$firstFauxSection.top)};return{initHeaderSection:i,old_initUploader:e,saveHeaderText:a,hoverAction:n,reposition:t,getHeaderSelector:o}}();
h24core.prototype.footer=function(){var o=function(){var o=$('<div class="h24-FooterSection-container"><div class="h24-FooterSection"><div class="h24-FooterSection-controls"><span class="h24-FooterSection-button" data-action="openFooterSettings">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Edit footer")+"</span></div></div></div>");o.prependTo(".h24-u-documentBackgroundHolder");$(".h24-FooterSection-container, #footer").off(".h24-FooterSection").on("mouseenter.h24-FooterSection",function(o){e(o)}).on("mouseleave.h24-FooterSection",function(o){e(o)}).on("click.h24-FooterSection",function(o){var e=$(o.target),t=e.closest("[data-action]"),r=t.data("action");switch(r){case"openFooterSettings":if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}$("#footer").removeClass("h24-hoverBorderColor");$h24.editors.footer();break}});$h24.fauxSections.reposition()};var e=function(o){switch(o.type){case"mouseenter":if(!$("html").hasClass("h24_block-sorting")){$(".h24-FooterSection-container").addClass("hover");$("#footer").addClass("h24-hoverBorderColor");$(".pp-FauxSection-container, .pp-FauxSection-hovertop, .pp-FauxSection-hoverbottom").removeClass("hover")}break;case"mouseleave":$(".h24-FooterSection-container").removeClass("hover");$("#footer").removeClass("h24-hoverBorderColor");break}};var t=function(e){if($(".h24-FooterSection-container").length==0){o()}$(".h24-FooterSection-container").css("height",0);var t=$(".sitepreview").prop("scrollHeight");var r=e[e.length-1];var n=$("#footer").outerHeight();var i=r.top+r.height;var a=t-(r.height+r.top);$(".h24-FooterSection-container").css("top",i);$(".h24-FooterSection-container").css("height",a)};return{initFooterSection:o,hoverAction:e,reposition:t}}();
h24core.prototype.google_maps=function(){var e;function t(e,t,o,s){$h24.google_maps.geocoder=new google.maps.Geocoder;if(t){$("#h24_map_address_"+e).attr("autocomplete","off");if($("#settings_block_"+e+" input[name=size_personal]:checked").val()==0){$h24.block.MapBlock.sizePersonal(e,0)}var i=new google.maps.Map($("#h24_map_canvas_settings_"+e)[0],o)}else{var i=new google.maps.Map($("#h24_map_canvas_"+e)[0],o)}var n={map:i,marker:new google.maps.Marker({draggable:t?true:false}),streetview:i.getStreetView(),address:s.address,infowindow:new google.maps.InfoWindow,infowindow_text:s.infowindow_text};n.marker.setMap(n.map);n.marker.setPosition(new google.maps.LatLng(s.marker_latitude,s.marker_longitude));google.maps.event.addListener(n.marker,"click",function(){if(t)n.infowindow_text=$h24.google_maps.getInfoWindow_text(e);if(n.infowindow_text!=""){n.infowindow.setContent('<div class="h24_map_infowindow">'+n.infowindow_text+"</div>");n.infowindow.open(n.map,n.marker)}});if(s.infowindow_visible==1){n.infowindow.setContent('<div class="h24_map_infowindow">'+n.infowindow_text+"</div>");n.infowindow.open(n.map,n.marker)}if(t){$h24.blocks[e].settings_map=n}else{$h24.blocks[e].map=n}n.streetview.setOptions({addressControlOptions:{style:{border:"1px solid green",backgroundColor:"white"},position:google.maps.ControlPosition.BOTTOM}});n.streetview.setOptions({addressControl:false});if(s.street_visible==1){$h24.google_maps.streetviewSetup(s.street_latitude,s.street_longitude,s.street_zoom,s.street_heading,s.street_pitch,e,t)}}function o(e){var t=$("#settings_block_"+e+" input[name=infowindow_text]").val();return t}function s(e,t,o,s,i,n,a){if(a)var r=$h24.blocks[n].settings_map;else var r=$h24.blocks[n].map;var l=new google.maps.LatLng(e,t);r.streetview.setPosition(l);r.streetview.setPov({heading:s,zoom:o,pitch:i});if(a){$h24.blocks[n].settings_map=r;$h24.blocks[n].settings_map.streetview.setVisible(true)}else{$h24.blocks[n].map=r;$h24.blocks[n].map.streetview.setVisible(true)}}function i(e){var t=$("#h24_map_address_"+e).val();$h24.google_maps.geocoder.geocode({address:t},function(t,o){if(o==google.maps.GeocoderStatus.OK){$("#h24_map_address_"+e).val(t[0].formatted_address);$h24.google_maps.setMap(t[0].geometry.location,t[0].formatted_address,e)}else{alert($h24.phrase.GUIPhrase("Block-Map","Couldn't find the address")+"...")}})}function n(e,t,o){var s=$h24.blocks[o].settings_map;s.map.setCenter(e);s.marker.setPosition(e);s.currentaddress=t;if(s.streetview.getVisible()==true)s.streetview.setVisible(false);$h24.blocks[o].settings_map=s}function a(e){$("#h24_map_address_"+e).autocomplete({source:function(e,t){$h24.google_maps.geocoder.geocode({address:e.term},function(e,o){t($.map(e,function(e){return{value:e.formatted_address,latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}}))})},select:function(t,o){var s=new google.maps.LatLng(o.item.latitude,o.item.longitude);$h24.google_maps.setMap(s,o.item.value,e)},messages:{noResults:function(){return""},results:function(){return""}}})}return{geocoder:e,initializeBlock:t,streetviewSetup:s,getLocation:i,setMap:n,initializeAutoComplete:a,getInfoWindow_text:o}}();
h24core.prototype.form_entry_manager=function(){var e;function r(e,r){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"FormEntryManager",modelaction:"loadFormEntryManager",pagetitle:r},function(e){$h24.dialog.create("h24_form_entry_manager",'<div id ="h24_form_entry_manager" class="h24_dialog">'+e["html"]+"</div>",{width:900,title:$h24.phrase.GUIPhrase("Dialogs","Form Entries")});$h24.form_entry_manager.initDataTable(r);if(e["csv_link"]===false){$("#h24_form_entry_manager_csv_link").hide();$("#h24_form_entry_manager_xls_link").hide()}else{$("#h24_form_entry_manager_csv_link").show();$("#h24_form_entry_manager_xls_link").show();$("#h24_form_entry_manager_csv_link").find("a").attr("href",e["csv_link"]);$("#h24_form_entry_manager_xls_link").find("a").attr("href",e["xls_link"])}$("#h24_form_entry_manager_table tbody tr").live("click",function(e){var r=$(e.target);if(!r.is("input[type=checkbox]")){var a=$(e.currentTarget).find("input[type=checkbox]");var n=a.attr("id");if(typeof n!="undefined"&&n!=""){var o=n.substr(4,n.length-1).replace(/\D/g,"");var t=$("#h24_form_entry_manager_pageselector option:selected").val();$h24.form_entry_manager.viewEntry(o,t)}}})})}function a(e,r){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,entryid:e,model:"FormEntryManager",modelaction:"viewEntry",pagetitle:r},function(e){$("#h24_form_entry_view_details").html(e);$("#h24_form_entry_manager_howToFindEntryHelp").fadeIn("slow");var r=$("#h24_form_entry_view_details").offset().top-7;$("html, body").animate({scrollTop:r})})}function n(e,r){if(confirm($h24.phrase.GUIPhrase("Form-Entry-Manager","The response and any uploaded files associated with it will be deleted")+".\n\n"+$h24.phrase.GUIPhrase("Form-Entry-Manager","Are you sure you want to delete this response")+"?")!==true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,entryid:e,model:"FormEntryManager",modelaction:"removeEntry"},function(e){$h24.form_entry_manager.reloadDialog(r)})}function o(e){if(confirm($h24.phrase.GUIPhrase("Form-Entry-Manager","The selected responses and any uploaded files associated with them will be deleted")+".\n\n"+$h24.phrase.GUIPhrase("Form-Entry-Manager","Are you sure you want to delete all the selected responses")+"?")!==true)return;var r="";$("#h24_form_entry_manager_table input[name=h24_form_entry_manager_table_checkbox]:checked").each(function(){r=r+this.value+","});r=r.substr(0,r.length-1);$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,entryid:r,model:"FormEntryManager",modelaction:"removeEntry"},function(r){$h24.form_entry_manager.reloadDialog(e)})}function t(e){$h24.form_entry_manager.dataTable=$("#h24_form_entry_manager_table").dataTable({bProcessing:true,bServerSide:true,sAjaxSource:$h24.slashwebroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/FormEntryManager/modelaction/ajaxEntry/pagetitle/"+e,bJQueryUI:false,sScrollY:"200px",oLanguage:{sLengthMenu:$h24.phrase.GUIPhrase("Form-Entry-Manager","Show _MENU_ responses per page"),sZeroRecords:$h24.phrase.GUIPhrase("Form-Entry-Manager","No responses exist"),sInfo:$h24.phrase.GUIPhrase("Form-Entry-Manager","Showing _START_ to _END_ of _TOTAL_ responses"),sInfoEmpty:$h24.phrase.GUIPhrase("Form-Entry-Manager","Showing 0 to 0 of 0 responses"),sSearch:$h24.phrase.GUIPhrase("General","Search"),sInfoFiltered:"("+$h24.phrase.GUIPhrase("Form-Entry-Manager","filtered from _MAX_ responses")+")",sProcessing:$h24.phrase.GUIPhrase("General","Loading")+"...",oPaginate:{sFirst:$h24.phrase.GUIPhrase("General","First"),sPrevious:$h24.phrase.GUIPhrase("General","Previous"),sNext:$h24.phrase.GUIPhrase("General","Next"),sLast:$h24.phrase.GUIPhrase("General","Last")}},bSortClasses:false,sPaginationType:"full_numbers",aoColumns:[{bSortable:false},null,null,null,null]})}function s(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"FormEntryManager",modelaction:"loadFormEntryManager",pagetitle:e},function(r){$h24.form_entry_manager.dataTable.fnDestroy();$("#h24_form_entry_manager").html(r["html"]);$h24.form_entry_manager.initDataTable(e);if(r["csv_link"]==false){$("#h24_form_entry_manager_csv_link").hide();$("#h24_form_entry_manager_xls_link").hide()}else{$("#h24_form_entry_manager_csv_link").show();$("#h24_form_entry_manager_xls_link").show();$("#h24_form_entry_manager_csv_link").find("a").attr("href",r["csv_link"]);$("#h24_form_entry_manager_xls_link").find("a").attr("href",r["xls_link"])}})}function h(e){var r=false;if(e)r=true;$("#h24_form_entry_manager_table input[name=h24_form_entry_manager_table_checkbox]").each(function(){this.checked=r})}function i(e){if(e>0){var r=$h24.slashwebroot+"Page/Communicator?homepageid="+$h24.homepageid+"&model=FormEntryManager&modelaction=printEntry&entryId="+e;window.open(r,"entry","width=700,height=560,scrollbars=yes")}}function l(){$("html, body").animate({scrollTop:0})}return{openDialog:r,viewEntry:a,initDataTable:t,dataTable:e,removeEntry:n,removeMultipleEntry:o,reloadDialog:s,entryMultiSelect:h,printEntry:i,scrollToTop:l}}();
h24core.prototype.homepage_settings=function(){function saveAdvancedSettings(){var e=$("#homepage_advancedsettings_footer_code").val();var a=$("#homepage_advancedsettings_header_code").val();var t=$("#homepage_advancedsettings_meta_description").val();var o=$("#homepage_advancedsettings_meta_keywords").val();var n=$("#homepage_advancedsettings_partneruserid").val();var i=$("#homepage_advancedsettings_gatc").val();var s=$("#homepage_advancedsettings_meta_description_type_0")[0].checked;var r=$("#homepage_advancedsettings_meta_description_type_1")[0].checked;if(s)var l=0;else var l=1;var g=$("#homepage_advancedsettings_show_hidden_pages_in_sitemap option:selected").val();var d=$("#homepage_advancedsettings_show_cookies option:selected").val();var p=$("#homepage_advancedsettings_favicon_list option:selected").val();var m=$("#homepage_advancedsettings_preffered_uploader_type").val();var h=$("#homepage_advancedsettings_touch_menu_fix_enabled").val();var c=$("#homepage_advancedsettings_timezone").val();var _=$("#homepage_advancedsettings_https_enabled").val();var v=$("#homepage_advancedsettings_heymousername").val();var u=$("#homepage_advancedsettings_heymopassword").val();$("#homepage_advancedsettings_messages .hidden").hide();$h24.post($h24.publicdir+"../Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"save_adv_settings",footer_code:e,header_code:a,meta_description:t,meta_keywords:o,partneruserid:n,meta_descr_type:l,show_hidden_pages_in_sitemap:g,show_cookiebar:d,favicon_userfileid:p,gatc:i,preferredUploaderType:m,touchMenuFixEnabled:h,timezone:c,httpsEnabled:_,heymoUsername:v,heymoPassword:u},function(e){var a=e.split("/");var t=a[1];$("#homepage_advancedsettings_msg"+t).show()})}function saveAccountSettings(){var e=$("#homepage_accountsettings_username");var a=$("#homepage_accountsettings_email");var t=$("#homepage_accountsettings_password");var o=$("#homepage_accountsettings_firstname");var n=$("#homepage_accountsettings_lastname");var i=$("#homepage_accountsettings_cellno");var s=$("#homepage_accountsettings_pno");var r=$("#homepage_accountsettings_streetaddress");var l=$("#homepage_accountsettings_city");var g=$("#homepage_accountsettings_zipcode");var d=$("homepage_accountsettings_adress_organization");var p=$("homepage_accountsettings_company");$("#homepage_accountsettings_messages .hidden").hide();var m=$('.settings [data-section="username"]');var h=$('.settings [data-section="email"]');var c=$('.settings [data-section="firstname"]');var _=$('.settings [data-section="lastname"]');var v=$('.settings [data-section="cellno"]');var u=$('.settings [data-section="pno"]');var f=$('.settings [data-section="address_street"]');var b=$('.settings [data-section="address_city"]');var w=$('.settings [data-section="address_zipcode"]');var S=$('.settings [data-section="address_organization"]');if(e.val()!=m.data("default")||a.val()!=h.data("default")||t.val()!=""||o.val()!=c.data("default")||n.val()!=_.data("default")||i.val()!=v.data("default")||s.val()!=u.data("default")||r.val()!=f.data("default")||l.val()!=b.data("default")||g.val()!=w.data("default")||d.val()!=S.data("default")){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Homepage-Settings","Enter password"),helptext:$h24.phrase.GUIPhrase("Homepage-Settings","In order to change this details you need to enter the current password"),input:"",inputType:"password",okCallback:function(p){$h24.post($h24.publicdir+"../Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"save_acc_settings",username:e.val(),password:t.val(),oldpassword:p,email:a.val(),firstname:o.val(),lastname:n.val(),cellno:i.val(),pno:s.val(),address_street:r.val(),address_city:l.val(),address_zipcode:g.val(),address_organization:d.val(),register:0,requirepassword:0},function(p){var y=p.split("/");var P=y[1];if(P==1){m.data("default",e.val());h.data("default",a.val());t.val("","");c.data("default",o.val());_.data("default",n.val());v.data("default",i.val());u.data("default",s.val());f.data("default",r.val());b.data("default",l.val());w.data("default",g.val());S.data("default",d.val())}$("#homepage_accountsettings_msg"+P).show()})}})}}function initUploadFavicon(){$h24.coreUploader.create("homepage_advancedsettings_upload_favicon",$("#homepage_advancedsettings_upload_favicon"),{maxQueuedFiles:1,type:"default",mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"1mb",pluploaderOptions:{filters:[{title:"ICO files",extensions:"ico"}]},allFilesUploaded:function(){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"load_hs4_favicon_list"},function(e){$("#homepage_advancedsettings_favicon").html(e)})}})}var initTopMenus=function(){var e=$("#h24_controlPanel"),a=$("#ap_goToPageQuery"),t=$("#ap_goToPageQuery_result");if(e.hasClass("initialized"))return;e.addClass("initialized");e.hoverintent(function(){e.addClass("h24_megaMiniMenuHover")},function(){e.removeClass("h24_megaMiniMenuHover")},{enterTimeout:0,leaveTimeout:0});a.inputTimeout({onTimeout:function(e){if(jQuery.trim(e)==""){return}a.addClass("h24_small_loading_spinner");$h24.post($h24.slashwebroot+"Page/Edit-Communicator",{model:"PageManager",modelaction:"pageQueryInEditGUI",homepageid:$h24.homepageid,query:e,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){t.html(e).show();a.removeClass("h24_small_loading_spinner")})}})};function accountEmailPrompt(e){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Homepage-Settings","Please enter an e-mail address"),input:e,okCallback:function(e){var a=this;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"set_account_email",email:e},function(e){if(e.successful){$h24.utils.showLoadingSpinner();refreshBrowser()}else a.injectStatusMessage(e.message,"alert_message")});return false}})}function homepageNamePrompt(e,a){if(typeof e=="undefined")e=false;var t=e?1:0;if($h24.design_system==0){a=[$("#h24_dashboard_homepage_name").val(),$("#h24_dashboard_homepage_caption").val()];var o=["Please choose a name for your homepage","Please choose a caption for your homepage"];var n="set_homepage_name"}else{var o=$h24.phrase.GUIPhrase("Homepage-Settings","Please choose a name for your homepage");var n="set_homepage_name"}$h24.utils.promptDialog({description:o,input:a,requireInput:false,okCallback:function(e){if($h24.design_system==0){var a={homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:n,name:e[0],caption:e[1]}}else{var a={homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:n,name:e,set_collage:t}}$h24.post($h24.slashwebroot+"Page/Communicator",a,function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()})}})}function introDialog(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DialogManager",modelaction:"intro_step_3"},function(e){var a=$h24.dialog.create("h24_intro_dialog",e,{noCloseFlap:true,width:600});var t=a.contents;t.find("a").click(function(){var e=$(this);if(e.hasClass("h24_open_intro_video")){var a=t.find("input[name=url]").val();var o=t.find("input[name=vimeoId]").val();var n=t.find("input[name=height]").val();var i=t.find("input[name=width]").val();$h24.dialogs.h24_intro_dialog.close();$h24.utils.vimeoVideo(o,{videoWidth:i,videoHeight:n});return false}else if(e.hasClass("h24_skip_intro_video")){$h24.dialogs.h24_intro_dialog.close();return false}})})}function saveWebShopSettings(){var e=$("#fragment-8 input[name=payson_seller_email]").val();var a=$("#fragment-8 input[name=order_email]").val();var t=$("#fragment-8 input[name=order_email_copy]").val();var o=$("#fragment-8 input[name=payson_agent_id]").val();var n=$("#fragment-8 input[name=payson_key]").val();var i=$("#fragment-8 input[name=payson_description]").val();var s=$("#fragment-8 input[name=static_shipping_amount]").val();var r=$("#fragment-8 input[name=store_name]").val();var l=$("#fragment-8 textarea[name=confirmation_startphrase]").val();var g=$("#fragment-8 textarea[name=confirmation_endphrase]").val();var d=$("#fragment-8 textarea[name=summary_phrase]").val();var p=$("#fragment-8 textarea[name=cart_phrase]").val();var m=$("#fragment-8 textarea[name=message_phrase]").val();var h=$("#fragment-8 input[name=no_carry_cost_over_amount]").val();var c=$("#fragment-8 input[name=enable_email_invoice]")[0].checked;var _=$("#fragment-8 input[name=enable_payson]")[0].checked;var v=$("#fragment-8 textarea[name=email_invoice_phrase]").val();var u=$("#fragment-8 input[name=shipping_calc_method]:checked").val();var f=$("#fragment-8 input[name=shipping_steps_direction]:checked").val();var b=$("#fragment-8 input[name=default_price_presentation]:checked").val();var w=$("#fragment-8 input[name=incl_vat_phrase]").val();var S=$("#fragment-8 input[name=excl_vat_phrase]").val();var y=$("#fragment-8 input[name=term_of_delivery]").val();var P=$("#fragment-8 input[name=email_invoice_fee]").val();var H=$("#fragment-8 input[name=shipping_vat]").val();var x=$("#fragment-8 input[name=require_pno]")[0].checked;var C="";$("#h24_webshop_settings_step_shipping_table .h24_shipping_step_paramater").each(function(e){var a=$(this).find("input[name=weight]").val().replace(/\//g,"");var t=$(this).find("input[name=amount]").val().replace(/\//g,"");if(a.length>0&&t.length>0)C+=a+"/"+t+"\n"});$("#fragment-8 .homepage_webshopsettings_message").hide();$h24.post($h24.slashwebroot+"Page/Communicator",{model:"WebShopManager",modelaction:"settings",homepageid:$h24.homepageid,payson_seller_email:e,payson_agent_id:o,payson_key:n,payson_description:i,static_shipping_amount:s,store_name:r,confirmation_startphrase:l,confirmation_endphrase:g,summary_phrase:d,cart_phrase:p,order_email:a,order_email_copy:t,no_carry_cost_over_amount:h,enable_email_invoice:c,enable_payson:_,email_invoice_phrase:v,shipping_calc_method:u,shipping_steps_direction:f,message_phrase:m,shipping_step_vars:C,default_price_presentation:b,incl_vat_phrase:w,excl_vat_phrase:S,term_of_delivery:y,email_invoice_fee:P,shipping_vat:H,require_pno:x},function(e){if(e.successful){$("#fragment-8 .status_message_1").show();$h24.homepage_settings.reloadWebShopShippingStepGraph()}else{$("#fragment-8 .status_message_2").show()}})}function reloadWebShopShippingStepGraph(){var e=Math.random()*9999;$("#h24_webshop_settings_step_shipping_chart").load($h24.publicdir+"../Page/Communicator/model/WebShopManager/anti-cache/"+e,{homepageid:$h24.homepageid,modelaction:"shipping_step_chart"})}function addShippingStepParameter(){$("#h24_shipping_step_empty_parameter").clone().appendTo($("#h24_shipping_step_empty_parameter").parent()).removeAttr("id").removeClass("hidden")}function saveImageSettings(){var e=$("#homepage_imagesettings_image_viewer option:selected").val();var a=$("#homepage_imagesettings_fullscreen_image_size option:selected").val();var t=$("#homepage_imagesettings_watermark_text").val();var o=$("#image_viewer_color_input").val();var n=$("#image_viewer_opacity option:selected").val();var i=$("#image_viewer_speed option:selected").val();var s=$("#image_viewer_box_shadow")[0].checked;$("#homepage_imagesettings_messages .hidden").hide();$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/HomepageSettingsModel/modelaction/image_settings",{image_viewer:e,fullscreen_image_size:a,watermark_text:t,image_viewer_color:o,image_viewer_opacity:n,image_viewer_speed:i,image_viewer_box_shadow:s,__keep_loading_overlay:true},function(e){var a=e.split("/");var t=a[1];$("#homepage_imagesettings_msg"+t).show();refreshBrowser()})}function saveEmailManager(){$("#email_manager_table .alert_message").hide();var e="";var a="";$("#email_manager_table .email_manager_row").each(function(){var t=$(this).find("input[name=alias]").val().replace(/\//g,"&#47;");var o=$(this).find("input[name=target]").val().replace(/\//g,"&#47;");if(t.length>0&&o.length>0){if(e!="")e+="/";if(a!="")a+="/";e+=t;a+=o}});$h24.post($h24.publicdir+"../Page/Communicator/model/HomepageSettingsModel/modelaction/emailsave/homepageid/"+$h24.homepageid,{aliasstr:e,targetstr:a},function(e){var a=e.split("/");var t=a[1];if(t==1){$h24.homepage_settings.loadHomepageSettingsTab(5,'$("#fragment-5 .email_manager_success_msg").show();')}else{var o=a[3];$("#email_manager_"+o+" p.alert_message").show()}})}function addEmailManagerRow(){var e=0;$("#email_manager_table .email_manager_row").each(function(){e++});$.get($h24.publicdir+"../Page/Communicator/model/HomepageSettingsModel/modelaction/load_hs5_snippet/homepageid/"+$h24.homepageid,{index:e},function(e){$("#email_manager_table").append(e)})}function changedMetaDescriptionType(e){var a=$(e).val();if(a==0)$("#homepage_advancedsettings_meta_description").removeAttr("disabled").removeClass("h24_opacity_50");else $("#homepage_advancedsettings_meta_description").attr("disabled","disabled").addClass("h24_opacity_50")}function loadHomepageSettings(e){$h24.homepage_settings.loadHomepageSettingsTab(1);$h24.homepage_settings.loadHomepageSettingsTab(2);$h24.homepage_settings.loadHomepageSettingsTab(3);$h24.homepage_settings.loadHomepageSettingsTab(4);$h24.homepage_settings.loadHomepageSettingsTab(5);$h24.homepage_settings.loadHomepageSettingsTab(6);$h24.homepage_settings.loadHomepageSettingsTab(7);$h24.homepage_settings.loadHomepageSettingsTab(8);$("#homepage_settings_dialogbox_tabs").tabs("enable",1);$("#homepage_settings_dialogbox_tabs").tabs("enable",2);$("#homepage_settings_dialogbox_tabs").tabs("enable",3);$("#homepage_settings_dialogbox_tabs").tabs("enable",4);$("#homepage_settings_dialogbox_tabs").tabs("enable",5);$("#homepage_settings_dialogbox_tabs").tabs("enable",6);$("#homepage_settings_dialogbox_tabs").tabs("enable",7);$("#homepage_settings_dialogbox_tabs").tabs("enable",8);showDialog("#homepage_settings_dialogbox",e);hide_loading_overlay()}function loadHomepageSettingsTab(tabno,evalstr){var rand=Math.random()*9999;$("#fragment-"+tabno).html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/HomepageSettingsModel/modelaction/load_hs"+tabno+"/anticache/"+rand,function(data){$("#fragment-"+tabno).html(data);if(typeof evalstr!="undefined")eval(evalstr);if(tabno==1){$("#homepage_accountsettings_password").off("keyup").on("keyup",function(e){var a=e.target.value;if(a.length&&(a.length<6||a.indexOf('"')>-1||a.indexOf("'")>-1||a.indexOf("%")>-1||a.indexOf("\\")>-1)){$("#homepage_accountsettings_password_invalid").show()}else{$("#homepage_accountsettings_password_invalid").hide()}})}else if(tabno==4){$("#homepage_advancedsettings_gatc").bind("ready blur",function(){var e=$(this),a=e.data("searchpattern"),t=e.val(),o=$("#homepage_advancedsettings_footer_code").val(),n=$("#homepage_advancedsettings_header_code").val(),i=$("#homepage_advancedsettings_gatc_dupe_warning_msg");if(t!=""){if(o.search(a)!=-1||n.search(a)!=-1){i.show()}else{i.hide()}}else{i.hide()}})}})}var closeAccountDialog=function(){var e,a;a=$h24.GUI.create("Settings","AccountSettings-settings",{template:"CloseAccount",templateData:{information:$h24.phrase.GUIPhrase("Homepage-Settings","Your homepage will disappear if you close your account, and you won't receive any more e-mail messages from us regarding this account.<br/><br/><b>Note: All content on your homepage will disappear!</b><br/><br/>"),password:{title:$h24.phrase.GUIPhrase("General-Edit","Account password")+":",labelId:"h24-CloseAccount-password","function":"password",placeholder:$h24.phrase.GUIPhrase("General-Edit","Account password"),action:"clearPopovers"},confirmation:{title:$h24.phrase.GUIPhrase("Homepage-Settings","I want to close my account")+":",labelId:"h24-CloseAccount-confirmation","function":"confirmation",onText:$h24.phrase.GUIPhrase("General","Yes"),offText:$h24.phrase.GUIPhrase("General","No")},buttons:{primaryButton:{action:"closeAccount",text:$h24.phrase.GUIPhrase("Homepage-Settings","Close my account")},secondaryButton:{action:"cancel",text:$h24.phrase.GUIPhrase("General","Cancel")}}}});e=$h24.coreDialog.create("CloseAccount",a.content,{title:$h24.phrase.GUIPhrase("Homepage-Settings","Close my account")});e.content.on("click.h24-CloseAccount","[data-action]",function(t){switch($(this).data("action")){case"closeAccount":if(!a.getData("confirmation")){a.showError("confirmation",$h24.phrase.GUIPhrase("Homepage-Settings","Please confirm with the switch"));return}if(a.getData("password")==""){a.showError("password",$h24.phrase.GUIPhrase("Homepage-Settings","Password invalid"));return}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"deleteHomepage",password:a.getData("password")},function(e){if(e.successful){refreshBrowser()}else{a.showError("password",$h24.phrase.GUIPhrase("Homepage-Settings","Password invalid"))}});t.preventDefault();break;case"clearPopovers":a.hideError("password");a.hideError("confirmation");break;case"cancel":e.close();t.preventDefault();break}});e.content.find('[data-function="confirmation"]').on("change.h24-CloseAccount",function(e){a.hideError("confirmation")})};var exportUserdetails=function(){url="https://edit.hemsida24.se/josefin/Page/Export-Userdetails";window.open(url,"_blank")};return{changedMetaDescriptionType:changedMetaDescriptionType,loadHomepageSettings:loadHomepageSettings,loadHomepageSettingsTab:loadHomepageSettingsTab,initUploadFavicon:initUploadFavicon,initTopMenus:initTopMenus,homepageNamePrompt:homepageNamePrompt,accountEmailPrompt:accountEmailPrompt,introDialog:introDialog,saveWebShopSettings:saveWebShopSettings,reloadWebShopShippingStepGraph:reloadWebShopShippingStepGraph,addShippingStepParameter:addShippingStepParameter,saveImageSettings:saveImageSettings,saveAccountSettings:saveAccountSettings,saveAdvancedSettings:saveAdvancedSettings,saveEmailManager:saveEmailManager,addEmailManagerRow:addEmailManagerRow,closeAccountDialog:closeAccountDialog,exportUserdetails:exportUserdetails}}();
h24core.prototype.design_manager=function(){function e(e,a){$h24.get($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"design_manager",pageid:$h24.pageid},function(n){$h24.dialog.create("h24_design_manager",n,{width:986,title:$h24.phrase.GUIPhrase("Design-Manager","Customize Design"),closeCallback:function(){u()}});var t=$("#h24_design_manager_tabs").tabs();var i,s;if(typeof e!="undefined"){switch(e){case"layouts":t.tabs("option","active",0);break;case"fonts":t.tabs("option","active",1);s=a;break;case"tweaks":t.tabs("option","active",2);i=a;break}}$h24.design_manager.initLayouts();$h24.design_manager.initTweaks(i);$h24.design_manager.initFonts(s)})}function a(){var e=$("#h24_design_manager_layouts_tab, #h24_choose_layout_box");$("div.clickable",e).each(function(e){var a=$(this);var n=$("input[name=design_layout_id]",a).val();a.click(function(){$h24.design_manager.pickLayout(n)})});e.find("#h24_show_forbidden_layouts_option > input").change(function(){e.find("div.forbidden").toggle()});e.find("#h24_show_choose_layout_option > input").change(function(){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"toggle_choose_layout_on_empty_page"})});e.find(".h24_hide_choose_layout_link").click(function(){e.fadeOut("slow",function(){e.remove()});$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"toggle_choose_layout_on_empty_page",__skip_loading_overlay:true})});$("a.change_alt_markup",e).click(function(){var a=$("select[name=design_alternative_markup_ci]",e).val();$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,pageid:$h24.pageid,modelaction:"change_alt_markup",common_identifier:a},function(e){if(e.successful)refreshBrowser();else if($h24.devmode)console.log(e)});return false})}function n(){var e=$("#h24_design_manager_tweaks_tabs");e.find(".h24_design_editor_expand_tweak_tabs_sidemenu_item").hide();e.find(".h24_advanced_sidemenu_item").css("opacity",0).show().animate({opacity:1});return false}function t(e){if($("html").hasClass("faux-section-support")&&!!$('head .h24-PageBackground-stylesheet[data-selector^=".pp-FauxSection-index"]').length&&!confirm($h24.phrase.GUIPhrase("Design-Manager","This will also reset section backgrounds. Continue?")))return;$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,pageid:$h24.pageid,modelaction:"change_layout",design_layout_id:e},function(e){if(e.successful)refreshBrowser();else if($h24.devmode)console.log(e)})}function i(e){var a=$("#h24_design_manager_tweaks_tab");var t=$("#h24_design_manager_tweaks_tabs");$("#h24_design_manager_tweaks_tabs",a).tabs();if(typeof e!="undefined"){n();if($(".h24_design_editor_expand_tweak_tabs_sidemenu_item").length==0){$("#h24_design_manager_tweaks_tabs").tabs("option","active",$("#h24_design_editor_tweak_slot_tab_"+e).index()-1)}else{$("#h24_design_manager_tweaks_tabs").tabs("option","active",$("#h24_design_editor_tweak_slot_tab_"+e).index())}}$("#h24_design_manager_simple_tweaks_container").click(function(e){var a=$(e.target),n,t,i,s;if(a.hasClass("h24_dm_st_pick_color")){n=a.closest(".h24_dm_st_multiple_tweak_container");t=n.find("input[name=color]"),i=t.val()==""?"#000000":t.val(),s=JSON.parse(n.find("input[name=jsonified_slots]").val());$h24.dialogs.h24_design_manager.markup.hide();var o=function(e){var a,n,t;for(var i=0;i<s.length;i++){a=s[i];if(a.object=="fontface"){n=$("#h24_dm_font_"+a.scope+"_settings_"+a.id);t=n.find("input[name=color]");t.val(e);n.addClass("changes_made");n.find("a.reset, a.h24_dm_reset").show();$h24.design_manager.modelFontPreviewSetCss(a.selector,"color",e)}else if(a.object=="tweak"){n=$("#design_"+a.scope+"tweak_slot_"+a.id);switch(a.type){case"bg":$h24.design_manager.modalFontPreviewClearCssSelector(a.selector);$h24.design_manager.tweaks.bg.setColor(n,a.selector,e,false);break;case"color":var o=n.find("input[name=properties]").val();$h24.design_manager.modalFontPreviewClearCssSelector(a.selector);$h24.design_manager.tweaks.color.setColor(n,a.selector,o,e);break;case"border":var r=n.find("input[name=borders]").val().split(";");var l=n.find("input[name=has_width]").val()==1;var d=n.find("input[name=has_color]").val()==1;var f=n.find("input[name=has_style]").val()==1;var _=n.find("input[name=border-width]").val();var c=n.find("input[name=border-style]").val();$h24.design_manager.modalFontPreviewClearCssSelector(a.selector);$h24.design_manager.tweaks.border.setBorder(n,a.selector,r,l,d,f,_,e,c);break;case"arrow":var h=n.find("input[name=orientation]").val();var m=n.find("input[name=type_string]").val();$h24.design_manager.tweaks.arrow.setArrow(n,a.selector,h,e,m);break}n.find(".color_tweak_slot").addClass("changes_made");n.find("a.reset").parent().show()}}};$h24.utils.colorPicker({color:i,allowTransparency:false,saveCallback:function(e){o(e);n.find("input[name=color]").val(e);n.find(".h24_dm_st_color_text").text(e);n.find(".h24_dm_st_color_preview").css("background-color",e);$h24.dialogs.h24_design_manager.markup.show();$(window).scrollTop($h24.dialogs.h24_design_manager.markup.find(".h24-FloatingPanel").offset().top)},dialogSettings:{showCloseButton:false,transparentOverlay:true},changedCallback:o});return false}});var a=$("#h24_design_manager_tweaks_tabs");a.tabs({beforeActivate:function(e,n){if($("#h24_design_editor_simple_tweak_tab").length==1){if(n.newTab.index()==2){a.find(".h24_design_editor_expand_tweak_tabs_sidemenu_item").hide();a.find(".h24_advanced_sidemenu_item").css("opacity",0).show().animate({opacity:1});a.tabs("option","active",2);return false}}}});$("table",a).click(function(e){var a=$(e.target);if(a.is("a")||a.parent().is("a")){if(a.is("a"))var n=a;else var n=a.parent();var t=a.closest("div.tweak_slot_settings");var i=$("input[name=scope]",t).val();var s=$("input[name=id]",t).val();var o=$("input[name=selector]",t).val();if(n.hasClass("clear_theme_tweak")){var r=confirm($h24.phrase.GUIPhrase("Design-Manager","Remove tweak settings from theme?"));if(r!==true)return false;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"clear_theme_tweak",scope:i,id:s},function(e){t.find("div.details").html(e);var a=t.closest("tr");a.removeClass("changes_made");t.find("div.clearer").html("")})}else if(n.hasClass("reset")){var r=confirm($h24.phrase.GUIPhrase("Design-Manager","Reset tweak to default values?"));if(r!==true)return false;var l=t.closest("tr");var o=l.find("input[name=selector]").val();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"reset_tweak_slot",scope:i,id:s},function(e){t.find("div.details").html(e);l.find("div.tweak_slot_settings").removeClass("changes_made");t.find("div.tweak_slot_buttons").hide();$(o).removeAttr("style")});return false}if(t.hasClass("bg_tweak_slot")){if(n.hasClass("color"))$h24.design_manager.tweaks.bg.preview(t,i,s,"color");else if(n.hasClass("pattern"))$h24.design_manager.tweaks.bg.preview(t,i,s,"pattern");else if(n.hasClass("image"))$h24.design_manager.tweaks.bg.preview(t,i,s,"image");else if(n.hasClass("page_background_manager")){$h24.dialogs.h24_design_manager.markup.hide();$h24.pageBackgroundManager.settings({onSave:function(e,a){var n=$("#design_"+i+"tweak_slot_"+s);for(var t in e){if(t=="settings"){n.find('input[name="'+t+'"]').val(JSON.stringify(e[t]))}else{n.find('input[name="'+t+'"]').val(e[t])}}n.find('input[name="pageid"]').val($h24.pageid);n.find('input[name="saveAs"]').val(a);n.find('input[name="pictureid"]').val(e.pictureid);n.find('input[name="selector"]').val(e.selector);n.find('input[name="opacity"]').val(e.opacity);$h24.pageBackgroundManager.destroy(true);$h24.dialogs.h24_design_manager.markup.show();n.addClass("changes_made")},onCancel:function(){$h24.dialogs.h24_design_manager.markup.show()}})}}else if(t.hasClass("toggle_tweak_slot")){if(n.hasClass("preview"))$h24.design_manager.tweaks.toggle.preview(t,i,s)}else if(t.hasClass("px_tweak_slot")){if(n.hasClass("preview"))$h24.design_manager.tweaks.px.preview(t,i,s)}else if(t.hasClass("color_tweak_slot")){if(n.hasClass("preview"))$h24.design_manager.tweaks.color.preview(t,i,s)}else if(t.hasClass("arrow_tweak_slot")){if(n.hasClass("preview"))$h24.design_manager.tweaks.arrow.preview(t,i,s)}else if(t.hasClass("border_tweak_slot")){if(n.hasClass("preview"))$h24.design_manager.tweaks.border.preview(t,i,s)}return false}else if(a.is("select")&&a.parent().parent().hasClass("toggle_tweak_slot")){a.closest("div.tweak_slot_settings").addClass("changes_made").find("div.tweak_slot_buttons").show()}});a.find("table .tweak_slot_settings").each(function(){var e=$(this);if(e.hasClass("toggle_tweak_slot")){e.find('select[name="toggle"]').on("change",function(){$h24.design_manager.tweaks.toggle.setCSS(e,e.find('input[name="scope"]').val(),e.find('input[name="scope"]').val(),e.find('input[name="css"]').val(),$(this).val()==1)})}});$("#h24_design_manager_tweaks_buttons a").each(function(){var e=$(this);if(e.hasClass("save")){e.click(function(){$h24.design_manager.saveTweaksAndFonts(false);return false})}else if(e.hasClass("save_and_close")){e.click(function(){$h24.design_manager.saveTweaksAndFonts(true);return false})}else if(e.hasClass("h24_close")){e.click(function(){$h24.design_manager.closeManagerDialog();return false})}});a.find("th a.tweak_illustration").hoverPreview()}function s(e,a){if(typeof e=="undefined")var e=$("#h24_design_manager_tweaks_tabs");var n={};var t={};var i=false;$("div.tweak_slot_settings",e).each(function(e){var a=$(this);if(a.hasClass("changes_made")){i=true;var s=$("input[name=id]",a).val();var o=$("input[name=scope]",a).val();if(o=="global"){t[s]={};a.find("input,select").each(function(){var e=$(this);if(!e.hasClass("skip"))t[s][e.attr("name")]=e.val()})}else{n[s]={};a.find("input,select").each(function(){var e=$(this);if(!e.hasClass("skip"))n[s][e.attr("name")]=e.val()})}}});if(!i){if(typeof a=="function")a.call(this);return}var s={};$("#h24_design_manager_simple_tweaks_container .h24_dm_st_multiple_tweak_container").each(function(){var e=$(this),a=e.find("input[name=design_multiple_tweak_id]").val();s[a]=$h24.utils.getParameters(e,".save_parameter")});var o={homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_tweaks",local_data:n,global_data:t,multipleTweaks:s};$h24.post($h24.slashwebroot+"Page/Communicator",o,function(e){$h24.design_manager.refreshBrowserOnDialogClose=true;if(e.successful){if(typeof a=="function")a.call(this)}else if($h24.devmode)console.log(e)})}function o(e){var a=$("#h24_design_manager_fonts_tab");var n=$("#h24_design_manager_fonts_tabs");$("#h24_design_manager_fonts_tabs",a).tabs();if(typeof e!="undefined")$("#h24_design_manager_fonts_tabs").tabs("option","active",$("#h24_design_manager_fonts_tab_"+e).index()-1);$("tr.fontface",a).each(function(){var e=$(this);if(e.hasClass("initialized"))return;var a=e.find("div.font_settings");var n=$("input[name=id]",e).val();var t=$("input[name=slot_type]",e).val();e.click(function(a){var i=$(a.target);if(i.is("a"))var s=i;else if(i.parent().is("a"))var s=i.parent();else return true;if(s.hasClass("h24_open_modal_font_preview")){e.addClass("changes_made");e.find(".h24_dm_reset").show();$h24.design_manager.modalFontPreview(t,n);return false}else if(s.hasClass("h24_dm_reset")){var o=confirm($h24.phrase.GUIPhrase("Design-Manager","Reset font to default values?"));if(o!==true)return false;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"reset_font_slot",id:n,slot_type:t},function(a){e.html(a);e.removeClass("changes_made initialized")})}else if(s.hasClass("h24_dm_reset_theme")){var o=confirm($h24.phrase.GUIPhrase("Design-Manager","Remove font settings from theme?"));if(o!==true)return false;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"clear_theme_font",id:n,slot_type:t},function(a){e.html(a);e.removeClass("changes_made");if($h24.devmode){console.log("TODO")}})}return false});e.addClass("initialized")});$("#h24_design_manager_font_bottom_buttons a",a).each(function(){var e=$(this);if(e.hasClass("save")){e.click(function(){$h24.design_manager.saveTweaksAndFonts(false);return false})}else if(e.hasClass("save_and_close")){e.click(function(){$h24.design_manager.saveTweaksAndFonts(true);return false})}else if(e.hasClass("h24_close")){e.click(function(){refreshBrowser();return false})}});a.find("th a.fontface_illustration").hoverPreview()}function r(e){var a={homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_fonts"};if(typeof e!="function")var e=function(){};var n=[];$("#h24_design_manager_fonts_tab table tr.fontface.changes_made").each(function(){var e=$(this);var a=n.length;n[a]={};var t=$h24.utils.getParameters(e);n[a]=t;e.removeClass("changes_made")});if(n.length==0){e.call(this);return}a.data=n;$h24.post($h24.slashwebroot+"Page/Communicator",a,e)}function l(e){$h24.design_manager.genericFontPicker({current:e.find(".font_simple_overview input[name=fontface]").val(),textElements:e.find(".font_simple_overview span.fontface"),valElements:e.find(".font_simple_overview input[name=fontface]"),cssElements:e.find(".font_preview_container h1"),okCallback:function(a){e.addClass("changes_made");e.find("a.reset").show();this.scrollToDialogBelow();this.close()}})}function d(e,a){}function f(e){var a={current:"",okCallback:function(e){console.log(e);this.close()},revertCallback:function(){console.log("revert");this.close()},dialogSettings:{title:$h24.phrase.GUIPhrase("Design-Manager","Fonts"),width:900,closeCallback:function(){$h24.coreUploader.destroy("h24_generic_font_uploader");this.close();this.scrollToDialogBelow()}},textElements:undefined,valElements:undefined,cssElements:undefined,useFontLoaderOnOk:true,ttfOnly:false,fontLoaderOptions:{replaceMethod:false}};e=$.extend(true,a,e);var n=e.ttfOnly?1:0;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"generic_font_picker",current:e.current,ttf_only:n},function(a){var t=$h24.dialog.create("font_picker",a,e.dialogSettings);t.markup.find(".h24_generic_font_picker_tabs").tabs({beforeActivate:function(e,a){var n=$(a.newPanel);$("#h24_generic_font_listDiv").scrollTop(0);if(n.hasClass("h24_initialized")||!n.hasClass("h24_dm_gfp_inactivate_fonts")){return}n.find("img").each(function(){$(this).prop("src",$(this).data("tmpsrc"))})}});var i=t.markup.find(".generic_font_preview_container input[name='fontname'], #h24_gfp_uploaded_fonts_ajax input[name='fontname']");var s=new Array;var o={};var r=JSON.parse(t.markup.find("#h24_generic_font_picker_tabs_7 input[name='usedFontfaces']").val());$.each(r,function(e,a){s.push(a);o[a]=true});$("#h24_design_manager_fonts_tabs input[name=fontface]").each(function(){var e=$(this).val();if(e!=""&&o[e]!=true){s.push(e);o[e]=true}});s.sort();$.each(s,function(e,a){var n=i.filter('[value="'+a+'"]').first().parent("a").clone();var t=n.find("img");t.prop("src",t.data("tmpsrc"));n.css("display","");$("#h24_generic_font_picker_tabs_7").append(n)});t.markup.find(".generic_font_preview_container, .generic_font_uploader_container").click(function(a){var n=$(a.target);if(n.is("img")){var i=n.closest("a").find("input[name=fontname]").val();var s=n.closest("a").find("input[name=font-family]").val();var o=n.closest("a").find("input[name=type]").val();if(typeof e.textElements=="object")$(e.textElements).text(i);if(typeof e.valElements=="object")$(e.valElements).val(i);if(typeof e.cssElements=="object")$(e.cssElements).css("font-family",s);if(e.useFontLoaderOnOk)$h24.design_manager.loadFonts(i,o,e.fontLoaderOptions);$h24.coreUploader.destroy("h24_generic_font_uploader");e.okCallback.call(t,i,s,o);return false}else if(n.hasClass("h24_uploaded_font")){var i=n.siblings("input[name=fontname]").val();var s=n.siblings("input[name=font-family]").val();var r=n.siblings("input[name=loading_string]").val();if(typeof e.textElements=="object")$(e.textElements).text(s);if(typeof e.valElements=="object")$(e.valElements).val(i);if(typeof e.cssElements=="object")$(e.cssElements).css("font-family",s);if(e.useFontLoaderOnOk)$h24.design_manager.loadFonts(r,"uploaded",e.fontLoaderOptions);$h24.coreUploader.destroy("h24_generic_font_uploader");e.okCallback.call(t,i,s,"uploaded",r);return false}else if(n.hasClass("h24_delete_uploaded_font")){var l=n.closest(".h24_uploaded_font_preview_container");var i=l.find("input[name=fontname]").val().substring(1);var d=confirm($h24.phrase.GUIPhrase("Design-Manager","Are you sure?"));if(d!==true)return;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"delete_uploaded_fontface",fontname:i},function(e){if(e.successful)l.remove();else if(!e.successful&&$h24.devmode)console.log(ajaX)});return false}});$("#h24_generic_font_picker_tabs_6 .h24_contentBox a.h24_hoverPreview").hoverPreview({clickReturnFalse:true});$h24.coreUploader.create("h24_generic_font_uploader",$("#h24_generic_font_uploader"),{maxQueuedFiles:1,mode:$h24.coreUploader.FONTFACE_UPLOADER_MODE,maxFileSize:"5mb",type:"default",allFilesUploaded:function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"gfp_uploaded_fonts",current:e.current,ttf_only:n},function(e){$("#h24_gfp_uploaded_fonts_ajax").html(e);var a=$("#h24_gfp_uploaded_fonts_combined_loading_string");var n=$("#h24_gfp_uploaded_fonts_combined_loading_link");if(a.length==1){n.remove();var t={rel:"stylesheet",type:"text/css",href:a.val(),id:"h24_gfp_uploaded_fonts_combined_loading_link"};var i=$("<link/>",t);i.appendTo("head")}})},beforeUpload:function(){$h24.utils.ajaxLoaderStart()}})})}function _(e){var a={current:0,okCallback:function(e){console.log(e);this.close()},dialogSettings:{title:$h24.phrase.GUIPhrase("Design-Manager","Font Sizes"),width:950},textElements:undefined,valElements:undefined,cssElements:undefined,fontFamily:""};e=$.extend(true,a,e);$h24.get($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"generic_font_size_picker",current:e.current,font_family:e.fontFamily},function(a){var n=$h24.dialog.create("font_size_picker",a,e.dialogSettings);n.markup.find("div.size_preview a").click(function(){var a=$(this).find("input[name=font-size]").val();if(typeof e.textElements=="object")$(e.textElements).text(a);if(typeof e.valElements=="object")$(e.valElements).val(a);if(typeof e.cssElements=="object")$(e.cssElements).css("font-size",a+"px");e.okCallback.call(n,a);return false})})}function c(e){$h24.design_manager.genericFontSizePicker({current:e.find(".font_simple_overview input[name=font-size]").val(),textElements:e.find(".font_simple_overview span.font-size"),valElements:e.find(".font_simple_overview input[name=font-size]"),okCallback:function(a){e.addClass("changes_made");e.find("a.reset").show();this.scrollToDialogBelow();this.close()},fontFamily:e.find(".font_preview_container h1").css("font-family")})}function h(e,a,n){var t={showLoadingSpinner:false,replaceMethod:false};t=$.extend(t,n);var i=e.split("|");var s;var o=[];for(var r=0;r<i.length;r++){s=i[r];if(!t.replaceMethod){if(typeof $h24.design_manager.loadedFonts[s]!="boolean"){$h24.design_manager.loadedFonts[s]=true;o[o.length]=s}else{return}}else{o[o.length]=s}}if(a=="google"){var l=o.join("|");var d={rel:"stylesheet",type:"text/css",href:"//fonts.googleapis.com/css?family="+l};var f=$("<link/>",d);if(t.showLoadingSpinner){$h24.utils.ajaxLoaderStart();f.loadWithTimeout({timeout:1e3,onLoad:function(){$h24.utils.ajaxLoaderStop()}})}if(t.replaceMethod){$("head").find(".h24_dm_fontface_replaced").remove();f.addClass("h24_dm_fontface_replaced")}f.appendTo("head");return d}else if(a=="local"||a=="uploaded"){var l=o.join("|");var d={rel:"stylesheet",type:"text/css",href:$h24.publicdir+"css/fonts/fontface.php?family="+l};var f=$("<link/>",d);if(t.replaceMethod){$("head").find(".h24_dm_fontface_replaced").remove();f.addClass("h24_dm_fontface_replaced")}f.appendTo("head");return d}}var m=false;function g(){var e=$("#sidebar");if(e.length>0){e.css("position","relative");e.css("z-index",3)}var a=$("#nav_superfish");if(a.length>0){a.css("z-index",3)}var n=$("#h24_footer");if(n.length>0){var t=n.parent();t.css("position","relative");t.css("z-index",3)}if($h24.design_system==1){var i=$("#h24_navigation_presentation_mode_settings_button");var s=i.find("input[name=selector]").val();if(s!=""){var o=$(s);if(o.length==1){var r=o.css("position");if(r!="relative"&&r!="absolute")o.css("position","relative");i.appendTo(o);o.delayedHover({hover:function(){i.show()},hoverEnd:function(){i.hide()}});i.find("a").click(function(){$h24.design_manager.navigationPresentationMode();return false})}else i.hide()}else i.hide();var l=$("#h24_header_collage_editor_button");var s=l.find("input[name=selector]").val();var d=l.find("input[name=header_button_selector]").val();if(d!=""||s!=""){if(d!=""){var f=$(d)}else{var f=$(s)}var r=f.css("position");if(r!="relative"&&r!="absolute"){f.css("position","relative")}}}$h24.design_manager.hoverButtonsInitialized=true}function p(){$h24.get($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"navigation_presentation_mode"},function(e){var a=$h24.dialog.create("navigation_presentation_mode",e);a.markup.find("a").each(function(){var e=$(this);e.click(function(){if(e.hasClass("save")){var n=a.markup.find("form input[type=radio]:checked").val();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_navigation_presentation_mode",navigation_presentation_mode:n},function(e){if(!e.successful&&$h24.devmode)console.log(e);else refreshBrowser()});return false}else if(e.hasClass("cancel")){a.close();return false}})})})}function u(){refreshBrowser()}function v(e,a){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"create_theme",theme_id:0,name:a},function(a){if($h24.devmode)console.log(a);if(a.successful){$h24.design_manager.loadDesignBrowserThemes(e)}})}function w(e){if(typeof e=="undefined")var e=false;var a=$("#h24_design_manager_tweaks_tabs");$h24.design_manager.saveTweaks(a,function(){$h24.design_manager.saveFonts(function(){if(e)refreshBrowser()})})}function k(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"StyleManager",modelaction:"change_design_system_dialog"},function(e){var a=new $h24.dialog("h24_change_design_system_dialog",e);a.markup.find(".h24_button_container a").click(function(){var e=$(this);if(e.hasClass("h24_change_to_h24d")){location.href=$h24.slashwebroot+"h24-design/design-gallery"}else if(e.hasClass("h24_cancel"))a.close();return false})})}var b=function(e,a){var n=$("#h24_dm_mfp_right_panel"),t,i=n.find("input[name=slot_id]").val(),s=n.find("input[name=slot_type]").val(),o=$("#h24_dm_font_"+s+"_settings_"+i),r=o.find(".font_preview_container h1"),l=n.find('input[name="fontface"]');if(typeof a=="undefined"){a=false}if($h24.eyecandy){$h24.dialogs.h24_design_manager.markup.css({opacity:0}).show().animate({opacity:1},500,function(){if(typeof $h24.dialogs.h24_design_manager!="undefined"){$(window).scrollTop($h24.dialogs.h24_design_manager.contents.offset().top)}$h24.adminPanel.togglePanel(e)});$("#h24_dm_mfp_right_panel").animate({right:-1*n.width(),opacity:0},500,function(){n.remove()});$("html").animate({"margin-right":0})}else{n.remove();$h24.dialogs.h24_design_manager.markup.show();if(typeof $h24.dialogs.h24_design_manager!="undefined"){$(window).scrollTop($h24.dialogs.h24_design_manager.contents.offset().top)}$("html").css("margin-right",0);$h24.adminPanel.togglePanel(e)}$("#h24_dm_mfp_transparent_overlay").remove();if(a){return}t=$h24.utils.getParameters(n,".h24_save_parameter");o.find(".h24_dm_font_setting").each(function(){var e=$(this),a=e.attr("name");if(typeof t[a]!="undefined"){if(a=="fontface"){e.val(l.data("fontname"))}else{e.val(t[a]);r.css(a,t[a])}}});if(l.length==1){r.css("font-family",l.data("family"))}};var y=function(e,a){$('#h24_dm_mfp_right_panel_tab_0 [name="fontface_select"]').remove();var n=$("#h24_dm_mfp_right_panel_tab_0 .h24_dm_mfp_fontface");$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"getModalFontPreviewFontfaceSelect",currentFontface:e},function(e){n.replaceWith(e);if(typeof a=="function"){a.call(this)}})};var C=function(){var e=$("#h24_dm_mfp_right_panel .h24_dm_mfp_fontface .h24_dm_fontfaces_currently_used");var a=$("#h24_dm_mfp_right_panel .h24_dm_mfp_fontface .h24_dm_fontfaces_all");if(e.length==1){var n=new Array;var t={};e.find("option").each(function(){t[$(this).val()]=true});$("#h24_design_manager_fonts_tabs input[name=fontface]").each(function(){var e=$(this).val();if(e!=""&&t[e]!=true){n.push(e);t[e]=true}});n.sort();var i=null;$.each(n,function(n,t){var s=a.find("option[value='"+t+"']");var o=s.clone();if(s.is(":selected")){i=o;s.removeAttr("selected");o.removeAttr("selected")}e.append(o)});if(i!=null)i.attr("selected","selected")}};var P=function(e,a,n){var t={};$.extend(t,n,true);var i=true;if(!!$h24.dialogs.h24_design_manager){$h24.dialogs.h24_design_manager.markup.hide()}if(!$("html").hasClass("h24_admin_panel_hidden")){$h24.adminPanel.togglePanel(true);i=false}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"modalFontPreview",slotType:e,slotId:a,useIframe:$h24.browser=="ie8"?1:0},function(n){var s=$(n);$h24.coreDialog.createOverlay({transparentOverlay:true,fixed:true,draggable:true,title:"Preview",overlayId:"h24_dm_mfp_transparent_overlay"});s.find("#h24_dm_mfp_right_panel").appendTo("body");var o=$("#h24_dm_mfp_right_panel");if($h24.browser=="ie8"){$("#h24_dm_mfp_ie8_warning").show()}o.css("z-index",1011);if($h24.eyecandy){o.css({right:-1*o.width(),opacity:0}).animate({right:0,opacity:1},500);$("html").animate({marginRight:o.width()})}else{$("html").css("margin-right",o.width())}$("#h24_dm_font_"+e+"_settings_"+a+" .h24_dm_font_setting").each(function(){var e=$(this),a=e.attr("name"),n=e.val(),t;if(e.hasClass("skip_me")){return}t=o.find('[name="'+a+'"]');if(t.length==1){if(t.hasClass("h24_dm_mfp_integer")){n=parseInt(n,10)}if(a=="fontface"){var i=o.find('[name="fontface_select"] option[value="'+n+'"]:first');if(i.length==1){t.val(i.text());t.data(i.data())}}else if(t.is("input")){t.val(n)}else if(t.is("select")){t.find("option").removeAttr("selected");t.find('option[value="'+n+'"]:first').attr("selected","selected")}if(a=="color"){o.find(".h24_dm_mfp_color_text").text(n);o.find(".h24_dm_mfp_color_preview").css("background-color",n)}}});o.find(".h24_tab_container").tabs();o.find(".h24_dm_mfp_preview").hoverPreview();$h24.design_manager.modalFontPreviewReloadPreview(true);o.change(function(e){var a=$(e.target),n,t=a.attr("name"),i=$("#h24_dm_mfp_current_selector").val();if(a.is("select")){n=a.find(":selected");switch(t){case"slot_picker":var s=n.data("type"),r=n.val();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"modalFontPreviewRightPanel",slotType:s,slotId:r},function(e){o.html(e);o.find(".h24_tab_container").tabs();var a=$("#h24_dm_mfp_current_selector").val();o.find(".h24_dm_mfp_preview").hoverPreview();var n=$("#h24_dm_mfp_css_container");if(n.length==1){var t=n.data("stateObject");if(typeof t[a]!="undefined"){for(var i in t[a]){var s=t[a][i];switch(i){case"letter-spacing":case"word-spacing":s=parseInt(s,10);if(isNaN(s)){break}default:var r=o.find("[name="+i+"]");if(r.is("select")){r.find('option[value="'+s+'"]').attr("selected","selected")}else if(r.is("input")){r.val(s)}break}}$h24.design_manager.modalFontPreviewReloadPreview()}}});break;default:$h24.design_manager.modelFontPreviewSetCss(i,t,n.val());break}}else if(a.is("input")){if(a.hasClass("h24_dm_mfp_letter_spacing")||a.hasClass("h24_dm_mfp_word_spacing")){$h24.design_manager.modelFontPreviewSetCss(i,t,a.val()+"px")}}});o.click(function(e){var a=$(e.target),n=$("#h24_dm_mfp_current_selector").val();if(a.hasClass("h24_dm_mfp_size_picker")){var s=o.find('select[name="font-size"]'),r=s.find("option:selected"),l=o.find('input[name="fontface"]').data("family");$h24.design_manager.genericFontSizePicker({current:parseInt(r.val(),10),fontFamily:l,okCallback:function(e){s.find('option[value="'+e+'px"]').attr("selected","selected");$h24.design_manager.modelFontPreviewSetCss(n,"font-size",e+"px");this.close()}});return false}else if(a.hasClass("h24_dm_mfp_size_smaller")){var d=o.find('select[name="font-size"] option:selected'),f=d.prev();if(f.length==1){f.attr("selected","selected");$h24.design_manager.modelFontPreviewSetCss(n,"font-size",f.val())}return false}else if(a.hasClass("h24_dm_mfp_size_larger")){var d=o.find('select[name="font-size"] option:selected'),_=d.next();if(_.length==1){_.attr("selected","selected");$h24.design_manager.modelFontPreviewSetCss(n,"font-size",_.val())}return false}else if(a.hasClass("h24_dm_mfp_color_picker")){var c=o.find(".h24_dm_mfp_color"),h=o.find(".h24_dm_mfp_color_text"),m=o.find(".h24_dm_mfp_color_preview"),g=c.val();if($h24.eyecandy){$("#h24_dm_mfp_right_panel").animate({opacity:.1})}$h24.utils.colorPicker({color:c.val(),allowTransparency:false,dragCallback:function(e){c.val(e);h.text(e);m.css("background-color",e)},changedCallback:function(e){$h24.design_manager.modelFontPreviewSetCss(n,"color",e)},dialogSettings:{transparentOverlay:true,onClose:function(){var e=$h24.coreDialogs.h24_canvas_picker.content.find(".h24_canvas_picker");if(!e.hasClass("h24_saving_and_closing")){c.val(g);h.text(g);m.css("background-color",g);$h24.design_manager.modelFontPreviewSetCss(n,"color",g)}if($h24.eyecandy){$("#h24_dm_mfp_right_panel").animate({opacity:1})}}},saveCallback:function(){var e=$h24.coreDialogs.h24_canvas_picker.content.find(".h24_canvas_picker");e.addClass("h24_saving_and_closing");if($h24.eyecandy){$("#h24_dm_mfp_right_panel").animate({opacity:1})}}});return false}else if(a.hasClass("h24_dm_mfp_color")){var c=o.find(".h24_dm_mfp_color"),h=o.find(".h24_dm_mfp_color_text"),m=o.find(".h24_dm_mfp_color_preview");a.inputTimeout({onTimeout:function(e){c.val(e);h.text(e);m.css("background-color",e);$h24.design_manager.modelFontPreviewSetCss(n,"color",e)},delay:100})}else if(a.hasClass("h24_dm_mfp_close")){if(typeof t.closeCallback=="function"){t.closeCallback($h24.utils.getParameters($("#h24_dm_mfp_right_panel"),".h24_save_parameter"),i)}else{$h24.design_manager.closeModalFontPreview(i)}return false}else if(a.hasClass("h24_dm_mfp_cancel")){$h24.design_manager.modalFontPreviewClearCssSelector(n);if(typeof t.cancelCallback=="function"){t.cancelCallback(i)}else{$h24.design_manager.closeModalFontPreview(i,true)}return false}else if(a.hasClass("h24_dm_mfp_letter_spacing")||a.hasClass("h24_dm_mfp_word_spacing")){a.inputTimeout({onTimeout:function(e){var a=parseInt(e,10),t=$(this).attr("name");if(!isNaN(a)){$h24.design_manager.modelFontPreviewSetCss(n,t,a+"px")}$h24.design_manager.modalFontPreviewReloadPreview()},delay:100})}else if(a.hasClass("h24_dm_mfp_font_picker")){var p=o.find('input[name="fontface"]');$h24.design_manager.genericFontPicker({current:p.data("fontname"),okCallback:function(e,a,t,i){var s=this;$h24.design_manager.reloadModalFontPreviewFontfaceSelect(e,function(){$h24.design_manager.modelFontPreviewSetCss(n,"font-family",a);s.close()})},fontLoaderOptions:{replaceMethod:$h24.browser=="ie8"||$h24.browser=="ie9"},dialogSettings:{closeCallback:function(){$h24.coreUploader.destroy("h24_generic_font_uploader");this.close();this.scrollToDialogBelow()}}});return false}})})};var F=function(e){var a=$("#h24_dm_mfp_right_panel"),n=$h24.utils.getParameters(a,".h24_save_parameter"),t=a.find('input[name="fontface"]'),i=t.data("family"),s=t.data("type"),o=$("#h24_dm_mfp_preview_container"),r,l="",d=o.find("iframe"),f,_,c="#ffffff";
if(typeof e=="undefined"){e=false}if(typeof n.fontface!="undefined"){r=n.fontface;delete n.fontface}else{r=""}if(typeof n.color!="undefined"&&n.color!=""){c=$h24.utils.getBackgroundShade(n.color)}if(d.length==1){f=d.contents();_=f.find(".h24_dm_mfp_iframe_fontface_holder");if(e||_.length==1&&_.val()!=r){for(var h in n){l+=h+":"+n[h]+";"}d.attr("src",$h24.slashwebroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/DesignManager/modelaction/modalFontPreviewIframe?fontface="+encodeURIComponent(r)+"&fontFamily="+encodeURIComponent(i)+"&type="+s+"&backgroundShade="+encodeURIComponent(c)+"&fontCss="+encodeURIComponent(l));$h24.utils.ajaxLoaderStart();d.loadWithTimeout({onLoad:function(){$h24.utils.ajaxLoaderStop();f.find("body").css("background-color",c)}})}else{f.find(".h24_dm_mfp_iframe_preview_target").css(n);f.find("body").css("background-color",c)}}else{n["font-family"]=i;o.find(".h24_dm_mfp_preview_target").css(n);o.css("background-color",c)}};var x=function(e){var a=$("#h24_dm_mfp_css_container"),n="",t;if(a.length==1&&typeof a.data("stateObject")!="undefined"){t=a.data("stateObject");delete t[e];a.data("stateObject",t);for(var i in t){cssObject=t[i];n+=i+" {\n";for(var s in cssObject){n+=s+": "+cssObject[s]+";\n"}n+="}\n"}if($h24.browser=="ie8"){a.attr("styleSheet").cssText=n}else{a.html(n)}}};var D=function(e,a,n){var t=$("#h24_dm_mfp_css_container"),i,s,o="",r;if(t.length==0){r=$("<style/>",{type:"text/css",id:"h24_dm_mfp_css_container"}).appendTo("head").data("stateObject",{})}else{r=t}i=r.data("stateObject");if(typeof i[e]=="undefined"){i[e]={}}i[e][a]=n;r.data("stateObject",i);for(var l in i){s=i[l];o+=l+" {\n";for(var d in s){if(d==="line-height"){s[d]=parseInt(s[d],10)/100}o+=d+": "+s[d]+";\n"}o+="}\n"}if($h24.browser=="ie8"){r.attr("styleSheet").cssText=o}else{r.html(o)}$h24.design_manager.modalFontPreviewReloadPreview()};var S=function(){$h24.coreDialog.create("design_system_disabled_dialog","<br/><br/><br/><br/><br/>",{title:$h24.phrase.GUIPhrase("Design-Manager","You need to upgrade to the new design system"),showCloseButton:false,draggable:false,width:520,overlayOpacity:1});$h24.coreDialogs.design_system_disabled_dialog.content.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"DesignManager",modelaction:"oldDesignSystemDisabled"},function(e){if(e!=""){$h24.coreDialogs.design_system_disabled_dialog.content.html(e)}})};return{managerDialog:e,pickLayout:t,initLayouts:a,initTweaks:i,initFonts:o,initFontTab:d,saveFonts:r,fontPicker:l,fontSizePicker:c,loadFonts:h,loadedFonts:{},initHoverButtons:g,hoverButtonsInitialized:m,saveTweaks:s,closeManagerDialog:u,navigationPresentationMode:p,genericFontPicker:f,genericFontSizePicker:_,saveTweaksAndFonts:w,changeDesignSystemDialog:k,modalFontPreview:P,closeModalFontPreview:b,modalFontPreviewReloadPreview:F,modelFontPreviewSetCss:D,modalFontPreviewClearCssSelector:x,reloadModalFontPreviewFontfaceSelect:y,oldDesignSystemDisabledDialog:S}}();
h24core.prototype.design_manager.tweaks=function(){function e(e,a){var t=$("#h24_design_manager_tweaks_tabs a[href=#h24_design_editor_tweak_slot_tab_footer]").parent().hasClass("ui-tabs-active");var n=$("#h24_design_manager_tweaks_tabs a[href=#h24_design_editor_tweak_slot_tab_header]").parent().hasClass("ui-tabs-active");var i=$h24.design_manager.tweaks.scrollTop;var r=false;if(t&&$("#h24_footer").length==1){$(window).scrollTop($("#h24_footer").offset().top);r=true}else if(n){$(window).scrollTop(0);r=true}var s=$h24.dialogs[e];var l=a.find("div.tweak_slot_buttons");if(l.not(":visible"))l.show();if(r)$(window).scrollTop($h24.design_manager.tweaks.scrollTop);$(".ap_toggle_edit_mode").show();s.close()}function a(e,a,t,n){var i=$("#h24_design_manager_tweaks_tabs a[href=#h24_design_editor_tweak_slot_tab_footer]").parent().hasClass("ui-tabs-active");var r=$("#h24_design_manager_tweaks_tabs a[href=#h24_design_editor_tweak_slot_tab_header]").parent().hasClass("ui-tabs-active");var s=$(window).scrollTop();var l=false;if(i&&$("#h24_footer").length==1){$(window).scrollTop($("#h24_footer").offset().top);l=true}else if(r){$(window).scrollTop(0);l=true}$h24.design_manager.tweaks.scrollTop=s;var o={transparentOverlay:true,hidePreviousDialogs:true,closeCallback:function(){var e=n.find("div.tweak_slot_buttons");if(e.not(":visible"))e.show();if(l)$(window).scrollTop($h24.design_manager.tweaks.scrollTop);$(".ap_toggle_edit_mode").show();$h24.design_manager.tweaks.bg.destroyUploaders();this.close()},width:350,alignment:"right",fixedWhenScrolling:true,sidePadding:15,title:$h24.phrase.GUIPhrase("Dialogs","Move"),draggable:true,leftFlapType:"move",closeTitle:$h24.phrase.GUIPhrase("Dialogs","Save")};$.extend(o,t);$(".ap_toggle_edit_mode").hide();var d=$h24.dialog.create(e,a,o);return d}return{createPreviewDialog:a,closePreviewDialog:e}}();h24core.prototype.design_manager.tweaks.scrollTop=0;h24core.prototype.design_manager.tweaks.bg={destroyUploaders:function(){$h24.coreUploader.destroy("h24_bg_tweak_preview_image_uploader");$h24.coreUploader.destroy("h24_bg_tweak_preview_pattern_uploader")},preview:function(e,a,t,n){var i=$("input[name=selector]",e).val();$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"get_tweak_html",scope:a,id:t,mode:"preview",params:{type:n}},function(r){var s=$h24.design_manager.tweaks.createPreviewDialog("background_preview_dialog",r,{},e);var l=s.markup;var o=e.find("input[name=color]").val();if($("input[name=empty_on_load]",e).val()==1){var d=$(i).css("background-color");if(typeof d==="string"&&d!=""&&d.substring(0,4)=="rgb(")o=$h24.utils.rgbToHex(d)}l.find("input[name=color]").val(o);if(n=="color"){$h24.design_manager.tweaks.bg.initColorTab.call($("#h24_design_manager_tweaks_bg_color_tab"),e,s,i);var g=0}else if(n=="pattern"){var g=1}else if(n=="image"){var g=2}var c=l.find("#h24_design_manager_tweaks_bg_tabs").tabs({beforeActivate:function(n,r){var l=$(r.newPanel);switch(l.attr("id")){case"h24_design_manager_tweaks_bg_color_tab":$h24.design_manager.tweaks.bg.initColorTab.call(l,e,s,i);break;case"h24_design_manager_tweaks_bg_pattern_tab":$h24.design_manager.tweaks.bg.initPatternTab.call(l,e,s,i,a,t);break;case"h24_design_manager_tweaks_bg_image_tab":$h24.design_manager.tweaks.bg.initImageTab.call(l,e,s,i,a,t);break}}}).tabs("option","active",g)})},initColorTab:function(e,a,t){a.changeWidth(468);e.find("input[name=type]").val("color");var n=this.find(".h24_bg_preview_colorpicker");if(!this.hasClass("initialized")){n.canvasPicker({color:e.find("input[name=color]").val(),dragCallback:function(a){$h24.design_manager.tweaks.bg.setColor(e,t,a)},allowTransparency:true});this.find("a.save_and_close").click(function(){if(!e.hasClass("changes_made"))e.addClass("changes_made");$h24.design_manager.tweaks.closePreviewDialog("background_preview_dialog",e);$h24.design_manager.tweaks.bg.destroyUploaders();return false})}else{n.canvasPickerSetColor(e.find("input[name=color]").val())}this.addClass("initialized")},setColor:function(e,a,t){if(!e.hasClass("changes_made"))e.addClass("changes_made");$(a).css("background-image","none");$(a).css("background-color",t);$("input[name=color]",e).val(t);e.find("span.type_text").hide();e.find("span.type_color").show()},initPatternTab:function(e,a,t,n,i){a.changeWidth(560);e.find("input[name=type]").val("pattern");var r=this.find(".h24_design_manager_tweaks_bg_colorpicker_preview");var s=e.find("input[name=color]");if(!this.hasClass("initialized")){this.find("#h24_design_manager_tweaks_bg_pattern_tabs").tabs({beforeActivate:function(e,a){var t=$(a.newPanel);var r=a.newTab.index();if(!t.hasClass("initialized")&&r!=4)$h24.design_manager.tweaks.bg.loadPatternCategory(t,r,n,i)}}).find("div.pattern_tab").click(function(a){var n=$(a.target);if(n.hasClass("pattern_preview")){$h24.design_manager.tweaks.bg.setPattern.call(n,e,t);return false}else if(n.hasClass("scaled_preview")){var i=n.parent();$h24.design_manager.tweaks.bg.setPattern.call(i,e,t);return false}else if(n.hasClass("pattern_preview_image")){var i=n.parent().parent();$h24.design_manager.tweaks.bg.setPattern.call(i,e,t);return false}});r.click(function(){$h24.utils.colorPicker({color:s.val(),saveCallback:function(e){s.val(e);r.css("background-color",e)}})});this.find("a.save_and_close").click(function(){if(!e.hasClass("changes_made"))e.addClass("changes_made");$h24.design_manager.tweaks.closePreviewDialog("background_preview_dialog",e);$h24.design_manager.tweaks.bg.destroyUploaders();return false})}else{r.css("background-color",s.val())}var l=this.find("div.current");if(l.length>0)$h24.design_manager.tweaks.bg.setPattern.call(l,e,t);$h24.coreUploader.create("h24_bg_tweak_preview_pattern_uploader",$("#h24_bg_tweak_preview_pattern_uploader"),{maxQueuedFiles:1,mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"5mb",pluploaderOptions:{filters:[$h24.coreUploader.IMAGE_FILES_FILTER]},fileUploaded:function(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"get_snippet_after_upload",user_file_id:e.user_file_id,type:"pattern",scope:n,id:i},function(e){$("#h24_design_manager_tweaks_bg_pattern_tab_4 .inner_pattern_container").prepend(e);$("#h24_design_manager_tweaks_bg_image_tab .user_pattern_container").prepend(e)})}});this.addClass("initialized")},loadPatternCategory:function(e,a,t,n,i){if(typeof i=="undefined")var i=1;$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"get_tweak_html",scope:t,id:n,mode:"pattern_tab",params:{tab:a,section:i}},function(i){e.html(i);var r=$("div.pattern_pages a",e).each(function(){var i=$(this);var r=i.text();i.click(function(){$h24.design_manager.tweaks.bg.loadPatternCategory(e,a,t,n,r);return false})});e.addClass("initialized")})},setPattern:function(e,a){if(!e.hasClass("changes_made"))e.addClass("changes_made");var t=this.css("background-image");var n=this.find("input[name=file]").val();$(a).css("background-color","");$(a).css("background-image",t);$(a).css("background-repeat","repeat");$(a).css("background-attachment","scroll");$(a).css("background-position","0% 0%");e.find("span.type_text").hide();e.find("span.type_pattern").show();if(this.hasClass("user_file_pattern")){$("input[name=file_type]",e).val(1);$("input[name=file_theme_id]",e).val(0)}else if(this.hasClass("theme_pattern")||this.hasClass("theme_image")){$("input[name=file_type]",e).val(2);$("input[name=file_theme_id]",e).val(this.find("input[name=file_theme_id]").val())}else{$("input[name=file_type]",e).val(0);$("input[name=file_theme_id]",e).val(0)}$("input[name=file]",e).val(n);$old_current=$("#h24_design_manager_tweaks_bg_pattern_tab").find("div.current").removeClass("current");this.addClass("current")},initImageTab:function(e,a,t,n,i){a.changeWidth(550);e.find("input[name=type]").val("image");var r=this.find(".h24_design_manager_tweaks_bg_colorpicker_preview");var s=e.find("input[name=color]");if(!this.hasClass("initialized")){this.click(function(a){var n=$(a.target);if(n.hasClass("pattern_preview")){$h24.design_manager.tweaks.bg.setImage.call(n,e,t,this);return false}else if(n.hasClass("scaled_preview")){var i=n.parent();$h24.design_manager.tweaks.bg.setImage.call(i,e,t,this);return false}else if(n.hasClass("pattern_preview_image")){var i=n.parent().parent();$h24.design_manager.tweaks.bg.setImage.call(i,e,t,this);return false}});var l=this;var o=this.find("#h24_design_manager_tweaks_bg_image_settings");r.click(function(){$h24.utils.colorPicker({color:s.val(),saveCallback:function(a){s.val(a);r.css("background-color",a);var n=l.find("div.current");if(n.length>0)$h24.design_manager.tweaks.bg.setImage.call(n,e,t,l)}})});$("select",o).each(function(){$(this).unbind().bind("change",function(){var a=$(this);e.find("input[name="+a.attr("name")+"]").val(a.val());var n=l.find("div.current");if(n.length>0)$h24.design_manager.tweaks.bg.setImage.call(n,e,t,l)})});$("td.background-position",o).click(function(a){var n=$(a.target);if(n.hasClass("setting_preview")){var i=$("input[name=position]",n).val();e.find("input[name=position]").val(i);$("td.background-position div.current_setting",o).removeClass("current_setting");n.addClass("current_setting");var r=l.find("div.current");if(r.length>0)$h24.design_manager.tweaks.bg.setImage.call(r,e,t,l)}});$("td.background-repeat",o).click(function(a){var n=$(a.target);if(n.hasClass("setting_preview")){var i=$("input[name=repeat]",n).val();e.find("input[name=repeat]").val(i);$("td.background-repeat div.current_setting",o).removeClass("current_setting");n.addClass("current_setting");var r=l.find("div.current");if(r.length>0)$h24.design_manager.tweaks.bg.setImage.call(r,e,t,l)}});$h24.coreUploader.create("h24_bg_tweak_preview_image_uploader",$("#h24_bg_tweak_preview_image_uploader"),{maxQueuedFiles:1,mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"5mb",pluploaderOptions:{filters:[$h24.coreUploader.IMAGE_FILES_FILTER]},fileUploaded:function(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"get_snippet_after_upload",user_file_id:e.user_file_id,type:"pattern",scope:n,id:i},function(e){$("#h24_design_manager_tweaks_bg_pattern_tab_4 .inner_pattern_container").prepend(e);$("#h24_design_manager_tweaks_bg_image_tab .user_pattern_container").prepend(e)})}});this.find("a.save_and_close").click(function(){if(!e.hasClass("changes_made"))e.addClass("changes_made");$h24.design_manager.tweaks.closePreviewDialog("background_preview_dialog",e);$h24.design_manager.tweaks.bg.destroyUploaders();return false})}else{r.css("background-color",s.val())}var d=this.find("div.current");if(d.length>0)$h24.design_manager.tweaks.bg.setImage.call(d,e,t,this);this.addClass("initialized")},setImage:function(e,a,t){if(!e.hasClass("changes_made"))e.addClass("changes_made");var n=$("input[name=color]",e).val();var i=this.css("background-image");var r=this.find("input[name=file]").val();var s=$("input[name=repeat]",e).val();var l=$("select[name=attachment]",t).val();var o=$("input[name=position]",e).val();var d={"background-color":n,"background-image":i,"background-repeat":s,"background-attachment":l,"background-position":o};$(a).css(d);e.find("span.type_text").hide();e.find("span.type_image").show();if(this.hasClass("user_file_pattern"))$("input[name=file_type]",e).val(1);else $("input[name=file_type]",e).val(0);$("input[name=file]",e).val(r);$old_current=$("#h24_design_manager_tweaks_bg_image_tab").find("div.current").removeClass("current");this.addClass("current")}};h24core.prototype.design_manager.tweaks.px={preview:function(e,a,t){var n=$("input[name=selector]",e).val();var i=$("input[name=css]",e).val();$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"get_tweak_html",scope:a,id:t,mode:"preview"},function(a){var t=$h24.design_manager.tweaks.createPreviewDialog("px_preview_dialog",a,{},e);var r=t.markup;var s={};var l=i.split(";");for(var o=0;o<l.length;o++){var d=l[o];var g=d.split(":");if(g.length!=2)continue;var c=g[0];var _=g[1];var v=_.split(",");var p=parseInt(v[0]);if(isNaN(p))var p=0;if(v.length==3){var h=parseInt(v[1]);if(isNaN(h))var h=0;var m=parseInt(v[2]);if(isNaN(m))var m=100}else{var h=0;var m=100}s[c]={value:p,min:h,max:m}}r.find("div.slider_container").each(function(){var a=$(this);var t=$("div.slider",a);var i=$("input[name=property]",a).val();var r=$("input[name=value]",a);if(typeof s[i]==="object"){var l=s[i].min;var o=s[i].max;var d=s[i].value;r.val(d)}else{var l=$("input[name=min]",a).val();var o=$("input[name=max]",a).val();var d=r.val()}t.slider({value:d,max:o,min:l,slide:function(e,a){r.val(a.value);var t=i.split(",");if(t.length==1){$(n).css(i,a.value)}else{for(var s=0;s<t.length;s++){var l=t[s];$(n).css(l,a.value)}}},stop:function(a,t){$h24.design_manager.tweaks.px.savePx(e,n,i,t.value)}});r.bind("blur keyup",function(a){if(a.type=="blur"||a.type=="keyup"&&a.keyCode==13){var r=$(this);var s=r.val();var l=t.slider("value",s).slider("value");var o=i.split(",");if(o.length==1)$(n).css(i,l);else{for(var d=0;d<o.length;d++){var g=o[d];$(n).css(g,l)}}$h24.design_manager.tweaks.px.savePx(e,n,i,l)}})});r.find("a.save_and_close").click(function(){$h24.design_manager.tweaks.closePreviewDialog("px_preview_dialog",e);return false})})},savePx:function(e,a,t,n){if(!e.hasClass("changes_made"))e.addClass("changes_made");var i=$("input[name=css]",e).val();var r=$("span.h24_px_text",e).text(n);var s=[];var l=i.split(";");for(var o=0;o<l.length;o++){var d=l[o].split(":");if(d.length!=2)continue;var g=d[0];if(g==t){var c=d[1];var _=c.split(",");if(_.length==3){var v=_[1];var p=_[2]}else{var v=0;var p=100}s[s.length]=t+":"+n+","+v+","+p}else{s[s.length]=l[o]}}var h=s.join(";");$("input[name=css]",e).val(h)}};h24core.prototype.design_manager.tweaks.toggle={preview:function(e,a,t){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"get_tweak_html",scope:a,id:t,mode:"preview"},function(n){var i=$h24.design_manager.tweaks.createPreviewDialog("toggle_preview_dialog",n,{width:250},e);var r=i.markup;var s=$("input[name=css]",r).val();var l=$("select[name=toggle]",e).val();var o=l==1?true:false;$("input[name=toggle]",r).each(function(){var n=$(this);if(n.attr("value")==0){n.click(function(){$h24.design_manager.tweaks.toggle.setCSS(e,a,t,s,false)});if(o)n.removeAttr("checked");else n.attr("checked","checked")}else{n.click(function(){$h24.design_manager.tweaks.toggle.setCSS(e,a,t,s,true)});if(o)n.attr("checked","checked");else n.removeAttr("checked")}});r.find("a.save_and_close").click(function(){$h24.design_manager.tweaks.closePreviewDialog("toggle_preview_dialog",e);return false});$h24.design_manager.tweaks.toggle.setCSS(e,a,t,s,o)})},setCSS:function(e,a,t,n,i){if(!e.hasClass("changes_made"))e.addClass("changes_made");var r=a=="global"?"design_global_tweak_slot_"+t+"_head_css":"design_tweak_slot_"+t+"_head_css";if(i){$("select[name=toggle] option[value=1]",e).attr("selected","selected");var s=$("#"+r);if(s.length==0){$('<style id="'+r+'">'+n+"</style>").appendTo("head")}}else{$("select[name=toggle] option[value=0]",e).attr("selected","selected");var s=$("#"+r);if(s.length==1)s.remove()}$h24.fauxSections.reposition()}};h24core.prototype.design_manager.tweaks.color={preview:function(e,a,t){var n=$("input[name=selector]",e).val();var i=$("input[name=properties]",e).val();var r=$("input[name=color]",e).val();$h24.dialogs.h24_design_manager.markup.hide();$h24.utils.colorPicker({color:r,dragCallback:function(a){$h24.design_manager.tweaks.color.setColor(e,n,i,a)},saveCallback:function(a){var t=e.find("div.tweak_slot_buttons");if(t.not(":visible"))t.show();$h24.dialogs.h24_design_manager.markup.show();$(window).scrollTop($h24.dialogs.h24_design_manager.contents.offset().top)},allowTransparency:true,dialogSettings:{transparentOverlay:true,showCloseButton:false}})},setColor:function(e,a,t,n){if(!e.hasClass("changes_made"))e.addClass("changes_made");var i=t.split(";");for(var r=0;r<i.length;r++){var s=i[r];$(a).css(s,n)}$("input[name=color]",e).val(n);$("span.color_text",e).text(n);$("div.color_preview",e).css("background-color",n)}};h24core.prototype.design_manager.tweaks.arrow={preview:function(e,a,t){var n=$("input[name=selector]",e).val();var i=$("input[name=orientation]",e).val();var r=$("input[name=type_string]",e).val();var s=$("input[name=color]",e).val();$h24.dialogs.h24_design_manager.markup.hide();$h24.utils.colorPicker({color:s,changedCallback:function(a){$h24.design_manager.tweaks.arrow.setArrow(e,n,i,a,r)},saveCallback:function(a){var t=e.find("div.tweak_slot_buttons");if(t.not(":visible"))t.show();$h24.dialogs.h24_design_manager.markup.show();$(window).scrollTop($h24.dialogs.h24_design_manager.contents.offset().top)},allowTransparency:false,dialogSettings:{transparentOverlay:true,showCloseButton:false}})},setArrow:function(e,a,t,n,i){if(typeof i=="undefined"){var i=""}if(!e.hasClass("changes_made"))e.addClass("changes_made");$(a).css("background-image","url('"+$h24.publicdir+"generate/triangle.php?c="+n.substring(1)+"&orientation="+t+i+"')");$("input[name=color]",e).val(n);$("span.color_text",e).text(n)}};h24core.prototype.design_manager.tweaks.border={preview:function(e,a,t){var n=$("input[name=selector]",e).val();$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",homepageid:$h24.homepageid,modelaction:"get_tweak_html",scope:a,id:t,mode:"preview"},function(a){var t=$h24.design_manager.tweaks.createPreviewDialog("toggle_preview_dialog",a,{width:468},e);var i=t.markup;var r=i.find("div.slider");var s=i.find("input[name=border-width]");var l=i.find("select[name=border-style]");var o=i.find("input[name=color]");s.val(e.find("input[name=border-width]").val());o.val(e.find("input[name=color]").val());l.val(e.find("select[name=border-style]").val());var d=i.find("input[name=has_width]").val()==1;var g=i.find("input[name=has_color]").val()==1;var c=i.find("input[name=has_style]").val()==1;var _=i.find("input[name=slider_min]").val();var v=i.find("input[name=slider_max]").val();var p=i.find("input[name=borders]").val();var h=p.split(";");var m=s.val();var u=o.val();var f=l.val();if(g){var w=i.find(".h24_colorpicker");var k=e.find("input[name=color]");w.canvasPicker({color:o.val(),dragCallback:function(a){o.val(a);$h24.design_manager.tweaks.border.setBorder(e,n,h,d,g,c,s.val(),a,l.val())},allowTransparency:true})}r.slider({min:parseInt(_,10),max:parseInt(v,10),value:parseInt(m,10),slide:function(e,a){s.val(a.value);for(var t=0;t<h.length;t++){if(d&&g&&c){$(n).css(h[t],a.value+"px "+l.val()+" "+o.val())}else{if(d){$(n).css(h[t]+"-width",a.value+"px")}}}},stop:function(a,t){$h24.design_manager.tweaks.border.setBorder(e,n,h,d,g,c,s.val(),o.val(),l.val())}});s.bind("blur keyup",function(a){if(a.type=="blur"||a.type=="keyup"&&a.keyCode==13){r.slider("value",parseInt($(this).val()));$h24.design_manager.tweaks.border.setBorder(e,n,h,d,g,c,s.val(),o.val(),l.val())}});l.change(function(){$h24.design_manager.tweaks.border.setBorder(e,n,h,d,g,c,s.val(),o.val(),l.val())});i.find("a.save_and_close").click(function(){$h24.design_manager.tweaks.closePreviewDialog("toggle_preview_dialog",e);return false});$h24.design_manager.tweaks.border.setBorder(e,n,h,d,g,c,s.val(),o.val(),l.val())})},setBorder:function(e,a,t,n,i,r,s,l,o){if(!e.hasClass("changes_made"))e.addClass("changes_made");var d="";for(var g=0;g<t.length;g++){if(n&&i&&r){d+=t[g]+":"+s+"px "+o+" "+l+";";$(a).css(t[g],s+"px "+o+" "+l)}else{if(n){d+=t[g]+"-width:"+s+"px;";$(a).css(t[g]+"-width",s+"px")}if(i){d+=t[g]+"-color:"+l+";";$(a).css(t[g]+"-color",l)}if(r){d+=t[g]+"-style:"+o+";";$(a).css(t[g]+"-style",o)}}}e.find("input[name=generated_css]").val(d);if(n)e.find("input[name=border-width]").val(s);if(i)e.find("input[name=color]").val(l);if(r)e.find("input[name=border-style]").val(o)}};
h24core.prototype.help=function(){function e(e){var o=$(e);if(confirm($h24.phrase.GUIPhrase("Help","Are you sure that you don't want to see any more help videos?"))!=true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"HelpVideo",modelaction:"addSkip"},function(e){var t=o.closest("div.h24_help_video_dialog");if(t.find("input[name=refreshOnCloseVideo]").val()==1){$h24.utils.ajaxLoaderStart();window.location.reload()}else{$h24.dialogs.help_video_dialog.close()}})}function o(e){$h24.dialog.create("help_video_dialog",e,{width:600,noCloseFlap:true})}function t(e){$result=$("#h24_help_faq_result");$result.html("");if(e.length>2){$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"Help",modelaction:"editFaqSearch",term:e},function(e){if(e!="")$result.html('<div style="padding-top: 5px;"></div><strong>'+$h24.phrase.GUIPhrase("Help","Result")+"</strong>"+e);else $result.html($h24.phrase.GUIPhrase("Help","No help matched your query."))})}}function l(){var e=$("#h24_edit_help_tooltip");if(e.length>0){e.hide();$h24.tooltips.blockTooltip("edit_help")}if($("#h24_help_dialog").length>0){$("#h24_help_dialog").remove();return}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Help",modelaction:"getHelpDialog"},function(e){$("html, body").animate({scrollTop:0});$("body").append(e);$("#h24_help_dialog").draggable({handle:".h24_dialogBoxFlaps_left",containment:".h24_design"});$("#h24_help_dialog .help_faq_questions_question").die("click").live("click",function(){$this=$(this);$next=$this.next(".help_faq_questions_answer");if(!$next.is(":visible")){var e=$next.find("input[name=question_id]").val();h("clicks",e)}$next.slideToggle("fast");return false})})}function i(){if($("#h24_help_dialog").length>0)$("#h24_help_dialog").remove()}function a(e,o,t){if(o=="yes"||o=="no"){h("clicks_"+o,e);$anchor=$(t);$anchor.closest(".help_faq_questions_helped").html("<p><strong>"+$h24.phrase.GUIPhrase("Help","Thank you for your feedback")+"</strong></p>")}}function h(e,o){$.post($h24.slashwebroot+"H24-Helpdesk/Update-Clicks-Faq/",{type:e,question_id:o})}function n(e){var o=$(e);var t=o.val();$result=$("#h24_help_faq_result");$result.html("");if(t!=0){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Help",modelaction:"getFaqQuestionsForCategory",category:t},function(e){if(e!="")$result.html('<div style="padding-top: 5px;"></div><strong>'+$h24.phrase.GUIPhrase("Help","Result")+"</strong>"+e)})}}return{addSkipVideo:e,createDialogVideo:o,editFaqSearch:t,createHelpDialog:l,closeHelpDialog:i,faqQuestionHelped:a,getFaqQuestionsForCategory:n}}();
h24core.prototype.announcement=function(){function e(e){$h24.dialog.create("announcement_dialog",e,{width:600,title:$h24.phrase.GUIPhrase("General","Information from")+" "+$h24.editorBrandname})}return{createDialog:e}}();
h24core.prototype.page_manager=function(){function e(e){if(typeof e=="undefined")e="";$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"getDialog",lang_name:e},function(e){a(e);i();n()})}function a(e){$h24.dialog.create("pagemanager_dialog",e,{width:900,title:$h24.phrase.GUIPhrase("Page-Manager","Manage Pages"),closeCallback:function(){A(true)}});if($h24.browser=="ie9"){$h24.adminPanel.togglePanel(true)}}function i(){var e;var a;var i;var n;$("#h24_pageManager").unbind();$("#h24_pageManager").sortable({items:".h24_pageItem:visible",helper:function(e,a){return $("#sortable_helper").clone().css("opacity",.8).width(488).height(25)},axis:"y",opacity:.8,start:function(a,n){e=m($(n.placeholder),true);u(n.placeholder,true,n.item,true);i=N(n.placeholder)},beforeStop:function(e,i){$placeHolder=$(i.placeholder);a=d($placeHolder);a.after(i.item)},stop:function(a,t){t.item.css("display","");n=s(t.item);t.item.after(e);o(i,n,e);C();r(1)},distance:5})}function n(){$("#h24_pageManager li.h24_pageItem input.h24_pageTitle").live("keyup",function(){r(1)});$("#h24_pageManagerAddPageContainer [data-toggle=tooltip]").tooltip();$("body").on("change",".h24-PageManager select[data-function]",function(e){var a=$(this);var i=a.data("function");var n=a.val();switch(i){case"updateDefaultHomepageLanguageCode":if(n!=""){var r=a.find("option:selected");var g=$(".h24-PageManager").find(".h24-PageManager-flag");var l=r.data("iconurl");if(l!=""){g.find("img").attr("src",l)}else{g.find("img").attr("src","")}t(n)}break}})}function t(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"updateDefaultHomepageLanguageCode",code:e},function(e){if(e["success"]){$h24.utils.notification($h24.phrase.GUIPhrase("Page-Manager","Successfully changed default language for your homepage")+".","accept",{container:"h24-PageManager-notificationContainer"})}else{$h24.utils.notification($h24.phrase.GUIPhrase("Page-Manager","Failed to change default language for your homepage")+".","alert",{container:"h24-PageManager-notificationContainer"})}})}function r(e){$("#h24_pageManager_modified").val(e)}function g(){return $("#h24_pageManager_modified").val()}function l(){var e="";if(typeof $("#h24_pageManager_lang_name")[0]!="undefined")e=$("#h24_pageManager_lang_name").val();return e}function o(e,a,i){var n=v(e);var t=v(a);var r=parseInt(t-n);var g;var l;var o;var s;i.each(function(){g=$(this);l=N(g);o=v(l);s=parseInt(o+r);q(g,P(s));if(s>3&&t>2)g.show()})}function s(e){var a=N(e);var i=false;var n=false;if(e.prev().hasClass("h24_pageItem"))var i=N(e.prev());if(e.next().hasClass("h24_pageItem"))var n=N(e.next());if(i!=false&&n!=false){var t=p(e);i=N(t);if(v(i)<=v(n))q(e,n)}else if(i!=false&&n==false){var t=p(e);i=N(t);var r=parseInt(v(i)-v(a));if(r<0){q(e,P(parseInt(v(i)+1)))}else if(r>0){q(e,P(parseInt(v(i)-1)))}}else if(i==false){q(e,P(1))}return N(e)}function h(e){var a=false;var i=e;var n=v(N(e));if(n!=1){while(a==false){if(i.prev().hasClass("h24_pageItem")&&i.prev().is(":visible")){i=i.prev();var t=v(N(e));if(parseInt(t-1)==n)a=true}else{a=true}}}return i}function p(e){var a=false;var i=false;var n=e;while(a==false){n=n.prev();if(n.hasClass("h24_pageItem")&&n.is(":hidden")){i=true}else{if(n.hasClass("h24_pageItem")&&n.is(":visible"))i=true;a=true}}if(i==true)return n;else return e}function _(e){var a=false;var i=e;while(a==false){if(i.next().hasClass("h24_pageItem")&&i.next().is(":hidden")){i=i.next()}else{if(i.next().hasClass("h24_pageItem")&&i.next().is(":visible"))i=i.next();a=true}}return i}function d(e){var a=false;var i=e;while(a==false){if(i.next().hasClass("h24_pageItem")&&i.next().is(":hidden")){i=i.next()}else{a=true}}return i}function f(){$("#h24_pageManager li.h24_pageItem").each(function(e){})}function c(e,a,i){if(i){var n=e;var t=m(n,a)}else{var r=$(e);var n=$(e).parent();var t=m(n,a)}if(!a){var g=N(n);var l=v(g);var o=P(parseInt(l+1))}if(t.length>0){t.removeClass("hidden")}setTimeout("$h24.page_manager.updatePageItemRestrictions()",10)}function u(e,a,i,n){if(a){var t=m(e,true)}else{var r=$(e);var t=m(r.parent(),true)}if(t.length>0)t.addClass("hidden");if(typeof n=="undefined")setTimeout("$h24.page_manager.updatePageItemRestrictions()",10)}function m(e,a){var i=true;var n=true;var t="";var r=$([]);var g=N(e);var l=new Array;while(g!=t&&n!=false){if(i){i=false;n=e.next()}else{n=n.next()}if(n.hasClass("h24_pageItem")){t=N(n);if(v(g)<v(t)){if(!a){if(parseInt(v(t)-v(g))!=2){r[r.length++]=n[0]}}else{r[r.length++]=n[0]}}else n=false}else n=false}return r}function v(e){var a=new Array;a["h24_pageParent"]=1;a["h24_pageChild"]=2;a["h24_pageGrandChild"]=3;if(a[e])return a[e];else return 100}function P(e){var a=new Array;a[1]="h24_pageParent";a[2]="h24_pageChild";a[3]="h24_pageGrandChild";if(e<1)return a[1];else if(e>3)return a[3];if(a[e])return a[e];else return""}function y(e,a){var i=$(e);if(i.attr("class")=="h24_pageLevelMoveLeft_disabled"||i.attr("class")=="h24_pageLevelMoveRight_disabled")return;var n=$(e).parent().parent();var t=N(n);var g=false;if(a){if(!n.is(":first-child")){var l=v(t);if(l<3){if(n.prev().hasClass("h24_pageItem")){var o=p(n);var s=N(o);var h=parseInt(v(s)-v(t));if(h>=0){var d=m(n);var f=k(o);if(s==t){if(f["hasChildren"]){if(!f["children_visible"])c(o,false,true)}}q(n,P(parseInt(l+1)));d.each(function(){var e=$(this);var a;a=parseInt(v(N(e)));if(a<3){q(e,P(parseInt(a+1)))}else if(a==3){e.show();var i=e.prev();if(i.hasClass("h24_pageItem")){if(N(i)==N(e)&&i.is(":hidden")){e.hide()}}}})}}}}}else{var l=v(t);if(l>1){var d=m(n);var u=_(n);if(N(u)==N(n)&&u!=n){var g=true}q(n,P(parseInt(l-1)));d.each(function(){var e=$(this);var a;a=parseInt(v(N(e)));if(a>2)q(e,P(parseInt(a-1)))});if(g)c(n,false,true)}}C();r(1)}function C(){var e;var a;var i;var n;var t=0;$("#h24_pageManager > li div.h24_hierarchyImage").attr("class","h24_hierarchyImage");$("#h24_pageManager > li a[name=expandCollapseIcon].h24_collapsePagesIcon").removeClass("h24_collapsePagesIcon");$("#h24_pageManager > li a[name=expandCollapseIcon].h24_expandPagesIcon").removeClass("h24_expandPagesIcon");$($("#h24_pageManager > li:visible").get().reverse()).each(function(){e=$(this);n=N(e);a=k(e);if(a["hasChildren"]){i=e.find("a[name=expandCollapseIcon]");if(a["children_visible"]){i.attr("class","h24_collapsePagesIcon");i.attr("onClick","$h24.page_manager.collapseParent(this);")}else{i.attr("class","h24_expandPagesIcon");i.attr("onClick","$h24.page_manager.expandParent(this);")}}if(a["priority"]){if(a["priority"]==1){if(e.is(":first-child"))e.find("a[name=h24_pageLevelMoveRight_name]").attr("class","h24_pageLevelMoveRight_disabled");else e.find("a[name=h24_pageLevelMoveRight_name]").attr("class","h24_pageLevelMoveRight");e.find("a[name=h24_pageLevelMoveLeft_name]").attr("class","h24_pageLevelMoveLeft_disabled")}else if(a["priority"]==3){e.find("a[name=h24_pageLevelMoveLeft_name]").attr("class","h24_pageLevelMoveLeft");e.find("a[name=h24_pageLevelMoveRight_name]").attr("class","h24_pageLevelMoveRight_disabled")}else if(a["priority"]==2){l=e.prev();var r=N(l);var g=v(r);if(a["priority"]>g){e.find("a[name=h24_pageLevelMoveRight_name]").attr("class","h24_pageLevelMoveRight_disabled")}else{e.find("a[name=h24_pageLevelMoveRight_name]").attr("class","h24_pageLevelMoveRight")}e.find("a[name=h24_pageLevelMoveLeft_name]").attr("class","h24_pageLevelMoveLeft")}}if(a["priority"]==1&&e.is(":visible")){t=1}if(a["priority"]==2&&t==2){e.find("div.h24_hierarchyImage").addClass("h24_hierarchyImage_extended")}if(a["priority"]>1){if(typeof l=="undefined")var l=e.prev();var o=k(l);if(a["priority"]<=o["priority"]){if(a["priority"]==2)t=2;if(t==2&&o["priority"]==3){if(a["priority"]==2)l.find("div.h24_hierarchyImage").attr("class","h24_hierarchyImage h24_hierarchyImage_extended_double_last");else l.find("div.h24_hierarchyImage").attr("class","h24_hierarchyImage h24_hierarchyImage_extended_double")}else l.find("div.h24_hierarchyImage").attr("class","h24_hierarchyImage h24_hierarchyImage_extended")}}})}function k(e){var a=N(e);var i=e.next();var n=new Array;n["hasChildren"]=false;n["priority"]=v(a);if(i.hasClass("h24_pageItem")){var t=N(i);if(v(a)<v(t)){n["hasChildren"]=true;if(i.is(":visible"))n["children_visible"]=true;else n["children_visible"]=false}}return n}function M(e){if(g()==1){b(e,false,"addPage");return}var a=$("#h24_pageManagerAddPageContainer .h24_addPageTemplateSelect").val();var i=$("#h24_pageManager_addPage");var n=i.val();i.val("");i.focus();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"addPage",pagetitle:n,language_name:e,pageTemplate:a},function(e){var a=e["statuscode"];if(a==0){showReloginDialog();return}if(a==8){$("#h24_pageManager").append(e["pageManagerMarkup"]);C();r(0)}$("#h24_pageManager_container .page_manager_message").hide();$("#h24_pageManager_container .page_manager_msg"+a).show()})}function w(){var e=new Array;var a=0;var i;var n;var t;var r;var g;$("#h24_pageManager li.h24_pageItem").each(function(){g=$(this);i=N(g);n=v(i);t=g.find("input.h24_pageTitle").val();r=g.find("input[name=h24_pageid]").val();e[a]={pagetitle:t,priority:n,pageid:r};a++});return e}function b(e,a,i,n,t){var g=w();$h24.post($h24.slashwebroot+"Page/Communicator/",{__keep_loading_overlay:a,homepageid:$h24.homepageid,model:"PageManager",modelaction:"updatePages",pageList:g,language_name:e},function(g){r(0);if(a){if(g["statuscode"]==1)$h24.page_manager.closePageManager(true);else hide_loading_overlay()}var l=g["statuscode"];$("#h24_pageManager_container .page_manager_message").hide();$("#h24_pageManager_container .page_manager_msg"+l).show();if(typeof i!="undefined"){if(i=="deletePage")I(n,e,true);else if(i=="addPage")M(e);else if(i=="pagePropertiesDialog")x(n,e);else if(i=="pageLanguageSettingsDialog")R();else if(i=="purchaseManagerDialog"){$h24.dialogs.pagemanager_dialog.close();window.location=$h24.slashwebroot+"H24-Order-Guide"}else if(i=="copyPage"){L(n,e)}else if(i=="reloadDialog"){if(typeof t=="object"&&typeof t.new_language_name!="undefined"){S(t.new_language_name)}}}})}function I(e,a,i){if(typeof i=="undefined")i=false;if(g()==1){b(a,false,"deletePage",e);return}if(i!=true)var n=confirm($h24.phrase.GUIPhrase("Page-Manager","Are you sure you want to delete the page and all its contents?"));else var n=true;if(n){$.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/delete",{homepageid:$h24.homepageid,pageid:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}S(a)})}}function L(e,a){if(g()==1){b(a,false,"copyPage",e);return}$.post($h24.publicdir+"../Page/Edit-Communicator/model/PageManager/modelaction/copyPage",{homepageid:$h24.homepageid,pageid:e,language_name:a},function(e){S(a)})}function x(e,a){if(g()=="1"){b(a,false,"pagePropertiesDialog",e);return}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"getPropertiesDialog",pageid:e,lang:a},function(e){$h24.dialog.create("page_manager_properties_dialog",e,{width:620,title:$h24.phrase.GUIPhrase("General","Settings")});$("#page_properties_tabs").tabs().tabs("option","active",0)})}function D(e,a,i){var n=$("#h24_page_manager_properties_dialog_content input[name=visible]")[0].checked;var t=$("#h24_page_manager_properties_dialog_content input[name=show_menu]")[0].checked;var r=$("#h24_page_manager_properties_dialog_content input[name=clickable]")[0].checked;var g=$("#h24_page_manager_properties_dialog_content input[name=use_password]:checked").val();var l=$("#h24_page_manager_properties_dialog_content input[name=password]").val();var o=$("#h24_page_manager_properties_dialog_content input[name=auto_children_password]")[0].checked;var s=$("#h24_page_manager_properties_dialog_content input[name=header_title]").val();var h=$("#h24_page_manager_properties_dialog_content textarea[name=meta_description]").val();var p=$("#h24_page_manager_properties_dialog_content textarea[name=meta_keywords]").val();var _=$("#h24_page_manager_properties_dialog_content textarea[name=header_code]").val();var d=$("#h24_page_manager_properties_dialog_content textarea[name=footer_code]").val();var f=$("#h24_page_manager_properties_dialog_content input[name=custom_header_text]").length==1?$("#h24_page_manager_properties_dialog_content input[name=custom_header_text]").val():"";var c=$("#h24_page_manager_properties_dialog_content input[name=link]").val();var u=$("#h24_page_manager_properties_dialog_content input[name=link_type]").val();var m=$("#h24_page_manager_properties_dialog_content input[name=link_target]").val();var v=$("#h24_page_manager_properties_dialog_content input[name=link_metadata]").val();var P=$("#h24_page_manager_properties_dialog_content input[name=subtitle]").length==1?$("#h24_page_manager_properties_dialog_content input[name=subtitle]").val():"";var y=$("#h24_page_manager_properties_dialog_content input[name=custom_classes]").length==1?$("#h24_page_manager_properties_dialog_content input[name=custom_classes]").val():"";$("#h24_page_manager_properties_dialog_content .page_properties_message").hide();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"updatePageProperties",pageid:e,visible:n,show_menu:t,clickable:r,use_password:g,password:l,auto_children_password:o,header_title:s,meta_description:h,meta_keywords:p,header_code:_,footer_code:d,custom_header_text:f,link:c,link_type:u,link_target:m,link_metadata:v,subtitle:P,custom_classes:y},function(e){if(e["statuscode"]==2)$("#h24_page_manager_properties_dialog_content .page_properties_msg2").show();else{if(typeof a!="undefined"){window.location.href="?p="+a;return}}$h24.dialogs.page_manager_properties_dialog.close();if(typeof i=="undefined")i="";if($h24.dialogs.pagemanager_dialog)S(i);else refreshBrowser()})}function S(e,a){if(typeof a!="undefined"&&a&&g()==1){var n=l();b(n,false,"reloadDialog",null,{new_language_name:e});return}else{var t=G();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"getDialog",lang_name:e},function(e){var a=$h24.dialogs.pagemanager_dialog.markup;a.find("#h24_pageManager_container").replaceWith(e);i();if(t.length>0){var n=$("#h24_pageManager");for(var r in t){var g=n.find("li[data-pageid="+t[r]+"]");c(g,false,true)}}})}}function G(){var e=$("#h24_pageManager"),a=e.find(".h24_collapsePagesIcon:visible").closest("li.h24_pageItem"),i=[];a.each(function(){i.push($(this).data("pageid"))});return i}function R(e){if(typeof e=="undefined"){var e=false;if(g()==1){var a=l();b(a,false,"pageLanguageSettingsDialog");return}}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"getLanguageSettingsDialog",skip_pm:e},function(a){$h24.dialog.create("page_manager_language_settings_dialog",a,{width:680,title:$h24.phrase.GUIPhrase("Page-Manager","Language Settings"),closeCallback:function(){if(e){$h24.page_manager.closePageManager()}else{if(typeof $h24.dialogs.page_manager_language_settings_dialog!="undefined"){$h24.page_manager.reloadDialog()}}this.close()}});$("#h24_page_manager_language_settings_dialog_content a.h24_preview").hoverPreview({attr:"rel"})})}function T(){if(g()==1){var e=l();b(e,false,"purchaseManagerDialog");return}else{$h24.dialogs.pagemanager_dialog.close();window.location=$h24.slashwebroot+"H24-Order-Guide"}}function A(e,a){if($h24.browser=="ie9"){$h24.adminPanel.togglePanel(false)}if(typeof a!="undefined"&&a&&g()==1){i=l();b(i,true);return}var i="";if(typeof e!="undefined"){i=l()}$.get($h24.publicdir+"../Page/Inline-Load/model/PageManager/modelaction/page_exists",{homepageid:$h24.homepageid,pageid:$h24.pageid,lang_name:i},function(e){$h24.utils.ajaxLoaderStart();if(e=="statuscode/1")window.location.reload();else if(e=="statuscode/2")window.location.href="?p=0";else window.location.href=e})}function F(){var e;for(e in $h24.dialogs)$h24.dialogs[e].close()}function H(e,a){if(typeof a=="undefined")var a=false;if(typeof e!="undefined"&&e!=null){var i=confirm($h24.phrase.GUIPhrase("Page-Manager","Are you sure you want to change the default language?"));if(i!=true){R(a);return}}if(typeof e=="undefined"||e==null)var n=$("#h24_page_manager_language_settings_dialog_content select[name=default_homepage_language]").val();else var n=$(e).val();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"setDefaultLanguage",default_homepage_language:n,skip_pm:a},function(e){if(e=="statuscode/0"){showReloginDialog();return}var a=$h24.dialogs.page_manager_language_settings_dialog.markup;a.find("#h24_page_manager_language_settings_dialog_content").replaceWith(e)})}function U(e,a){var i=$("#page_manager_add_language select[name=homepage_language] option:selected").val();if(typeof i=="undefined"||i=="")return;if(typeof e=="undefined"||e==null)var e=false;if(typeof a=="undefined")var a=false;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"createLanguage",language_name:i,copy_contents:e,skip_pm:a},function(e){var a=$h24.dialogs.page_manager_language_settings_dialog.markup;a.find("#h24_page_manager_language_settings_dialog_content").replaceWith(e)})}function j(e){if(e=="")$("#h24_flag_list").attr("style","");$h24.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/flag_list_style",{homepageid:$h24.homepageid,style:e},function(a){if(e=="")alert($h24.phrase.GUIPhrase("Language-Settings","The flag menu is now reset to it's default position."))})}function W(e){$h24.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/flag_list_presentaton",{homepageid:$h24.homepageid,presentation:e})}function O(e,a,i){if(typeof a=="undefined"||a==null){var n=confirm($h24.phrase.GUIPhrase("Language-Settings","Note! This will remove all pages and content with this language. Are you sure you want to continue?"));if(n!=true)return}if(typeof i=="undefined")var i=false;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"deleteLanguage",language_name:e,skip_pm:i},function(e){var a=$h24.dialogs.page_manager_language_settings_dialog.markup;a.find("#h24_page_manager_language_settings_dialog_content").replaceWith(e)})}function B(e,a){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"updateLanguageVisibility",language_name:e,invisible:!a})}function E(){alert($h24.phrase.GUIPhrase("Page-Manager","Language support is now activated free of charge for 30 days."));$h24.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/language_trial",{homepageid:$h24.homepageid},function(e){if(e=="statuscode/1")R()})}function V(e,a){$h24.utils.colorPicker({color:e,saveCallback:function(e){$.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/set_language_color",{homepageid:$h24.homepageid,color:e},function(i){if(i=="statuscode/1"){if(a=="language_settings"){$("#h24_flag_list_color_preview").css("background-color",e);$("#h24_page_manager_language_settings_dialog_content #h24_changeFlagTextColorButton").attr("href","javascript:$h24.page_manager.changeFlagTextColor('"+e+"', 'language_settings');")}else if(a=="flag_list"){$("#h24_flag_list .h24_flag_holder span, #h24_flag_list .h24_flag_holder a").css("color",e);$("#h24_flag_list .h24_flag_list_change_color").attr("href","javascript:$h24.page_manager.changeFlagTextColor('"+e+"', 'flag_list');")}}})}})}function N(e){var a=false;if(e.hasClass("h24_pageParent"))a="h24_pageParent";else if(e.hasClass("h24_pageChild"))a="h24_pageChild";else if(e.hasClass("h24_pageGrandChild"))a="h24_pageGrandChild";return a}function q(e,a){if(e.hasClass("h24_pageParent")){e.removeClass("h24_pageParent");e.addClass(a)}else if(e.hasClass("h24_pageChild")){e.removeClass("h24_pageChild");e.addClass(a)}else if(e.hasClass("h24_pageGrandChild")){e.removeClass("h24_pageGrandChild");e.addClass(a)}}function z(){window.location.reload()}function J(){$("#h24_flag_list").draggable({start:function(e,a){$("#h24_flag_list").css("right","")},stop:function(e,a){$h24.page_manager.setFlagListStyle($("#h24_flag_list").attr("style"))},containment:".sitepreview",handle:"div.h24_flag_list_handle"});$("#h24_flag_list").hover(function(){$("#h24_flag_list .h24_flag_list_handle").removeClass("visibility_hidden");$("#h24_flag_list_ul, #h24_flag_list_p").addClass("h24_flaglist_hover")},function(){$("#h24_flag_list .h24_flag_list_handle").addClass("visibility_hidden");$("#h24_flag_list_ul, #h24_flag_list_p").removeClass("h24_flaglist_hover")})}function K(e){var a=$("#h24_page_manager_properties_generic_link input[name=link]").val();var i=$("#h24_page_manager_properties_generic_link input[name=link_type]").val();var n=$("#h24_page_manager_properties_generic_link input[name=link_target]").val();var t=$("#h24_page_manager_properties_generic_link input[name=link_metadata]").val();if(a!=""){var r={link:a,link_type:i,link_target:n,link_metadata:t,hide_target:1}}else{var r={hide_target:1}}var g=function(e,a){$h24.page_manager.linkingCallback(e,a)};$h24.link.h24coreDialog("page",e,"",r,g)}function Q(e,a){if(typeof default_behavior=="undefined")default_behavior=0;if(e=="save"){var i={model:"DialogManager",modelaction:"get_link_description",link:a.link,link_type:a.link_type,link_target:a.link_target,link_metadata:a.link_metadata,homepageid:$h24.homepageid};if(i.link_type!=""&&i.link!=""){var n=$("#h24_page_manager_properties_generic_link");n.find("button.modify").show();n.find("button.create").hide();n.find("input[name=link]").val(a.link);n.find("input[name=link_type]").val(a.link_type);n.find("input[name=link_target]").val(a.link_target);n.find("input[name=link_metadata]").val(a.link_metadata);$("#h24_page_manager_properties_link_description").show();$h24.post($h24.slashwebroot+"Page/Inline-load/",i,function(e){if(e!="")$("#h24_page_manager_properties_link_description").html(e)})}}else if(e=="remove"){var n=$("#h24_page_manager_properties_generic_link");n.find("button.modify").hide();n.find("button.create").show();n.find("input[name=link]").val("");n.find("input[name=link_type]").val("");n.find("input[name=link_target]").val("");n.find("input[name=link_metadata]").val("");$("#h24_page_manager_properties_link_description").hide()}else if(e=="cancel"){}$h24.dialogs.h24_generic_linking_dialog.close()}return{openDialog:e,initSortable:i,collapseParent:u,expandParent:c,pagePriorityFromClass:v,getChildrenObject:m,getPageClasses:f,changeDepth:y,updatePageItemRestrictions:C,addPage:M,getPageListArray:w,updatePages:b,deletePage:I,copyPage:L,pagePropertiesDialog:x,savePageProperties:D,pageLanguageSettingsDialog:R,closePageManager:A,closeAllDialogs:F,setDefaultHomepageLanguage:H,createHomepageLanguage:U,setFlagListStyle:j,setFlagListPresentation:W,deleteHomepageLanguage:O,reloadDialog:S,activateLanguageTrial:E,changeFlagTextColor:V,refreshPage:z,purchaseManager:T,initFlagList:J,pageLinkDialog:K,linkingCallback:Q,getLanguage:l,getExpandedItemsPageid:G,toggleHomepageLanguageVisibility:B}}();
h24core.prototype.common=function(){var e=function(e){e.find("> li").each(function(){var e=$(this),t=e.find("ul:first > li"),o,i=[],a,n,l=false;if(t.length){o=e.find("a:first");i.push({href:o.attr("href"),title:jQuery.trim(o.text()),disabled:o.attr("href")=="#",selected:window.location.pathname!="#"&&decodeURIComponent(window.location.pathname)==o.attr("href")});t.each(function(){var e=$(this);$grandChildrenLis=e.find("li"),$childA=e.find("a:first");i.push({href:$childA.attr("href"),title:jQuery.trim($childA.text()),disabled:$childA.attr("href")=="#",selected:window.location.pathname!="#"&&decodeURIComponent(window.location.pathname)==$childA.attr("href")});$grandChildrenLis.each(function(){var e=$(this),t=e.find("a");if(t.length==1){i.push({href:t.attr("href"),title:"&mdash; "+jQuery.trim(t.text()),disabled:t.attr("href")=="#",selected:window.location.pathname!="#"&&decodeURIComponent(window.location.pathname)==t.attr("href")})}else{t.each(function(){var e=$(this);i.push({href:e.attr("href"),title:"&mdash; "+jQuery.trim(e.text()),disabled:e.attr("href")=="#",selected:window.location.pathname!="#"&&decodeURIComponent(window.location.pathname)==e.attr("href")})})}})});e.css("position","relative");a=$("<select />").css({position:"absolute",opacity:0,left:0,top:0});a.width(e.width());a.height(e.height());a.on("change",function(){var e=$(this).val();if(e!="#"){window.location.href=e}});for(var c=0;c<i.length;c++){n=$("<option />",{value:i[c].href}).html(i[c].title);if(i[c].selected){l=true;n.prop("selected",true)}if(i[c].disabled){n.prop("disabled",true)}n.appendTo(a)}if(!l){a.prepend('<option value="#" selected="selected">-------</option>')}e.find("> *").each(function(){var e=$(this);if(!e.is("a")){e.remove()}});a.appendTo(e)}});e.addClass("h24_touch_initialized")};function t(){$($h24.navigation_selectors).find("a[href=#]").each(function(e){var t=$(this);if(t.hasClass("h24_smallWithSlidingDoor")){return}if(typeof t.data("events")!="undefined"&&typeof t.data("events").click!="undefined"){return}t.click(function(){return false});t.css("cursor","default");var o=t.children();if(o.length>0){o.each(function(){var e=$(this);e.css("cursor","default");var t=e.children();if(t.length>0)t.css("cursor","default")})}});$h24.common.navigationSelectorsParsed=true}function o(e){$("#block_"+e+" button.submit").css("color","#AAAAAA").attr("disabled","disabled");var t=$h24.utils.getParameters($("#block_"+e),".email_parameter");$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"post",post_parameters:t},function(t){if(t.successful){$("#block_"+e+" .block_"+e+"_indication").removeClass("error_marked");$("#block_"+e+" .block_"+e+"_message").hide();$("#block_"+e+" .block_statusmsg_"+t.statuscode).slideDown();$("#block_"+e+" .email_parameter").val("")}else{$("#block_"+e+" .block_"+e+"_indication").removeClass("error_marked");$("#block_"+e+" .block_statusind_"+t.statuscode).addClass("error_marked")}setTimeout(function(){$("#block_"+e+" button.submit").removeAttr("disabled");$("#block_"+e+" button.submit").css("color","")},3e3)})}function i(e){var t=$("#block_"+e+" input[name=block_"+e+"_serialized_products]").val();var o=$("#block_"+e+" select[name=product_identifier] option:selected").val();var i=t.split("|");for(var a=0;a<i.length;a++){var n=i[a].split("=");var l=n[0];var c=n[1].split("#");var s=c[0];var r=c[1];var d=c[2];if(o==l){$("#block_"+e+" span.product_price_incl").text(s);$("#block_"+e+" span.product_price_excl").text(r);if(d>0){$("#block_"+e+" li.buy ul.h24_small_button").show();$("#block_"+e+" li.buy div.h24_product_price_out_of_stock").hide()}else{$("#block_"+e+" li.buy ul.h24_small_button").hide();$("#block_"+e+" li.buy div.h24_product_price_out_of_stock").show()}return}}}function a(e){var t=$("#block_"+e+" select[name=product_identifier] option:selected").val();var o=$("#block_"+e+" select[name=quantity] option:selected").val();var i="$h24.webshop_slider.webShopSlide(1);";$h24.webshop_slider.addToCart(t,o,i)}function n(e,t,o){$h24.get($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"loadcomments",page:t,auto_collapse:o,prevent_hidden:1},function(t){$("#block_"+e+" .ajax").html(t);if($h24.editmode)$h24.block.SimpleCommentBlock.initReplyButtons(e);document.location="#comments"})}function l(e){var t=$("#block_"+e);t.find("button.submit").attr("disabled","disabled");var o=$h24.utils.getParameters($("#block_"+e),".comment_parameter");o.comment=o.comment.substr(0,65535);var i=t.find("input[name=challenge1]").val();var a=t.find("input[name=challenge2]").val();if(i>1&&a>1){var n=i*a;t.find("input[name=challenge3]").val(n);o["challenge1"]=i;o["challenge2"]=a;o["challenge3"]=n}$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"post",save_parameters:o},function(t){if(t.successful){$("#block_"+e+" .block_"+e+"_indication").removeClass("h24-HpInput__stateInvalid");$("#block_"+e+" .block_"+e+"_message").hide();$("#block_"+e+" .block_statusmsg_"+t.statuscode).slideDown();$h24.common.simpleComment(e,0);$("#block_"+e+" .comment_parameter").val("")}else{$("#block_"+e+" .block_"+e+"_indication").removeClass("h24-HpInput__stateInvalid");$("#block_"+e+" .block_statusind_"+t.statuscode).addClass("h24-HpInput__stateInvalid");if(typeof t!="undefined"&&typeof t["statuscode"]!="undefined"&&t["statuscode"]==300){alert($h24.phrase.HomepagePhrase("Block-SimpleComment","Please enable JavaScript before placing your comment"))}}setTimeout(function(){$("#block_"+e+" button.submit").removeAttr("disabled")},3e3)})}function c(e){$("#block_"+e+" .comments").toggle()}function s(e,t,o,i){$(".stdgb_link_imtab0_"+e).attr("href","javascript: showDialog('#image_manager', 0);loadImageManagerTabs("+t+", "+t+");");$(".stdgb_link_imtab1_"+e).attr("href","javascript: showDialog('#image_manager', 1);loadImageManagerTabs("+t+", "+t+");");$("#block_"+e).load($h24.publicdir+"../Block/Common-Communicator",{blockid:e,modelaction:"page",parameter1:t,parameter2:o,parameter3:i},function(e){$h24.imageViewer.init();$h24.fauxSections.reposition()})}function r(){var e,t,o,i;e="<div style=\"background-image:url('"+$h24.publicdir+'css/common/images/lock.png\');background-repeat:no-repeat;padding-left:54px;height:33px;padding-top:16px;"><input type="password" style="width:136px;" /><button style="position:relative;top:-2px;margin-left:7px;" class="btn btn-small">OK</button></div>';t=$h24.coreDialog.create("h24_password_dialog",e,{width:271,showTitle:false,showCloseButton:true,fixed:true,draggable:false});t.contentContainer.find(t.options.closeButtonSelector).html(function(){return $(this).find("span")});i=t.content.find("input");i.keyup(function(e){if(e.keyCode==13){$h24.common.pagelogin()}});i.focus();t.content.find("button").click(function(e){$h24.common.pagelogin()})}function d(){$input=$h24.coreDialogs.h24_password_dialog.content.find("input");$input.css("background-color","");$h24.post($h24.publicdir+"../Page/Page-Login",{homepageid:$h24.homepageid,pageid:$h24.pageid,password:$input.val()},function(e){if(e.successful){refreshBrowser()}else{$input.css("background-color","#FF757E")}})}function h(e,t,o,i,a,n){var l=new Date;l.setTime(l.getTime());if(o){o=o*1e3}var c=new Date(l.getTime()+o);document.cookie=e+"="+escape(t)+(o?";expires="+c.toGMTString():"")+(i?";path="+i:"")+(a?";domain="+a:"")+(n?";secure":"")}function m(e,t){switch(e){case 0:$h24.common.setCookie("upper_panel_state",t,60*60*24*30,"/");break;case 1:$h24.common.setCookie("shortcuts_panel_state",t,60*60*24*30,"/");break;case 2:$h24.common.setCookie("help_panel_state",t,60*60*24*30,"/");break;case 3:$h24.common.setCookie("webshop_panel_state",t,60*60*24*30,"/");break}}function p(e){if(e==1){$h24.webshop_slider.webShopSlide(1,null,null,true);$h24.common.H24SetCookie(3,1)}else{$h24.webshop_slider.webShopSlide(0,null,null,true);$h24.common.H24SetCookie(3,0)}}function u(e){if(e==1||e==2){var t=0;var o=1}else{var t=1;var o=0}$("#h24_webshop_wrapper .toggle_webshop").toggle(function(){$h24.common.toggleWebShopMode(t)},function(){$h24.common.toggleWebShopMode(o)})}function f(e,t,o,i,a,n){$h24.post($h24.publicdir+"../Block/Common-Communicator",{blockid:e,modelaction:"page",page:t,archive_mode:o,year:i,month:a,day:n},function(t){if(t!=""){var o=$(t),i=o.find("img").length,a=0;$("#block_"+e+"_ajax").html(t);if(i==0){$h24.block.initCollections()}else{o.find("img").each(function(){$(this).load(function(){a++;if(a==i){$h24.block.initCollections();clearTimeout(initCollectionsTimeout)}})});initCollectionsTimeout=setTimeout(function(){$h24.block.initCollections()},2e3)}$(window).scrollTop($("#block_"+e).offset().top);if($h24.editmode){$h24.block.BlogBlock.initHoverButtons()}}})}var b=function(e){var t=$("body").css("background-image"),o,i;if(!t||typeof t=="string"&&jQuery.trim(t)==""){return}i=t.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");switch(e){case"fill":$.backstretch(i);break;case"stretch":o=$("<img />");o.css({position:"fixed",top:0,left:0,"z-index":-1,overflow:"hidden",width:"100%",height:"100%"}).prop("src",i).prependTo("body");break}$("body").css("background-image","none")};return{replaceDropdownsWithSelects:e,parseNavigationSelectors:t,navigationSelectorsParsed:false,selectProductVersion:i,ppb_addToCart:a,simpleComment:n,standardGalleryCategory:s,pagelogin:d,openPasswordDialog:r,setCookie:h,H24SetCookie:m,toggleWebShopMode:p,initiate_webshop_mode:u,loadBlogPage:f,submitSimpleComment:l,expandSimpleComments:c,submitContactForm:o,pageBackgroundCompatibilityHelper:b}}();
h24core.prototype.recommendation=function(){function e(e){var o=$(e).prev(".h24_recommendation_textfield");if(o.val()==""){o.css({"border-color":"red"});return}else{o.css({"border-color":"#e2e3e4"})}var n=o.val().split("\n");var i=[];for(var t=0;t<n.length;t++){var a=n[t];a=a.replace(",","");if(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(a)){if(jQuery.inArray(a,i)==-1){i.push(a)}}}if(i.length==0){o.css({"border-color":"red"});return}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Recommendation",modelaction:"sendMassInvitations",list:i},function(e){if(e["success"]==1){var i=n.length>1?$h24.phrase.GUIPhrase("Recommendations","Thank you. Invitations sent."):$h24.phrase.GUIPhrase("Recommendations","Thank you. Invitation sent.");o.val(i);o.css("color","#4DAD40");setTimeout(function(){o.val("");o.css("color","inherit")},3e3)}})}function o(e){$('input[name="recommendation_choice"]').each(function(o){if(e.value==o){$("#recommendation_"+o).show()}else{$("#recommendation_"+o).hide()}})}function n(e,o){var n=$(e).is(":checked");var o=typeof o!="undefined"&&o==true?true:false;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Recommendation",modelaction:"saveActivateFooterRecommendation",show_recommendation:n,live:o},function(e){if(e["statuscode"]==1){}})}function i(e){var o=$h24.editorBrandname=="Hemsida24"?"hemsida24.se":"pagepicnic.com";var n="https://www."+o+"/invite/"+e;var i=$h24.phrase.GUIPhrase("Recommendations","Do like me and create your website with @PagePicnic! Use this link and get up to 3 months free: ")+n;var t="http://twitter.com/share?text="+encodeURIComponent(i);var a=window.open(t,"Twitter","width=1000,height=450,scrollbars=yes")}function t(e){var o=$h24.editorBrandname=="Hemsida24"?"140657239330701":"313531452168109";var n=$h24.editorBrandname=="Hemsida24"?"hemsida24.se":"pagepicnic.com";var i="https://www."+n+$h24.slashwebroot+"H24-Third-Party/Facebook-Return-Url";var t="https://www."+n+"/invite/"+e;var a=$h24.phrase.GUIPhrase("Recommendations","Do like me and create your website with PagePicnic. It's simple and you get a professional result. Try it free for 30 days, if you then decide to subscribe you will recieve up to 3 months free if you use this link!");var r={app_id:o,link:t,picture:"https://www."+n+"/public/images/refer-a-friend_green.png",name:$h24.editorBrandname,caption:"",description:a,redirect_uri:i};var c="https://www.facebook.com/dialog/feed?app_id="+r.app_id+"&link="+encodeURIComponent(r.link)+"&picture="+encodeURIComponent(r.picture)+"&name="+encodeURIComponent(r.name)+"&caption="+encodeURIComponent(r.caption)+"&description="+encodeURIComponent(r.description)+"&redirect_uri="+encodeURIComponent(r.redirect_uri)+"&display=popup";var s=window.open(c,"Facebook","width=1000,height=450,scrollbars=yes");window.addEventListener("message",function(e){if(e.source==s&&e.data=="closeFacebookPopup"){}},false)}function a(e,o){var n=$h24.editorBrandname=="Hemsida24"?"140657239330701":"313531452168109";var i=$h24.editorBrandname=="Hemsida24"?"hemsida24.se":"pagepicnic.com";var t="https://www."+i+$h24.slashwebroot+"H24-Third-Party/Facebook-Return-Url";var a={app_id:n,link:e,name:o,caption:"",description:"",redirect_uri:t};var r="http://www.facebook.com/dialog/feed?app_id="+a.app_id+"&link="+encodeURIComponent(a.link)+"&name="+encodeURIComponent(a.name)+"&caption="+encodeURIComponent(a.caption)+"&description="+encodeURIComponent(a.description)+"&redirect_uri="+encodeURIComponent(a.redirect_uri)+"&display=popup";var c=window.open(r,"Facebook","width=1000,height=450,scrollbars=yes");window.addEventListener("message",function(e){if(e.source==c&&e.data=="closeFacebookPopup"){}},false)}function r(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Recommendation",modelaction:"getRecommendationDialog"},function(o){if(o["statuscode"]==1){$h24.dialog.create("recommendation",o["markup"],{title:"Bonus",width:860,closeCallback:function(){this.close()}});$tabs=$("#h24_recommendation_tabs").tabs();if(typeof e!="undefined")$tabs.tabs("option","active",e);$("#h24_recommendation_dialog a.h24_hover_preview").hoverPreview({clickReturnFalse:true})}})}function c(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Recommendation",modelaction:"getRecommendationMessage",state:e},function(e){if(e["statuscode"]==1){$h24.coreDialog.create("Rekommendation",e["markup"],{title:e["title"]})}})}function s(){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"Recommendation",modelaction:"setRecommendationClicked"},function(e){if(e["statuscode"]==1){}})}return{setRecommendationClicked:s,sendMassInvitations:e,toggleRecommendationTabs:o,activateFooterRecommendation:n,openRecommendTwitterDialog:i,openRecommendFacebookDialog:t,openRecommendationDialog:r,getRecommendationMessage:c,openPublishFacebookDialog:a}}();
h24core.prototype.domain_center=function(){function e(){var e={};$("#h24_domainCenter #domainCenter_table tr td input.h24_domainCenterDomain").each(function(){$domain=$(this);var o=$domain.val();if(o!=""){e[o]=$domain.parent().parent().find("td.h24_domainCenterStatus");e[o].removeClass("h24_domainCenterStatusTooltip");$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"checkDomainStatus",domain:o},function(o){if(o["statuscode"]==1){e[o["domain"]].find("span").html(o["status"]);if(o["tooltip"]==1)e[o["domain"]].addClass("h24_domainCenterStatusTooltip")}})}})}function o(){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"getDomainCenterDialog"},function(o){if(typeof o["statuscode"]!="undefined"){if(o["statuscode"]==1){$h24.dialog.create("h24_domain_center_dialog",o["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","Domain manager"),width:850});e()}else if(o["statuscode"]=100)E()}})}function n(e){if(e!=""){if(typeof $h24.dialogs.h24_domain_settings_dialog!="undefined"){$h24.dialogs.h24_domain_settings_dialog.close()}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"getDomainSettingsDialog",domain:e},function(o){$h24.dialog.create("h24_domain_settings_dialog",o["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","Domain settings for %domain%",{domain:e}),width:600})})}}function i(e){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Domain-Center","The new owner’s username on %brand%",{brand:$h24.editorBrandname}),requireInput:true,okCallback:function(o){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"moveDomainToUser",domain:e,username:o},function(e){if(e["success"]){$h24.dialogs.h24_domain_settings_dialog.close();a()}else if(typeof e["error"]!="undefined"&&e["error"]!=""){switch(e["error"]){case"username":var n="Couldn’t find user %username%";break;case"no_service_feature":var n="User %username% can’t have a custom domain";break;case"no_user_domain":case"master_domain":default:var n="An unexpected error has occurred";break}alert($h24.phrase.GUIPhrase("Domain-Center",n,{username:o}))}})}})}function a(o){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"getDomainCenterDialog"},function(n){if(n["statuscode"]==1){$("#h24_domainCenter").replaceWith(n["markup"]);e();if(typeof o!=undefined){var i=$("#h24_domainCenterMessages");if(typeof o=="object"){var a=i.find("div.domain_center_"+o.msg);a.find(o.selector).html(o.html);a.slideDown()}else i.find("div.domain_center_"+o).slideDown()}}})}function t(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"changeFreeSubDomain",domain:e},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_domain_sub_change_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","Change domain"),width:400})}})}function d(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"addFreeSubDomainDialog"},function(e){$h24.dialog.create("h24_domain_sub_add_dialog",e,{width:400})})}function s(){var e=$('#h24_domain_sub_add_dialog input[name="new_subdomain"]').val(),o=$('#h24_domain_sub_add_dialog select[name="free_domains"]').val(),n=e+"."+o;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"addFreeSubDomain",fullAddress:n},function(e){$h24.dialogs.h24_domain_sub_add_dialog.close();if(e.successful){a()}else{$("#h24_domainCenterMessages .domain_center_message").hide();$("#h24_domainCenterMessages .domain_center_msg_"+e.statuscode).slideDown()}})}function r(e){var o=$("#h24_domain_sub_change_dialog input[name=new_subdomain]").val();var n=$("#h24_domain_sub_change_dialog select[name=free_domains]").val();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"renameSubDomain",old_domain:e,new_sub:o,new_domain_index:n},function(e){if(e["statuscode"]==1){$h24.dialogs.h24_domain_sub_change_dialog.close();$h24.dialogs.h24_domain_settings_dialog.close();a()}else if(e["statuscode"]==2)$("#h24_domain_sub_change_dialog .h24_domain_sub_change_error").html($h24.phrase.GUIPhrase("Domain-Center","The name is already taken"));else $("#h24_domain_sub_change_dialog .h24_domain_sub_change_error").html($h24.phrase.GUIPhrase("Domain-Center","The name is invalid"))})}function m(e,o){o=typeof o=="undefined"?false:o;if(o==true){var n=true}else{var n=confirm($h24.phrase.GUIPhrase("Domain-Center","Are you sure you want to delete %domain%?\n\nAll settings associated with the domain name will be deleted.",{domain:e}))}if(n!=true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"deleteDomain",domain:e},function(e){$h24.dialogs.h24_domain_settings_dialog.close();if(e["statuscode"]==1){a()}else{$("#h24_domainCenterMessages .domain_center_message").hide();$("#h24_domainCenterMessages .domain_center_msg_"+e.statuscode).slideDown()}})}function h(e){var o=$("#h24_dnsEditor"),n=o.find(".h24_dnsEditor_advancedDnsRecords"),i=$(e);$icon=n.is(":visible")?"&#57874;":"&#57875;";i.find("[data-icon]").attr("data-icon",$("<div />").html($icon).text());n.toggle()}function l(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"getDnsEditor",domain:e},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_dns_editor",e["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","DNS Editor"),width:850});var o=$("#h24_dnsEditor");o.find("select[name=type]").change(function(){var e=$(this);var n=e.val();if(n!=""){o.find(".h24_domain_center_all").hide();o.find(".h24_domain_center_"+n).show()}})}})}function c(e){var o=$("#h24_dnsEditor_add input[name=subdomain]").val();var n=$("#h24_dnsEditor_add select[name=type]").val();var i=$("#h24_dnsEditor_add input[name=data]").val();var a=$("#h24_dnsEditor_add input[name=ttl]").val();$editor=$("#h24_dnsEditor");$editor.find("div.dns_editor_message").slideUp();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"addDnsRecord",domain:e,subdomain:o,type:n,data:i,ttl:a},function(o){if(o["statuscode"]==1)_(e,"msg_add");else if(o["statuscode"]==2)$editor.find("div.dns_editor_msg_empty").slideDown();else if(o["statuscode"]==5)$editor.find("div.dns_editor_msg_duplicate").slideDown();else if(o["statuscode"]==6)$editor.find("div.dns_editor_msg_data_error").slideDown();else if(o["statuscode"]==7){$editor.find(".msg_forbidden_subdomain").html(o["subdomain"]);$editor.find("div.dns_editor_msg_forbidden").slideDown()}else if(o["statuscode"]==8)$editor.find("div.dns_editor_msg_data_error_a").slideDown();else if(o["statuscode"]==9)$editor.find("div.dns_editor_msg_data_error_cname").slideDown();else if(o["statuscode"]==10)$editor.find("div.dns_editor_msg_data_error_mx").slideDown();else if(o["statuscode"]==11)$editor.find("div.dns_editor_msg_data_error_aaaa").slideDown();else if(o["statuscode"]==12)$editor.find("div.dns_editor_msg_data_error_srv").slideDown();else if(o["statuscode"]==="wrong_subdomain_type")$editor.find("div.dns_editor_msg_wrong_subdomain_type").slideDown()})}function _(e,o){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"getDnsEditor",domain:e},function(e){if(e["statuscode"]==1){$("#h24_dnsEditor").replaceWith(e["markup"]);var n=$("#h24_dnsEditor");if(typeof o!=undefined){if(typeof o=="object"){n.find(o.selector).html(o.html);n.find("div.dns_editor_"+o.msg).slideDown()}else{n.find("div.dns_editor_"+o).slideDown()}}n.find("select[name=type]").change(function(){var e=$(this);var o=e.val();if(o!=""){n.find(".h24_domain_center_all").hide();n.find(".h24_domain_center_"+o).show()}})}})}function u(e,o,n){var i=confirm($h24.phrase.GUIPhrase("Domain-Center","Are you sure you want to delete the DNS settings?\n\nThe domain %subdomain%.%domain% will become inaccessible.",{subdomain:o,domain:e}));if(i!=true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"removeDnsRecord",domain:e,record_id:n},function(o){if(o["statuscode"]==1){_(e,"msg_delete")}})}function g(e,o,n){if(typeof n=="undefined"){var n=""}$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"addStandardRecords",domain:e,subdomain:o,mailType:n},function(o){if(o["statuscode"]==1){_(e,"msg_standard_activate")}else if(o["statuscode"]==5){_(e,"msg_standard_duplicate")}else if(o["statuscode"]==6){_(e,"msg_standard_spf_exists")}})}function f(e,o,n){if(typeof n=="undefined"){var n=""}var i=confirm($h24.phrase.GUIPhrase("Domain-Center","Are you sure you want to deactivate the DNS settings for %subdomain%.%domain%?\n\nThe domain %subdomain%.%domain% will become inaccessible.",{subdomain:o,domain:e}));if(i!=true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"removeStandardRecords",domain:e,subdomain:o,mailType:n},function(o){if(o["statuscode"]==1){_(e,"msg_standard_inactivate")}})}function p(e,o){$editor=$("#h24_dnsEditor");$editor.find("span.ns_ip_error.").hide();$editor.find("div.dns_editor_message").hide();var n={ns1:$editor.find("input[name=ns1]").val().toLowerCase().trim(),ns2:$editor.find("input[name=ns2]").val().toLowerCase().trim(),ns3:$editor.find("input[name=ns3]").val().toLowerCase().trim(),ns4:$editor.find("input[name=ns4]").val().toLowerCase().trim(),ns5:$editor.find("input[name=ns5]").val().toLowerCase().trim()};if(n["ns1"]===""&&n["ns2"]===""&&n["ns3"]===""&&n["ns4"]===""&&n["ns5"]===""){return}var i=confirm($h24.phrase.GUIPhrase("Domain-Center","Are you sure that you want to update your nameservers for %domain%?\n\nYour nameservers must be set to %editor%'s to be able to use our DNS editor.",{domain:e,editor:$h24.editorBrandname}));if(i!=true)return;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"updateNsRecords",domain:e,ns:n},function(o){if(o["statuscode"]==1){if(typeof o["ns_error"]=="undefined")_(e,"msg_ns_updated");else _(e,"msg_ns_error")}else if(o["statuscode"]==3){$editor.find("div.dns_editor_msg_ns_ip_error").show();for(var n in o["ip_error_fields"]){$editor.find("span.ns_ip_error_"+o["ip_error_fields"][n]).show()}}else if(o["statuscode"]==4){$editor.find("div.dns_editor_msg_ns_nameisp_error").show()}else if(o["statuscode"]==5){$editor.find("div.dns_editor_msg_ns_already_added").show()}})}function D(){$domainCenter=$("#h24_domainCenterMessages");$domainCenter.find("div.domain_center_message").slideUp();$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Domain-Center","Enter your domain name"),helptext:$h24.phrase.GUIPhrase("Domain-Center","After that you’ve entered your domain name, you’ll get further instructions about how to make it work on %brand%.",{brand:$h24.editorBrandname}),leftHelptext:"www.",requireInput:true,okCallback:function(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"addDomain",add_domain:e},function(e){if(e["statuscode"]==1){if(typeof e["external_sub"]=="undefined"&&typeof e["free_sub"]=="undefined")v(e["domain"]);else if(typeof e["free_sub"]=="undefined")C(e["domain"]);a()}else $domainCenter.find("div.domain_center_msg_"+e["statuscode"]).slideDown()})}})}function v(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"domainPointingSelect",domain:e},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_domain_pointing_select_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","Connect domain"),width:600})}})}function C(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"domainPointingGuide",domain:e},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_domain_pointing_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Domain-Center","Connect domain"),width:600})}})}function w(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"setCNAME",domain:e},function(o){if(o["statuscode"]==1){$h24.dialogs.h24_domain_pointing_select_dialog.close();a();C(e)}})}function b(e){var o=confirm($h24.phrase.GUIPhrase("Domain-Center","You will now change settings to CNAME for %domain%.\n\nYour current DNS settings will be deleted.\n\nA guide, with instructions on how to set up your domain name at your domain provider, will appear.\n\nConfirm changing to CNAME:",{domain:e}));if(o==true){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"setCNAME",domain:e},function(o){if(o["statuscode"]==1){$h24.dialogs.h24_domain_settings_dialog.close();var n={msg:"msg_changed_to_cname",selector:".msg_changed_setting_domain",html:e};a(n);C(e)}})}}function P(e){var o=confirm($h24.phrase.GUIPhrase("Domain-Center","You will now change settings to DNS for %domain%.\n\nA guide, with instructions on how to set up your domain name at your domain provider, will appear.\n\nConfirm changing to DNS.",{domain:e}));if(o==true){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"setDNS",domain:e},function(o){if(o["statuscode"]==1){$h24.dialogs.h24_domain_settings_dialog.close();var n={msg:"msg_changed_to_dns",selector:".msg_changed_setting_domain",html:e};a(n);C(e)}})}}function y(e){$domainCenter=$("#h24_domainCenterMessages");$domainCenter.find("div.domain_center_message").slideUp();var o=$(e);var n=o.val();var i=o.parent().parent();var a=i.parent();var t=i.find("input.h24_domainCenterDomain").val();var d=confirm($h24.phrase.GUIPhrase("Domain-Center","By changing how the domain works, your DNS settings may be subject to change.\n\nProceed anyway?"));if(d!=true){o.val(o.attr("prev_sel"));return}var s=0;a.find("select[name=function]").each(function(){$select=$(this);if($select.val()=="master"){if(n=="master"){var e=$select.parent().parent().find("input.h24_domainCenterDomain").val();if(e!=t)$master=$select}s++}});if(s==0){$domainCenter.find("div.domain_center_msg_function_no_master").slideDown();o.val(o.attr("prev_sel"))}else if((s==1||s==2)&&n=="master"||n=="redirect"||n=="none"){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"changeDomainFunction",domain:t,func:n},function(e){if(e["statuscode"]==1){if(typeof $master!="undefined"&&n=="master")$master.val("redirect");$domainCenter.find("div.domain_center_msg_function_changed").slideDown()}})}}function S(e){$select=$(e);$select.attr("prev_sel",$select.val())}function E(){alert($h24.phrase.GUIPhrase("Domain-Center","You need an active subscription to administer your domains."))}function U(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DomainCenter",modelaction:"activateForEmail",domain:e},function(e){$h24.dialogs.h24_domain_settings_dialog.close();$("#h24_domainCenterMessages .domain_center_message").hide();$("#h24_domainCenterMessages .domain_center_msg_"+e.statuscode).slideDown()})}function k(){$h24.dialogs.h24_domain_settings_dialog.close();$h24.dialogs.h24_domain_center_dialog.close();$h24.emailCenter.overviewDialog()}function G(e){$h24.dialogs.h24_dns_editor.close();n(e)}return{checkDomainStatus:e,openDomainCenter:o,openDomainSettings:n,moveDomainToUser:i,refreshDomainCenter:a,openChangeSubDomain:t,renameSubDomain:r,deleteDomain:m,openDnsEditor:l,addDnsRecord:c,removeDnsRecord:u,addStandardRecords:g,removeStandardRecords:f,updateNsRecords:p,addDomain:D,openDomainPointingGuide:C,changeDomainFunction:y,setPreviousSelected:S,openDomainPointingSelect:v,closePointingSelectAndSetDomainCNAME:w,setDomainDNS:P,setDomainCNAME:b,noSubscriptionMessage:E,addFreeSubDomainDialog:d,addFreeSubDomain:s,activateForEmail:U,changeToEmailCenter:k,toggleAdvancedDnsRecords:h,closeDnsEditorAndOpenDomainSettings:G}}();
h24core.prototype.domain_guide=function(){var e;var i=function(e){var i='<iframe name="domainGuide" style="width: 100%; height: 258px;" scrolling="no" src="/'+$h24.webroot+'H24-Domain-Guide"></iframe>';var n=$h24.coreDialog.create("domainGuide",i,{width:800,title:e,onClose:function(){$h24.domain_guide.stopListener();if(typeof $h24.dialogs.h24_domain_center_dialog!="undefined"){$h24.domain_center.refreshDomainCenter()}}});var t=$("iframe[name=domainGuide]");n.content.loadingSpinner(true);t.load(function(){n.content.loadingSpinner(false);$h24.domain_guide.startListener(function(e){n.content.find("iframe[name=domainGuide]").css("height",e+40)})})};var n=function(e){var i,n=0,t;$h24.domain_guide.iframeResizeListener=setInterval(function(){i=$("iframe[name=domainGuide]");if(i.length==1){try{t=i[0].contentWindow.document.body.offsetHeight;if(t>0&&n!=t){n=t;e.call(this,t)}}catch(o){}}},100)};var t=function(){clearInterval($h24.domain_guide.iframeResizeListener)};return{iframeResizeListener:e,openDialog:i,startListener:n,stopListener:t}}();
h24core.prototype.phrase=function(){var e={};var a={};var s="";var t="";var i={};function r(e,a){n(e,a)}function d(){o()}function h(){o(null,2)}function n(e,a){$h24.get($h24.slashwebroot+"H24-Phrase/Get-Homepage-Edit-Dialog",{homepageid:$h24.homepageid,language:e,category:a},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_edit_phrases",e["markup"],{width:986,title:$h24.phrase.GUIPhrase("Dialogs","Handle translations"),closeCallback:function(){D(false)}});var a=$("#h24_edit_phrases_tabs").tabs({active:e["language_index"],beforeActivate:function(e,a){var s=$(a.newTab);var t=s.closest("li").data("storeonly");var i=s.find("> a").data("language");var r=g();var d=m();if(t==1){$("#h24_edit_phrases_sidemeny").find("li[data-store=0]").hide();if(!$("#h24_edit_phrases_sidemeny").find(".ui-tabs-active").is(":visible")){$("#h24_edit_phrases #h24_edit_phrases_selected_language").val(i);$("#h24_edit_phrases_sidemeny").tabs("option","active",$("#h24_edit_phrases_sidemeny").find("li[data-store=1]:first").index()-1)}else{p(i,r,d)}}else{$("#h24_edit_phrases_sidemeny").find("li[data-store=0]").show();p(i,r,d)}}});var s=$("#h24_edit_phrases_sidemeny").tabs({active:e["category_index"],beforeActivate:function(e,a){var s=$(a.newTab);var t=s.find("> a").data("category");var i=g();var r=m();c(t,i,r)}});var t=$("#h24_edit_phrases_tabs").find(".ui-tabs-active").data("storeonly");if(t){$("#h24_edit_phrases_sidemeny").find("li[data-store=0]").hide()}$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_input, #h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_textarea").live("change",function(){$this=$(this);if($("#h24_edit_phrases").data("user")=="admin"){if($this.hasClass("h24_edit_phrases_modified_not_saved")==false){$this.removeClass("h24_edit_phrases_modified_saved");$this.addClass("h24_edit_phrases_modified_not_saved")}}})}})}function o(e,a){var a=typeof a!="undefined"&&a==2?2:1;var s="";var t=1200;if($("#h24_edit_phrases").data("user")=="translator"){s=" (Translator)";t=1200}else if($("#h24_edit_phrases").data("user")=="admin"){s=" (Admin)";t=1200}$h24.get($h24.slashwebroot+"H24-Phrase/Get-Default-Edit-Dialog",{language:e,level:a},function(i){if(i["statuscode"]==1){$h24.dialog.create("h24_edit_phrases",i["markup"],{width:t,title:$h24.phrase.GUIPhrase("Dialogs","Handle translations")+s,closeCallback:function(){D(true,a)}});var r=$("#h24_edit_phrases").data("skiptabs");if(r==0){var d=$("#h24_edit_phrases_tabs").unbind().tabs();var d=$("#h24_edit_phrases_tabs").unbind().tabs({active:i["language_index"],beforeActivate:function(e,a){var s=$(a.newTab);var t=s.find("> a").data("language");var i=g();var r=m();p(t,i,r)}})}else{$languageList=$("#h24_edit_phrases select[name=languages]");$languageList.change(function(){var e=$(this);var a=e.val();var s=g();var t=m();p(a,s,t)})}var h=$("#h24_edit_phrases_sidemeny").unbind().tabs({beforeActivate:function(e,a){var s=$(a.newTab);var t=s.find("> a").data("category");var i=g();var r=m();c(t,i,r)}});if($("#h24_edit_phrases").data("user")=="translator"){f(e,a)}if($("#h24_edit_phrases").data("user")=="translator"||$("#h24_edit_phrases").data("user")=="admin"){$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_input, #h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_textarea").live("change",function(){$this=$(this);if($this.data("oldvalue")!=$this.val()){if($this.hasClass("h24_edit_phrases_modified_not_saved")==false){$this.removeClass("h24_edit_phrases_modified_saved");$this.addClass("h24_edit_phrases_modified_not_saved")}if($("#h24_edit_phrases").data("user")=="translator"){$this.closest("tr").css("background-color","#FF7722");$this.closest("tr").find('input[type="checkbox"]').prop("checked",true)}}else if($this.data("oldvalue")==$this.val()){if($this.closest("tr").data("translated")==true&&$this.closest("tr").find('input[type="checkbox"]').prop("checked")){if($this.hasClass("h24_edit_phrases_modified_saved")==false){$this.removeClass("h24_edit_phrases_modified_not_saved");$this.addClass("h24_edit_phrases_modified_saved")}if($("#h24_edit_phrases").data("user")=="translator"){$this.closest("tr").css("background-color","#66CD00")}}else{if($this.hasClass("h24_edit_phrases_modified_not_saved")==false){$this.removeClass("h24_edit_phrases_modified_saved");$this.addClass("h24_edit_phrases_modified_not_saved")}if($("#h24_edit_phrases").data("user")=="translator"){$this.closest("tr").css("background-color","#FF7722")}}}if($("#h24_edit_phrases").data("user")=="admin"){$this.parents("tr").find("a[name=resetPhrase]").show()}});_()}}})}function _(){$("#h24_edit_phrases").find('input[name="translation_checked"]').live("change",function(){var e=$("#h24_edit_phrases #h24_edit_phrases_sidemeny").find(".ui-state-active span").last();var a=parseInt(e.text());$this=$(this);var s=$this.closest("tr").find('[name="translation"]');var t=$this.data("phraseid");if($this.is(":checked")){if($this.closest("tr").data("translated")==false||s.data("oldvalue")!=s.val()){if(s.hasClass("h24_edit_phrases_modified_not_saved")==false){s.addClass("h24_edit_phrases_modified_not_saved");s.removeClass("h24_edit_phrases_modified_saved");if($("#h24_edit_phrases").data("user")=="translator"){$("#h24_edit_phrases").find('tr[data-phraseid="'+t+'"]').css("background-color","#FF7722")}}}else{if(s.hasClass("h24_edit_phrases_modified_saved")==false){s.removeClass("h24_edit_phrases_modified_not_saved");s.addClass("h24_edit_phrases_modified_saved");if($("#h24_edit_phrases").data("user")=="translator"){$("#h24_edit_phrases").find('tr[data-phraseid="'+t+'"]').css("background-color","#66CD00")}}}}else if(!$this.is(":checked")){if($this.closest("tr").data("translated")==true||s.data("oldvalue")!=s.val()){if(s.hasClass("h24_edit_phrases_modified_not_saved")==false){s.removeClass("h24_edit_phrases_modified_saved");s.addClass("h24_edit_phrases_modified_not_saved");if($("#h24_edit_phrases").data("user")=="translator"){$("#h24_edit_phrases").find('tr[data-phraseid="'+t+'"]').css("background-color","#FF7722")}}}else{if(s.hasClass("h24_edit_phrases_modified_saved")==false){s.removeClass("h24_edit_phrases_modified_not_saved");s.addClass("h24_edit_phrases_modified_saved");if($("#h24_edit_phrases").data("user")=="translator"){$("#h24_edit_phrases").find('tr[data-phraseid="'+t+'"]').css("background-color","")}}}}})}function l(e,a,s){var t=$("#comment_"+e).text();if(t=="No comment"){t=""}$h24.utils.promptDialog({description:"Change comment",helptext:"",requireInput:false,input:t,okCallback:function(t){$h24.get($h24.slashwebroot+"H24-Phrase/Set-Comment",{phraseid:e,level:a,language:s,comment:t},function(a){if(a["statuscode"]==1){if(t!=""){$("#comment_"+e).text(t)}else{$("#comment_"+e).text("No comment")}}})}})}function f(e,a){$h24.get($h24.slashwebroot+"H24-Phrase/Get-Translation-States",{language:e,level:a},function(e){$.each(e,function(a){var s=$("#h24_edit_phrases #h24_edit_phrases_sidemeny").find('[data-category="'+a+'"] span').last();var t=e[a].total-e[a].translated;s.text(t)})})}function p(e,a,s){C(false,a,s);$("#h24_edit_phrases #h24_edit_phrases_selected_language").val(e);if(a)P(e,undefined,s);else y(e)}function c(e,a,s){C(false,a,s);$("#h24_edit_phrases #h24_edit_phrases_selected_category").val(e);if(a)P(undefined,e,s);else y(undefined,e)}function u(){return $("#h24_edit_phrases #h24_edit_phrases_selected_language").val()}function v(){return $("#h24_edit_phrases #h24_edit_phrases_selected_category").val()}function g(){var e=$("#h24_edit_phrases #h24_edit_phrases_admin").val();return e==1?true:false}function m(){return $("#h24_edit_phrases #h24_edit_phrases_level").val()}function b(){return $("#h24_edit_phrases #h24_edit_phrases_search").val()}function y(e,a){if(typeof e=="undefined")var e=u();if(typeof a=="undefined")var a=v();$h24.get($h24.slashwebroot+"H24-Phrase/Get-Homepage-Category-Phrases",{homepageid:$h24.homepageid,language:e,category:a},function(e){$("#h24_edit_phrases #h24_edit_phrases_list").html(e)})}function P(e,a,s){if(typeof e=="undefined")var e=u();if(typeof a=="undefined")var a=v();var s=typeof s!="undefined"&&s==2?2:1;if($("#h24_edit_phrases").data("user")=="translator"){f(e,s)}$h24.get($h24.slashwebroot+"H24-Phrase/Get-Default-Category-Phrases",{language:e,category:a,level:s},function(e){$("#h24_edit_phrases #h24_edit_phrases_list").html(e)})}function C(e,a,s){$modified=$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_modified_not_saved");var e=typeof e!="undefined"&&e==true?true:false;var a=typeof a!="undefined"&&a==true?true:false;var s=typeof s!="undefined"&&s==2?2:1;var t=b();if($modified.length>0){var i=confirm($h24.phrase.GUIPhrase("General","You have unsaved changes.\n\nSave changes?"));if(i){if(a&&t){x(s,e)}else if(a){H(s,e)}else{w(e)}}}else{if(e){$h24.dialogs.h24_edit_phrases.close()}}}function w(e){var a=u();var s=v();var t={};$list=$("#h24_edit_phrases #h24_edit_phrases_list");$list.find(".h24_edit_phrases_modified_not_saved").each(function(){var e=$(this);var a=e.val();var s=e.parents("td").find("input[name=phraseid]").val();t[s]=a});$h24.post($h24.slashwebroot+"H24-Phrase/Save-Homepage-Edit-Phrases",{homepageid:$h24.homepageid,language:a,category:s,translations:t},function(a){if(a["statuscode"]==1){$saved=$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_modified_not_saved");$saved.removeClass("h24_edit_phrases_modified_not_saved");$saved.addClass("h24_edit_phrases_modified_saved");if(typeof e!="undefined"&&e==true)D(false)}})}function H(e,a){var e=typeof e!="undefined"&&e==2?2:1;var s=u();var t=v();var i={};var r={};var d=0;$list=$("#h24_edit_phrases #h24_edit_phrases_list");$list.find(".h24_edit_phrases_modified_not_saved").each(function(){var e=$(this);var a=$this.closest("tr").find("input[type=checkbox]").prop("checked");var s=e.val();var t=e.parents("td").find("input[name=phraseid]").val();i[t]=s;r[t]=a;d++});$h24.post($h24.slashwebroot+"H24-Phrase/Save-Default-Edit-Phrases",{language:s,category:t,translations:i,states:r,level:e},function(e){if(e["statuscode"]==1){$saved=$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_modified_not_saved");$saved.removeClass("h24_edit_phrases_modified_not_saved");$saved.addClass("h24_edit_phrases_modified_saved");if($("#h24_edit_phrases").data("user")=="translator"){if($saved.closest("tr").find("input[type=checkbox]").prop("checked")==true){$saved.closest("tr").css("background-color","#66CD00");$saved.closest("tr").data("translated",true)}else{$saved.closest("tr").css("background-color","");$saved.closest("tr").data("translated",false)}}if($("#h24_edit_phrases_tabs").find('[data-language="'+s+'"]').closest("li").hasClass("ui-state-active")==true){var t=$("#h24_edit_phrases #h24_edit_phrases_sidemeny").find(".ui-state-active span").last();var i=parseInt(t.text());if($saved.closest("tr").find("input[type=checkbox]").prop("checked")==true){t.text(i-d)}else{t.text(i+d)}}if(typeof a!="undefined"&&a==true){D(true)}}else{alert("An error occurred, please try to re-login.")}})}function k(){var e=$('input[name="search"]');var a=u();var s=1200;if(e.val().length==0){e.css("border","red solid 1px");return}else{e.css("border","")}$h24.get($h24.slashwebroot+"H24-Phrase/Search",{language:a,query:e.val()},function(e){if(e["statuscode"]==1){$h24.dialog.create("h24_edit_phrases",e["markup"],{width:s,title:$h24.phrase.GUIPhrase("Dialogs","Search in "+a),closeCallback:function(){D(true,2)}})}})}function x(e,a){var e=typeof e!="undefined"&&e==2?2:1;var s=u();var t={};var i={};$list=$("#h24_edit_phrases #h24_edit_phrases_list");$list.find(".h24_edit_phrases_modified_not_saved").each(function(){var e=$(this);var a=$this.closest("tr").find("input[type=checkbox]").prop("checked");var s=e.val();var r=e.parents("td").find("input[name=phraseid]").val();t[r]=s;i[r]=a});$h24.post($h24.slashwebroot+"H24-Phrase/Save-Search-Default-Edit-Phrases",{language:s,translations:t,states:i,level:e},function(e){if(e["statuscode"]==1){$saved=$("#h24_edit_phrases #h24_edit_phrases_list .h24_edit_phrases_modified_not_saved");$saved.removeClass("h24_edit_phrases_modified_not_saved");$saved.addClass("h24_edit_phrases_modified_saved");if($("#h24_edit_phrases").data("user")=="translator"){if($saved.closest("tr").find("input[type=checkbox]").prop("checked")==true){$saved.closest("tr").css("background-color","#66CD00");$saved.closest("tr").data("translated",true)}else{$saved.closest("tr").css("background-color","");$saved.closest("tr").data("translated",false)}}if(typeof a!="undefined"&&a==true){D(true)}}else{alert("An error occurred, please try to re-login.")}})}function D(e,a){var e=typeof e!="undefined"&&e==true?true:false;var a=typeof a!="undefined"&&a==2?2:1;C(true,e,a);if($("#h24_store").length==0){reloadColumns()}}function j(e,a){$anchor=$(e);$translation=$anchor.parents("tr").find(".h24_edit_phrases_translation").val(a);$translation.removeClass("h24_edit_phrases_modified_saved");$translation.addClass("h24_edit_phrases_modified_not_saved");$anchor.hide()}function E(e,a,s){var t=confirm("Phrase will be activated for customers.\n\nThis affects all languages.\n\nContinue?");if(!t)return;var i=u();var s=typeof s!="undefined"&&s==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Activate-Phrase",{phraseid:a,language:i,level:s},function(a){if(a["statuscode"]==1){$anchor=$(e);$anchor.hide();$tr=$anchor.parents("tr");$tr.removeClass("h24_edit_phrases_inactive");$tr.addClass("h24_edit_phrases_active");$tr.find("a[name=inactivatePhrase]").show()}})}function A(e,a,s){var t=confirm("Phrase will be inactivated for customers.\n\nThis affects all languages.\n\nContinue?");if(!t)return;var i=u();var s=typeof s!="undefined"&&s==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Inactivate-Phrase",{phraseid:a,language:i,level:s},function(a){if(a["statuscode"]==1){$anchor=$(e);$anchor.hide();$tr=$anchor.parents("tr");$tr.removeClass("h24_edit_phrases_active");$tr.addClass("h24_edit_phrases_inactive");$tr.find("a[name=activatePhrase]").show()}})}function G(e,a,s){var t=confirm("Phrase will be deleted.\n\nThis affects all languages.\n\nContinue?");if(!t)return;var i=u();var s=typeof s!="undefined"&&s==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Delete-Phrase",{phraseid:a,language:i,level:s},function(a){if(a["statuscode"]==1){$anchor=$(e);$anchor.parents("tr").remove()}})}function S(e,a){var s=confirm("All phrases in category will be activated for customers.\n\nThis affects all languages.\n\nContinue?");if(!s)return;var t=u();var a=typeof a!="undefined"&&a==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Activate-Category",{category:e,language:t,level:a},function(e){if(e["statuscode"]==1){$list=$("#h24_edit_phrases_list");$list.find("tr:gt(0)").removeClass("h24_edit_phrases_inactive");$list.find("tr:gt(0)").addClass("h24_edit_phrases_active");$list.find("a[name=activatePhrase]").hide();$list.find("a[name=inactivatePhrase]").show()}})}function T(e,a){var s=confirm("All phrases in category will be inactivated for customers.\n\nThis affects all languages.\n\nContinue?");if(!s)return;var t=u();var a=typeof a!="undefined"&&a==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Inactivate-Category",{category:e,language:t,level:a},function(e){if(e["statuscode"]==1){$list=$("#h24_edit_phrases_list");$list.find("tr:gt(0)").removeClass("h24_edit_phrases_active");$list.find("tr:gt(0)").addClass("h24_edit_phrases_inactive");$list.find("a[name=inactivatePhrase]").hide();$list.find("a[name=activatePhrase]").show()}})}function I(e,a){var s=confirm("Category and all phrases in category will be deleted.\n\nThis affects all languages.\n\nContinue?");if(!s)return;var t=u();var a=typeof a!="undefined"&&a==2?2:1;$h24.get($h24.slashwebroot+"H24-Phrase/Delete-Category",{category:e,language:t,level:a},function(e){if(e["statuscode"]==1){o(t,a)}})}function F(e,a,s){if(typeof $h24.phrase.jsPhrases[e]=="undefined"||typeof $h24.phrase.jsPhrases[e][a]=="undefined"){if(typeof $h24.phrase.jsPhrases[e]=="undefined"){$h24.phrase.jsPhrases[e]={}}$h24.phrase.jsPhrases[e][a]=a;$.get($h24.slashwebroot+"H24-Phrase/Add-Js-Phrase",{category:e,phrase:a,language:s},function(e){})}}function J(e,a,s){if(typeof $h24.phrase.jsHomepagePhrases[e]=="undefined"||typeof $h24.phrase.jsHomepagePhrases[e][a]=="undefined"){if(typeof $h24.phrase.jsHomepagePhrases[e]=="undefined"){$h24.phrase.jsHomepagePhrases[e]={}}$h24.phrase.jsHomepagePhrases[e][a]=a;$.get($h24.slashwebroot+"H24-Phrase/Add-Js-Homepage-Phrase",{category:e,phrase:a,language:s},function(e){})}}function R(e,a,s){if(typeof $h24.phrase.jsPhrases[e]!="undefined"&&typeof $h24.phrase.jsPhrases[e][a]!="undefined")a=$h24.phrase.jsPhrases[e][a];else{$h24.phrase.addJsPhrase(e,a,"se")}var t=[{name:"\\[b\\]",value:"<strong>"},{name:"\\[/b\\]",value:"</strong>"},{name:"\\[i\\]",value:"<i>"},{name:"\\[/i\\]",value:"</i>"},{name:"\\[u\\]",value:"<u>"},{name:"\\[/u\\]",value:"</u>"},{name:"\\[em\\]",value:"<em>"},{name:"\\[/em\\]",value:"</em>"}];for(var i in t){a=a.replace(new RegExp(t[i].name,"g"),t[i].value)}if(typeof $h24.phrase.globalVariables.names!="undefined"){var r="",d="";for(var h in $h24.phrase.globalVariables.names){r=$h24.phrase.globalVariables.names[h];d=$h24.phrase.globalVariables.values[h];a=a.replace(new RegExp(r,"g"),d)}}if(typeof s=="object"){for(var n in s){var o=s[n];if(typeof o=="object"&&o.length==2){a=a.replace(new RegExp("%"+n+"%","g"),R(o[1],o[0]))}else{a=a.replace(new RegExp("%"+n+"%","g"),o)}}}return a}function U(e,a,s){if(typeof $h24.phrase.jsHomepagePhrases[e]!="undefined"&&typeof $h24.phrase.jsHomepagePhrases[e][a]!="undefined")a=$h24.phrase.jsHomepagePhrases[e][a];else{$h24.phrase.addJsHomepagePhrase(e,a,$h24.phrase.visitorLanguage)}if(typeof s=="object"){for(var t in s){var i=s[t];if(typeof i=="object"&&i.length==2){a=a.replace(new RegExp("%"+t+"%","g"),U(i[1],i[0]))}else{a=a.replace(new RegExp("%"+t+"%","g"),i)}}}return a}return{openHp:r,openDp:d,openGp:h,search:k,setComment:l,saveSearchDefaultEditPhrases:x,openHomepageEditDialog:n,openDefaultEditDialog:o,setSelectedLanguage:p,setSelectedCategory:c,saveHomepageEditPhrases:w,saveDefaultEditPhrases:H,closeEditDialog:D,resetPhrase:j,activatePhrase:E,inactivatePhrase:A,deletePhrase:G,activateCategory:S,inactivateCategory:T,deleteCategory:I,addJsPhrase:F,addJsHomepagePhrase:J,GUIPhrase:R,HomepagePhrase:U,globalVariables:i}}();
h24core.prototype.store_manager=function(){var e;var t;function i(e){$("body").addClass("remodal-bg");var t=$('[data-remodal-id="edit_product_comments_dialog"]');var i=t.remodal({hashTracking:false});$(document).on("closed.remodal",'[data-remodal-id="edit_product_comments_dialog"]',function(e){var i=t.find('[data-function="h24_store_edit_product_comments_form"]');if(e.reason==="confirmation"){$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"updateProductCommentsInCart",homepageid:$h24.homepageid,formData:i.serialize()},function(e){l();_()})}else{t.html("")}});$("html").on("click",'[data-function="productCommentsContainer"] [data-action]',function(e){e.preventDefault();var o=$(e.target).closest("[data-action]");var a=o.data("action");switch(a){case"editProductComments":var n=parseInt(o.data("product-id"),10);var r=parseInt(o.data("variant-id"),10);t.attr({"data-product-id":n,"data-variant-id":r});t.loadingSpinner(true);i.open();$h24.get($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"renderProductCommentsDialogInCart",homepageid:$h24.homepageid,productId:n,variantId:r},function(e){if(e["successful"]){t.loadingSpinner(false);t.html(e["html"])}});break}});$("html").on("click",".h24_store a[data-action]",function(t){t.preventDefault();var i=$(t.target).closest("[data-action]");var o=i.data("action");switch(o){case"deleteProduct":var a=i.closest("td");var n=a.find("input[name=productId]").val();var r=a.find("input[name=variantId]").val();u(n,r,function(){G("update");N("update");if(e=="cart"){k()}else if(e=="checkout"){l();_()}});break;case"goBack":h();break;case"emptyCart":var s=confirm($h24.phrase.HomepagePhrase("Store-CartCheckout","Do you want to empty the cart?"));if(!s)return false;$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"emptyCart",homepageid:$h24.homepageid},function(t){if(e=="cart"){k()}else if(e=="checkout"){l()}});break}});$("html").on("change",".h24_store select",function(){var t=$(this).find("option:selected");var i=$(this).attr("name");var o=$(this);switch(i){case"quantity":var a=o.val();var n=o.closest("td");var r=n.find("input[name=productId]").val();var s=n.find("input[name=variantId]").val();G("suspend");$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"updateCartQuantity",homepageid:$h24.homepageid,productId:r,variantId:s,quantity:a},function(t){if(t["successful"]){G("update");N("update");if(e=="cart"){k()}else if(e=="checkout"){l();_()}}});break}})}function o(){i("cart")}function a(e){i("checkout");$h24.store_manager.checkoutSettings=e;var t=$("#h24_store_checkout");if(typeof e!="undefined"&&typeof e.callCheckoutVatIdToggle!="undefined"&&e.callCheckoutVatIdToggle){c(e)}t.find("a.h24_javascript_link, select, input").each(function(){var i=$(this);var o=i.attr("name");if(o=="customer_type"){i.change(function(){var o=t.find("#h24_store_checkout_form");var a=i.val();if(a==0){o.find(".h24_store_checkout_business").hide();o.find(".h24_store_checkout_personal").show();o.find(".h24_store_checkout_customer_only_required").show();t.find("input[name=vat_id]").val("")}else{o.find(".h24_store_checkout_business").show();o.find(".h24_store_checkout_personal").hide();o.find(".h24_store_checkout_customer_only_required").hide();c(e)}t.find("div.h24_store_checkout_box_content").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"setCustomerType",homepageid:$h24.homepageid,customer_type:a},function(e){t.find("div.h24_store_checkout_box_content").loadingSpinner(false);l();_();N("update")})})}else if(o=="ship_to_billing"){i.click(function(){var e=t.find("#h24_store_checkout_form_shipping_address");if(i.is(":checked")){e.hide()}else{e.show();var o=e.offset().top-65;$("html, body").animate({scrollTop:o})}})}else if(o=="submit_checkout"){i.click(function(){$h24.store_manager.completeOrder();return false})}else if(o=="goBack"){i.click(function(){h();return false})}else if(o=="country"){i.change(function(){c(e);var o=i.val();var a=i.find("option:selected").text();t.find("input[name=shipping_country], input[name=billing_country]").val(a);t.find("input[name=vat_id]").val("");$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"setCheckoutCountry",homepageid:$h24.homepageid,country:o},function(e){l(o);_(o);N("update")})})}else if(o=="toggleComment"){i.click(function(){var e=t.find("textarea[name=comment]").slideToggle("fast");return false})}else if(o=="apply_vat_id"){i.click(function(e){e.preventDefault();var i=t.find("input[name=vat_id]").val();var o=t.find("select[name=country]").val();t.find("input[name=vat_id]").removeClass("h24_store_error_border");t.find("div.h24_store_checkout_vat_id_check").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"applyVatId",homepageid:$h24.homepageid,destination:o,vatId:i},function(e){t.find("div.h24_store_checkout_vat_id_check").loadingSpinner(false);l();_();N("update");if(e["success"]){$("html, body").scrollTop(0)}else if(typeof e["code"]!="undefined"){if(e["code"]==2){t.find("input[name=vat_id]").addClass("h24_store_error_border")}}})})}else if(o=="redeemDiscountCode"){i.click(function(e){e.preventDefault();F()})}});var o=false;t.find("#h24_store_checkout_adress_form input").bind("keyup paste change",function(){if(o!=false){clearTimeout(o)}o=setTimeout(function(){$h24.store_manager.saveCheckoutData()},2e3)});t.find("input[name=shipping_method]").live("change",function(){var e=$(this);var i=e.val();G("suspend");t.find("div.h24_store_checkout_box_content").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"changeShippingMethod",homepageid:$h24.homepageid,methodId:i},function(e){G("update");N("update");l();_()})});t.find("a[name=unreedemDiscountCode]").live("click",function(e){e.preventDefault();W()});t.find("input[name=payment_method]").live("change",function(){var e=$(this);var i=e.val();$("#h24_store_checkout .h24_store_checkout_payment_method_instruction").slideUp("fast");var o=e.closest("div.h24_store_checkout_payment_method").find("div.h24_store_checkout_payment_method_instruction");o.slideDown("fast");t.find("div.h24_store_checkout_box_content").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"changePaymentMethod",homepageid:$h24.homepageid,methodId:i},function(e){if(e["success"]){var i=$("#h24_store_checkout_external_checkout");var a=$("#h24_store_checkout_adress_form");if(typeof e["externalCheckout"]!="undefined"&&e["externalCheckout"]){i.find(".h24_store_checkout_box_content").html(e["externalCheckoutMarkup"])}else{var n=t.find("input[name=ship_to_billing]");var r=t.find("#h24_store_checkout_form_billing_address");var s=t.find("#h24_store_checkout_form_shipping_address");i.hide().find(".h24_store_checkout_box_content").html("");a.show();if(typeof e["disableShippingAddress"]!="undefiend"&&e["disableShippingAddress"]==true){n.attr("checked",true).attr("disabled",true);s.hide()}else{if(n.is(":disabled")){n.attr("checked",true).attr("disabled",false)}}if(typeof e["disableCompanyAddress"]!="undefiend"&&e["disableCompanyAddress"]==true){r.find("input[name=customer_type]:nth(0)").attr("checked",true);r.find("input[name=customer_type]:nth(1)").attr("disabled",true);r.find(".h24_store_checkout_business").hide();r.find(".h24_store_checkout_personal").show();r.find(".h24_store_checkout_customer_only_required").show()}else{r.find("input[name=customer_type]:nth(0)").attr("disabled",false);r.find("input[name=customer_type]:nth(1)").attr("disabled",false)}if(typeof e["addressFetcher"]!="undefiend"&&e["addressFetcher"]==true){o.find("input[type=text]").val("");o.find("select").empty();o.find("div.h24_store_checkout_multi_addresses").hide();var d=r.find("input[name=billing_country]").val();s.find("input[type=text]").val("");r.find("input[type=text]").val("");r.find("input[name=billing_country]").val(d);s.find("input[name=shipping_country]").val(d)}else{}r.find("input[name=billing_country]").attr("disabled",true);s.find("input[name=shipping_country]").attr("disabled",true)}l();_()}})});$("#h24_store_cart_comment textarea[name=comment]").blur(function(){$h24.store_manager.saveCheckoutData()})}function n(){var e=$("#h24_store_product_list");var t=e.find("form[name=searchProductForm]");if($h24.editmode){e.tooltip({selector:"[data-toggletip=tooltip]"})}if(window.location.hash!=""){var i=window.location.hash;var o=e.find("input[name=categoryId]").val();var a=w(i);if(typeof a.page!="undefined"&&typeof a.sort!="undefined"&&typeof a.dir!="undefined"){if(typeof a.search=="undefined"){a.search=""}o=parseInt(o,10);a.page=parseInt(a.page,10);d(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getProductList",homepageid:$h24.homepageid,category:o,page:a.page,sort:a.sort,dir:a.dir,search:a.search},function(e){d(false);if(e["html"]!=""){$("#h24_store_product_list_products_container").html(e["html"])}})}}t.live("submit",function(t){t.preventDefault();var i=$(this);var o=i.find("input[name=search]").val();var a=i.find("select[name=sort]").val();var n=i.find("input[name=page]").val();var r=e.find("input[name=categoryId]").val();categorId=parseInt(r,10);n=parseInt(n,10);if(a!=""&&n!=0){var s=a.split("-");if(s.length==2){var c=s[0];var l=s[1];var _="/page="+n+"&sort="+c+"&dir="+l+"&search="+o;window.location.hash=_;d(true);var h=e.find("#h24_store_product_list_products_container");var u=$("html").css("margin-top");$("html, body").scrollTop(h.offset().top-4-parseInt(u,10));$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getProductList",homepageid:$h24.homepageid,category:r,page:n,sort:c,dir:l,search:o},function(e){d(false);if(e["html"]!=""){$("#h24_store_product_list_products_container").html(e["html"])}})}}});e.find("select[name=sort]").live("change",function(){var t=$(this);var i=t.val();var o=e.find("input[name=categoryId]").val();var a=e.find("input[name=currentPage]").val();var n=e.find("input[name=search]").val();categorId=parseInt(o,10);a=parseInt(a,10);if(i!=""&&a!=0){var r=i.split("-");if(r.length==2){var s=r[0];var c=r[1];var l="/page="+a+"&sort="+s+"&dir="+c;if(n!=""){l=l+"&search="+n}window.location.hash=l;d(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getProductList",homepageid:$h24.homepageid,category:o,page:a,sort:s,dir:c,search:n},function(e){d(false);if(e["html"]!=""){$("#h24_store_product_list_products_container").html(e["html"])}})}}});e.find("a.h24_ajax_link").live("click",function(t){var i=$(this);var o=i.attr("rel");t.preventDefault();var a=e.find("input[name=categoryId]").val();var n=w(o);if(typeof n.page!="undefined"&&typeof n.sort!="undefined"&&typeof n.dir!="undefined"){if(typeof n.search=="undefined"){n.search=""}window.location.hash=o;a=parseInt(a,10);n.page=parseInt(n.page,10);d(true);var r=e.find("#h24_store_product_list_products_container");if($h24.editmode){var s=$(".sitepreview");s.scrollTop(s.scrollTop()+r.offset().top-4)}else{var c=$("html").css("margin-top");$("html, body").scrollTop(r.offset().top-4-parseInt(c,10))}$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getProductList",homepageid:$h24.homepageid,category:a,page:n.page,sort:n.sort,dir:n.dir,search:n.search},function(e){d(false);if(e["html"]!=""){$("#h24_store_product_list_products_container").html(e["html"])}})}});if($h24.editmode){var n=$("#h24_store_product_list_new_navigation_tooltip");if(n.length==0){e.delayedHover({hover:function(){e.find("#h24_store_product_list_settings_button").show()},hoverEnd:function(){e.find("#h24_store_product_list_settings_button").hide()}})}else{e.find("#h24_store_product_list_settings_button").show()}e.find("#h24_store_product_list_settings_button a").click(function(e){e.preventDefault();$h24.store_manager.openProductListSettings()});var n=$("#h24_store_product_list_new_navigation_tooltip");n.find("a").click(function(){var e=$(this);if(e.hasClass("h24_hide")){n.hide();return false}else if(e.hasClass("h24_hide_forever")){n.hide();$h24.tooltips.blockTooltip("store_product_list_new_navigation");return false}});n.show();$("body").on("click","#h24_store_product_list [data-action]",function(e){e.preventDefault();var t=$(e.target).closest("[data-action]");var i=t.data("action");switch(i){case"editProduct":var o=t.closest("[data-productid]").data("productid");window.location.href="/"+$h24.webroot+"H24-Store/Product/ID/"+o;break}})}}function r(e){var t=$("#h24_store_product");t.find(".h24_javascript_link, select").each(function(){var e=$(this);var i=e.attr("name");switch(i){case"show_large_image":e.click(function(){var t=e.closest("div.h24_store_product_small_image");s(t);return false});break;case"variant":e.change(function(){var e=t.find("input[name=productId]").val();var i=$(this).val();t.find("div.h24_store_product_sale").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"StoreManager",modelaction:"getProductSaleMarkup",productId:e,variantId:i},function(e){if(typeof e["html"]!="undefined"&&e["html"].length>10){t.find("div.h24_store_product_sale").html(e["html"]);var i=t.find("#h24_store_product_images input[value='"+e["pictureid"]+"']").closest("div.h24_store_product_small_image");if(i.length==1){s(i)}r()}})});break;case"editProduct":e.click(function(){var e=t.find("input[name=productId]").val();window.location.href="/"+$h24.webroot+"H24-Store/Product/ID/"+e});break;default:break}});if(typeof e!="undefined"){if(typeof e["addThis"]!="undefined"&&e["addThis"]==1){var i="";if(typeof e["addThisPubid"]!="undefined"&&e["addThisPubid"]!=""){i="#pubid="+e["addThisPubid"]}var o="https://s7.addthis.com/js/300/addthis_widget.js"+i;$.getScript(o,function(e,t,i){})}if(typeof e["disqus"]!="undefined"&&e["disqus"]==1&&typeof e["disqusUsername"]!="undefined"&&e["disqusUsername"]!=""){var a=e["disqusUsername"];var n=document.createElement("script");n.type="text/javascript";n.async=true;n.src="https://"+a+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)}}}function s(e){var t=$("#h24_store_product");var i=t.find(".h24_store_product_small_images");var o=e.find("a[name=lightbox_image]");var a=e.find("input[name=image_large]").val();var n=e.find("input[name=image_large_retina]").val();var r=e.find("input[name=image_fullscreen]").val();var s=e.find("input[name=image_width]").val();var d=e.find("input[name=image_height]").val();var c=e.find("img").attr("alt");t.find(".h24_store_product_large_image img").attr("src",a);t.find(".h24_store_product_large_image img").attr("srcset",n);t.find(".h24_store_product_large_image img").attr("alt",c);t.find(".h24_store_product_large_image img").prop("width",s).prop("height",d);t.find(".h24_store_product_large_image a").attr("href",r);t.find(".h24_store_product_large_image a").attr("title",c);if(o.length==1){i.find(".h24_store_product_small_image a[name=lightbox_image][lightbox*=lightbox]").each(function(){var e=$(this);e.attr("rel",e.attr("lightbox"));e.removeAttr("lightbox")});o.attr("lightbox",o.attr("rel"));o.removeAttr("rel")}$h24.imageViewer.init()}function d(e){var t=$(".h24_store_product_list_products_overlay");if(e){t.show()}else{t.hide()}}function c(e){if(typeof e=="undefined"){e=$h24.store_manager.checkoutSettings}var t=$("#h24_store_checkout #h24_store_checkout_form");var i=t.find("input[name=customer_type]:checked").val();var o=t.find("select[name=country]").val();if(i==1&&typeof e!="undefined"&&typeof e.euCountryCodes!="undefined"&&typeof e.euCountryCodes[o]!="undefined"){t.find("div.h24_store_checkout_vat_id_check").closest(".h24_store_checkout_business").show()}else{t.find("div.h24_store_checkout_vat_id_check").closest(".h24_store_checkout_business").hide()}}function l(e){var t=$("#h24_store_checkout");var i=t.find("input[name=taxCountry]").val();if(typeof e=="undefined"){var e=i;i=""}if(e!=i){t.find("div#h24_store_cart_total, div.h24_store_checkout_products").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"updateCheckoutTotal",homepageid:$h24.homepageid,country:e},function(e){if(e["successful"]){t.find("div#h24_store_cart_total, div.h24_store_checkout_products").loadingSpinner(false);t.find("#h24_store_cart_total").replaceWith(e["total"]);t.find("#h24_store_cart_table").replaceWith(e["cart"]);if(typeof e["totalPrice"]!="undefined"){t.find("span.h24_store_cart_checkout_total_price").html(e["totalPrice"])}}});if($("#h24_store_mini_cart").length==1){v()}}$("#h24_store_checkout_discount_error_container").empty().slideUp()}function _(e){var t=$("#h24_store_checkout");var i=$("#h24_store_checkout_external_checkout");var o=t.find("input[name=taxCountry]").val();if(typeof e=="undefined"){var e=o;o=""}if(e!=o){t.find("div.h24_store_checkout_box_content").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"updateCheckoutShippingAndPayment",homepageid:$h24.homepageid,country:e},function(e){if(e["successful"]){t.find("div.h24_store_checkout_box_content").loadingSpinner(false);t.find("#h24_store_checkout_shipping_method").html(e["shipping"]);t.find("#h24_store_checkout_payment_method").html(e["payment"]);t.find("#h24_store_checkout_terms").html(e["terms"]);if(e["shipping_count"]==0||e["payment_count"]==0&&e["disable_payment"]==false||e["external_checkout"]){if(e["external_checkout"]&&e["shipping_method_selected"]){i.show()}else{i.hide()}t.find("#h24_store_checkout_adress_form").hide()}else{t.find("#h24_store_checkout_adress_form").show();i.hide()}}})}}function h(){var e=$("#h24_store_cart input[name=referer]");if(e.length>0){var t=e.val();if(t!=""&&t!=window.location.href){window.location.href=t;return}}history.back()}function u(e,t,i){var o=confirm($h24.phrase.HomepagePhrase("Store-CartCheckout","Are you sure you want to delete this product from your shopping cart?"));if(!o)return false;$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"deleteCartProduct",homepageid:$h24.homepageid,productId:e,variantId:t},function(e){if(e["successful"]){if(e["empty"]){window.refreshBrowser()}else{if(typeof i=="function"){i.call(this)}}}})}function m(e,t){if($h24.editmode==false){var i=$(e);var o=i.closest("div.h24_store_product_sale");if(i.attr("disabled")=="disabled"){return}if(o.length>=1){var a=o.find("select[name=variant]").val();var n=o.find("select[name=quantity]").val();var r=o.find("textarea[name=product_comment]");var s=r.val();if(a==0){o.find(".h24_store_product_select_variant_error").show();o.find("select[name=variant]").css("border","1px solid #FF0000")}else{i.attr("disabled","disabled");setTimeout(function(){i.removeAttr("disabled")},1e3);$("#h24_store_product_view .h24_store_product_sale").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"addProductToCart",homepageid:$h24.homepageid,productId:t,variantId:a,quantity:n,productComment:s},function(e){$("#h24_store_product_view .h24_store_product_sale").loadingSpinner(false);if(e["successful"]){v();r.val("")}})}}}else{alert($h24.phrase.GUIPhrase("Block-StoreProduct","You can only add products to cart in published mode."))}}function p(){var e=$("#h24_store_mini_cart").length==1?1:0;if($("#responsive_header_container").is(":visible")){e=0}switch(e){case 0:if(!$h24.editmode&&$("html").hasClass("get-store-mini-cart")){v(true)}break;case 1:if($h24.editmode){g()}else if($("html").hasClass("get-store-mini-cart")){v(true)}else if($("html").hasClass("h24_page_store_checkout")||$("html").hasClass("h24_page_store_checkout_payment")||$("html").hasClass("h24_page_store_cart")){v(true)}if($(".navigation #nav").length==1){$("html").on("mouseenter",".navigation #nav",function(e){var t=parseInt($(".navigation").css("zIndex"),10);var i=parseInt($("#h24_store_mini_cart").css("zIndex"),10);if(t>0&&i>0){$("#h24_store_mini_cart").data("zindex",i).css("zIndex",t-1)}});$("html").on("mouseleave",".navigation #nav",function(e){var t=parseInt($("#h24_store_mini_cart").data("zindex"),10);if(t>0){$("#h24_store_mini_cart").css("zIndex",t)}})}break}}function f(){var e=$("#h24_store_mini_cart"),t=$(window).width(),i={top:e.offset().top,left:e.offset().left,right:$(window).width()-e.offset().left-e.outerWidth()},o={top:e.position().top,left:e.position().left,right:parseInt(e.css("right"),10)};var a=$("<div/>",{id:"h24_store_mini_cart_placeholder",css:{position:"absolute",top:o.top+"px",right:o.right+"px",width:0,height:0}});e.after(a);$(window).on("scroll",function(){var t=$("html").position().top;if(t+i.top<=0&&e.hasClass("h24_store_mini_cart_fixed")==false){e.css({right:i.right+"px",left:"auto"});e.addClass("h24_store_mini_cart_fixed")}else if(t+i.top>0&&e.hasClass("h24_store_mini_cart_fixed")){e.css({right:o.right+"px",left:"auto"});e.removeClass("h24_store_mini_cart_fixed")}});$(window).on("resize",function(){var o=$(window).width();if(o!=t){t=o;i.right=o-a.offset().left;if(e.hasClass("h24_store_mini_cart_fixed")){e.css({right:i.right+"px"})}}});$(window).scroll();e.data("scrollInitiated",true)}function g(){var e=$("#h24_store_mini_cart"),t=$("#h24_header_collage_editor_button input[name=selector]").val();e.draggable({scroll:false,containment:t,handle:'[data-action="dragStoreMiniCart"]',start:function(t,i){e.css("right","auto")},stop:function(i,o){var a=e.position();var n=$(t).width();var r=n-(a.left+e.outerWidth());$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"saveMiniCartPosition",homepageid:$h24.homepageid,top:a.top,right:r,headerWidth:n,__skip_loading_overlay:true},function(e){})}})}function v(e,t){var e=typeof e!="undefined"&&e?true:false;var i={model:"StoreManager",modelaction:"getMiniCart",homepageid:$h24.homepageid};if($("#responsive_header_container").is(":visible")){i.mobile=true}$h24.post($h24.slashwebroot+"Page/Common-Communicator",i,function(i){if(i["successful"]){switch(parseInt(i["mini_cart"],10)){case 0:var o=$("#h24_store_panel"),a=$("#h24_store_panel_content");if(parseInt(i["products"],10)<=0){o.hide()}else{a.html(i["markup"]);o.show();if(!e){if($("#h24_store_panel_amount .h24_store_panel_amount_mobile").is(":visible")){o.animate({height:"75px"},200).animate({height:"55px"},150).animate({height:"75px"},150).animate({height:"55px"},150)}else{o.animate({height:"50px"},200).animate({height:"30px"},150).animate({height:"50px"},150).animate({height:"30px"},150)}}}break;case 1:var n=$("#h24_store_mini_cart"),r=$(i["markup"]);if(e){n.html(r.html()).fadeIn(50,function(){if(typeof t=="function"){t.call(this)}})}else{n.fadeOut("fast",function(){n.html(r.html());n.fadeIn("fast",function(){if(typeof t=="function"){t.call(this)}})})}if(!$h24.isTouchDevice&&n.data("scrollInitiated")!=true&&!$("html").hasClass("h24_page_store_checkout")&&!$("html").hasClass("h24_page_store_checkout_payment")&&!$("html").hasClass("h24_page_store_cart")){f()}break}}})}function k(){var e=$("#h24_store_cart");e.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"getCartMarkup",homepageid:$h24.homepageid},function(t){e.loadingSpinner(false);if(t["successful"]){var i=$(t["markup"]).find("div#h24_store_cart");e.replaceWith(i)}})}function y(){var e=$("#h24_store_checkout");$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"getCheckoutMarkup",homepageid:$h24.homepageid},function(t){if(t["successful"]){e.replaceWith(t["markup"])}})}function b(){var e=$("#h24_store_checkout_form");var t={comment:$("#h24_store_cart_comment textarea[name=comment]").val(),ship_to_billing:e.find("input[name=ship_to_billing]").is(":checked")?1:0,shipping_method:e.find("input[name=shipping_method]:checked").val(),payment_method:e.find("input[name=payment_method]:checked").val()};if(e.find("input[name=klarna_pclass_"+t.payment_method+"]:checked").length==1){t["klarna_pclass"]=e.find("input[name=klarna_pclass_"+t.payment_method+"]:checked").val()}var i={email:e.find("input[name=email]").val(),newsletter:e.find("input[name=newsletter]").is(":checked")?1:0,customer_type:e.find("input[name=customer_type]:checked").val(),billing_pno:e.find("input[name=billing_pno]:visible").val(),billing_firstname:e.find("input[name=billing_firstname]").val(),billing_lastname:e.find("input[name=billing_lastname]").val(),billing_person_identity_number:e.find("input[name=billing_person_identity_number]").val(),billing_company_identity_number:e.find("input[name=billing_company_identity_number]").val(),billing_company:e.find("input[name=billing_company]").val(),billing_address:e.find("input[name=billing_address]").val(),billing_address_2:e.find("input[name=billing_address_2]").val(),billing_city:e.find("input[name=billing_city]").val(),billing_zip:e.find("input[name=billing_zip]").val(),billing_country:e.find("select[name=billing_country]").val(),billing_state:e.find("input[name=billing_state]").val(),billing_cellno:e.find("input[name=billing_cellno]").val(),vat_id:e.find("input[name=vat_id]").val(),country:e.find("select[name=country]").val(),terms:e.find("input[name=terms]").is(":checked")?1:0};if(e.find("select[name=billing_pno_index]:visible").length==1){i["billing_pno_index"]=e.find("select[name=billing_pno_index]").val()}if(t.ship_to_billing==0){var o={shipping_firstname:e.find("input[name=shipping_firstname]").val(),shipping_lastname:e.find("input[name=shipping_lastname]").val(),shipping_company:e.find("input[name=shipping_company]").val(),shipping_address:e.find("input[name=shipping_address]").val(),shipping_address_2:e.find("input[name=shipping_address_2]").val(),shipping_city:e.find("input[name=shipping_city]").val(),shipping_zip:e.find("input[name=shipping_zip]").val(),shipping_country:e.find("select[name=shipping_country]").val(),shipping_state:e.find("input[name=shipping_state]").val(),shipping_cellno:e.find("input[name=shipping_cellno]").val()};var i=$.extend(true,i,o)}var a={checkoutCustomer:i,checkoutOrder:t};return a}function C(){var e=$("#h24_store_checkout");var t=$("#h24_store_checkout_form");var i=e.find("div.h24_store_error_container");var o=e.find("div#h24_store_checkout_redirect_message");t.find(".h24_store_checkout_form_error").hide();t.find("label").removeClass("h24_store_error");t.find("input, select").removeClass("h24_store_error_border");i.hide().empty();o.hide().empty();var a=b();var n=a.checkoutCustomer;var r=a.checkoutOrder;$("#h24_store_checkout_form").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"completeOrder",homepageid:$h24.homepageid,checkoutCustomer:n,checkoutOrder:r},function(a){if(a["success"]){if(typeof a["redirect_markup"]!="undefined"){o.html(a["redirect_markup"]).slideDown("fast")}if(typeof a["redirect_url"]!="undefined"){window.location.href=a["redirect_url"]}else if(typeof a["paypal_form_markup"]!="undefined"){e.find("div#h24_store_checkout_paypal_form_container").show().html(a["paypal_form_markup"])}}else if(a["code"]==1||a["code"]==2||a["code"]==4||a["code"]==5||a["code"]==6||a["code"]==20){$("#h24_store_checkout_form").loadingSpinner(false);if(typeof a["error_markup"]!="undefined"&&a["error_markup"]!=""){i.html(a["error_markup"]).show()}}else if(a["code"]==3){$("#h24_store_checkout_form").loadingSpinner(false);t.find(".h24_store_checkout_form_error").show();for(var n in a["error"]){if(n!="_error"&&typeof a["error"][n]["error"]!="undefined"){var r=t.find("input[name="+n+"], select[name="+n+"], textarea[name="+n+"]").closest("label");if(r.length>0){r.addClass("h24_store_error")}else{t.find("input[name="+n+"]").addClass("h24_store_error_border")}}}if(typeof a["error_markup"]!="undefined"&&a["error_markup"]!=""){i.html(a["error_markup"]).show()}}else if(a["code"]==7){$("#h24_store_checkout_form").loadingSpinner(false);if(typeof a["error_markup"]!="undefined"&&a["error_markup"]!=""){i.html(a["error_markup"]).show()}H("unredeem")}})}function w(e){var t={};if(e!=""){getNoSlash=e.replace(/\//g,"");getNoSlash=getNoSlash.replace(/#/g,"");var i=getNoSlash.split("&");for(var o=0;o<i.length;o++){var a=i[o].split("=");if(a.length==2){t[a[0]]=a[1]}}}return t}function S(e,t){if(e>0){var i=$h24.slashwebroot+"Page/Common-Communicator?homepageid="+$h24.homepageid+"&model=StoreManager&modelaction=showCustomerOrderReceipt&orderId="+e;if(typeof t!="undefined"&&t){i=i+"&print=1"}var o=window.open(i,"receipt","width=700,height=560,scrollbars=yes")}}function P(e,t){if(e>0){var i=$h24.slashwebroot+"Page/Common-Communicator?homepageid="+$h24.homepageid+"&model=StoreManager&modelaction=showCustomerOrderConfirmation&orderId="+e;if(typeof t!="undefined"&&t){i=i+"&print=1"}var o=window.open(i,"confirmation","width=700,height=560,scrollbars=yes")}}function x(e){var t=$("#h24_store_checkout");var i=$("#h24_store_checkout_klarna_"+e);var o=i.find("div.h24_store_klarna_error_container");o.hide().empty();if(i.length==1){var a=i.find("input[name=billing_pno]").val();var n=i.find("div.h24_store_checkout_multi_addresses");n.find("select").empty();n.hide();if(a!=""){t.find("#h24_store_checkout_payment_method, #h24_store_checkout_form_billing_address").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"klarnaGetAddresses",homepageid:$h24.homepageid,paymentMethodId:e,klarnaPno:a},function(e){t.find("#h24_store_checkout_payment_method, #h24_store_checkout_form_billing_address").loadingSpinner(false);if(e["success"]){if(typeof e["address"]!="undefined"){var a=e["address"];I(a)}else if(typeof e["addresses"]!="undefined"){var n=e["addresses"];$h24.store_manager.multiAddresses=n;i.find("div.h24_store_checkout_multi_addresses").show();var r=i.find("select[name=billing_pno_index]");r.empty();for(var s=0;s<n.length;s++){var d=n[s];r.append(new Option(d.address1+", "+d.zipcode+", "+d.city,s))}I(n[0]);r.change(function(){var e=$(this);var t=e.val();var i=$h24.store_manager.multiAddresses[e.val()];I(i)})}}else if(e["code"]==1||e["code"]==2||e["code"]==3||e["code"]==4||e["code"]==5){if(typeof e["error_markup"]!="undefined"&&e["error_markup"]!=""){o.html(e["error_markup"]).show()}}})}}}function I(e){var t=$("#h24_store_checkout");var i=t.find("#h24_store_checkout_form");$billingAddress=t.find("#h24_store_checkout_form_billing_address");$shippingAddress=t.find("#h24_store_checkout_form_shipping_address");var o=$billingAddress.find("input[name=billing_country]").val();$shippingAddress.find("input[type=text]").val("");$billingAddress.find("input[type=text]").val("");$billingAddress.find("input[name=billing_country]").val(o);$shippingAddress.find("input[name=shipping_country]").val(o);if(e.isOrganization){i.find("input[name=customer_type]:nth(1)").attr("checked",true);i.find("input[name=customer_type]:nth(0)").attr("disabled",true);i.find(".h24_store_checkout_business").show();i.find(".h24_store_checkout_personal").hide();i.find(".h24_store_checkout_customer_only_required").hide();if(typeof $h24.store_manager.checkoutSettings=="object"){var a=$h24.store_manager.checkoutSettings;c(a)}i.find("input[name=billing_company]").val(e.organization).attr("disabled",true);if(e.firstname!=""){i.find("input[name=billing_firstname]").val(e.firstname).attr("disabled",true)}if(e.lastname!=""){i.find("input[name=billing_lastname]").val(e.lastname).attr("disabled",true)}if(i.find("input[name=billing_company_identity_number]").length==1){i.find("input[name=billing_company_identity_number]").val(e.identity_number).attr("disabled",true)}}else{i.find("input[name=customer_type]:nth(0)").attr("checked",true);
i.find("input[name=customer_type]:nth(1)").attr("disabled",true);i.find("input[name=billing_firstname]").val(e.firstname).attr("disabled",true);i.find("input[name=billing_lastname]").val(e.lastname).attr("disabled",true);i.find(".h24_store_checkout_business").hide();i.find(".h24_store_checkout_personal").show();i.find(".h24_store_checkout_customer_only_required").show();if(i.find("input[name=billing_person_identity_number]").length==1){i.find("input[name=billing_person_identity_number]").val(e.identity_number).attr("disabled",true)}}i.find("input[name=billing_address]").val(e.address1).attr("disabled",true);i.find("input[name=billing_address_2]").val(e.address2).attr("disabled",true);i.find("input[name=billing_city]").val(e.city).attr("disabled",true);i.find("input[name=billing_zip]").val(e.zipcode).attr("disabled",true);i.find("input[name=billing_state]").val("").attr("disabled",true);if(e.cellno!=""){i.find("input[name=billing_cellno]").val(e.cellno).attr("disabled",true)}else if(e.phone!=""){i.find("input[name=billing_cellno]").val(e.phone).attr("disabled",true)}l()}function M(e,t,i){var o=$(e);var a=o.closest("div.h24_store_checkout_payment_method");var n=a.find("div.h24_store_checkout_payment_agreements_container");var r=n.find("iframe.h24_store_checkout_payment_agreements_iframe");if(typeof i!="undefined"){var s=n.find("input[name="+i+"]").val()}else{var s=n.find("input[name=agreementUrl]").val()}if(s!=""){if(r.attr("src").length>1&&r.attr("src")==s){n.slideToggle()}else{r.load(function(){n.slideDown()});r.attr("src",s)}}}function D(){$("#h24_store_checkout").find("#h24_store_checkout_term").slideToggle()}function T(){var e=$("#h24_store_product_list_settings");var t=e.find("input[name=reloadPage]").val();if(t==1){$h24.utils.ajaxLoaderStart();document.location.reload(true)}else{$h24.dialogs.h24_store_product_list_settings_dialog.close()}}function A(){$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"productListSettingsDialog",homepageid:$h24.homepageid},function(e){if(e["success"]&&e["markup"]!=""&&typeof e["settings"]=="object"){$h24.dialog.create("h24_store_product_list_settings_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Dialogs","Move"),width:400,draggable:true,leftFlapType:"move",transparentOverlay:true,alignment:"right",closeCallback:function(){T()}});var t=$("#h24_store_product_list_products");var i=$("#h24_store_product_list_settings");var o=e["settings"];var a=$("#h24_store_product_list_settings_products_per_page");a.find("input[name=slider_value]").val(o["products_per_page"]);a.find("div.h24_store_product_list_settings_slider").slider({min:1,max:100,value:o["products_per_page"],slide:function(e,t){a.find("input[name=slider_value]").val(t.value)},change:function(e,t){z(true)}});var n=i.find("#h24_store_product_list_settings_row_space");n.find("input[name=slider_value]").val(o["row_space"]);n.find("div.h24_store_product_list_settings_slider").slider({min:0,max:100,value:o["row_space"],slide:function(e,t){$("#h24_store_product_list .h24_store_product_list_row_space").css("padding-top",t.value+"px");n.find("input[name=slider_value]").val(t.value)},change:function(e,t){z()}});var r=$("#h24_store_product_list_settings_products_per_row");r.find("input[name=slider_value]").val(o["products_per_row"]);r.find("div.h24_store_product_list_settings_slider").slider({min:1,max:10,value:o["products_per_row"],slide:function(e,t){r.find("input[name=slider_value]").val(t.value)},change:function(e,t){z(true)}});var s=$("#h24_store_product_list_settings_image_size");s.find("input[name=slider_value]").val(o["image_size"]);s.find("div.h24_store_product_list_settings_slider").slider({min:0,max:500,value:o["image_size"],slide:function(e,t){var i=$("#h24_store_product_list_settings select[name=image_presentation]").val();if(i=="square"){$(".h24_store_product_list_product_image").css({width:t.value+"px",height:t.value+"px"});$(".h24_store_product_list_product_image img").css({width:t.value+"px",height:t.value+"px"})}else if(i=="normal"){}s.find("input[name=slider_value]").val(t.value)},change:function(e,t){z(true)}});i.find("input[name=category_view_mode]").click(function(){if(O(o["category_menu"])==1&&O(o["has_custom_store_navigation"])==1){z(false,false)}else{z(false,true)}});i.find("select[name=category_menu]").change(function(){var e=$(this).val();var t=i.find(".h24_store_product_list_settings_category_view_mode_container");if(e==0){t.show()}else{t.hide()}i.find("input[name=reloadPage]").val(1);z(false,false,function(){$h24.utils.notification($h24.phrase.GUIPhrase("Store-Frontend-Settings","Press 'Done' to reload the page and show the new menu")+".","accept",{title:$h24.phrase.GUIPhrase("Store-Frontend-Settings","Settings saved")+"!",timeoutTime:10,css:{width:400}})})});i.find("select[name=sort_default]").change(function(){var e=$(this).val();$("#h24_store_product_list_filter select[name=sort]").val(e);z(true)});i.find("select[name=image_presentation]").change(function(){z(true)})}})}function z(e,t,i){var o=$("#h24_store_product_list_settings");var a={product_list_products_per_page:O(o.find("#h24_store_product_list_settings_products_per_page input[name=slider_value]").val()),product_list_row_space:O(o.find("#h24_store_product_list_settings_row_space input[name=slider_value]").val()),product_list_products_per_row:O(o.find("#h24_store_product_list_settings_products_per_row input[name=slider_value]").val()),product_list_image_size:O(o.find("#h24_store_product_list_settings_image_size input[name=slider_value]").val()),product_list_category_view_mode:o.find("input[name=category_view_mode]:checked").val(),product_list_category_menu:O(o.find("select[name=category_menu]").val()),product_list_sort_default:o.find("select[name=sort_default]").val(),product_list_image_presentation:o.find("select[name=image_presentation]").val()};$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"saveProductListSettings",homepageid:$h24.homepageid,settings:a},function(o){if(o["success"]){if(typeof e!="undefined"&&e){q()}if(typeof t!="undefined"&&t){j()}if(typeof i=="function"){i.call(this)}}})}function O(e){if(e=="")return 0;else return parseInt(e,10)}function q(){var e=$("#h24_store_product_list");var t=e.find("#h24_store_product_list_products");var i=e.find("select[name=sort]").val();var o=e.find("input[name=categoryId]").val();var a=e.find("input[name=currentPage]").val();var n=e.find("input[name=search]").val();categorId=O(o,10);a=O(a,10);if(i!=""&&a!=0){var r=i.split("-");if(r.length==2){var s=r[0];var d=r[1];t.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getProductList",homepageid:$h24.homepageid,category:o,page:a,sort:s,dir:d,search:n},function(e){t.loadingSpinner(false);if(e["html"]!=""){$("#h24_store_product_list_products_container").html(e["html"])}})}}}function L(){$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"createStore",homepageid:$h24.homepageid},function(e){window.location.href="/"+$h24.webroot+"H24-Store"})}function j(){var e=$("#h24_store_category_menu input[name=categoryId]").val();var t=$("#h24_store_category_menu");t.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"getCategoryMenu",homepageid:$h24.homepageid,categoryId:e},function(e){if(e["html"]!=""){$("#h24_store_category_menu").replaceWith(e["html"])}})}function U(e){$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"getKlarnaAccountInfo",homepageid:$h24.homepageid,eStoreId:e},function(e){if(e["markup"]!=""){$h24.coreDialog.create("h24_store_product_klarna_account_info",e["html"],{title:$h24.phrase.HomepagePhrase("Store-ProductView","Klarna Account"),width:600})}})}function F(){var e=$("#h24_store_checkout_discount");var t=$("#h24_store_checkout_discount_error_container");var i=e.find("input[name=discountCode]").val();t.empty().slideUp();if(i.length>0){e.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"redeemDiscountCode",homepageid:$h24.homepageid,discountCode:i},function(i){if(i["success"]){e.loadingSpinner(false);G("update");N("update");H("redeem")}else{e.loadingSpinner(false);if(typeof(i["error_markup"]!="undefined")){t.html(i["error_markup"]).slideDown()}}})}}function W(){var e=$("#h24_store_cart_total");e.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"unredeemDiscountCode",homepageid:$h24.homepageid},function(t){if(t["success"]){e.loadingSpinner(false);G("update");N("update");H("unredeem")}else{e.loadingSpinner(false)}})}function H(e){$discountContainer=$("#h24_store_checkout_discount_container");if(typeof e=="undefined"){return false}if(e=="redeem"){_();l()}else if(e=="unredeem"){_();l();$discountContainer.find('input[type="text"]').val("")}}function B(){var e=b();var t=e.checkoutCustomer;var i=e.checkoutOrder;$h24.post($h24.slashwebroot+"Page/Common-Communicator",{model:"StoreManager",modelaction:"saveCheckoutData",homepageid:$h24.homepageid,checkoutCustomer:t,checkoutOrder:i},function(e){G("update");N("update")})}function G(e){var t=$("#h24_store_checkout");var i=t.find("input[name=payment_method]:checked").data("method");if(i=="klarna_checkout"&&typeof window._klarnaCheckout!="undefined"){switch(e){case"suspend":window._klarnaCheckout(function(e){e.suspend()});break;case"resume":window._klarnaCheckout(function(e){e.resume()});break;case"update":G("suspend");$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"updateKlarnaCheckout",homepageid:$h24.homepageid},function(e){if(e["success"]){G("resume")}else{$("#h24_store_checkout_external_checkout").find(".h24_store_checkout_box_content").html(e["errorMarkup"])}});break}}}function N(e){var t=$("#h24_store_checkout");var i=t.find("input[name=payment_method]:checked").data("method");if(i=="payson_checkout"){switch(e){case"update":$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"StoreManager",modelaction:"updatePaysonCheckout",homepageid:$h24.homepageid},function(e){if(e["success"]){$("#h24_store_checkout_external_checkout").find(".h24_store_checkout_box_content").html(e["markup"])}else{$("#h24_store_checkout_external_checkout").find(".h24_store_checkout_box_content").html(e["errorMarkup"])}});break}}}return{initCart:o,initCheckout:a,addProductToCart:m,refreshCart:k,deleteCartProduct:u,initProductList:n,initProduct:r,showCustomerOrderReceipt:S,showCustomerOrderConfirmation:P,updateCheckoutShippingAndPayment:_,completeOrder:C,klarnaGetAddresses:x,fillCheckoutAddressFromObject:I,togglePaymentMethodAgreements:M,toggleTerms:D,openProductListSettings:A,reloadProductList:q,createStore:L,reloadCategoryMenu:j,showKlarnaAccountInfo:U,redeemDiscountCode:F,unreedemDiscountCode:W,closeProductListSettings:T,getCheckoutData:b,saveCheckoutData:B,klarnaCheckoutActionIfCurrent:G,paysonCheckoutActionIfCurrent:N,getMiniCart:v,initMiniCart:p,initMiniCartDraggable:g,initMiniCartScroll:f}}();
h24core.prototype.image_database=function(){var a="";var e={};var i={ci:"",page:""};var t="";var s=function(a,e){a=parseInt(a);$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"getImageInfo",pictureid:a},function(i){if(i.success){if(typeof e==="object"&&typeof e.imageCallback==="function"){e.imageCallback(a,i)}}})};var o=function(a){if(typeof a!="object"||typeof a.uploadCallback!="function"){return}if(typeof a.closeCallback!="function"){a.closeCallback=null}if(typeof $h24.dialogs.h24_image_database_dialog=="undefined"){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"getDialog"},function(e){if(typeof e["markup"]!="undefined"){$h24.dialog.create("h24_image_database_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Image-Database","Images"),width:900,closeCallback:function(){n()},overlayZIndex:4499});t=$(".h24_dialog_overlay").last();$("#h24_image_database_dialog").tabs({beforeActivate:function(a,e){if($(e.newTab).find("a").hasClass("h24_init_on_click")){$(e.newTab).find("a").removeClass("h24_init_on_click");pageListValue=$("#h24_image_database_my_images select[name=pageList]").val();f(pageListValue,2)}}});if(typeof a.customUploader=="function"){a.customUploader.call(this)}else{r()}l();d();c()}})}else{$(".h24_dialog_overlay").show();$h24.dialogs.h24_image_database_dialog.contents.show();$("#h24_image_database_dialog").closest(".h24-FloatingPanel").css({top:$(window).scrollTop()});if(typeof a.customUploader=="function"){a.customUploader.call(this)}else{r()}}$h24.image_database.params=a};var r=function(){$h24.coreUploader.create("h24_image_database_uploader",$("#h24_image_database_uploader"),{fileUploaded:function(a){if(a.successful){$h24.image_database.params.uploadCallback(a.pictureid,a)}},allFilesUploaded:function(){n()},maxQueuedFiles:1,mode:$h24.coreUploader.IMAGE_UPLOADER_MODE,maxFileSize:"10mb"})};var n=function(){$("#h24_image_database_uploader .h24_upload_status_messages > p").hide();$("#h24_image_database_dialog .h24_image_database_error_message").hide();$("#h24_image_database_image_url input[name=image_url]").val("");t.hide();$h24.dialogs.h24_image_database_dialog.contents.hide();$h24.coreUploader.destroy("h24_image_database_uploader");if(typeof $h24.image_database.params.closeCallback=="function"){$h24.image_database.params.closeCallback()}};var d=function(){var a=$("#h24_image_database_image_url");var e=a.find("input[name=image_url]");var i=a.find(".h24_image_database_error_message");var t=a.find("form#h24_image_database_image_url_form");t.submit(function(t){t.preventDefault();i.empty().hide();var s=e.val();if(s!=""){a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"uploadFromUrl",imageUrl:s},function(e){a.loadingSpinner(false);if(e["success"]&&e["pictureId"]>0){$h24.image_database.params.uploadCallback.call(this,e["pictureId"],e);n()}else if(typeof e["error_markup"]!="undefined"&&e["error_markup"]!=""){i.html(e["error_markup"]).slideDown()}})}});a.find("a[name=add_image_url]").click(function(a){a.preventDefault();var e=$(this);e.closest("form#h24_image_database_image_url_form").submit()})};var l=function(){var a=$("#h24_image_database_search");var e=a.find("input[name=search]");var i=a.find(".h24_image_database_error_message");var t=a.find(".h24_image_database_search_result");i.empty().hide();a.find("form#h24_image_database_search_form").submit(function(a){a.preventDefault();var i=$(this);m(e.val(),1)});a.find("a[name=search_flickr]").click(function(a){a.preventDefault();var e=$(this);e.closest("form#h24_image_database_search_form").submit()});t.find(".h24_image_database_search_result_image > img").unbind("click").live("click",function(){var a=$(this);var e=parseInt(a.attr("photoid"),10);if(e>0){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"selectImageFlickr",photoId:e},function(a){if(a["success"]&&a["pictureId"]>0){$h24.image_database.params.uploadCallback.call(this,a["pictureId"],a);n()}else if(typeof a["error_markup"]!="undefined"&&a["error_markup"]!=""){i.html(a["error_markup"]).slideDown()}})}});t.find("a[name=page]").live("click",function(a){a.preventDefault();var i=$(this);var t=i.attr("page");m(e.val(),t)})};var m=function(a,e){var i=$("#h24_image_database_search");var t=i.find(".h24_image_database_error_message");t.empty().hide();if(a!=""){if(typeof e=="undefined"){var e=1}$("#h24_image_database_search").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"searchFlickr",search:a,page:e},function(a){$("#h24_image_database_search").loadingSpinner(false);var e=i.find(".h24_image_database_search_result");if(a["success"]){e.html(a["markup"]).show();var s=i.find("form#h24_image_database_search_form");var o=e.find("div.h24_image_database_search_result_images");if(a["total"]>0){o.show();e.find("div.h24_image_database_search_result_image").loadingSpinner(true);e.find("img").hoverPreview().load(function(){$(this).closest("div.h24_image_database_search_result_image").loadingSpinner(false)});if(s.hasClass("h24_image_database_first_search")){s.removeClass("h24_image_database_first_search")}}else{o.empty().hide()}}else if(typeof a["error_markup"]!="undefined"&&a["error_markup"]!=""){t.html(a["error_markup"]).slideDown();e.hide()}})}};var _=function(a,t,s,o){var r=$("#h24_image_database_my_images");var n=r.find(".h24_image_database_search_result");var a=typeof a!="undefined"?a:0;var t=typeof t!="undefined"?t:1;var s=typeof s!="undefined"&&s?true:false;var o=typeof o!="undefined"&&o?true:false;if(typeof e[a]!="undefined"&&typeof e[a][t]!="undefined"&&!s){n.html(e[a][t]).show();n.find("div.h24_image_database_search_result_images").show();if(!o){f(a,parseInt(t,10)+1)}}else if(typeof e[a]!="undefined"&&typeof e[a]["ajax"][t]!="undefined"&&e[a]["ajax"][t]&&!s){i.ci=a;i.page=t;$("#h24_image_database_my_images").loadingSpinner(true)}else{if(typeof e[a]=="undefined"){e[a]={ajax:{}}}e[a]["ajax"][t]=true;$("#h24_image_database_my_images").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"myImages",ci:a,page:t},function(i){e[a]["ajax"][t]=false;$("#h24_image_database_my_images").loadingSpinner(false);if(i["success"]){n.html(i["markup"]).show();var s=n.find("div.h24_image_database_search_result_images");e[a][t]=i["markup"];e[a]["total"]=i["total"];e[a]["pages"]=i["pages"];if(i["total"]>0){s.show();if(!o){f(a,parseInt(t,10)+1)}}else{s.empty().hide()}}})}};var f=function(a,t){var a=typeof a!="undefined"?a:0;var t=typeof t!="undefined"?t:1;if(typeof e[a]!="undefined"&&typeof e[a][t]!="undefined"){return}if(typeof e[a]!="undefined"&&t>e[a]["pages"]){return}if(typeof e[a]=="undefined"){e[a]={ajax:{}}}e[a]["ajax"][t]=true;$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"myImages",ci:a,page:t},function(s){$("#h24_image_database_my_images").loadingSpinner(false);e[a]["ajax"][t]=false;if(s["success"]){e[a][t]=s["markup"];e[a]["total"]=s["total"];e[a]["pages"]=s["pages"];if(typeof i.ci!="undefined"&&typeof i.page!="undefined"&&i.ci==a&&i.page==t){_(a,t);i.ci="";i.page=""}}})};var c=function(){var a=$("#h24_image_database_my_images");var e=a.find("select[name=pageList]");var i=a.find(".h24_image_database_search_result");i.find(".h24_image_database_search_result_image > img").unbind("click").live("click",function(){var a=$(this);var e=parseInt(a.attr("pictureid"),10);if(e>0){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"ImageDatabase",modelaction:"selectImageMyImages",pictureid:e},function(a){if(a["success"]&&a["pictureId"]>0){$h24.image_database.params.uploadCallback.call(this,a["pictureId"],a);n()}})}});e.change(function(){var a=$(this);var e=a.val();_(e,1)});i.find("a[name=page]").live("click",function(a){a.preventDefault();var i=$(this);var t=i.attr("page");var s=e.val();_(s,t)});a.find("a[name=refreshMyImages]").click(function(a){a.preventDefault();_(e.val(),1,true)});_(e.val(),1,false,true)};return{params:a,open:o,getImageInfo:s,closeDialog:n,searchFlickr:m,myImages:_,preload:e}}();
h24core.prototype.calendar_manager=function(){var e;var a;var n=function(e,n){a=typeof n=="function"?n:null;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"getDialog"},function(e){if(typeof e["markup"]!="undefined"){$h24.dialog.create("h24_calendar_manager_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Calendar-Manager","Calendar Manager"),width:700,closeCallback:function(){r()}});var a=$("#h24_calendar_manager_dialog");a.find("a.h24_javascript_link").die("click").live("click",function(e){e.preventDefault();var a=$(this);switch($(this).attr("name")){case"addEvent":i("add");break;case"updateEvent":i("update");break;case"cancelEvent":_();break;case"editEvent":var n=a.closest("td").find("input[name=eventId]").val();if(n>0){c(n)}break;case"removeEvent":var n=a.closest("td").find("input[name=eventId]").val();if(n>0){h(n)}break;case"copyEvent":var n=a.closest("td").find("input[name=eventId]").val();if(n>0){u(n)}break;case"addSource":C();break;case"changeSource":I();break;case"deleteSource":P();break;case"deleteAllSourceEvents":D();break;default:break}});if(typeof n=="undefined"){var n=0}var o=$("#h24_calendar_manager_dialog_tabs").tabs({active:n,activate:function(e,a){if(a.newTab.index()==1){var n=$("#h24_calendar_manager_event_list");if($h24.calendar_manager.eventListDatatable.length>0&&n.data("datatableResized")==0){$h24.calendar_manager.eventListDatatable.fnAdjustColumnSizing(false);n.data("datatableResized",1)}}}});a.find("select[name=edit_sources]").die("change").live("change",function(e){var n=$(this);var r=a.find("form#h24_calendar_manager_source_form");var t=n.val();r.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"getSourceForm",source_id:t},function(e){r.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_source_form").replaceWith(e.sourceForm)}})});t();l()}})};var r=function(){$h24.dialogs.h24_calendar_manager_dialog.close();if(typeof a=="function"){a.call(this)}reloadColumns()};var t=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_event_form");var n=[$h24.phrase.GUIPhrase("Date-And-Time","Sunday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Monday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Tuesday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Wednesday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Thursday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Friday").substr(0,2),$h24.phrase.GUIPhrase("Date-And-Time","Saturday").substr(0,2)];var r=[$h24.phrase.GUIPhrase("Date-And-Time","January").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","February").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","March").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","April").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","May").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","June").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","July").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","August").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","September").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","October").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","November").substr(0,3),$h24.phrase.GUIPhrase("Date-And-Time","December").substr(0,3)];var t=[$h24.phrase.GUIPhrase("Date-And-Time","January"),$h24.phrase.GUIPhrase("Date-And-Time","February"),$h24.phrase.GUIPhrase("Date-And-Time","March"),$h24.phrase.GUIPhrase("Date-And-Time","April"),$h24.phrase.GUIPhrase("Date-And-Time","May"),$h24.phrase.GUIPhrase("Date-And-Time","June"),$h24.phrase.GUIPhrase("Date-And-Time","July"),$h24.phrase.GUIPhrase("Date-And-Time","August"),$h24.phrase.GUIPhrase("Date-And-Time","September"),$h24.phrase.GUIPhrase("Date-And-Time","October"),$h24.phrase.GUIPhrase("Date-And-Time","November"),$h24.phrase.GUIPhrase("Date-And-Time","December")];a.find("input[name=start_date]").datepicker({firstDay:1,dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"+5y",onSelect:function(e){var e=new Date(e);a.find("input[name=end_date]").datepicker("option","minDate",e)},dayNamesMin:n,monthNamesShort:r,monthNames:t}).masked_input("9999-99-99");a.find("input[name=end_date]").datepicker({firstDay:1,dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"+5y",minDate:a.find("input[name=start_date]").val(),dayNamesMin:n,monthNamesShort:r,monthNames:t}).masked_input("9999-99-99");a.find("#event_start_time").timePicker({step:15,onChange:function(e){var a=e.oldTime;var n=e.newTime;var r=n-a}});a.find("#event_end_time").timePicker({step:15});a.find("input[name=full_day]").change(function(){var e=$(this);var n=a.find("input[name=start_time], input[name=end_time]");if(e.is(":checked")){n.hide()}else{n.show()}});a.find("a.h24_javascript_link").click(function(e){e.preventDefault();var n=$(this);var r=n.attr("name");switch(r){case"addImage":var t=a.find("input[name=eventId]").val();b(t);break;case"removeImage":var i=a.find("div.h24_calendar_manager_event_form_image");var o=i.find("img");var l=i.find("input[name=pictureid]");var d=l.val();if(d>0){i.slideUp("fast",function(){var e=i.find("img");var a=i.find("input[name=pictureid]");e.attr("src","");a.val("")});$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"removeEventImage",pictureId:d},function(e){if(e.success){}})}break;case"softRemoveImage":n.attr("name","removeImage");var i=a.find("div.h24_calendar_manager_event_form_image");i.slideUp("fast",function(){var e=i.find("img");var a=i.find("input[name=pictureid]");e.attr("src","");a.val("")});break}});o();y()};var i=function(e){var a=$("#h24_calendar_manager_dialog");var n=a.find("form#h24_calendar_manager_event_form");n.find("label").removeClass("h24_calendar_manager_form_label_error");n.find("input, textarea, select").removeClass("h24_calendar_manager_form_border_error");var r={title:n.find("input[name=title]").val(),calendar_source_id:n.find("select[name=calendar_source_id]").val(),start_date:n.find("input[name=start_date]").val(),start_time:n.find("input[name=start_time]").val(),end_date:n.find("input[name=end_date]").val(),end_time:n.find("input[name=end_time]").val(),full_day:n.find("input[name=full_day]").is(":checked")?1:0,location:n.find("input[name=location]").val(),address:n.find("input[name=address]").val(),address_latitude:n.find("input[name=address_latitude]").val(),address_longitude:n.find("input[name=address_longitude]").val(),description:n.find("div[name=description]").html(),pictureid:n.find("input[name=pictureid]").val(),link:n.find("input[name=link]").val(),link_target:n.find("input[name=link_target]").val(),link_type:n.find("input[name=link_type]").val(),link_metadata:n.find("input[name=link_metadata]").val()};if(e=="update"){var i=n.find("input[name=eventId]").val()}else{var i=0}a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"addUpdateEvent",settings:r,type:e,eventId:i},function(e){a.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_event_form").replaceWith(e.eventForm);t(true);s();m(1)}else{if(typeof(e["error"]!="undefined")&&e["error"]["_error"]){n.find(".h24_store_form_error_message").show();for(var r in e["error"]){if(r!="_error"&&typeof e["error"][r]["error"]!="undefined"){var i=n.find("input[name="+r+"], textarea[name="+r+"], select[name="+r+"], div[name="+r+"]");var o=i.closest("li").find(">label");if(o.length>=1){o.addClass("h24_calendar_manager_form_label_error")}else{i.addClass("h24_calendar_manager_form_border_error")}}}}}})};var o=function(e){var a=$("#h24_calendar_manager_event_form_description");var n=$h24.publicdir+"js/tinymce/tiny_mce_gzip.php";var r={script_url:n,mode:"none",theme:"advanced",language:$h24.language,plugins:"inlinepopups,table,h24link,paste",relative_urls:false,convert_urls:false,document_base_url:$h24.slashwebroot,paste_preprocess:function(e,a){var n=a.content;var r=$("<span />").html(n);r.find("script").remove();r.find("[id]").removeAttr("id");a.content=r.html()},remove_script_host:false,strict_loading_mode:false,theme_advanced_buttons1:"fontsizeselect,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,|,backcolor,forecolor,|,sub,sup,|,undo,redo,|,anchor,code",theme_advanced_buttons2:"row_props, cell_props,|,row_before,row_after,delete_row,|,col_before,col_after,delete_col,|,split_cells,merge_cells,charmap,removeformat,table,pastetext",theme_advanced_buttons3:"",theme_advanced_font_sizes:"8 - ABC abc=8px,9 - ABC abc=9px,10 - ABC abc=10px,11 - ABC abc=11px,12 - ABC abc=12px,13 - ABC abc=13px,14 - ABC abc=14px,16 - ABC abc=16px,18 - ABC abc=18px,20 - ABC abc=20px,22 - ABC abc=22px,24 - ABC abc=24px,26 - ABC abc=26px,28 - ABC abc=28px,36 - ABC abc=36px,48 - ABC abc=48px,72 - ABC abc=72px",theme_advanced_toolbar_location:"top",height:250,theme_advanced_toolbar_align:"left",paste_text_sticky:true,setup:function(e){e.onInit.add(function(e){e.pasteAsPlainText=true;$("#h24_calendar_manager_event_form input[name=title]").focus()})}};$("#h24_editor_mceLink").click(function(e){e.preventDefault();a.tinymce().execCommand("mceh24link")});$("#h24_editor_unlink").click(function(e){e.preventDefault();a.tinymce().execCommand("mceh24unlink")});$("#h24_editor_table").click(function(e){e.preventDefault();a.tinymce().execCommand("mceInsertTable")});$("#h24_editor_remove_formatting").click(function(e){e.preventDefault();a.tinymce().execCommand("RemoveFormat")});$("#h24_editor_special_char").click(function(e){e.preventDefault();a.tinymce().execCommand("mceCharMap")});r.content_css="/"+$h24.webroot+"Page/Tinymce-CSS?bg=ffffff&fg=333333&type=store&v=1";a.tinymce(r)};var l=function(){d()};var d=function(){$h24.calendar_manager.eventListDatatable=$("#h24_calendar_manager_list_table").dataTable({bProcessing:false,bServerSide:true,sAjaxSource:$h24.slashwebroot+"Page/Communicator/homepageid/"+$h24.homepageid+"/model/CalendarManager/modelaction/eventListDatatable",fnServerData:function(e,a,n){$("#h24_calendar_manager_event_list").loadingSpinner(true);$.getJSON(e,a,function(e){$("#h24_calendar_manager_event_list").loadingSpinner(false);n(e)})},bJQueryUI:false,sScrollY:"200px",oLanguage:{sLengthMenu:$h24.phrase.GUIPhrase("Javascript-Datatables","Show _MENU_ items per page"),sZeroRecords:$h24.phrase.GUIPhrase("Javascript-Datatables","No events found"),sInfo:$h24.phrase.GUIPhrase("Javascript-Datatables","Showing _START_-_END_ of _TOTAL_"),sInfoEmpty:$h24.phrase.GUIPhrase("Javascript-Datatables","Showing 0"),sSearch:$h24.phrase.GUIPhrase("General","Search"),sInfoFiltered:$h24.phrase.GUIPhrase("Javascript-Datatables"," (filtered from _MAX_)"),sProcessing:$h24.phrase.GUIPhrase("Javascript-Datatables","Loading..."),oPaginate:{sFirst:$h24.phrase.GUIPhrase("General","First"),sPrevious:$h24.phrase.GUIPhrase("General","Previous"),sNext:$h24.phrase.GUIPhrase("General","Next"),sLast:$h24.phrase.GUIPhrase("General","Last")}},bSortClasses:false,aaSorting:[[0,"desc"]],aoColumns:[null,null,null,{bSortable:false}],sPaginationType:"full_numbers",iDisplayLength:25})};var s=function(){$h24.calendar_manager.eventListDatatable.fnClearTable()};var c=function(e){var a=$("#h24_calendar_manager_dialog");a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"getEditEventForm",eventId:e},function(e){a.loadingSpinner(false);if(e.success&&e.markup!=""){$("#h24_calendar_manager_event_form").replaceWith(e.markup);m(0);t()}})};var _=function(){var e=$("#h24_calendar_manager_dialog");e.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"getNewEventForm"},function(a){e.loadingSpinner(false);if(a.success&&a.markup!=""){$("#h24_calendar_manager_event_form").replaceWith(a.markup);m(0);t()}})};var m=function(e){if(e==0||e==1){$("#h24_calendar_manager_dialog_tabs").tabs("option","active",e);k()}};var h=function(e){var a=$("#h24_calendar_manager_dialog");a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"removeEvent",eventId:e},function(n){a.loadingSpinner(false);if(n.success){s();var r=a.find("#h24_calendar_manager_event_form");var i=r.find("input[name=eventId]").val();if(i==e){r.replaceWith(n.eventForm);m(0);t();m(1)}}})};var u=function(e){var a=$("#h24_calendar_manager_dialog");a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"copyEvent",eventId:e},function(e){a.loadingSpinner(false);if(e.success){s()}})};var f=function(e){if(typeof $h24.coreDialogs=="undefined"||typeof $h24.coreDialogs.h24_calendar_manager_event_dialog=="undefined"){$h24.coreDialog.create("h24_calendar_manager_event_dialog",'<div id="h24_calendar_manager_event_dialog_preload"></div>',{width:800,showTitle:false,onClose:function(){p()}})}var a=$("#h24_calendar_manager_event_dialog_preload");if(a.length==0){$("#h24_calendar_manager_event_dialog").loadingSpinner(true)}else{a.loadingSpinner(true)}$h24.post($h24.slashwebroot+"Page/Common-Communicator",{__skip_loading_overlay:true,model:"CalendarManager",modelaction:"getEventDialog",homepageid:$h24.homepageid,eventId:e},function(n){if(n.success&&n.markup!=""){var r=n.event;if(a.length==0){$("#h24_calendar_manager_event_dialog").replaceWith(n.markup)}else{a.replaceWith(n.markup)}var t=$("#h24_calendar_manager_event_dialog");if($h24.editmode&&r.address!=""&&r.address_latitude!=""&&r.address_longitude!=""){$mapContainer=$("#h24_calendar_manager_event_dialog .h24_calendar_manager_event_view_map");var i=new google.maps.LatLng(r.address_latitude,r.address_longitude);var o={center:i,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};var l=new google.maps.Map($mapContainer[0],o);var d=new google.maps.Marker;d.setMap(l);d.setPosition(i)}t.find("a.h24_javascript_link").click(function(e){e.preventDefault();var a=$(this);var n=a.attr("name");switch(n){case"viewEvent":var r=a.data("eventid");if(typeof r!="undefined"&&r>0){$h24.calendar_manager.viewEvent(r)}break}});var s="/calendar=1&id="+e;window.location.hash=s}else{$h24.coreDialogs.h24_calendar_manager_event_dialog.close()}})};var p=function(){var e;var a;var n=window.location;if("pushState"in history){history.pushState("",document.title,n.pathname+n.search)}else{e=$("html, body").scrollTop();n.hash="";$("html, body").scrollTop(e)}};var g=function(){var e=$("#h24_calendar_manager_event_generic_link");var a=e.find("input[name=link]").val();var n=e.find("input[name=link_type]").val();var r=e.find("input[name=link_target]").val();var t=e.find("input[name=link_metadata]").val();if(a!=""){var i={link:a,link_type:n,link_target:r,link_metadata:t}}else{var i={}}var o=function(e,a){v(e,a)};$h24.link.h24coreDialog("calendar",0,"",i,o)};var v=function(e,a){var n=$("#h24_calendar_manager_event_generic_link");if(e=="save"){var r={model:"DialogManager",modelaction:"get_link_description",link:a.link,link_type:a.link_type,link_target:a.link_target,link_metadata:a.link_metadata,homepageid:$h24.homepageid};if(r.link_type!=""&&r.link!=""){n.find("button.modify").show();n.find("button.create").hide();n.find("input[name=link]").val(a.link);n.find("input[name=link_type]").val(a.link_type);n.find("input[name=link_target]").val(a.link_target);n.find("input[name=link_metadata]").val(a.link_metadata);$("#h24_calendar_manager_event_generic_link_description").show();$h24.post($h24.slashwebroot+"Page/Inline-load/",r,function(e){if(e!="")$("#h24_calendar_manager_event_generic_link_description").html(e)})}}else if(e=="remove"){n.find("button.modify").hide();n.find("button.create").show();n.find("input[name=link]").val("");n.find("input[name=link_type]").val("");n.find("input[name=link_target]").val("");n.find("input[name=link_metadata]").val("");$("#h24_calendar_manager_event_generic_link_description").hide()}else if(e=="cancel"){}$h24.dialogs.h24_generic_linking_dialog.close()};var b=function(e){var a=$("#h24_calendar_manager_dialog");var n=a.find("form#h24_calendar_manager_event_form");$h24.image_database.open({uploadCallback:function(e){var a=n.find("div.h24_calendar_manager_event_form_image");a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Edit-Communicator",{__skip_loading_overlay:true,model:"CalendarManager",modelaction:"getEventImageThumb",homepageid:$h24.homepageid,pictureId:e},function(r){a.loadingSpinner(false);if(r.success&&r.imageUrl!=""){n.find("input[name=pictureid]").val(e);var t=a.show().find("img");t.attr("src",r.imageUrl);n.find("a[name=softRemoveImage]").attr("name","removeImage")}})}})};var k=function(){var e=$("#h24_calendar_manager_dialog");var a=e.offset().top;$("html, body").scrollTop(a-60)};var y=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_event_form");var n=new google.maps.Geocoder;a.find("input[name=address]").autocomplete({source:function(e,a){n.geocode({address:e.term},function(e,n){a($.map(e,function(e){return{value:e.formatted_address,latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}}))})},select:function(e,n){a.find("input[name=address_latitude]").val(n.item.latitude);a.find("input[name=address_longitude]").val(n.item.longitude)},messages:{noResults:"",results:function(){}}})};var C=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_source_form");var n=e.find("form#h24_calendar_manager_event_form");var r=a.find("input[name=new_source_name]");a.find("label").removeClass("h24_calendar_manager_form_label_error");a.find("input, textarea, select").removeClass("h24_calendar_manager_form_border_error");var t={name:r.val()};a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"addSource",settings:t},function(e){a.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_source_form").replaceWith(e.sourceForm);var i=n.find("select[name=calendar_source_id]").val();var o=n.find("select[name=calendar_source_id] option:first").html();n.find("select[name=calendar_source_id]").html($("#h24_calendar_manager_source_form select[name=edit_sources]").html());n.find("select[name=calendar_source_id]").val(i);n.find("select[name=calendar_source_id] option:first").html(o);$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Successfully created calendar [b]%name%[/b]",{name:t.name})+"!","accept",{container:"h24_calendar_manager_notification_container"})}else{if(typeof(e["emptyName"]!="undefined")&&e["emptyName"]){$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Validation failed when adding calendar")+"!","alert",{container:"h24_calendar_manager_notification_container"});r.closest("label").addClass("h24_calendar_manager_form_label_error");r.addClass("h24_calendar_manager_form_border_error")}}})};var I=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_source_form");var n=e.find("form#h24_calendar_manager_event_form");var r=a.find("input[name=change_source_name]");a.find("label").removeClass("h24_calendar_manager_form_label_error");a.find("input, textarea, select").removeClass("h24_calendar_manager_form_border_error");var t=a.find("select[name=edit_sources]").val();var i=r.val();a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"changeSource",name:i,source_id:t},function(e){a.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_source_form").replaceWith(e.sourceForm);var t=n.find("select[name=calendar_source_id]").val();var o=n.find("select[name=calendar_source_id] option:first").html();n.find("select[name=calendar_source_id]").html($("#h24_calendar_manager_source_form select[name=edit_sources]").html());n.find("select[name=calendar_source_id]").val(t);n.find("select[name=calendar_source_id] option:first").html(o);s();$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Successfully changed calendar name to [b]%name%[/b]",{name:i})+"!","accept",{container:"h24_calendar_manager_notification_container"})}else{if(typeof(e["emptyName"]!="undefined")&&e["emptyName"]){$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Validation failed when changing calendar name")+"!","alert",{container:"h24_calendar_manager_notification_container"});r.closest("label").addClass("h24_calendar_manager_form_label_error");r.addClass("h24_calendar_manager_form_border_error")}}})};var P=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_source_form");var n=e.find("form#h24_calendar_manager_event_form");var r=a.find("select[name=edit_sources]").val();var t=a.find("select[name=edit_sources] option:selected").text();a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"deleteSource",source_id:r},function(e){a.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_source_form").replaceWith(e.sourceForm);var r=n.find("select[name=calendar_source_id]").val();var i=n.find("select[name=calendar_source_id] option:first").html();n.find("select[name=calendar_source_id]").html($("#h24_calendar_manager_source_form select[name=edit_sources]").html());n.find("select[name=calendar_source_id]").val(r);n.find("select[name=calendar_source_id] option:first").html(i);$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Successfully deleted calendar [b]%name%[/b]",{name:t})+"!","accept",{container:"h24_calendar_manager_notification_container"})}else{$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Failed to delete calendar [b]%name%[/b]",{name:t})+"!","alert",{container:"h24_calendar_manager_notification_container"})}})};var D=function(){var e=$("#h24_calendar_manager_dialog");var a=e.find("form#h24_calendar_manager_source_form");var n=a.find("select[name=edit_sources]").val();var r=a.find("select[name=edit_sources] option:selected").text();if(!confirm($h24.phrase.GUIPhrase("Calendar-Manager","Delete all events for calendar %name%",{name:r})+"?")){return}a.loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator/",{__skip_loading_overlay:true,homepageid:$h24.homepageid,model:"CalendarManager",modelaction:"deleteAllSourceEvents",source_id:n},function(e){a.loadingSpinner(false);if(e.success){$("#h24_calendar_manager_source_form").replaceWith(e.sourceForm);s();$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Successfully deleted calendar events")+"!","accept",{container:"h24_calendar_manager_notification_container"})}else{$h24.utils.notification($h24.phrase.GUIPhrase("Calendar-Manager","Failed to delete calendar events")+"!","alert",{container:"h24_calendar_manager_notification_container"})}})};return{dialogCloseCallback:a,open:n,close:r,initEventForm:t,addUpdateEvent:i,initTinyMCE:o,initEventList:l,initEventListDatatable:d,editEventForm:c,eventListDatatable:e,reloadEventListDatatable:s,newEventForm:_,selectCalendarManagerTab:m,viewEvent:f,autoView:false,removeHash:p,eventLinkDialog:g,linkingCallback:v,eventImageDatabase:b,scrollTopDialog:k,initEventAddressAutoComplete:y,copyEvent:u,addSource:C,changeSource:I,deleteSource:P,deleteAllSourceEvents:D}}();
h24core.prototype.third_party=function(){var t=false;var e=false;var i=false;var n=function(t,e,i){if($h24.third_party.addThisInitiationRunning||$h24.third_party.addThisInitiated){return}$h24.third_party.addThisInitiationRunning=true;var n=300;var r="//s7.addthis.com/js/"+n+"/addthis_widget.js";if(typeof t!="undefined"&&t!=""){r=r+"?pubid="+t}else if(typeof e!="undefined"&&e!=""){r=r+"?username="+e}$.getScript(r,function(t,e,n){window.addthis.init();$h24.third_party.addThisInitiated=true;$h24.third_party.addThisInitiationRunning=false;if(typeof i=="function"){i.call(this)}})};var r=function(t){window.localStorage.removeItem("ajs_user_traits");if($h24.third_party.segmentInitiated==true){return}$h24.third_party.segmentInitiated=true;var e=window.analytics=window.analytics||[];if(e.initialize)return;if(e.invoked){if(window.console&&console.error){console.error("Segment snippet included twice.")}return}e.invoked=true;e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];e.factory=function(t){return function(){var i=Array.prototype.slice.call(arguments);i.unshift(t);e.push(i);return e}};for(var i=0;i<e.methods.length;i++){var n=e.methods[i];e[n]=e.factory(n)}e.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)};e.SNIPPET_VERSION="4.0.0";e.load(t);e.page()};var a=function(){UserVoice=window.UserVoice||[];!function(){var t=document.createElement("script");t.type="text/javascript";t.async=true;t.src="//widget.uservoice.com/L5snMbneP5zeCnkAqVWGw.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();UserVoice.push(["set",{accent_color:"#6aba2e",locale:"sv-SE",contact_enabled:false,screenshot_enabled:false,smartvote_enabled:false,post_idea_enabled:false}]);UserVoice.push(["addTrigger",{mode:"satisfaction",trigger_color:"white",trigger_background_color:"#5FA72F",trigger_position:"bottom-right"}])};return{addThisInitiated:t,addThisInitiationRunning:e,segmentInitiated:i,initAddThis:n,initSegment:r,initUservoiceNetPromotionScore:a}}();
h24core.prototype.order_manager=function(){var e=function(e){var a=$("#h24_og_klarna_multi_address_picker select[name=pnoIndex]").data("addresses"),o=$("#h24_og_customer_details_form"),i=$("#firstname_elem"),n=$("#lastname_elem"),r=$("#organization_elem"),t=$("#careof_elem");$(".h24_og_klarna_hidden").show();if(a[e].isOrganization){i.removeAttr("disabled");n.removeAttr("disabled");r.attr("disabled","disabled")}else{i.attr("disabled","disabled");n.attr("disabled","disabled");r.removeAttr("disabled")}i.val(a[e].firstname);n.val(a[e].lastname);r.val(a[e].organization);$("#address1_elem").val(a[e].address1);$("#address2_elem").val(a[e].address2);$("#city_elem").val(a[e].city);$("#zipcode_elem").val(a[e].zipcode);$("#h24_og_customer_details_fields .h24_og_cd_error_field").removeClass("h24_og_cd_error_field")};var a=function(e){var a=$("#h24_og_customer_details_form");var o=$("#h24_og_klarna_multi_address_picker");var i=o.find("select[name=pnoIndex]");$(".h24_og_klarna_hidden").hide();a.find(".h24_og_customer_details_error_container").hide();o.hide();$("#h24_og_customer_details_error_message").hide();$("#h24_og_pno_field_error_message").hide();$h24.post($h24.slashwebroot+"H24-Order-Guide/Get-Klarna-Addresses",{pno:e},function(e){if(e.successful){i.data("addresses",e.addresses);$h24.order_manager.pickKlarnaPnoIndex(0);if(e.addresses.length>1){i.html("");for(var a=0;a<e.addresses.length;a++){var n=$("<option/>",{value:a});if(e.addresses[a].isOrganization){n.text([e.addresses[a].organization,e.addresses[a].address1,e.addresses[a].zipcode,e.addresses[a].city].join(", "))}else{n.text([e.addresses[a].firstname,e.addresses[a].lastname,e.addresses[a].address1,e.addresses[a].zipcode,e.addresses[a].city].join(", "))}if(a==0){n.attr("selected","selected")}n.appendTo(i)}o.show()}}else{if(typeof e.errorMessage!="undefined"){$("#h24_og_pno_field_error_message").html(e.errorMessage).show()}}})};var o=function(e,a){$h24.post($h24.slashwebroot+"H24-Order-Guide/Add-To-Cart",{item:e},function(e){$h24.order_manager.reloadSnippet(e);if(typeof a=="function"){a.call(this,e)}})};var i=function(e,a){$h24.post($h24.slashwebroot+"H24-Order-Guide/Remove-From-Cart",{item:e},function(e){$h24.order_manager.reloadSnippet(e);if(typeof a=="function"){a.call(this,e)}})};var n=function(e){switch(e){case"start":$("#h24_og_vat_presentation_container").click(function(e){var a,o,i,n;a=$(this);o=$(e.target);if(o.hasClass("h24_og_vat_excl")){$h24.order_manager.toggleVAT(0);$("#h24_og_vat_presentation_incl").hide();$("#h24_og_vat_presentation_excl").show();return false}else if(o.hasClass("h24_og_vat_incl")){$h24.order_manager.toggleVAT(1);$("#h24_og_vat_presentation_incl").show();$("#h24_og_vat_presentation_excl").hide();return false}});$("#h24_og_subscription_grid_container").click(function(e){var a=$(this),o=$(e.target),i,n,r,s,_;if(o.is("input[type=radio]")){if(o.hasClass("trigger_cart_subscription")){n=o.data();if(n.servicename=="NoSubscription"){$h24.post($h24.slashwebroot+"H24-Order-Guide/Remove-Subscription-From-Cart",function(e){$h24.order_manager.reloadSnippet(e)})}else{i={name:n.servicename,metadata:{period:n.period}};$h24.order_manager.addToCart(i)}}else if(o.hasClass("trigger_cart_subscription_select")){s=$("#change_subscription_select option:selected");n=s.data();i={name:n.servicename,metadata:{period:n.period}};$h24.order_manager.addToCart(i)}}else if(o.hasClass("h24_og_monthly_switch")){$('.h24_og_package_pillar[data-period="yearly"]').hide();$('.h24_og_package_pillar[data-period="monthly"]').show();$(".h24_og_yearly_switch").removeClass("active");$(".h24_og_monthly_switch").addClass("active");_=$(".h24_og_active_package_pillar");if(_.length===1){n=_.data();t($('.h24_og_package_pillar[data-servicename="'+n.servicename+'"][data-period="monthly"]'),false)}}else if(o.hasClass("h24_og_yearly_switch")){$('.h24_og_package_pillar[data-period="yearly"]').show();$('.h24_og_package_pillar[data-period="monthly"]').hide();$(".h24_og_monthly_switch").removeClass("active");$(".h24_og_yearly_switch").addClass("active");_=$(".h24_og_active_package_pillar");if(_.length===1){n=_.data();t($('.h24_og_package_pillar[data-servicename="'+n.servicename+'"][data-period="yearly"]'),false)}}else if(o.hasClass("h24_og_package_pillar")||o.closest(".h24_og_package_pillar").length){t(o,true)}}).change(function(e){var a=$(this),o=$(e.target),i,n,r;if(o.is("select")){r=o.find("option:selected");n=r.data();i={name:n.servicename,metadata:{period:n.period}};$h24.order_manager.addToCart(i)}});$("#h24_og_domains_container").click(function(e){var a=$(this),o=$(e.target),i=o.parent(),n,r,t=o;if(i.is("a")){t=i}if(t.hasClass("h24_og_add_domain")){$h24.post($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog",{__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){$h24.dialog.create("h24_og_domain_dialog",e,{closeCallback:function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Start-Snippets",function(e){$h24.order_manager.reloadSnippet(e)});this.close()},width:700,sidePadding:10});$h24.order_manager.initDomainDialog()});return false}else if(t.hasClass("h24_og_set_main_domain")){$h24.post($h24.slashwebroot+"H24-Order-Guide/Set-Main-Domain-Dialog",{__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){$h24.dialog.create("h24_og_set_main_domain_dialog",e,{closeCallback:function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Start-Snippets",function(e){$h24.order_manager.reloadSnippet(e)});this.close()},width:700,sidePadding:10});$h24.order_manager.initSetMainDomainDialog()});return false}else if(o.is("input[type=checkbox]")&&!o.prop("disabled")){n=o.data();if(o[0].checked){$h24.order_manager.addToCart({name:n.servicename,metadata:{domain:n.domain,mainDomain:n.maindomain}})}else{$h24.order_manager.removeFromCart({name:n.servicename,metadata:{domain:n.domain}})}}else if(t.hasClass("h24_og_remove_domain")){var n=i.data();$h24.order_manager.removeFromCart({name:n.servicename,metadata:{domain:n.domain}});return false}else if(t.hasClass("h24_og_pending_deletion")){$h24.post($h24.slashwebroot+"H24-Order-Guide/Domain-Pending-Deletion-Dialog",{__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){$h24.dialog.create("h24_og_domain_pending_deletion_dialog",e,{closeCallback:function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Start-Snippets",function(e){$h24.order_manager.reloadSnippet(e)});this.close()},width:700,sidePadding:10})});return false}});$("#h24_og_email_container").click(function(e){var a=$(this),o=$(e.target),i=o.parent(),n,r,t=o;if(i.is("a")){t=i}if(t.hasClass("h24_og_remove_email_google_apps")){var n=t.data();$h24.order_manager.removeFromCart({name:n.servicename,metadata:{provider:"google_apps",domain:n.domain}});return false}else if(t.hasClass("h24_og_choose_email_google_apps")){var n=t.data();$h24.order_manager.emailDialog(n.domain);return false}else if(t.hasClass("h24_og_email_about_google_apps_dialog")){$h24.post($h24.slashwebroot+"H24-Order-Guide/Email-About-Google-Apps-Dialog",{__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){$h24.dialog.create("h24_og_email_about_google_apps_dialog",e,{width:700,sidePadding:10})});return false}});$("#h24_og_payment_type_container").click(function(e){var a=$(this),o=$(e.target),i=o.parent();$h24.order_manager.checkIfInvalidCartAndDisplayMessages();if(o.hasClass("h24_og_paymentoption")){$h24.order_manager.setPaymentType(o.val())}});$("html").off("click","#h24_og_start_continue").on("click","#h24_og_start_continue",function(e){var a=$("#h24_og_paymentoptions input:checked"),o,i=$(this);$("#h24_og_nothing_to_order_own_domain_message").hide();$("#h24_og_nothing_to_order_can_not_renew_subscription_message").hide();$("#h24_og_nothing_to_order_no_renew_message").hide();if(a.length==0){$h24.order_manager.checkIfInvalidCartAndDisplayMessages();return false}o=a.data("url");$h24.order_manager.ajaxLoaderStart();$(".buttons a").aDisable();window.location=o;return false});$("html").off("submit","#h24_og_start_login_form").on("submit","#h24_og_start_login_form",function(e){e.preventDefault();var a=$(this),o=$("#h24_og_start_login_container"),i=$("#h24_og_start_login_wrong_password"),n=o.find("input[name=accountUser]").val(),r=o.find("input[name=accountPwd]").val();i.hide();if(r==""){i.show();return}o.loadingSpinner(true);$h24.post($h24.slashwebroot+"Account/Perform-Ajax-Login",{accountUser:n,accountPwd:r},function(e){if(e.successful){$h24.order_manager.reloadSnippet("proceed")}else{o.loadingSpinner(false);i.show()}})});$h24.order_manager.initScrollNotification(80);break;case"customer-details":$("#h24_og_country_picker").change(function(){var e=$(this).val().toUpperCase();isCompany=parseInt($('#h24_og_customer_details_form input[name="isCompany"]:checked').val(),10);$("[data-show-on-countries]").each(function(){var a=$(this),o=a.data("showOnCountries"),i,n,r;if(o.indexOf(e)>-1){i=true}else{i=false}if(typeof a.data("hideOnIsCompany")!="undefined"){n=parseInt(a.data("hideOnIsCompany"),10);if(n==isCompany){i=false}}if(i){a.show()}else{a.hide()}$("#vat_number_country").text(e)});euCountriesExceptSe=$("#h24_og_customer_details_summary_table").data("euCountriesExceptSe");if(isCompany==1){if(euCountriesExceptSe.indexOf(e)!=-1&&$('#h24_og_customer_details_form input[name="vatNumber"]').val()!=""||euCountriesExceptSe.indexOf(e)==-1&&e.toUpperCase()!="SE"){$(".h24_og_customer_details_summary_table_no_tax_row").show();$(".h24_og_customer_details_sumary_table_normal_row").hide()}else{$(".h24_og_customer_details_summary_table_no_tax_row").hide();$(".h24_og_customer_details_sumary_table_normal_row").show()}}else{$(".h24_og_customer_details_summary_table_no_tax_row").hide();$(".h24_og_customer_details_sumary_table_normal_row").show()}}).trigger("change");$('#h24_og_customer_details_form input[name="isCompany"]').change(function(){$("#h24_og_country_picker").trigger("change")});$('#h24_og_customer_details_form input[name="vatNumber"]').on("change keyup",function(){$("#h24_og_country_picker").trigger("change")});var a=$("#cardholder_name_elem");if(a.length){var o=$("#firstname_elem"),i=$("#lastname_elem");o.blur(function(){var e=jQuery.trim(a.val());if(e.length==0){a.val(o.val())}else if(e==i.val()){a.val(o.val()+" "+i.val())}});i.blur(function(){var e=jQuery.trim(a.val());if(e.length==0){a.val(i.val())}else if(e==o.val()){a.val(o.val()+" "+i.val())}})}$("#h24_og_customer_details_next_button").click(function(){var e=$(".h24_og_required_checkbox").not(":checked"),a=$("#h24_og_customer_details_error_message");e.each(function(){a.text($(this).data("errormessage"))});if(e.length>0){a.show();return false}$(".buttons a").aDisable();$h24.order_manager.ajaxLoaderStart();$("#h24_og_customer_details_form").submit();return false});$("#pno_elem.h24_og_klarna_pno").keyup(function(e){if(e.keyCode==13){$h24.order_manager.getKlarnaAddresses($(this).val())}});$("#h24_og_get_addresses_button").click(function(){var e=$("#pno_elem").val();$h24.order_manager.getKlarnaAddresses(e);return false});$("#h24_og_klarna_multi_address_picker select[name=pnoIndex]").change(function(){var e=$(this);$h24.order_manager.pickKlarnaPnoIndex(e.val())});$("#h24_og_klarna_expand_billing_details").click(function(){$("#h24_og_klarna_has_billing_address").prop("checked",true);$("#h24_og_klarna_billing_details").slideDown();$(this).hide();return false});$("#h24_og_klarna_has_billing_address").click(function(){if(!$(this).prop("checked")){$("#h24_og_klarna_billing_details").slideUp();$("#h24_og_klarna_expand_billing_details").show()}});$("#h24_og_toggle_terms_and_conditions").click(function(){$("#h24_og_terms_and_conditions_container").toggle();return false});$("#h24_og_klarna_invoice_send_type").change(function(){var e=$(this);if(e.is(":checked")){$("#h24_og_customer_details_fields input[name=invoiceSendType]").val(e.data("checked"))}else{$("#h24_og_customer_details_fields input[name=invoiceSendType]").val(e.data("unchecked"))}});var n=document.location.href.split("?");if(n.length==2){var r=n[1].split("&");for(var s=0;s<r.length;s++){var _=r[s].split("=");if(_.length==2){var d=_[0];var l=_[1];if(d=="errorField"){var h=$('[name="'+l+'"]');if(h.length){var m=parseInt(h.offset().top,10);$(window).scrollTop(m)}}}}}$h24.order_manager.initScrollNotification(50);break;case"order-completed":var c=$("#real_life_referer_freetext"),g=$("#real_life_referer_google"),f=$("#h24_og_order_completed_referer_column_container"),u=$("#h24_ogc_email_domains"),p=$("#h24_ogc_domain_config_links");u.click(function(e){var a=$(this),o=$(e.target),i=o.closest("tr"),n,r,t,s;if(o.is("input[data-name=domain_setting]")){n=o.val();r=o.data("domain");p.find(".h24_ogc_config_link").each(function(e){var a=$(this),o=a.data("domain");if(o==r){t=a}});if(n=="cname"){t.attr("href",t.data("cnameurl"));s=0;$('#h24_ogc_email_domains input[data-name="domain_setting"]:checked').each(function(){if($(this).val()=="dns"){s++}});s+=u.find('input[data-dns="1"]').length;if(s>0){$("#h24_ogc_email_configuration_message").show()}else{$("#h24_ogc_email_configuration_message").hide()}}else{t.attr("href",t.data("dnsurl"));s=0;$('#h24_ogc_email_domains input[data-name="domain_setting"]:checked').each(function(){if($(this).val()=="dns"){s++}});s+=$("#h24_ogc_already_working li").length;if(s>0){$("#h24_ogc_email_configuration_message").show()}else{$("#h24_ogc_email_configuration_message").hide()}}$.post($h24.slashwebroot+"H24-Order-Guide/Order-Completed-Set-Domain-Setting",{domain:r,setting:n})}});f.click(function(e){var a=$(this),o=$(e.target),i,n;if(!o.is("input")){return true}n=o.val();switch(n){case"0":if(c.is(":hidden")){c.show("slow")}if(!g.is(":hidden")){g.hide("slow");g.val("")}break;case"Googlesökning":if(g.is(":hidden")){g.show("slow")}if(!c.is(":hidden")){c.hide("slow");c.val("")}break;default:if(!c.is(":hidden")){c.hide("slow");c.val("")}if(!g.is(":hidden")){g.hide("slow");g.val("")}$h24.post($h24.slashwebroot+"H24-Order-Guide/Save-Referer",{referer:n})}});c.click(function(){var e=$(this);if(e.val()!=""){$h24.post($h24.slashwebroot+"H24-Order-Guide/Save-Referer",{referer:"Annat: "+e.val()})}}).inputTimeout({delay:500,onTimeout:function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Save-Referer",{referer:"Annat: "+$(this).val()})}});g.click(function(){var e=$(this);if(e.val()!=""){$h24.post($h24.slashwebroot+"H24-Order-Guide/Save-Referer",{referer:"Googlesökning: "+e.val()})}}).inputTimeout({delay:500,onTimeout:function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Save-Referer",{referer:"Googlesökning: "+$(this).val()})}});break}};var r=function(){var e=$("#h24_og_paymentoptions input:checked"),a;$("#h24_og_nothing_to_order_own_domain_message").hide();$("#h24_og_nothing_to_order_can_not_renew_subscription_message").hide();$("#h24_og_nothing_to_order_no_renew_message").hide();if(e.length==0){a=true;$(".h24_og_paymentoption").each(function(){if(!$(this).prop("disabled")){a=false}});if(a){if($('#h24_og_domains_container [data-servicename="OwnDomain"].h24_og_remove_domain').length){$("#h24_og_nothing_to_order_own_domain_message").show()}else{switch($("input[name=subscriptionAction]:checked").attr("id")){case"NoSubscription":$("#h24_og_nothing_to_order_can_not_renew_subscription_message").show();break;case"NoRenew":$("#h24_og_nothing_to_order_no_renew_message").show();break}}}}};var t=function(e,a){e=e.hasClass("h24_og_package_pillar")?e:e.closest(".h24_og_package_pillar");elemData=e.data();if(!elemData.servicename||!elemData.period){return}if(elemData.servicename==="NoSubscription"){$h24.post($h24.slashwebroot+"H24-Order-Guide/Remove-Subscription-From-Cart",function(e){$h24.order_manager.reloadSnippet(e)});return}var o={name:elemData.servicename,metadata:{period:elemData.period}};$h24.order_manager.addToCart(o);if(a){$("html, body").animate({scrollTop:"640px"})}};var s=function(){$("#h24_og_set_main_domain_dialog_container").click(function(e){var a=$(this),o=$(e.target),i=o.parent(),n,r=o;if(i.is("a")){r=i}if(r.hasClass("h24_og_goto_set_main_domain")){n=a.find("select[name=domain]").val();$h24.post($h24.slashwebroot+"H24-Order-Guide/Set-Main-Domain",{domain:n},function(e){$h24.dialogs.h24_og_set_main_domain_dialog.close();$h24.order_manager.reloadSnippet(e)});return false}else if(r.hasClass("h24_og_cancel_set_main_domain")){$h24.dialogs.h24_og_set_main_domain_dialog.close();return false}})};var _=function(){$("#h24_og_domain_dialog_container").click(function(e){var a=$(this),o=$(e.target),i=o.parent(),n=o;if(i.is("a")){n=i}if(n.hasClass("h24_og_close_domain_dialog")){$h24.dialogs.h24_og_domain_dialog.close();return false}else if(n.hasClass("h24_og_goto_newdomain")){$h24.get($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog-Newdomain",function(e){a.html(e);a.find(".h24_og_newdomain_input").inputTimeout({onTimeout:function(e){if(k(e,$(this).data("forbidden-words"))){$("#h24_og_newdomain_gapps_word_warning").hide()}else{$("#h24_og_newdomain_gapps_word_warning").show()}},delay:200})});return false}else if(n.hasClass("h24_og_newdomain_check_availability")){var r=a.find("input[name=domain]"),t=r.val(),s=a.find("select[name=tld] option:selected").val(),_,d=t.split("."),l,h;if(d.length>1){l=t.substring(d[0].length+1);h=a.find("select[name=tld] option[value="+l+"]");if(h.length>0){s=l;t=d[0];r.val(t);h.attr("selected","selected")}}_=t+"."+s;$h24.order_manager.domainDialogAvailabilityCheck(_);return false}else if(n.hasClass("h24_og_goto_newdomain_confirm")){if(n.hasClass("disabled"))return false;var r=a.find("input[name=domain]"),t=r.val(),s=a.find("select[name=tld] option:selected").val(),_=t+"."+s,m=a.find("input[name=main_domain]")[0].checked,d=t.split("."),l,h;if(d.length>1){l=t.substring(d[0].length+1);h=a.find("select[name=tld] option[value="+l+"]");if(h.length>0){s=l;t=d[0];r.val(t);h.attr("selected","selected")}}_=t+"."+s;n.addClass("disabled");$h24.order_manager.domainDialogAvailabilityCheck(_,function(e){if(e.successful){$h24.order_manager.addToCart({name:"NewDomain",metadata:{domain:_,mainDomain:m}},function(){$h24.post($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog-Newdomain-Confirm",{domain:_,mainDomain:m},function(e){a.html(e);n.removeClass("disabled")})})}else{n.removeClass("disabled")}});return false}else if(n.hasClass("h24_og_show_newdomain_forbidden_words_info")){$("#h24_og_forbidden_words_info").toggle();return false}else if(n.hasClass("h24_og_newdomain_confirm_domain")){$h24.dialogs.h24_og_domain_dialog.close();$h24.post($h24.slashwebroot+"H24-Order-Guide/Start-Snippets",function(e){$h24.order_manager.reloadSnippet(e)});return false}else if(n.hasClass("h24_og_newdomain_cancel_domain")){var c=i.data();$h24.order_manager.removeFromCart({name:"NewDomain",metadata:{domain:c.domain}});$h24.get($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog-Newdomain",function(e){a.html(e);a.find("input[name=domain]").val(c.domainnamepart);a.find("select[name=tld] option[value='"+c.domaintldpart+"']").attr("selected","selected");a.find("input[name=main_domain]")[0].checked=c.maindomain});return false}else if(n.hasClass("h24_og_goto_owndomain")){$h24.get($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog-Owndomain",function(e){a.html(e);a.find(".h24_og_owndomain_input").inputTimeout({onTimeout:function(e){if(k(e,$(this).data("forbidden-words"))){$("#h24_og_owndomain_gapps_word_warning").hide()}else{$("#h24_og_owndomain_gapps_word_warning").show()}},delay:200})});return false}else if(n.hasClass("h24_og_owndomain_confirm")){var t=a.find("input[name=domain]").val(),m=a.find("input[name=main_domain]")[0].checked;$h24.order_manager.domainDialogOwnDomainCheck(t,m);return false}else if(n.hasClass("h24_og_goto_subdomain")){$h24.get($h24.slashwebroot+"H24-Order-Guide/Domain-Dialog-Subdomain",function(e){a.html(e)});return false}else if(n.hasClass("h24_og_subdomain_confirm")){var g=a.find("input[name=subdomain_part]").val(),f=a.find("select[name=domain_part]").val(),m=a.find("input[name=main_domain]")[0].checked;$h24.order_manager.domainDialogSubDomainCheck(g+"."+f,m);return false}}).keyup(function(e){var a=$(this),o=$(e.target),i=e.keyCode;if(o.hasClass("h24_og_newdomain_input")){var n=a.find("input[name=domain]"),r=n.val(),t=a.find("select[name=tld] option:selected").val(),s=r+"."+t,_=a.find("input[name=main_domain]")[0].checked,d=r.split("."),l,h;if(i==13){if(d.length>1){l=r.substring(d[0].length+1);h=a.find("select[name=tld] option[value="+l+"]");if(h.length>0){t=l;r=d[0];n.val(r);h.attr("selected","selected")}}s=r+"."+t;$h24.order_manager.domainDialogAvailabilityCheck(s)}}else if(o.hasClass("h24_og_owndomain_input")&&i==13){var r=a.find("input[name=domain]").val(),_=a.find("input[name=main_domain]")[0].checked;$h24.order_manager.domainDialogOwnDomainCheck(r,_)}else if(o.hasClass("h24_og_subdomain_input")&&i==13){var m=a.find("input[name=subdomain_part]").val(),c=a.find("select[name=domain_part]").val(),_=a.find("input[name=main_domain]")[0].checked;$h24.order_manager.domainDialogSubDomainCheck(m+"."+c,_)}})};var d=function(e,a){var o=$("#h24_og_domain_dialog_container"),i=o.find(".h24_og_subdomain_echo_domain");i.text(e);o.find(".h24_og_subdomain_message").hide();$h24.post($h24.slashwebroot+"H24-Order-Guide/Validate-Subdomain",{domain:e},function(o){if(o.successful){$h24.dialogs.h24_og_domain_dialog.close();$h24.order_manager.addToCart({name:"SubDomain",metadata:{domain:e,mainDomain:a}})}else{switch(o.errorCode){case"DOMAIN_ALREADY_CONNECTED":$("#h24_og_subdomain_error_message_already_connected").show();break;case"DOMAIN_UNAVAILABLE":$("#h24_og_subdomain_error_message_unavailable").show();break;case"DOMAIN_INVALID":$("#h24_og_subdomain_error_message_invalid").show();break}}})};var l=function(e,a){var o=$("#h24_og_domain_dialog_container"),i=o.find(".h24_og_owndomain_echo_domain");i.text(e);o.find(".h24_og_owndomain_message").hide();$h24.post($h24.slashwebroot+"H24-Order-Guide/Validate-Owndomain",{domain:e},function(o){if(o.successful){$h24.dialogs.h24_og_domain_dialog.close();$h24.order_manager.addToCart({name:"OwnDomain",metadata:{domain:e,mainDomain:a}})}else{switch(o.errorCode){case"DOMAIN_ALREADY_IN_CART":$("#h24_og_owndomain_error_message_already_in_cart").show();break;case"DOMAIN_ALREADY_CONNECTED":$("#h24_og_owndomain_error_message_already_connected").show();break;case"DOMAIN_ALREADY_CONNECTED_OTHER_ACCOUNT":$("#h24_og_owndomain_error_message_already_connected_other_account").show();break;case"DOMAIN_AVAILABLE":$("#h24_og_owndomain_error_message_available").show();break;case"DOMAIN_UNAVAILABLE":$("#h24_og_owndomain_error_message_unavailable").show();break;case"DOMAIN_INVALID":$("#h24_og_owndomain_error_message_invalid").show();break}}})};var h=function(e,a){var o=$("#h24_og_domain_dialog_container"),i=o.find(".h24_og_newdomain_echo_domain");i.text(e);o.find(".h24_og_newdomain_message").hide();$h24.post($h24.slashwebroot+"H24-Order-Guide/Check-Domain-Availability",{domain:e},function(e){if(e.successful&&typeof a=="undefined"){$("#h24_og_newdomain_successful_message").show()}else{switch(e.errorCode){case"DOMAIN_ALREADY_IN_CART":$("#h24_og_newdomain_error_message_already_in_cart").show();break;case"DOMAIN_ALREADY_CONNECTED":$("#h24_og_newdomain_error_message_already_connected").show();break;case"DOMAIN_ALREADY_CONNECTED_OTHER_ACCOUNT":$("#h24_og_newdomain_error_message_already_connected_other_account").show();break;case"DOMAIN_UNAVAILABLE":$("#h24_og_newdomain_error_message_unavailable").show();break;case"DOMAIN_INVALID":$("#h24_og_newdomain_error_message_invalid").show();break;case"COMMUNICATION_ERROR":$("#h24_og_newdomain_error_message_communication_error").show();break}}if(typeof a=="function"){a.call(this,e)}})};var m=function(e){$h24.post($h24.slashwebroot+"H24-Order-Guide/Email-Dialog",{__skip_loading_overlay:true,__keep_loading_overlay:true,domain:e},function(a){if(typeof $h24.dialogs.h24_og_email_dialog!="undefined"){$("#h24_og_email_dialog").parent().closest("div").loadingSpinner(false);$h24.dialogs.h24_og_email_dialog.close()}var o=$h24.dialog.create("h24_og_email_dialog",a,{width:800,sidePadding:0});var i=$("#h24_og_email_dialog");$("html").off("click","#h24_og_email_dialog [data-action]").on("click","#h24_og_email_dialog [data-action]",function(a){var n=$(a.target).closest("[data-action]");var r=n.data("action");switch(r){case"addGoogleAppsToCart":a.preventDefault();var t=i.find("select[name=emailLicenses]").val();var s=$("#h24_og_email_dialog_users_table");var _=[];var d=[];var l=[];var h=[];var m=0;s.find("input.h24_og_email_dialog_error_field").removeClass("h24_og_email_dialog_error_field");i.find(".h24_og_email_dialog_message").hide();s.find("[data-function=newUser]").each(function(){var e=$(this);_.push({accountName:e.find("input[name=accountName]").val(),firstname:e.find("input[name=firstname]").val(),lastname:e.find("input[name=lastname]").val()})});s.find("[data-renew=true]").each(function(){var e=$(this);d.push({accountName:e.data("accountName")})});s.find("[data-renew=false]").each(function(){var e=$(this);l.push({accountName:e.data("accountName")})});s.find("[data-function=existingUser]").each(function(){var e=$(this);h.push({accountName:e.data("accountName")})});licenseUsers=parseInt(_.length,10)+parseInt(d.length,10);i.parent().closest("div").loadingSpinner(true);if(licenseUsers==0){$h24.order_manager.removeFromCart({name:"EmailLicense",metadata:{provider:"google_apps",domain:e}},function(){i.parent().closest("div").loadingSpinner(false);o.close()});return}$h24.order_manager.addToCart({name:"EmailLicense",metadata:{provider:"google_apps",domain:e,users:_,renewUsers:d,removeUsers:l,existingUsers:h},quantity:licenseUsers},function(e){i.parent().closest("div").loadingSpinner(false);if(typeof e.errorType!="undefined"){if(e.errorType=="user_validation"){var a=0;s.find("[data-function=newUser]").each(function(){var o=$(this);if(typeof e.validation[a]=="object"){for(var i in e.validation[a]){if(!e.validation[a][i]["successful"]){o.find("input[name="+i+"]").addClass("h24_og_email_dialog_error_field")}}}a++})}else if(e.errorType=="duplicate_found"){s.find("[data-function=newUser]").each(function(){var a=$(this),o=a.find("input[name=accountName]").val();if(typeof e.duplicateCheck[o]!="undefined"&&e.duplicateCheck[o]){a.find("input[name=accountName]").addClass("h24_og_email_dialog_error_field")}})}i.find(".h24_og_email_dialog_message[data-error-type="+e.errorType+"]").show()}else{o.close()}c(true)});break;case"addUserTemplate":a.preventDefault();var s=$("#h24_og_email_dialog_users_table");var g=s.find("tr[data-function=userTemplate]").clone().attr("data-function","newUser").hide();s.find("tr:last").before(g);g.fadeIn("fast").css("display","table-row");c();break;case"removeUser":a.preventDefault();var f=n.closest("tr");f.remove();c();break;case"renewUser":var f=n.closest("tr"),u=n.is(":checked");if(u){f.data("renew",true);f.attr("data-renew",true)}else{f.data("renew",false);f.attr("data-renew",false)}c();break;case"changeAltEmail":a.preventDefault();var p=i.find("input[name=altEmail]").val();i.find(".h24_og_email_dialog_message").hide();if(p==""){i.find(".h24_og_email_dialog_message[data-error-type=invalid_email]").show();return}i.parent().closest("div").loadingSpinner(true);$h24.post($h24.slashwebroot+"H24-Order-Guide/Change-Alt-Email",{altEmail:p},function(a){if(a.successful){$h24.order_manager.emailDialog(e)}else if(typeof a.errorType!="undefined"){i.parent().closest("div").loadingSpinner(false);i.find(".h24_og_email_dialog_message[data-error-type="+a.errorType+"]").show()}});break}});$("#h24_og_email_dialog select[name=presentationalPrice]").change(function(){var e=$(this).find("option:selected");var a=$("#h24_og_email_dialog span[data-function=googleAppsPrice]");a.html(e.data("price"))});c()})};var c=function(e){var e=typeof e!="undefined"&&e;var a=$("#h24_og_email_dialog");var o=$("#h24_og_email_dialog_users_table");var i=$("#h24_og_email_dialog span[data-function=googleAppsPrice]");var n=o.find("[data-function=newUser]").length;var r=o.find("[data-renew=true]").length;var t=parseInt(n,10)+parseInt(r,10);var s=o.find("[data-renew=false]").length;if(t==0){i.html("")}else{var _=a.find("select[name=presentationalPrice] [value="+t+"]");var d=_.data("price");var l=_.data("periodString");i.html(d+l)}if(!e){o.find("input.h24_og_email_dialog_error_field").removeClass("h24_og_email_dialog_error_field");a.find(".h24_og_email_dialog_message").hide()}if(s>0){a.find(".h24_og_email_dialog_message[data-message-type=remove_renewal_user]").show()}};var g=function(e){$h24.post($h24.slashwebroot+"H24-Order-Guide/Start-Toggle-VAT",{presentation:e},function(e){$h24.order_manager.reloadSnippet(e)})};var f=function(e){if(typeof e=="string"){var a=e;switch(a){case"subscriptionGrid":$h24.get($h24.slashwebroot+"H24-Order-Guide/Start-Subscription-Grid",function(e){$("#h24_og_subscription_grid_container").html(e)});break;case"domains":$h24.get($h24.slashwebroot+"H24-Order-Guide/Start-Domains",function(e){$("#h24_og_domains_container").html(e)});break;case"email":$h24.get($h24.slashwebroot+"H24-Order-Guide/Start-Email",function(e){$("#h24_og_email_container").html(e)});break;case"paymentType":$h24.get($h24.slashwebroot+"H24-Order-Guide/Start-Payment-Type",function(e){$("#h24_og_payment_type_container").html(e)});break;case"proceed":$h24.get($h24.slashwebroot+"H24-Order-Guide/Start-Proceed",function(e){$("#h24_og_proceed_container").html(e)});break;case"customerDetailsSummary":$h24.get($h24.slashwebroot+"H24-Order-Guide/Customer-Details-Summary",function(e){$("#h24_og_details_summary").html(e)});break}}else if(typeof e=="object"){for(var a in e){var o=e[a];switch(a){case"subscriptionGrid":$("#h24_og_subscription_grid_container").html(o);break;case"domains":$("#h24_og_domains_container").html(o);break;case"email":$("#h24_og_email_container").html(o);break;case"paymentType":$("#h24_og_payment_type_container").html(o);break;case"proceed":$("#h24_og_proceed_container").html(o);break;case"customerDetailsSummary":$("#h24_og_details_summary").html(o);break}}}};var u=function(e){$(".h24_contentBox").loadingSpinner(e)};var p=function(){$h24.order_manager.ajaxLoadersToggle(true)};var v=function(){$h24.order_manager.ajaxLoadersToggle(false)};var w=function(e){$h24.post($h24.slashwebroot+"H24-Order-Guide/Set-Payment-Type",{paymentType:e},function(e){if(typeof e.subscriptionGrid!="undefined"){$h24.order_manager.reloadSnippet(e)}else{$("#h24_og_paymentoptions .h24_og_paymentoption:checked")[0].checked=false}})};var b=function(){var e=confirm($h24.phrase.GUIPhrase("Order-Guide","Terminate monthly subscription?"));if(e!==true){return}$h24.post($h24.slashwebroot+"H24-Order-Guide/End-Monthly-Subscription",function(e){if($("#homepage_settings_dialogbox").length==1){$h24.homepage_settings.loadHomepageSettings(1)}})};var k=function(e,a){var o=e.split(".")[0],i,n=[];for(var r=0;r<a.length;r++){n.push(a[r]+"$")}i=n.join("|");if(o.search(i)>-1){return false}return true};var y=function(e){$(window).off("scroll.h24_help_text").on("scroll.h24_help_text",function(){if($(window).scrollTop()+$(window).height()>$(document).height()-e){if($(".support_message span:first").is(":visible")){$(".support_message span:first").hide()}}else{if(!$(".support_message span:first").is(":visible")){$(".support_message span:first").show()}}})};return{init:n,addToCart:o,removeFromCart:i,reloadSnippet:f,toggleVAT:g,pickKlarnaPnoIndex:e,getKlarnaAddresses:a,ajaxLoaderStart:p,ajaxLoaderStop:v,ajaxLoadersToggle:u,setPaymentType:w,initDomainDialog:_,initSetMainDomainDialog:s,domainDialogAvailabilityCheck:h,domainDialogOwnDomainCheck:l,domainDialogSubDomainCheck:d,endMonthly:b,checkDomainForGAppsWordRules:k,emailDialog:m,emailDialogUpdate:c,initScrollNotification:y,checkIfInvalidCartAndDisplayMessages:r}}();
h24core.prototype.block.AddThisBlock=function(t,o){this.innerblocktype="AddThisBlock";this.blockid=o;var e=this;if(t.editmode){t.addToExecOnInit(this,function(){t.block.AddThisBlock.init(o)})}var i=false;this.angularBlockServiceListener=function(o,n){var d=$("#block_"+e.blockid);switch(o){case"ReloadBlockOnSave":i=true;break;case"SettingsSaved":if(i){t.block.reloadBlock(e.blockid);i=false}break}};this.BCPActions={blockSettings:function(){var o=true;if(o&&$("html").hasClass("angularjs-in-edit-mode")){t.block.toggleBlock("select",this.blockid)}else{t.block.AddThisBlock.settings(this.blockid)}}}};h24core.prototype.block.AddThisBlock.init=function(t){if(!$h24.third_party.addThisInitiated){$h24.block.AddThisBlock.customEventListener('$("#block_'+t+'").height()',100,1e4,function(t){$h24.fauxSections.reposition()});$h24.third_party.initAddThis($h24.blocks[t].settings.addthisProfileId,$h24.blocks[t].settings.addthisUsername)}else{addthis.toolbox(".addthis_toolbox_"+t);addthis.button(".h24_addthis_block_button_"+t);addthis.counter(".h24_addthis_block_counter_"+t)}};h24core.prototype.block.AddThisBlock.customEventListener=function(element,interval,maxTime,callback){var oldValue=eval(element);var interval=setInterval(function(){if(oldValue!=eval(element)){if(typeof callback=="function"){callback.call(this,eval(element))}clearInterval(interval);clearTimeout(timeout)}},interval);var timeout=setTimeout(function(){clearInterval(interval)},maxTime)};h24core.prototype.block.AddThisBlock.settingsModified=function(t){$("#settings_block_"+t).addClass("h24_modified_settings")};h24core.prototype.block.AddThisBlock.saveSettings=function(t){var o=$("#block_container_"+t);o.loadingSpinner(true);$h24.block.saveSettings(t,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(t);$h24.block.AddThisBlock.settingsModified(t)}})};h24core.prototype.block.AddThisBlock.settingsDeleteButton=function(t,o){var e=o.find("select");var i=e.val();var n=$("#settings_block_"+t);n.find(".h24_addthis_block_add_button").show();var d=400;o.hide(d);setTimeout(function(){o.remove();h24core.prototype.block.AddThisBlock.saveSettings(t)},d)};h24core.prototype.block.AddThisBlock.settingsAddButton=function(t){var o=$("#h24_addthis_block_template_button").html();var e=$("#h24_addthis_block_buttons");var i=e.find(".h24_addthis_block_button_dropdown").size();var n=$h24.blocks[t].settings.addthisLimitButtons;var d=$("#settings_block_"+t);if(i<n){$("<li>").addClass("h24_addthis_block_button_dropdown").appendTo(e).html(o).find("select").attr("name","buttons_"+(i+1)).addClass("save_parameter")}i=e.find(".h24_addthis_block_button_dropdown").size();if(i==n){d.find(".h24_addthis_block_add_button").hide()}h24core.prototype.block.AddThisBlock.saveSettings(t)};h24core.prototype.block.AddThisBlock.settings=function(t){$h24.block.previewSettingsDialog(t,{onReady:function(){var o=$("#settings_block_"+t),e=o.find('input[name="displaymode"]'),i=$("#block_"+t+" .addthis_toolbox"),n=o.find('select[name^="buttons_"]'),d=o.find('input[name="addthisUsername"]'),s=o.find(".h24_addthis_block_add_button"),c=o.find(".h24_addthis_block_delete_button");var l=$("#h24_addthis_block_buttons");var a=l.find(".h24_addthis_block_button_dropdown").size();var h=$h24.blocks[t].settings.addthisLimitButtons;if(a==h){o.find(".h24_addthis_block_add_button").hide()}o.find("input, select").each(function(){var e=$(this);var i=e.attr("name");if(i=="displaymode"){var n=e.val();e.click(function(i){var n=e.val();if(n==0){o.find(".h24_addthis_displaymode_custom").hide();o.find(".h24_addthis_displaymode_simple").show()}else{o.find(".h24_addthis_displaymode_custom").show();o.find(".h24_addthis_displaymode_simple").hide()}h24core.prototype.block.AddThisBlock.saveSettings(t)})}else if(i=="size"){e.change(function(){h24core.prototype.block.AddThisBlock.saveSettings(t)})}else if(i=="orientation"){e.change(function(){h24core.prototype.block.AddThisBlock.saveSettings(t)})}else if(i=="adjustment"){e.change(function(){h24core.prototype.block.AddThisBlock.saveSettings(t)})}else if(i=="buttonCompact"){e.click(function(o){h24core.prototype.block.AddThisBlock.saveSettings(t)})}else if(i=="buttonBubble"){e.click(function(o){h24core.prototype.block.AddThisBlock.saveSettings(t)})}});s.bind("click",function(o){o.preventDefault();var e=$(this);h24core.prototype.block.AddThisBlock.settingsAddButton(t)});c.die("click").live("click",function(o){o.preventDefault();var e=$(this).parent(".h24_addthis_block_button_dropdown");h24core.prototype.block.AddThisBlock.settingsDeleteButton(t,e)});n.live("change",function(){h24core.prototype.block.AddThisBlock.saveSettings(t)});d.inputTimeout({onTimeout:function(){h24core.prototype.block.AddThisBlock.saveSettings(t)}})},dialogSettings:{width:435},onRevert:function(t){var o=this;$h24.block.revertSettings(t);$h24.block.saveSettings(t,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(t,{onComplete:function(){}})}});this.close()},onClose:function(){$h24.block.saveSettings(t,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(t,{onComplete:function(){}})}});this.close();$h24.block.reloadBlock(t)}})};h24core.prototype.block.AddThisBlock.updateServices=function(t){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:t,modelaction:"update_services"},function(t){$("#h24_addthis_block_services").html(t.servicesText)})};
h24core.prototype.block.MailerLiteBlock=function(e,i){this.innerblocktype="MailerLiteBlock";this.blockid=i;this.sidepanel=true;var t=this;this.lastSubmitTime=(new Date).getTime();this.hasSubmittedForm=false;this.adjustForNewCollection=function(e,i){};if(e.editmode){e.addToExecOnInit(this,function(){e.block.MailerLiteBlock.initEdit(i)})}else{e.addToExecOnInit(this,function(){e.block.MailerLiteBlock.initLive(i)})}var o=false;this.angularBlockServiceListener=function(i,l){var n=$("#block_"+t.blockid);switch(i){case"ReloadBlockOnSave":o=true;break;case"SettingsSaved":if(o){e.block.reloadBlock(t.blockid);o=false}break}};this.BCPActions={blockSettings:function(){if(t.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",t.blockid)}else{e.block.MailerLiteBlock.settings(t.blockid)}}}};h24core.prototype.block.MailerLiteBlock.init=function(e){};h24core.prototype.block.MailerLiteBlock.test=function(e){alert("test")};h24core.prototype.block.MailerLiteBlock.initEdit=function(e){var i=$("#block_"+e);$h24.block.MailerLiteBlock.initLive(e)};h24core.prototype.block.MailerLiteBlock.isValidEmail=function(e){if(e!=""&&e.indexOf("@")!==-1){var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(e)}else{return false}};h24core.prototype.block.MailerLiteBlock.formNewsletterOnSubmit=function(e,i,t,o){var l=$("#block_container_"+e);var n=$("#block_"+e);i.preventDefault();var a=false;var c=n.find(".h24_mailerlite_email");var r=c.val();if($h24.block.MailerLiteBlock.isValidEmail(r)){c.removeClass("h24-HpInput__stateInvalid");a=true;var s={};n.find(".h24_mailerlite_textfield").each(function(){var e=$(this);var i=e.attr("name");var t=$.trim(e.val());s[i]=encodeURIComponent(t)});var d=(new Date).getTime();var k=$h24.blocks[e].lastSubmitTime;if(!$h24.blocks[e].hasSubmittedForm){var f=0}else{var f=5e3}$h24.blocks[e].hasSubmittedForm=true;if(d>k+f){l.loadingSpinner(true);if(a){$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"submit_newsletter_form",data:s},function(i){l.loadingSpinner(false);$h24.blocks[e].lastSubmitTime=(new Date).getTime();if(typeof o=="function"){o(i)}})}}else{var u=k+f-d;var h=(k+f-d)/1e3;if($h24.devmode){console.log("Submit time restriction, please wait "+h)}}}else{if(r!=""){c.addClass("h24-HpInput__stateInvalid");c.focus()}}};h24core.prototype.block.MailerLiteBlock.initLive=function(e){var i=$("#block_"+e);var t=$("#block_container_"+e);i.find(".h24_mailerlite_email").blur(function(){var e=$(this);var i=$.trim(e.val());if($h24.block.MailerLiteBlock.isValidEmail(i)){e.removeClass("h24-HpInput__stateInvalid")}else{if(i!=""){e.addClass("h24-HpInput__stateInvalid")}}});i.find(".h24_mailerlite_newsletter_signup").submit(function(t){t.preventDefault();if($h24.devmode){console.log("Submitting form, wait for response")}var o=$(this);$h24.block.MailerLiteBlock.formNewsletterOnSubmit(e,t,o,function(e){if($h24.devmode){console.log(e)}if(e.successful){o.find(".h24_mailerlite_textfield").each(function(){$(this).val("")});i.find(".h24_mailerlite_thanks_message_container").hide().slideDown().delay(5e3).slideUp()}})})};h24core.prototype.block.MailerLiteBlock.settingsModified=function(e){$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.MailerLiteBlock.saveSettings=function(e,i){var t=$("#block_container_"+e);if(i!==false&&typeof doBlockReload==="undefined"){var i=true}if(i){t.loadingSpinner(true)}$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){if(i){$h24.block.reloadBlock(e)}$h24.block.MailerLiteBlock.settingsModified(e)}})};h24core.prototype.block.MailerLiteBlock.disableSettingsExceptApiField=function(e){var i=$("#settings_block_"+e);var t=i.find('input[name="api_key"]');i.find(".h24_mailerlite_require_apikey").attr("disabled","disabled");i.find(".h24_block_mailerlite_overlay").show()};h24core.prototype.block.MailerLiteBlock.enableSettings=function(e){var i=$("#settings_block_"+e);var t=i.find('input[name="api_key"]');var o=i.find('input[name="field_email"]');i.find(".h24_mailerlite_require_apikey").removeAttr("disabled");o.attr("disabled","disabled").attr("checked","checked");i.find(".h24_block_mailerlite_overlay").hide()};h24core.prototype.block.MailerLiteBlock.settings=function(e){$h24.block.previewSettingsDialog(e,{onReady:function(){var i=false;var t=$("#settings_block_"+e),o=t.find('input[name="api_key"]'),l=t.find('input[name="field_email"]'),n=t.find('input[name^="field_"]'),a=t.find('input[name="thanks_message"]'),c=t.find('input[name="subscribe_button"]');l.attr("disabled","disabled").attr("checked","checked");if(o.val()==""){$h24.block.MailerLiteBlock.disableSettingsExceptApiField(e)}else{$h24.block.MailerLiteBlock.checkApiKey(e,o.val(),function(i){if(!i){o.addClass("h24_mailerlite_invalid_apikey");$h24.block.MailerLiteBlock.disableSettingsExceptApiField(e)}})}o.inputTimeout({onTimeout:function(){$h24.block.MailerLiteBlock.saveSettings(e)}});c.inputTimeout({onTimeout:function(){$h24.block.MailerLiteBlock.saveSettings(e)}});o.blur(function(){var i=$(this);$h24.block.MailerLiteBlock.checkApiKey(e,i.val(),function(o){if(!o){$h24.block.MailerLiteBlock.disableSettingsExceptApiField(e);i.addClass("h24_mailerlite_invalid_apikey")}else{var l=i.val();$h24.block.MailerLiteBlock.enableSettings(e);i.removeClass("h24_mailerlite_invalid_apikey");setTimeout(function(){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"get_subscription_groups_html",api_key:l},function(e){if($h24.devmode){}if(typeof e.groups_markup!="undefined"){var i=e.groups_markup;if(i!=""){t.find(".h24_mailerlite_groups_container").html(i)}}})},1e3)}})});t.find("input, select").each(function(){var t=$(this);var o=t.attr("name");if(o=="groups"){t.change(function(){$h24.block.MailerLiteBlock.saveSettings(e,i)})}else if(o=="field_orientation"){t.change(function(){$h24.block.MailerLiteBlock.saveSettings(e)})}});t.find(".h24_mailerlite_fields").sortable({axis:"y",placeholder:"h24_block_mailerlite_field_placeholder",forcePlaceholderSize:true,start:function(i,t){var o=$(this).sortable("serialize");$h24.block.MailerLiteBlock.setFieldPositionsRevertValue(e,o)},update:function(i,t){var o=$(this).sortable("serialize");$h24.block.MailerLiteBlock.updateFieldPositions(e,o);$h24.block.MailerLiteBlock.saveSettings(e)}});n.change(function(i){$h24.block.MailerLiteBlock.saveSettings(e)});a.inputTimeout({onTimeout:function(){$h24.block.MailerLiteBlock.saveSettings(e,i)}});t.find(".h24_mailerlite_btn_update_groups").click(function(){$h24.block.MailerLiteBlock.updateGroups(e)})},dialogSettings:{width:435,sidePadding:15},onRevert:function(e){var i=this;$h24.block.revertSettings(e);$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e,{onComplete:function(){}})}});this.close()},onClose:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e)}});this.close()}})};h24core.prototype.block.MailerLiteBlock.setFieldPositionsRevertValue=function(e,i){var t=encodeURIComponent(i);$("#block_"+e).find(".h24_mailerlite_revert_positions").attr("revert",t)};h24core.prototype.block.MailerLiteBlock.updateFieldPositions=function(e,i){var t=encodeURIComponent(i);$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"update_field_positions",encoded_fields:t},function(e){})};h24core.prototype.block.MailerLiteBlock.getGroups=function(e){$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"get_groups"},function(e){})};h24core.prototype.block.MailerLiteBlock.updateGroups=function(e){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"update_groups"},function(e){if(e.successful===true){if(typeof e.data!="undefined"){if(typeof e.data.groups!="undefined"){}}}})};h24core.prototype.block.MailerLiteBlock.checkApiKey=function(e,i,t){if(i!=""){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"validate_api_key",api_key:i},function(e){if(typeof t=="function"){t(e.successful)}if(e.successful===true){if(typeof t=="function"){}}else{}})}};
h24core.prototype.block.PresentationImageBlock=function(e,i){var t=this;this.innerblocktype="PresentationImageBlock";this.blockid=i;this.sidepanel=true;this.adjustForNewCollection=function(e,i){var t=$("#block_"+this.blockid),a=t.find("> div"),o=$("#block_img_"+this.blockid),s=t.data(),l=parseInt(s.size,10),n=parseInt(s.currentWidth,10),c=parseInt(s.activeCustomAlignment,10),d=0,r=parseInt(s.originalWidth,10),h;if(l>e||l==0){if(r<e){h=r}else{h=e}}else{h=l}if(c>0&&h+c>e){d=e-h}if(h!=l||d!=c){if(d>0){a.css("padding-left",d)}if(h!=l){o.height("auto");o.width(h)}}};this.BCPActions={imageEditors:function(i){var t=$("#block_"+this.blockid+" div[data-pictureid]").data("pictureid");if(!!t&&t>0){var a=this.blockid;e.image_manager.imageEditors("block",t,a,function(e,o){if(typeof i==="function"){i({blockid:a,action:e,oldPictureId:t,newPictureId:o})}})}},blockSettings:function(){if(!!this.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){if($("#block_img_"+this.blockid).parent("a").length==1){$("#block_img_"+this.blockid).parent("a").replaceWith($("#block_img_"+this.blockid))}e.block.toggleBlock("select",this.blockid);e.block.PresentationImageBlock.initPositionDrag(this.blockid,true)}else{e.block.PresentationImageBlock.settings(this.blockid)}}};var a,o=false;this.angularBlockServiceListener=function(i,s,l){switch(i){case"ShowCaptionChanged":var n=$("#block_"+t.blockid+" .h24_caption");if(n.text().length>0&&s){n.show()}else{n.hide()}break;case"CaptionChanged":var n=$("#block_"+t.blockid+" .h24_caption");n.text(s);if(s.length>0){n.show()}else{n.hide()}break;case"AlignmentChanged":var c=s.alignment,d=s.customAlignment,r=$("#block_img_"+t.blockid),h=r.closest("div");$alignmentText=$("#block_text_"+t.blockid),_,g;h.removeClass("h24_image_block_align_left h24_image_block_align_center h24_image_block_align_right");switch(c){case 0:r.attr("class","presentation_image_block_image").css("padding-left","");$alignmentText.attr("class","h24_caption h24_image_block_align_left").css("padding-left","");h.css("padding-left","");h.addClass("h24_image_block_align_left");break;case 1:r.attr("class","presentation_image_block_image").css("padding-left","");$alignmentText.attr("class","h24_caption h24_image_block_align_center").css("padding-left","");h.css("padding-left","");h.addClass("h24_image_block_align_center");break;case 2:r.attr("class","presentation_image_block_image").css("padding-left","");$alignmentText.attr("class","h24_caption h24_image_block_align_right").css("padding-left","");h.css("padding-left","");h.addClass("h24_image_block_align_right");break;case 3:r.attr("class","presentation_image_block_image");$alignmentText.attr("class","h24_caption h24_image_block_align_left").css("padding-left","");_=$("#block_"+t.blockid).closest(".h24_collection").width();g=_-r.width();if(d<=g){h.css("padding-left",d+"px")}break}break;case"ImageMetaChanged":$("#block_"+t.blockid).data("originalWidth",s.originalWidth);break;case"ImageChanged":var r=$("#block_img_"+t.blockid),h=r.closest("div");r.height("auto");r.prop("src",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+s.pictureid+"&degrees=0&width="+s.size+"&anticache="+Math.random());r.prop("srcset",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+s.pictureid+"&degrees=0&width="+s.size+"&anticache="+Math.random())+" 2x";r.one("load",function(){r.data("ratio",r.width()/r.height());if(typeof s.callback=="function"){s.callback.call(this)}});$("#block_"+t.blockid+" div[data-pictureid]").data("pictureid",s.pictureid);break;case"SizeChanged":var r=$("#block_img_"+t.blockid),_,g,f,h=r.closest("div"),k=h.find(".h24_image_block_ratio"),b,p=$("#block_"+t.blockid),m;clearTimeout(a);_=$("#block_"+t.blockid).closest(".h24_collection").width();if(s.style.radius=="full"){g=_<s.maxSizeCircle?_:s.maxSizeCircle}else{g=_<s.originalWidth?_:s.originalWidth}if(s.size==0||s.size>g){s.size=g}switch(s.style.border){case"large":m=20;break;case"medium":m=8;break;default:m=0;break}tmpWidth=s.size-m;if(tmpWidth>0)s.size=tmpWidth;else if(s.size>0)s.size=1;tmpHeight=s.height-m;if(tmpHeight>0)s.height=tmpHeight;else if(s.height>0)s.height=1;if(!r.data("ratio")>0){r.data("ratio",r.width()/r.height())}if(s.height>0){k.css("padding-bottom",s.height/(h.outerWidth()-m)*100+"%");h.data("ratio",(h.outerWidth()-m)/(h.outerHeight()-m))}else if(s.style.radius=="full"){k.css("padding-bottom","");s.height=s.size;h.data("ratio",1)}else{k.css("padding-bottom",100/r.data("ratio")+"%");h.data("ratio",r.data("ratio"))}if(h.data("ratio")<r.data("ratio")){b=Math.round(s.height*r.data("ratio"));if(typeof s.rotation=="undefined"){h.addClass("h24_image_block_crop_horizontally");r.height(s.height+"px").width("")}}else{b=s.size;if(typeof s.rotation=="undefined"){h.removeClass("h24_image_block_crop_horizontally");r.height("").width(b+"px")}}h.width(s.size+"px");var u=0,v=0;if(s.height>0){if(!Array.isArray(p.data("position"))&&p.data("position").length!==2){p.data("position")="[50,50]"}u=-(b-s.size)*p.data("position")[0]/s.size;v=-(b/r.data("ratio")-s.height)*p.data("position")[1]/s.height}if(typeof s.rotation=="undefined"){r.css({left:u+"%",top:v+"%"})}a=setTimeout(function(){r.prop("src",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+s.pictureid+"&degrees="+s.degrees+"&width="+b+"&anticache="+Math.random());r.prop("srcset",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+s.pictureid+"&degrees="+s.degrees+"&width="+b+"&anticache="+Math.random())+" 2x";r.one("load",function(){r.css({width:"",height:"",left:u+"%",top:v+"%"});h.toggleClass("h24_image_block_crop_horizontally",h.data("ratio")<r.data("ratio"));if(h.width()<r.width()||h.height()<r.height()){$(".h24_img_dragInfo").show()}else{$(".h24_img_dragInfo").hide()}})}.bind(t),typeof s.rotation=="undefined"?500:0);if(s.alignment==3){f=parseInt(g,10)-parseInt(s.customAlignment,10);if(s.size>f){h.css("padding-left",g-s.size+"px")}}break;case"BeforeRotated":break;case"Rotate":var r=$("#block_img_"+t.blockid);r.data("ratio",r.height()/r.width());if(typeof s.callback=="function"){s.callback.call(this)}break;case"AfterRotated":break;case"StyleChanged":var w=s.style,C=s.size,I=s.originalWidth,B=s.originalHeight,y=s.orientation,z=s.shortSide,r=$("#block_img_"+t.blockid),h=r.closest("div"),_=$("#block_"+t.blockid).closest(".h24_collection").width(),P=s.maxSizeCircle,x=s.degrees,S=s.borderColor,T;h.removeClass("h24_image_block_radius_full h24_image_block_radius_medium h24_image_block_border_medium h24_image_block_border_large");if(w.radius=="full"){h.addClass("h24_image_block_radius_full")}else if(w.radius=="medium"){h.addClass("h24_image_block_radius_medium")}if(w.border=="medium"){h.addClass("h24_image_block_border_medium");h.css("borderColor",S)}else if(w.border=="large"){h.addClass("h24_image_block_border_large");h.css("borderColor",S)}break;case"BorderColorChanged":var r=$("#block_img_"+t.blockid),h=r.closest("div");h.css("borderColor",s);break;case"ShadowChanged":var r=$("#block_img_"+t.blockid),h=r.closest("div");h.removeClass("h24_image_block_shadow");if(s){h.addClass("h24_image_block_shadow")}break;case"ReloadBlockOnSave":o=true;break;case"DontReloadBlockOnSave":o=false;break;case"ReloadBlock":e.block.reloadBlock(t.blockid);break;case"SettingsSaved":if(o){e.block.reloadBlock(t.blockid);o=false}break;case"SettingsReverted":e.block.reloadBlock(t.blockid);break;case"BCPActions":var R=s;if(typeof t.BCPActions[R]!="undefined"){t.BCPActions[R].call(this,l)}break}};this.angularBlockServiceResponder=function(e,i){var a=$("#block_img_"+t.blockid);switch(e){case"Boundaries":var o=$("#block_"+t.blockid);return{collectionSize:parseInt(o.closest(".h24_collection").width(),10),imageWidth:parseInt(a.width(),10),imageOriginalWidth:parseInt(o.data("originalWidth"),10)};case"CurrentHeight":var s=a.closest("div");return parseInt(s.outerHeight(),10);break}}};h24core.prototype.block.PresentationImageBlock.initPositionDrag=function(e,i){var t=$("#block_img_"+e),a=t.closest("div"),o=$("#block_"+e),s,l,n,c;if(!!location.hash.match(e)){var d=$('<div class="h24_img_dragInfo"><span>'+$h24.phrase.GUIPhrase("Sidepanel-Blocks","The image is cropped. Place it by dragging.")+"</span></div>").appendTo(o);if(a.width()<t.width()||a.height()<t.height()){d.show()}else{d.hide()}}if(!i&&a.width()===t.width()&&a.height()===t.height())return;a.addClass("h24_img_isDraggable");l=0;c=0;t.draggable({start:function(){s=a.width()-t.width();n=a.height()-t.height()},drag:function(e,i){if(i.position.left<s)i.position.left=s;if(i.position.left>l)i.position.left=l;if(i.position.top<n)i.position.top=n;if(i.position.top>c)i.position.top=c},stop:function(i,s){var l,n;if(a.width()===t.width())l=o.data("position")[0];else l=Math.abs(Math.round(s.position.left/(t.width()-a.width())*100));if(a.height()===t.height())n=o.data("position")[1];else n=Math.abs(Math.round(s.position.top/(t.height()-a.height())*100));o.data("position",[l,n]);$h24.post($h24.slashwebroot+"Block/Communicator",{blockid:e,modelaction:"setPosition",position:[l,n]},function(e){if(e.successful){}})}})};h24core.prototype.block.PresentationImageBlock.linkDialog=function(e){$h24.link.blockLinkDialog("PresentationImageBlock",e,undefined,true)};h24core.prototype.block.PresentationImageBlock.pickBehavior=function(e,i){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.link.blockPickBehavior(e,i)};h24core.prototype.block.PresentationImageBlock.linkingCallback=function(e,i){$h24.link.blockLinkingCallback("PresentationImageBlock",e,i,0,true)};h24core.prototype.block.PresentationImageBlock.previewRotation=function(e,i){var t=$("#settings_block_"+e),a=$("#block_img_"+e),o,s=t.find("input[name=rotation]");if(a.hasClass("h24_pib_rotated_90_deg")){a.removeClass("h24_pib_rotated_90_deg");if(i){a.addClass("h24_pib_rotated_180_deg");o=180}else{o=0}}else if(a.hasClass("h24_pib_rotated_180_deg")){a.removeClass("h24_pib_rotated_180_deg");if(i){a.addClass("h24_pib_rotated_270_deg");o=270}else{a.addClass("h24_pib_rotated_90_deg");o=90}}else if(a.hasClass("h24_pib_rotated_270_deg")){a.removeClass("h24_pib_rotated_270_deg");if(i){o=0}else{a.addClass("h24_pib_rotated_180_deg");o=180}}else{if(i){a.addClass("h24_pib_rotated_90_deg");o=90}else{a.addClass("h24_pib_rotated_270_deg");o=270}}s.val(o);$h24.block.loadTemporaryImage(e,true)};h24core.prototype.block.PresentationImageBlock.settings=function(e){$h24.block.previewSettingsDialog(e,{onReady:function(){var i=$("#settings_block_"+e),t=$("#settings_block_"+e+"_size_controls"),a=t.find(".slider_controls"),o=a.find(".h24_slider"),s=t.find("select[name=size_setting]"),l=a.find("input[name=size]"),n=$("#settings_block_"+e+"_alignment_controls"),c=n.find(".slider_controls"),d=c.find(".h24_slider"),r=n.find("select[name=alignment]"),h=c.find("input[name=custom_alignment]"),_=$("#block_"+e),g=_.find(".h24_normal_text"),f=$("#block_img_"+e),k=$("#block_text_"+e),b=_.find(".h24_caption"),p=i.find("input[name=caption]"),m=i.find("input[name=show_caption]"),u=$("#block_img_"+e),v=parseInt(l.data("collectionsize"),10),w=parseInt(l.data("imagewidth"),10);o.slider({min:0,max:v<w?v:w,slide:function(i,t){var a=$("#block_img_"+e);l.val(t.value);a.width(t.value)},change:function(t,o){var s=$("#block_img_"+e),n;l.val(o.value);if(o.value==0){a.hide();i.find("select[name=size_setting] option[value=max]").attr("selected","selected");s.css("width","")}else{s.width(o.value)}i.addClass("h24_modified_settings")},stop:function(i,t){$h24.block.loadTemporaryImage(e,false,function(){var i=$("#block_img_"+e),t=v-i.width();d.slider("option","max",t);d.slider("value",h.val())})},value:l.val()});d.slider({min:0,max:v-u.width(),slide:function(e,i){h.val(i.value);g.css("padding-left",i.value)},change:function(e,t){var a=n.find("input[name=alignment]:checked").val();h.val(t.value);if(a==3){g.css("padding-left",t.value)}i.addClass("h24_modified_settings")},value:h.val()});i.click(function(t){var a=$(t.target),o=a.parent(),s=false,l=false,n=false,c;if(a.is("a")){c=a;s=true}else if(o.is("a")){c=o;s=true}else if(a.is("input[type=radio]")){l=true}else if(a.is("input[type=checkbox]")){n=true}if(s){if(c.hasClass("h24_pib_rotate_left")){$h24.block.PresentationImageBlock.previewRotation(e,false);i.addClass("h24_modified_settings");return false}else if(c.hasClass("h24_pib_rotate_right")){$h24.block.PresentationImageBlock.previewRotation(e,true);i.addClass("h24_modified_settings");return false}}else if(n){if(a.attr("name")=="show_caption"){var d=a.is(":checked")?1:0;if(d==1){b.show()}else if(d==0){b.hide()}}}});s.change(function(){i.addClass("h24_modified_settings");switch($(this).val()){case"max":o.slider("value",0);a.hide();$h24.block.loadTemporaryImage(e,false,function(){var i=$("#block_img_"+e),t=parseInt(l.data("collectionsize"),10)-i.width(),a=n.find("input[name=alignment]:checked").val();if(t==0){d.slider("value",0);if(a==3){f.attr("class","h24_image_block_align_left");g.css("padding-left","")}}d.slider("option","max",t)});break;case"slider":o.slider("value",parseInt(l.data("collectionsize"),10)-h.val());$h24.block.loadTemporaryImage(e,false);a.show();break}});l.inputTimeout({onTimeout:function(){var t=$(this),a=parseInt(t.val(),10);if(!isNaN(a)){o.slider("value",a)}$h24.block.loadTemporaryImage(e,false);i.addClass("h24_modified_settings")}});r.change(function(){i.addClass("h24_modified_settings");switch($(this).val()){case"0":g.css("padding-left","");f.attr("class","presentation_image_block_image h24_image_block_align_left");k.attr("class","h24_caption h24_image_block_align_left");c.hide();break;case"1":g.css("padding-left","");f.attr("class","presentation_image_block_image h24_image_block_align_center");k.attr("class","h24_caption h24_image_block_align_center");c.hide();break;case"2":g.css("padding-left","");f.attr("class","presentation_image_block_image h24_image_block_align_right");k.attr("class","h24_caption h24_image_block_align_right");c.hide();break;case"3":f.attr("class","presentation_image_block_image");g.css("padding-left","");k.attr("class","h24_caption h24_image_block_align_left");d.slider("value",0);c.show();break}});h.inputTimeout({onTimeout:function(){var e=$(this),t=parseInt(e.val(),10);if(!isNaN(t)){d.slider("value",t)}i.addClass("h24_modified_settings")}});p.keyup(function(){var e=$(this);if(m.is(":checked")){if(e.val()==""){b.hide()}else{b.show()}}b.text(e.val());i.addClass("h24_modified_settings")}).change(function(){var e=$(this);if(m.is(":checked")){if(e.val()==""){b.hide()}else{b.show()}}b.text(e.val());i.addClass("h24_modified_settings")})},dialogSettings:{width:230},onRevert:function(e){var i=this;$h24.block.revertSettings(e);$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e,{onComplete:function(){$h24.imageViewer.init()}})}});this.close()},onClose:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e,{onComplete:function(){$h24.imageViewer.init()}})}});this.close()}})};h24core.prototype.block.PresentationImageBlock.initUploader=function(e){var i=$h24.browser=="ie8"||$h24.browser=="ie9"?"iframe":"flash";var t=$h24.browser=="ie8"||$h24.browser=="ie9";$h24.uploader.create("picture","settings_block_"+e+"_uploader",{file_queue_limit:1,file_types:"*.jpg;*.jpeg;*.png;*.gif",file_types_description:"Image files",file_size_limit:"10MB",restart_iframe_uploaders:true,background_decoration:true,file_upload_success:function(i,t,a){$("#settings_block_"+e+"_hidden").val(a[0]);setTimeout(function(){if(a[0]>0){$h24.post($h24.slashwebroot+"Block/Communicator",{blockid:e,modelaction:"getImageData",pictureid:a[0]},function(i){if(i.successful){var t=$("#settings_block_"+e+"_size_controls"),a=t.find(".slider_controls"),o=a.find(".h24_slider"),s=a.find("input[name=size]"),l=parseInt(s.data("collectionsize"),10),n=parseInt(i.width,10),c=l<n?l:n;if(s.val()==o.slider("option","max")){s.val(c)}s.data("imagewidth",n);o.slider("option","max",c);o.slider("value",o.slider("value"))}})}$h24.block.loadTemporaryImage(e,false)},100);$("#settings_block_"+e).addClass("h24_modified_settings")},before_upload:function(i,t){if(!t){$("#settings_block_"+e+" .dialog_save_cancel_buttons").loadingSpinner(true)}},uploads_complete:function(i){$("#settings_block_"+e+" .dialog_save_cancel_buttons").loadingSpinner(false)},uploader_start_mode:i,preventModeSwitching:t})};h24core.prototype.block.PresentationImageBlock.imageDatabase=function(e){$h24.image_database.open({uploadCallback:function(i){$h24.block.PresentationImageBlock.updatePresentationImageBlockSettings(e,i)}})};h24core.prototype.block.PresentationImageBlock.updatePresentationImageBlockSettings=function(e,i){if(i>0){$("#settings_block_"+e+"_hidden").val(i);$h24.post($h24.slashwebroot+"Block/Communicator",{blockid:e,modelaction:"getImageData",pictureid:i},function(i){if(i.successful){var t=$("#settings_block_"+e+"_size_controls"),a=t.find(".slider_controls"),o=a.find(".h24_slider"),s=a.find("input[name=size]"),l=parseInt(s.data("collectionsize"),10),n=parseInt(i.width,10),c=l<n?l:n;if(s.val()==o.slider("option","max")){s.val(c)}s.data("imagewidth",n);o.slider("option","max",c);o.slider("value",o.slider("value"))}})}$h24.block.loadTemporaryImage(e,false);$("#settings_block_"+e).addClass("h24_modified_settings")};
h24core.prototype.block.StandardTextBlock=function(e,a){this.innerblocktype="StandardTextBlock";this.blockid=a;this.ckeditor=null;this.editorIsActive=false;this.autosaveTimeoutTimer=-1;this.lastSavedData=null;this.lastFontface=null;this.fontfaceSlotType="global";this.fontfaceSlotId=3;this.sidepanel=true;this.AUTO_SAVE_SECONDS=30;var t=this;this.autoSave=function(){clearTimeout(t.autosaveTimeoutTimer);t.autosaveTimeoutTimer=setTimeout(t.save,t.AUTO_SAVE_SECONDS*1e3)};this.save=function(a){var r;if(!t.ckeditor){return}try{r=t.ckeditor.getData()}catch(i){t.autoSave();return}var o=$("#block_container_"+t.blockid).data("newFontface");if(t.lastSavedData===null){t.lastSavedData=r;t.lastFontface=o;if(typeof a=="function"){a()}}else if(r!=t.lastSavedData||o!=t.lastFontface){e.post(e.slashwebroot+"Block/Edit-Communicator",{blockid:t.blockid,modelaction:"save_content",content:e.utils.filterContenteditable(t.blockid,r),new_fontface:o,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){if(typeof a=="function"){a()}});t.lastSavedData=r;t.lastFontface=o;if($("html").hasClass("faux-section-support")){e.fauxSections.reposition()}}else{if(typeof a=="function"){a()}}t.autoSave()};this.initCKEDitor=function(){var a,r,i=$("#h24_cke_link_helper");this.$textContent.prop("contentEditable",true);r=[];r.push({items:["FontSize"]});r.push({items:["Bold","Italic","Underline","Strike","-","RemoveFormat","-","Subscript","Superscript"]});r.push({items:["BulletedList","NumberedList"]});r.push({items:["BGColor","TextColor"]});r.push("/");r.push({items:["Undo","Redo"]});r.push({items:["h24link","Unlink","-","Anchor"]});r.push({items:["Table"]});r.push({items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]});r.push({items:["SpecialChar"]});if(e.design_system==1){r.push({items:["h24fonts"]})}else if(e.design_system==0){r.push({items:["Font"]})}if(e.devmode){r.push({items:["H24Html"]})}else if(e.ckeditor_html_enabled){r.push({items:["H24Html"]})}config={toolbar:r};if(e.devmode){config.timestamp=Date.now()}t.ckeditor=CKEDITOR.inline(t.$textContent[0],config);t.ckeditor.on("focus",function(a){$("#liblock_"+t.blockid).addClass("h24_bcp_text-editor-enabled");t.editorIsActive=true;t.save();a.editor.focus();for(var r in e.blocks){if(r!=t.blockid&&!!e.blocks[r].ckeditor&&!!e.blocks[r].ckeditor.fire){e.blocks[r].ckeditor.fire("blur")}}},t);if(!e.utils.touchMode){t.ckeditor.on("blur",function(a){$("#liblock_"+t.blockid).removeClass("h24_bcp_text-editor-enabled");t.save();t.editorIsActive=false;clearTimeout(t.autosaveTimeoutTimer);i.remove();e.block.toggleBlock("deselect",t.blockid)},t)}t.ckeditor.on("instanceReady",function(){t.$textContent.removeAttr("title");t.$textContent.css("position","")},t);t.$textContent.off(".h24").on({"click.h24":function(){var a=document.getSelection().anchorNode,r=!!a&&!!a.parentNode?$(a.parentNode):$(),o,n,_,l,s=$("#block_container_"+t.blockid),d=i.find("a");if(!r.is("a")){o=r.closest("a");if(o.length){r=o}else{i.remove();return}}else if(!r.prop("href")){i.remove();return}if(!i.length){i=$('<div id="h24_cke_link_helper" class="dropdown-menu"><span>'+e.phrase.GUIPhrase("CKEditor","Follow link:")+' </span><a href=""></a></div>');d=i.find("a")}n=r.offset().top-s.offset().top;_=r.offset().left-s.offset().left;i.css({top:n+r.height(),left:_,visibility:"hidden",display:"block"});if(!!r.attr("rev")){switch(r.attr("rev")){case"mailto":d.prop("href",r.prop("href")).text(e.phrase.GUIPhrase("General","Send e-mail to")+" "+r.prop("href").split(":")[1]).prop("target",r.prop("target"));break;case"video":d.prop("href",r.prop("href")).text(e.phrase.GUIPhrase("General","Play video")).prop("target",r.prop("target"));break;case"file":d.prop("href",r.prop("href")).text(e.phrase.GUIPhrase("General","Download file")).prop("target",r.prop("target"));break;default:d.prop("href",r.prop("href")).text(r.prop("href")).prop("target",r.prop("target"));break}}else{d.prop("href",r.prop("href")).text(r.prop("href")).prop("target",r.prop("target"))}i.appendTo(s);l=i.offset().left+i.outerWidth()-$(window).width();if(l>0){i.css("left",parseInt(i.css("left"),10)-l)}i.css("visibility","visible")},"contextmenu.h24":function(){i.remove()},"drop.h24":function(){return false}})};this.destroyCKEditor=function(){t.save();t.editorIsActive=false;t.$textContent.prop("contentEditable",false);t.ckeditor.destroy();t.ckeditor=null;clearTimeout(t.autosaveTimeoutTimer);$("#h24_cke_link_helper").remove()};this.destroy=function(){if(!!t.ckeditor){t.ckeditor.destroy();t.ckeditor=null}};if(e.editmode){e.addToExecOnInit(this,function(){this.$textContent=$("#block_"+a+"_text_content");this.isContentEditableActive=this.$textContent.data("isContentEditable")})}this.BCPActions={textEditor:function(){if($("#block_"+t.blockid+"_text_content").is('[contenteditable="true"]')){t.ckeditor.fire("focus")}else{e.block.StandardTextBlock.openEditor(this.blockid)}},frameManager:function(){e.block.StandardTextBlock.openFramesDialog(this.blockid)},imageEditors:function(){var a=$("#text_block_image_"+this.blockid).data("pictureid");if(!!a&&a>0){e.image_manager.imageEditors("block",a,this.blockid)}},blockSettings:function(){if(!!this.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.StandardTextBlock.settings(this.blockid)}}};var r,i=false;this.angularBlockServiceListener=function(o,n){var _=$("#text_block_image_"+t.blockid),l=$("#block_img_"+a);switch(o){case"ShowImageChanged":var _=$("#text_block_image_"+t.blockid);if(l.prop("src")!=""&&n){_.show()}else{_.hide()}break;case"ShowCaptionChanged":var s=$("#block_"+t.blockid+" .h24_caption");if(s.text().length>0&&n){s.show()}else{s.hide()}break;case"CaptionChanged":var s=$("#block_"+t.blockid+" .h24_caption");s.text(n);if(n.length>0){s.show()}else{s.hide()}break;case"PictureAlignmentChanged":switch(n){case 0:_.removeClass("float-right").addClass("float-left");break;case 1:_.removeClass("float-left").addClass("float-right");break}break;case"ImageChanged":var d=$("#block_img_"+t.blockid);var c=n.size*2;d.prop("src",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees=0&width="+n.size+"&anticache="+Math.random());d.prop("srcset",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees=0&width="+c+"&anticache="+Math.random()+" "+c+"w");$("#block_"+t.blockid+" div[data-pictureid]").data("pictureid",n.pictureid);break;case"SizeChanged":var h,f,c,m;clearTimeout(r);h=$("#block_"+t.blockid).closest(".h24_collection").width();f=h<n.originalWidth?h:n.originalWidth;if(n.size>f){m=f}else{m=n.size==0?f:n.size}c=m*2;if(n.size<=f){l.width(n.size);l.prop("width",n.size);_.width(n.size);r=setTimeout(function(){l.prop("src",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees="+n.degrees+"&width="+m+"&anticache="+Math.random());l.prop("srcset",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees="+n.degrees+"&width="+c+"&anticache="+Math.random()+" "+c+"w")}.bind(t),500);l.on("load.pp-StandardTextBlock-size",function(){var e=$(this);if(e.attr("style").search(/width/)>-1){l.css({width:"",height:""})}$(this).off("load.pp-StandardTextBlock-size")})}break;case"BeforeRotated":break;case"Rotate":var h,f,m,p,u=n.originalWidth;h=$("#block_"+t.blockid).closest(".h24_collection").width();f=h<u?h:u;if(n.size>f){m=f}else{m=n.size==0?f:n.size}c=m*2;l.prop("src",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees="+n.degrees+"&width="+m+"&anticache="+Math.random());l.prop("srcset",e.slashwebroot+"Block/Temp-Render-Picture-Original/?blockid="+t.blockid+"&pictureid="+n.pictureid+"&degrees="+n.degrees+"&width="+c+"&anticache="+Math.random()+" "+c+"w");break;case"AfterRotated":break;case"ReloadBlockOnSave":i=true;break;case"DontReloadBlockOnSave":i=false;break;case"ReloadBlock":e.block.reloadBlock(t.blockid);break;case"SettingsSaved":if(i){e.block.reloadBlock(t.blockid);i=false}break;case"SettingsReverted":e.block.reloadBlock(t.blockid);break;case"BCPActions":var v=n;if(typeof t.BCPActions[v]!="undefined"){t.BCPActions[v].call(this)}break}};this.angularBlockServiceResponder=function(e,a){switch(e){case"Boundaries":var r=$("#block_img_"+t.blockid),i=$("#block_"+t.blockid);return{collectionSize:parseInt(i.closest(".h24_collection").width(),10)};break}}};h24core.prototype.block.StandardTextBlock.linkDialog=function(e){$h24.link.blockLinkDialog("StandardTextBlock",e,undefined,true)};h24core.prototype.block.StandardTextBlock.pickBehavior=function(e,a){$h24.link.blockPickBehavior(e,a)};h24core.prototype.block.StandardTextBlock.linkingCallback=function(e,a){$h24.link.blockLinkingCallback("StandardTextBlock",e,a,0,true)};h24core.prototype.block.StandardTextBlock.openEditor=function(e){var a=$("#block_"+e+" .text_content");$h24.editors.text({source:a,blockid:e,save:function(t,r,i){var o=$(this).data("h24_editor");$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"save_content",content:t,new_fontface:i},function(t){if(typeof o.editor!="undefined"&&typeof o.editor.tinymce()!="undefined")o.editor.tinymce().setProgressState(false);if($.trim(t.parsedContent).length==0&&!$("#block_img_"+e).is(":visible")){var n=$h24.block.remove(e,undefined,undefined,true)}if(!n){a.html(t.parsedContent);if(!t.successful&&$h24.devmode)console.log(t);else if(t.wordWarning)alert(translatedString("tinymce_word_alert"));if(i!=""&&r)refreshBrowser()}})}})};h24core.prototype.block.StandardTextBlock.settings=function(e){$h24.block.previewSettingsDialog(e,{onReady:function(){var a=$("#settings_block_"+e),t=$("#settings_block_"+e+"_size_controls"),r=t.find(".slider_controls"),i=r.find(".h24_slider"),o=r.find("input[name=size]"),n=$("#block_container_"+e),_=$("#settings_block_"+e+"_alignment_controls"),l=$("#text_block_image_"+e),s=_.find("select[name=picturealign]"),d=n.find(".h24_caption"),c=a.find("input[name=caption]"),h=a.find("input[name=show_caption]"),f=$("#block_img_"+e),m=l.data("maximagesize");i.slider({min:1,max:m,slide:function(a,t){var r=$("#block_img_"+e);o.val(t.value);r.width(t.value);l.width(t.value)},change:function(t,r){var i=$("#block_img_"+e);o.val(r.value);i.width(r.value);l.width(r.value);a.addClass("h24_modified_settings")},stop:function(a,t){$h24.block.loadTemporaryImage(e,false)},value:o.val()});a.click(function(t){var r=$(t.target),i=r.parent(),o=false,n=false,_=false,s;if(r.is("a")){s=r;o=true}else if(i.is("a")){s=i;o=true}else if(r.is("input[type=radio]")){n=true}else if(r.is("input[type=checkbox]")){_=true}if(o){if(s.hasClass("h24_pib_rotate_left")){$h24.block.PresentationImageBlock.previewRotation(e,false);a.addClass("h24_modified_settings");return false}else if(s.hasClass("h24_pib_rotate_right")){$h24.block.PresentationImageBlock.previewRotation(e,true);a.addClass("h24_modified_settings");return false}}else if(_){if(r.attr("name")=="showimage"){a.addClass("h24_modified_settings");if(r.is(":checked")){if(f.attr("src")!=""){l.show()}}else{l.hide()}}else if(r.attr("name")=="show_caption"){var c=r.is(":checked")?1:0;if(c==1){d.show()}else if(c==0){d.hide()}}}});o.inputTimeout({onTimeout:function(){var t=$(this),r=parseInt(t.val(),10);if(!isNaN(r)){i.slider("value",r)}$h24.block.loadTemporaryImage(e,false);a.addClass("h24_modified_settings")}});s.change(function(){a.addClass("h24_modified_settings");switch($(this).val()){case"float-left":l.removeClass("float-right").addClass("float-left");break;case"float-right":l.removeClass("float-left").addClass("float-right");break}});c.keyup(function(){var e=$(this);if(h.is(":checked")){if(e.val()==""){d.hide()}else{d.show()}}d.text(e.val());a.addClass("h24_modified_settings")}).change(function(){var e=$(this);if(h.is(":checked")){if(e.val()==""){d.hide()}else{d.show()}}d.text(e.val());a.addClass("h24_modified_settings")})},dialogSettings:{width:260},onRevert:function(e){var a=this;$h24.block.revertSettings(e);$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e,{onComplete:function(){$h24.imageViewer.init()}})}});if($("#settings_block_"+e+' input[name="showimage"]').prop("checked")){$("#liblock_"+e+' button[data-action="imageEditors"]').show()}else{$("#liblock_"+e+' button[data-action="imageEditors"]').hide()}this.close()},onClose:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e,{onComplete:function(){$h24.imageViewer.init()}})}});if($("#settings_block_"+e+' input[name="showimage"]').prop("checked")){$("#liblock_"+e+' button[data-action="imageEditors"]').show()}else{$("#liblock_"+e+' button[data-action="imageEditors"]').hide()}this.close()}})};h24core.prototype.block.StandardTextBlock.initUploader=function(e){var a=$h24.browser=="ie8"||$h24.browser=="ie9"?"iframe":"flash";var t=$h24.browser=="ie8"||$h24.browser=="ie9";$h24.uploader.create("picture","settings_block_"+e+"_uploader",{file_queue_limit:1,file_types:"*.jpg;*.jpeg;*.png;*.gif",file_types_description:"Image files",file_size_limit:"10MB",restart_iframe_uploaders:true,background_decoration:true,file_upload_success:function(a,t,r){$("#settings_block_"+e+"_hidden").val(r[0]);$("#settings_block_"+e+" input[name=showimage]").attr("checked","checked");setTimeout(function(){$h24.block.loadTemporaryImage(e,false)},100);$("#settings_block_"+e).addClass("h24_modified_settings")},before_upload:function(a,t){if(!t){$("#settings_block_"+e+" .dialog_save_cancel_buttons").loadingSpinner(true)}},uploads_complete:function(a,t){if(typeof t=="undefined"){$("#text_block_image_"+e).show()}$("#settings_block_"+e+" .dialog_save_cancel_buttons").loadingSpinner(false)},uploader_start_mode:a,preventModeSwitching:t})};h24core.prototype.block.StandardTextBlock.openFramesDialog=function(e){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"getFramesDialog"},function(a){var t=a[0];var r=a[1];var i=a[2];var o=a[3];var n=a[4];if(o<500)o=500;o=parseInt(o)+150;$h24.dialog.create("h24_frame_dialog",t,{width:o,title:$h24.phrase.GUIPhrase("Block-StandardText","Frames")});if(r=="")r=[0,0,0,0];$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val(i);$h24.block.StandardTextBlock.initFramesEvents(e);$h24.block.StandardTextBlock.initFrameSliders(e,r,n);if(i=="personal"){$h24.block.StandardTextBlock.initFrameTabs(e,1);$h24.block.StandardTextBlock.loadPersonalFrame(e,true)}else{$h24.block.StandardTextBlock.initFrameTabs(e,0)}})};h24core.prototype.block.StandardTextBlock.initFramesEvents=function(e){$("#h24_frame_"+e+" .h24_frame_list_wrapper").unbind();$("#h24_frame_"+e+" .h24_frame_list_wrapper").each(function(){$(this).mouseover(function(){$(this).addClass("h24_frame_list_hover")}).mouseout(function(){$(this).removeClass("h24_frame_list_hover")});$(this).click(function(){var a=$(this).find("input[name=h24_frame_list_name]").val();$("#h24_frame_"+e+" .h24_frame_list_wrapper").removeClass("h24_frame_list_selected");$(this).addClass("h24_frame_list_selected");$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"getFramePreview",frametype:a},function(t){var r=t[0];var i=t[1];var o=t[2];$("#h24_frame_"+e+" .h24_frame_preview_markup").html(r);$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val(a);$h24.block.StandardTextBlock.updateFrameSliders(e,i,o)})})});$("#h24_frame_"+e+" select[name=h24_frame_personal_border_style]").unbind("change").change(function(a){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-style",a.currentTarget.value)});$("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_padding_top_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_padding_left_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_padding_bottom_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_padding_right_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_width_value]").unbind("blue").blur(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_width_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_personal_border_width_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_personal_border_width_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_personal_border_round_value]").unbind("keyup").keyup(function(a){var t=$h24.block.StandardTextBlock.getInt($(this).val());$("#h24_frame_"+e+" .h24_frame_personal_border_round_slider").slider("option","value",t)});$("#h24_frame_"+e+" input[name=h24_frame_personal_border_color_value]").unbind("blur").blur(function(a){var t=$(this).val();$.farbtastic("#h24_frame_"+e+" .h24_frame_personal_border_color_picker").setColor(t)});$("#h24_frame_"+e+" input[name=h24_frame_personal_background_color_value]").unbind("blur").blur(function(a){var t=$(this).val();$.farbtastic("#h24_frame_"+e+" .h24_frame_personal_background_color_picker").setColor(t)})};h24core.prototype.block.StandardTextBlock.getInt=function(e){if(e=="")return 0;else return parseInt(e)};h24core.prototype.block.StandardTextBlock.saveFrameSettings=function(e){var a=$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val();if(a!=""){var t=parseInt($("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").val());var r=parseInt($("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").val());var i=parseInt($("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").val());var o=parseInt($("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").val());var n=parseInt($("#h24_frame_"+e+" input[name=h24_frame_width_value]").val());var _=$("#h24_frame_"+e+" select[name=h24_frame_align]").val();var l=$(".h24_frame_preview_markup .text_content").width();var s={top:t,right:r,bottom:i,left:o};if(a=="personal"){var d=parseInt($("#h24_frame_"+e+" input[name=h24_frame_personal_border_width_value]").val());var c=$("#h24_frame_"+e+" select[name=h24_frame_personal_border_style]").val();var h=$("#h24_frame_"+e+" input[name=h24_frame_personal_border_color_value]").val();var f=$("#h24_frame_"+e+" input[name=h24_frame_personal_border_round_value]").val();var m=$("#h24_frame_"+e+" input[name=h24_frame_personal_background_color_value]").val();var p={bw:d,bs:c,bc:h,br:f,bgc:m}}else{var p=""}}else{var s="";var p="";var l=0}$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"saveFrameSettings",frametype:a,padding:s,width:n,align:_,personal:p,max_inside_width:l},function(e){$h24.dialogs.h24_frame_dialog.close();reloadColumns()})};h24core.prototype.block.StandardTextBlock.initFrameSliders=function(e,a,t){$("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").val(a[0]);$("#h24_frame_"+e+" .h24_frame_padding_top_slider").slider({min:0,max:100,value:a[0],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-top",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-top",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").val(t.value)}});$("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").val(a[3]);$("#h24_frame_"+e+" .h24_frame_padding_left_slider").slider({orientation:"vertical",min:0,max:100,value:a[3],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-left",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-left",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").val(t.value)}});$("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").val(a[2]);$("#h24_frame_"+e+" .h24_frame_padding_bottom_slider").slider({min:0,max:100,value:a[2],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-bottom",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-bottom",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").val(t.value)}});$("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").val(a[1]);$("#h24_frame_"+e+" .h24_frame_padding_right_slider").slider({orientation:"vertical",min:0,max:100,value:a[1],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-right",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").css("padding-right",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").val(t.value)}});$("#h24_frame_"+e+" input[name=h24_frame_width_value]").val(t["width"]);$("#h24_frame_"+e+" .h24_frame_width_slider").slider({min:t["min"],max:t["max"],value:t["width"],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_width").css("width",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_width_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_width").css("width",t.value+"px");var r=$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_padding").width();$("#h24_frame_"+e+" .h24_frame_preview .text_content").width(r);$("#h24_frame_"+e+" input[name=h24_frame_width_value]").val(t.value)}})};h24core.prototype.block.StandardTextBlock.initPersonalFrameSliders=function(e,a){$("#h24_frame_"+e+" input[name=h24_frame_personal_border_width_value]").val(a["bw"]);$("#h24_frame_"+e+" .h24_frame_personal_border_width_slider").slider({min:0,max:50,value:a["bw"],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-width",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_personal_border_width_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-width",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_personal_border_width_value]").val(t.value)}});$("#h24_frame_"+e+" input[name=h24_frame_personal_border_round_value]").val(a["br"]);$("#h24_frame_"+e+" .h24_frame_personal_border_round_slider").slider({min:0,max:100,value:a["br"],slide:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-radius",t.value+"px");$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("-moz-border-radius",t.value+"px");$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("-webkit-border-radius",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_personal_border_round_value]").val(t.value)},change:function(a,t){$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-radius",t.value+"px");$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("-moz-border-radius",t.value+"px");$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("-webkit-border-radius",t.value+"px");$("#h24_frame_"+e+" input[name=h24_frame_personal_border_round_value]").val(t.value)}})};h24core.prototype.block.StandardTextBlock.updateFrameSliders=function(e,a,t){$("#h24_frame_"+e+" input[name=h24_frame_padding_top_value]").val(a[0]);$("#h24_frame_"+e+" .h24_frame_padding_top_slider").slider("option","value",a[0]);$("#h24_frame_"+e+" input[name=h24_frame_padding_left_value]").val(a[3]);$("#h24_frame_"+e+" .h24_frame_padding_left_slider").slider("option","value",a[3]);$("#h24_frame_"+e+" input[name=h24_frame_padding_bottom_value]").val(a[2]);$("#h24_frame_"+e+" .h24_frame_padding_bottom_slider").slider("option","value",a[2]);$("#h24_frame_"+e+" input[name=h24_frame_padding_right_value]").val(a[1]);$("#h24_frame_"+e+" .h24_frame_padding_right_slider").slider("option","value",a[1]);$("#h24_frame_"+e+" input[name=h24_frame_width_value]").val(t["width"]);$("#h24_frame_"+e+" .h24_frame_width_slider").slider("option","min",t["min"]);$("#h24_frame_"+e+" .h24_frame_width_slider").slider("option","max",t["max"]);$("#h24_frame_"+e+" .h24_frame_width_slider").slider("option","value",t["width"])};h24core.prototype.block.StandardTextBlock.initFrameTabs=function(e,a){$("#h24_frame_tab_"+e).tabs().tabs("option","active",a);$h24.block.StandardTextBlock.selectTabHeader(e,a)};h24core.prototype.block.StandardTextBlock.selectTabHeader=function(e,a){if(a==0){$("#h24_frame_"+e+" .h24_frame_header_tab1").show();$("#h24_frame_"+e+" .h24_frame_header_tab2").hide()}else{$("#h24_frame_"+e+" .h24_frame_header_tab1").hide();$("#h24_frame_"+e+" .h24_frame_header_tab2").show()}};h24core.prototype.block.StandardTextBlock.removeSelectedFrameCss=function(e){$h24.block.StandardTextBlock.selectTabHeader(e,0);var a=$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val();if(a=="personal"){$("#h24_frame_"+e+" .h24_frame_list_wrapper").removeClass("h24_frame_list_selected")}};h24core.prototype.block.StandardTextBlock.loadPersonalFrame=function(e,a){$h24.block.StandardTextBlock.selectTabHeader(e,1);$("#h24_frame_personal_tab_"+e).tabs();var t=$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val();if(t=="personal"&&a!=true)return;$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"getPersonalFrameSettings"},function(a){var t=a[0];var r=a[1];var i=a[2];var o=a[3];$("#h24_frame_"+e+" .h24_frame_preview_markup").empty().html(t);$h24.block.StandardTextBlock.updateFrameSliders(e,r,i);$("#h24_frame_"+e+" input[name=h24_frame_selected_name]").val("personal");if(o!=false){$h24.block.StandardTextBlock.initPersonalFrameSliders(e,o);$("#h24_frame_"+e+" select[name=h24_frame_personal_border_style]").val(o["bs"]);if(!o["bc"])o["bc"]="#000000";$("#h24_frame_"+e+" input[name=h24_frame_personal_border_color_value]").val(o["bc"]);$("#h24_frame_"+e+" .h24_frame_personal_border_color_picker").farbtastic(function(a){$("#h24_frame_"+e+" input[name=h24_frame_personal_border_color_value]").val(a);$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("border-color",a)});$.farbtastic("#h24_frame_"+e+" .h24_frame_personal_border_color_picker").setColor(o["bc"]);if(!o["bgc"])o["bgc"]="#ffffff";$("#h24_frame_"+e+" input[name=h24_frame_personal_background_color_value]").val(o["bgc"]);$("#h24_frame_"+e+" .h24_frame_personal_background_color_picker").farbtastic(function(a){$("#h24_frame_"+e+" input[name=h24_frame_personal_background_color_value]").val(a);$("#h24_frame_"+e+" .h24_frame_preview .h24_frame_personal_style").css("background-color",a)});$.farbtastic("#h24_frame_"+e+" .h24_frame_personal_background_color_picker").setColor(o["bgc"])}})};h24core.prototype.block.StandardTextBlock.imageDatabase=function(e){$h24.image_database.open({uploadCallback:function(a){$h24.block.StandardTextBlock.updateStandardTextBlockImageSettings(e,a)}})};h24core.prototype.block.StandardTextBlock.updateStandardTextBlockImageSettings=function(e,a){if(a>0){$("#settings_block_"+e+"_hidden").val(a);$("#settings_block_"+e+" input[name=showimage]").attr("checked","checked");$h24.post($h24.slashwebroot+"Block/Communicator",{blockid:e,modelaction:"getImageData",pictureid:a},function(a){if(a.successful){var t=$("#settings_block_"+e+"_size_controls"),r=t.find(".slider_controls"),i=r.find(".h24_slider"),o=r.find("input[name=size]"),n=parseInt(o.data("collectionsize"),10),_=parseInt(a.width,10),l=n<_?n:_;if(o.val()==i.slider("option","max")){o.val(l)}o.data("imagewidth",_);i.slider("option","max",l);i.slider("value",i.slider("value"))}})}$h24.block.loadTemporaryImage(e,false);$("#settings_block_"+e).addClass("h24_modified_settings");$("#text_block_image_"+e).show()};
h24core.prototype.block.StandardGalleryBlock=function(e,a){var t=this;this.innerblocktype="StandardGalleryBlock";this.blockid=a;this.currentCategory=-1;this.BCPActions={imageManagerUploadTab:function(e){showDialog("#image_manager",0);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory)}else{loadImageManagerTabs(e.currentCategory,e.currentCategory)}},imageManagerCategoriesTab:function(e){showDialog("#image_manager",1);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory)}else{loadImageManagerTabs(e.currentCategory,e.currentCategory)}},blockSettings:function(){var a=true;if(a&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.settingsDialog(this.blockid,560)}},deleteBlock:function(){e.image_manager.galleryDelete(this.blockid)}};var r=false;this.angularBlockServiceListener=function(o,i){switch(o){case"CategoryChanged":t.currentCategory=i;r=true;break;case"Reload":r=true;break;case"SettingsSaved":if(r){e.block.reloadBlock(a);r=false}break}}};
h24core.prototype.block.CustomHTMLBlock=function(o,t){this.innerblocktype="CustomHTMLBlock";this.blockid=t;this.sidepanel=false;this.BCPActions={editHtml:function(){o.block.CustomHTMLBlock.openEditor(this.blockid)}}};h24core.prototype.block.CustomHTMLBlock.openEditor=function(o){$h24.editors.blockHtml(o,function(t,l,c,e){switch(e){case"save":var i=t.val();var a=l.val();$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:o,title:i,content:a,modelaction:"update"},function(t){$h24.block.reloadBlock(o)});$("#custom_html_block_"+c.blockid+"_title").val(i);$("#custom_html_block_"+c.blockid+"_content").val(a);break;case"save_and_close":var i=t.val();var a=l.val();$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:o,title:i,content:a,modelaction:"update"},function(t){$h24.block.reloadBlock(o);closeDialogBox();$h24.editors.unbind()});$("#custom_html_block_"+c.blockid+"_title").val(i);$("#custom_html_block_"+c.blockid+"_content").val(a);break;case"cancel":closeDialogBox();$h24.editors.unbind();break}})};
h24core.prototype.block.UserFileBlock=function(e,t){this.innerblocktype="UserFileBlock";this.blockid=t;this.sidepanel=false;this.initPrompt=function(i,o){reloadColumn(o,function(){e.block.UserFileBlock.settings(t)})};this.BCPActions={fileManager:function(){e.file_manager.openDialog(this.blockid)}}};h24core.prototype.block.UserFileBlock.upload=function(e){$h24.file_manager.dialog({blockid:e,tab:0})};h24core.prototype.block.UserFileBlock.manage=function(e){$h24.file_manager.dialog({blockid:e,tab:1})};h24core.prototype.block.UserFileBlock.initMultiSelect=function(e){$("#settings_block_"+e+" select[name=user_file_ids]").multiSelect({selectAllText:$h24.phrase.GUIPhrase("Block-UserFile","All my files"),noneSelected:$h24.phrase.GUIPhrase("Block-UserFile","All my files"),oneOrMoreSelected:"% "+$h24.phrase.GUIPhrase("Block-UserFile","files selected")})};h24core.prototype.block.UserFileBlock.initRadioClicked=function(e,t){if(t!=0){$("#init_block_"+e+" ul.h24_file_list").addClass("make_opacity").find("input").attr("disabled","disabled");$("#init_block_"+e+" a.selectall").aDisable();$("#init_block_"+e+" ul.h24_file_list input").each(function(e){this.checked=false})}else{$("#init_block_"+e+" ul.h24_file_list").removeClass("make_opacity").find("input").removeAttr("disabled");$("#init_block_"+e+" a.selectall").aEnable()}if(t==2){$("#block_"+e+"_init_save_or_open_fm .h24_ufb_init_upload_text").show();$("#block_"+e+"_init_save_or_open_fm .h24_ufb_init_save_text").hide()}else{$("#block_"+e+"_init_save_or_open_fm .h24_ufb_init_save_text").show();$("#block_"+e+"_init_save_or_open_fm .h24_ufb_init_upload_text").hide()}};h24core.prototype.block.UserFileBlock.initSelectAll=function(e){$("#init_block_"+e+" ul.h24_file_list input").each(function(e){this.checked=true})};h24core.prototype.block.UserFileBlock.initUploader=function(e){$h24.uploader.create("file","block_"+e+"_uploader",{file_queue_limit:5,file_types:"*.*",file_types_description:$h24.phrase.GUIPhrase("Block-UserFile","All files"),file_size_limit:"150MB",restart_iframe_uploaders:true,background_decoration:true,before_upload:function(t,i){if(!i){$("#settings_block_"+e+" td.multiple_select_container").css("visibility","hidden");$("#block_"+e+"_save_button").hide()}},uploads_complete:function(t,i){$("#settings_block_"+e+" td.multiple_select_container").css("visibility","visible");$("#block_"+e+"_save_button").show();if(typeof i=="undefined"){var o={};$("#settings_block_"+e+" td.multiple_select_container input[name=user_file_ids]").each(function(e){o[$(this).val()]=this.checked});var l=this.uploaded_file_ids;for(var s=0;s<l.length;s++){var n=parseInt(l[s]);o[n]=true}var c=$('<select name="user_file_ids" multiple="multiple" />');$("#settings_block_"+e+" td.multiple_select_container").empty().append(c);$h24.file_manager.generateHTMLFileList(c,"*.*",function(){$(this).find("option").each(function(e){var t=$(this).val();if(typeof o[t]=="boolean")if(o[t])$(this).attr("selected","selected")});$h24.block.UserFileBlock.initMultiSelect(e)})}}})};h24core.prototype.block.UserFileBlock.settings=function(e){var t;$h24.block.previewSettingsDialog(e,{onReady:function(){var i=$("#settings_block_"+e);var o=$("#settings_block_"+e+" div.h24_block_userfile_jstree");var l=$("#settings_block_"+e+" input[name=jsTreeJson]").val();var s=JSON.parse(l);o.hide();i.loadingSpinner(true);i.loadingSpinner(true);o.jstree({themes:{theme:"default-h24"},json_data:{data:s,progressive_render:true},types:{types:{root:{hover_node:false,select_node:false,icon:{image:$h24.publicdir+"css/common/images/fugue3/drive.png"}},folder:{hover_node:false,select_node:false,icon:{image:$h24.publicdir+"css/common/images/fugue3/folder-horizontal-open.png"}},file:{hover_node:false,select_node:false,icon:{image:$h24.publicdir+"css/common/images/fugue3/document.png"}}}},sort:function(e,t){return this.get_text(e).toLowerCase()>this.get_text(t).toLowerCase()?1:-1},checkbox:{override_ui:true},plugins:["themes","json_data","ui","types","checkbox","sort"]}).bind("loaded.jstree",function(){i.loadingSpinner(false);o.find("ul:first > li:first > ins").remove();o.show()}).bind("change_state.jstree",function(){clearTimeout(t);t=setTimeout(function(){$h24.block.UserFileBlock.saveTreeSettings(e)},1e3)});i.find("a.h24_javascript_link").click(function(t){t.preventDefault();var i=$(this);var o=i.attr("name");switch(o){case"manageFiles":$h24.dialogs["block_"+e+"_settings_dialog"].close();$h24.file_manager.openDialog(e,true);break}});i.find("input.save_parameter, select.save_parameter").each(function(){var t=$(this);var i=t.attr("name");if(i=="icon_setting"||i=="sorting"){t.change(function(){$h24.block.UserFileBlock.saveDisplaySettings(e)})}})},dialogSettings:{width:540}})};h24core.prototype.block.UserFileBlock.getJsTreeSelectedNodes=function(e){var t=$("#settings_block_"+e+" div.h24_block_userfile_jstree");var i=new Array;t.jstree("get_checked").each(function(e,o){var l=t.jstree("get_json",$(this))[0];var s=l.metadata.id;var n=l.metadata.type;i[i.length]={id:s,type:n}});return i};h24core.prototype.block.UserFileBlock.saveTreeSettings=function(e){var t=$h24.block.UserFileBlock.getJsTreeSelectedNodes(e);$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,__skip_loading_overlay:true,modelaction:"save_tree_settings",nodes:t},function(t){$h24.block.reloadBlock(e)})};h24core.prototype.block.UserFileBlock.saveDisplaySettings=function(e){var t=$("#settings_block_"+e);var i=t.find("input[name=icon_setting]:checked").val();var o=t.find("select[name=sorting]").val();$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,__skip_loading_overlay:true,modelaction:"save_display_settings",iconSetting:i,sorting:o},function(t){$h24.block.reloadBlock(e)})};
h24core.prototype.block.YouTubeBlock=function(e,o){this.innerblocktype="YouTubeBlock";this.blockid=o;this.settings=null;var t=this;e.addToExecOnInit(this,function(){if(this.settings==null)return;if(this.settings.flash_player_type==0){var o={paramXMLPath:e.slashwebroot+"Block/Common-Communicator/blockid/"+this.blockid+"/modelaction/xml_params",initialURL:escape(document.location)};var t={quality:"best",bgcolor:"#121212",allowfullscreen:"true",wmode:"transparent"};var i={};swfobject.embedSWF(e.publicdir+"js/slideshowpro/slideshowpro.swf",this.settings.placeholder,this.settings.width,this.settings.height,"9.0.0",false,o,t,i)}else if(this.settings.flash_player_type==1&&$("#block_"+this.blockid+"_flowplayer").length){if(this.settings.punydomain)this.settings.flowplayer_baseurl=this.settings.host;else this.settings.flowplayer_baseurl="";if(!this.settings.popup){flowplayer("block_"+this.blockid+"_flowplayer",{src:this.settings.flowplayer_baseurl+e.publicdir+"js/flowplayer-3.2.6/flowplayer-3.2.6.swf",wmode:"transparent"},{clip:{scaling:"fit"},canvas:{background:"transparent none inherit inherit inherit"},plugins:{controls:{url:this.settings.flowplayer_baseurl+e.publicdir+"js/flowplayer-3.2.6/flowplayer.controls-3.2.4.swf",autoHide:"always",hideDelay:1e3,volumeSliderGradient:"none",progressColor:"#bababa",timeColor:"#bababa",borderRadius:"0px",backgroundGradient:[.6,.3,0,0,0],tooltipColor:"#777777",buttonOverColor:"#777777",volumeSliderColor:"#000000",bufferGradient:"none",progressGradient:"medium",buttonColor:"#949494",tooltipTextColor:"#ffffff",durationColor:"#b5b5b5",backgroundColor:"#222222",sliderColor:"#666666",sliderGradient:"none",bufferColor:"#666666",timeBgColor:"#555555",height:24,opacity:1}},onBeforeUnload:function(){return false}})}}});this.BCPActions={blockSettings:function(){var o=true;if(o&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",t.blockid)}else{e.block.YouTubeBlock.settings(t.blockid)}}};this.angularBlockServiceListener=function(t,i){switch(t){case"SettingsSaved":e.block.reloadBlock(o);break}};this.angularBlockServiceResponder=function(e,o){switch(e){case"Boundaries":var i=$("#block_"+t.blockid);return{collectionSize:parseInt(i.closest(".h24_collection").width(),10)};break}}};h24core.prototype.block.YouTubeBlock.settings=function(e){$h24.block.settingsDialog(e,{onReady:function(){var o=$("#settings_block_"+e);$h24.block.YouTubeBlock.initUploader(e);o.find(".h24_ytb_color_1").click(function(){var t=o.find("input[name=color1]"),i=$("#block_"+e+"_color1_preview");$h24.utils.colorPicker({color:t.val(),saveCallback:function(e){t.val(e),i.css("background-color",e)},allowTransparency:false});return false});o.find(".h24_ytb_color_2").click(function(){var t=o.find("input[name=color2]"),i=$("#block_"+e+"_color2_preview");$h24.utils.colorPicker({color:t.val(),saveCallback:function(e){t.val(e),i.css("background-color",e)},allowTransparency:false});return false});o.find(".h24_ytb_vimeo_color").click(function(){var t=o.find("input[name=vimeo_color]"),i=$("#block_"+e+"_vimeo_color_preview");$h24.utils.colorPicker({color:t.val(),saveCallback:function(e){t.val(e),i.css("background-color",e)},allowTransparency:false});return false});o.find('input[name="video_url"]').inputTimeout({onTimeout:function(t){if(t!=""){$h24.block.YouTubeBlock.getVideoSettings(e,t);o.find(".h24_loading_message").show()}}});var t,i,l;o.find('input[name="video_url"]').bind("keyup paste",function(){var n=$(this);clearTimeout(t);t=setTimeout(function(){i=n.val();if(i==""){clearTimeout(t)}else if(l!=i){$h24.block.YouTubeBlock.getVideoSettings(e,i);o.find(".h24_loading_message").show()}l=i},500)})},onClose:function(){$h24.coreUploader.destroy("video_block_settings");this.close()},dialogSettings:{width:670}})};h24core.prototype.block.YouTubeBlock.file_manager=function(e){$h24.file_manager.openDialog()};h24core.prototype.block.YouTubeBlock.getVideoSettings=function(e,o){$("#block_"+e+"_error_msg").hide();$h24.post($h24.publicdir+"../Block/Edit-Communicator/blockid/"+e,{modelaction:"extract",url:o,__skip_loading_overlay:true},function(o){$("#settings_block_"+e+" .h24_loading_message").hide();var t=o.split("/");if(t[1]=="1"){if(t[3]==0){$("#settings_block_"+e+" table.vimeo").hide();$("#settings_block_"+e+" table.youtube").show();$("#settings_block_"+e+" input[name=video_type]").val("0");$("#settings_block_"+e+" input[name=v]").val(t[5])}else if(t[3]==1){$("#settings_block_"+e+" table.youtube").hide();$("#settings_block_"+e+" table.vimeo").show();$("#settings_block_"+e+" input[name=video_type]").val("1");$("#settings_block_"+e+" input[name=vimeo_clip_id]").val(t[5])}}else{$("#block_"+e+"_error_msg").show()}})};h24core.prototype.block.YouTubeBlock.getVideoDimensions=function(e){var o=$("#settings_block_"+e+" select[name=user_file_id] option:selected").val();if(isNaN(o)||o==0)return;$("#settings_block_"+e+" input[name=file_width]").attr("disabled","disabled");$("#settings_block_"+e+" input[name=file_height]").attr("disabled","disabled");$h24.get($h24.publicdir+"../Block/Edit-Communicator/blockid/"+e,{modelaction:"dimensions",user_file_id:o},function(o){var t=o.split("/");$("#settings_block_"+e+" input[name=file_width]").removeAttr("disabled");$("#settings_block_"+e+" input[name=file_height]").removeAttr("disabled");if(t[1]=="1"){var i=t[3];var l=t[5];$("#settings_block_"+e+" input[name=file_width]").val(i);$("#settings_block_"+e+" input[name=file_height]").val(l)}else{alert($h24.phrase.GUIPhrase("Dialog-Linking","Sorry, we could not determine the dimensions automatically."))}})};h24core.prototype.block.YouTubeBlock.setYoutubeSize=function(e,o,t){$("#settings_block_"+e+" table.youtube input[name=youtube_width]").val(o);$("#settings_block_"+e+" table.youtube input[name=youtube_height]").val(t)};h24core.prototype.block.YouTubeBlock.setVimeoSize=function(e,o,t){$("#settings_block_"+e+" table.vimeo input[name=vimeo_width]").val(o);$("#settings_block_"+e+" table.vimeo input[name=vimeo_height]").val(t)};h24core.prototype.block.YouTubeBlock.setVideoType=function(e,o){if(o==0){$("#block_"+e+"_web").show();$("#block_"+e+"_file").hide()}else{$("#block_"+e+"_file").show();$("#block_"+e+"_web").hide()}};h24core.prototype.block.YouTubeBlock.fileVideoAutoStartChanged=function(e,o){var t=$(o).find("option:selected").val();if(t=="On"){$("#block_"+e+"_caption").hide();$("#block_"+e+"_popup").hide();$("#block_"+e+"_popup select[name=popup] option[value=0]").attr("selected","selected")}else{$("#block_"+e+"_caption").show();$("#block_"+e+"_popup").show()}};h24core.prototype.block.YouTubeBlock.initUploader=function(e){$h24.coreUploader.create("video_block_settings",$("#block_"+e+"_uploader"),{maxQueuedFiles:1,type:"default",mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"150mb",pluploaderOptions:{filters:[$h24.coreUploader.MOVIE_FILES_FILTER]},beforeUpload:function(){$("#block_"+e+"_settings_save_and_close").addClass("h24_disabled_button")},fileUploaded:function(o){if(typeof o.metadata.width!="undefined"&&typeof o.metadata.height!="undefined"){$("#settings_block_"+e+' input[name="file_width"]').val(o.metadata.width);$("#settings_block_"+e+' input[name="file_height"]').val(o.metadata.height)}},allFilesUploaded:function(){var o=$("#settings_block_"+e+" select[name=user_file_id]");$("#block_"+e+"_settings_save_and_close").removeClass("h24_disabled_button");$h24.file_manager.generateHTMLFileList(o,"*.flv;*.f4v;*.mov;*.mp4")}})};
h24core.prototype.block.SlideShowProBlock=function(e,o){this.innerblocktype="SlideShowProBlock";this.blockid=o;this.settings=null;this.sidepanel=false;e.addToExecOnInit(this,function(){var o={paramXMLPath:this.settings.host+e.slashwebroot+"Block/Common-Communicator/blockid/"+this.blockid+"/modelaction/xml_params",initialURL:escape(document.location.href)};var t={quality:"best",bgcolor:"#121212",allowfullscreen:"true",wmode:"transparent"};var l={};swfobject.embedSWF(this.settings.host+e.publicdir+"js/slideshowpro/slideshowpro-1.9.8.6.swf",this.settings.placeholder,this.settings.width,this.settings.height,"9.0.0",false,o,t,l)});this.initPrompt=function(o,t){var l=this.blockid;e.get(e.slashwebroot+"Block/Init-Prompt/",{blockid:l},function(o){if(o!=""){e.dialog.create("block_init_prompt",o,{width:600,noCloseFlap:true,overlayZIndex:3800});$("#block_init_prompt select[name=commoncategoryids]").multiSelect({selectAllText:e.phrase.GUIPhrase("Image-Manager","All my categories"),noneSelected:e.phrase.GUIPhrase("Image-Manager","All my categories"),oneOrMoreSelected:"% "+e.phrase.GUIPhrase("Image-Manager","categories selected")})}else reloadColumn(t)})};this.BCPActions={imageManagerUploadTab:function(e){showDialog("#image_manager",0);loadImageManagerTabs(e.uploadLinkCategory,e.manageLinkCategory,this.blockid)},imageManagerCategoriesTab:function(e){showDialog("#image_manager",1);loadImageManagerTabs(e.uploadLinkCategory,e.manageLinkCategory)}}};h24core.prototype.block.SlideShowProBlock.pickColor=function(blockid,default_color,input,preview,exec){if(typeof default_color!="string")default_color=$(input).val();$h24.utils.colorPicker({color:default_color,saveCallback:function(color){$(input).val(color);$(preview).css("background-color",color);eval(exec)},allowTransparency:false})};h24core.prototype.block.SlideShowProBlock.initSettingsOk=function(e){var o=$("#block_init_prompt input[name=category_choice]:checked").val();if(o=="new_category"){var t=$("#block_init_prompt input[name=category_name]").val();$h24.dialogs.block_init_prompt.close();showDialog("#image_manager");loadImageManagerTabs(0,0,e,1,t)}else{var l=$h24.utils.getParameters($h24.dialogs.markup,".save_parameter");var a={blockid:e,modelaction:"save_init_settings",save_parameters:l};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",a,function(e){if(!e.successful&&$h24.devmode)console.log(e);else reloadColumn(e.collection);$h24.dialogs.block_init_prompt.close()})}};h24core.prototype.block.SlideShowProBlock.initSelectRadio=function(e,o){if(o=="new_category"){$("#h24_block_"+e+"_init_category_choice_0")[0].checked=true}else{$("#h24_block_"+e+"_init_category_choice_1")[0].checked=true}};h24core.prototype.block.SlideShowProBlock.settings=function(e){$h24.block.settingsDialog(e,{onReady:function(){$h24.block.SlideShowProBlock.initSettings(e)},dialogSettings:{width:910}})};h24core.prototype.block.SlideShowProBlock.file_manager=function(e){$h24.file_manager.openDialog(null,null,function(){var o=$("#settings_block_"+e+"_tab_8 select[name=music_user_file_id]");$h24.file_manager.generateHTMLFileList(o,"*.mp3");closeDialogBox()})};h24core.prototype.block.SlideShowProBlock.initSettings=function(e,o){$("#settings_block_"+e+" select[name=commoncategoryids]").multiSelect({selectAllText:$h24.phrase.GUIPhrase("Image-Manager","All my categories"),noneSelected:$h24.phrase.GUIPhrase("Image-Manager","All my categories"),oneOrMoreSelected:"% "+$h24.phrase.GUIPhrase("Image-Manager","categories selected")});if(typeof o=="undefined")var o=0;$("#settings_block_"+e+"_tabs").tabs().tabs("option","active",o);$h24.block.SlideShowProBlock.navAppearanceSelected(e);$h24.block.SlideShowProBlock.transitionEffectSelected(e);$h24.block.SlideShowProBlock.navLinkAppearanceSelected(e);$h24.block.SlideShowProBlock.navLinkPreviewAppearanceSelected(e);$h24.block.SlideShowProBlock.galleryAppearanceSelected(e);$("#settings_block_"+e+" a.preview").hoverPreview({attr:"rel"})};h24core.prototype.block.SlideShowProBlock.galleryAppearanceSelected=function(e){var o=$("#settings_block_"+e+" select[name=galleryAppearance] option:selected").val();switch(o){case"Closed at Startup":case"Open at Startup":$("#settings_block_"+e+" tr.toggle_with_gallery_appearance").show();break;case"Hidden":$("#settings_block_"+e+" tr.toggle_with_gallery_appearance").hide();break}};h24core.prototype.block.SlideShowProBlock.transitionEffectSelected=function(e){var o=$("#settings_block_"+e+" select[name=transitionStyle] option:selected").val();switch(o){case"Dissolve":case"Push":case"Wipe":case"Wipe to Background":$("#settings_block_"+e+" tr.transition_direction_tr").show();$("#settings_block_"+e+" tr.toggle_with_transition_effect").show();break;case"Blur":case"Cross Fade":case"Complete Fade":case"Fade to Background":case"Drop":case"Lens":case"Photo Flash":$("#settings_block_"+e+" tr.transition_direction_tr").hide();$("#settings_block_"+e+" tr.toggle_with_transition_effect").show();break;case"None":$("#settings_block_"+e+" tr.transition_direction_tr").hide();$("#settings_block_"+e+" tr.toggle_with_transition_effect").hide();break}};h24core.prototype.block.SlideShowProBlock.navLinkAppearanceSelected=function(e){var o=$("#settings_block_"+e+" select[name=navLinkAppearance] option:selected").val();var t=$("#settings_block_"+e+" select[name=navAppearance] option:selected").val();var l=true;if(t=="Hidden")l=false;switch(o){case"Thumbnails":if(l)$("#settings_block_"+e+" tr.thumbnail_link_size_tr").show();$("#settings_block_"+e+" tr.number_link_size_tr").hide();$("#settings_block_"+e+" tr.number_link_color_tr").hide();break;case"Numbers":$("#settings_block_"+e+" tr.thumbnail_link_size_tr").hide();if(l)$("#settings_block_"+e+" tr.number_link_size_tr").show();if(l)$("#settings_block_"+e+" tr.number_link_color_tr").show();break}};h24core.prototype.block.SlideShowProBlock.navLinkPreviewAppearanceSelected=function(e){var o=$("#settings_block_"+e+" select[name=navLinkPreviewAppearance] option:selected").val();var t=$("#settings_block_"+e+" select[name=navAppearance] option:selected").val();var l=true;if(t=="Hidden")l=false;switch(o){case"Visible":if(l)$("#settings_block_"+e+" tr.link_preview_size").show();break;case"Hidden":$("#settings_block_"+e+" tr.link_preview_size").hide();break}};h24core.prototype.block.SlideShowProBlock.navAppearanceSelected=function(e){var o=$("#settings_block_"+e+" select[name=navAppearance] option:selected").val();switch(o){case"Hidden":$("#settings_block_"+e+" tr.toggle_with_nav_appearance").hide();break;case"Hidden When Gallery Open":case"Always Visible":$("#settings_block_"+e+" tr.toggle_with_nav_appearance").show();break}$h24.block.SlideShowProBlock.navLinkPreviewAppearanceSelected(e);$h24.block.SlideShowProBlock.navLinkAppearanceSelected(e)};h24core.prototype.block.SlideShowProBlock.preloaderAppearanceSelected=function(e){var o=$("#settings_block_"+e+" select[name=feedbackPreloaderAppearance] option:selected").val();if(o=="Hidden")$("#settings_block_"+e+" tr.preloader_alignment").hide();else $("#settings_block_"+e+" tr.preloader_alignment").show()};h24core.prototype.block.SlideShowProBlock.navButtonsAppearanceChecked=function(e){var o=$("#settings_block_"+e+" input[name=navButtonsAppearance_nav]")[0].checked;if(!o)$("#settings_block_"+e+" input[name=navButtonsAppearance_nav]").attr("checked","checked")};h24core.prototype.block.SlideShowProBlock.navButtonsAppearanceNavChecked=function(e){var o=$("#settings_block_"+e+" input[name=navButtonsAppearance_nav]")[0].checked;if(!o)$("#settings_block_"+e+" .nav_buttons_appearance_toggle").removeAttr("checked")};h24core.prototype.block.SlideShowProBlock.albumBackgroundColorSet=function(e){var o=$("#block_"+e+"_al_bg_col").val();var t=$h24.utils.endarkenColor(o,20);var l=$h24.utils.endarkenColor(o,25);var a=$h24.utils.getReadibleTextColor(o);$("#block_"+e+"_al_str_col").val(t);$("#block_"+e+"_al_str_col_preview").css("background-color",t);$("#block_"+e+"_al_ro_col").val(l);$("#block_"+e+"_al_ro_col_preview").css("background-color",l);$("#block_"+e+"_al_desc_col").val(a);$("#block_"+e+"_al_desc_col_preview").css("background-color",a);$("#block_"+e+"_al_tit_col").val(a);$("#block_"+e+"_al_tit_col_preview").css("background-color",a)};h24core.prototype.block.SlideShowProBlock.contentAreaBackgroundColor=function(e){var o=$("#block_"+e+"_cont_bg_col").val();var t=$h24.utils.endarkenColor(o,20);$("#block_"+e+"_cont_str_col").val(t);$("#block_"+e+"_cont_str_col_preview").css("background-color",t);$("#block_"+e+"_cont_fr_col").val(o);$("#block_"+e+"_cont_fr_col_preview").css("background-color",o);$h24.block.SlideShowProBlock.contentAreaFrameColor(e)};h24core.prototype.block.SlideShowProBlock.contentAreaFrameColor=function(e){var o=$("#block_"+e+"_cont_fr_col").val();var t=$h24.utils.endarkenColor(o,20);$("#block_"+e+"_cont_fr_str_col").val(t);$("#block_"+e+"_cont_fr_str_col_preview").css("background-color",t)};
h24core.prototype.block.AudioPlayerBlock=function(e,o){this.innerblocktype="AudioPlayerBlock";this.blockid=o;this.settings=null;var l=this;this.adjustForNewCollection=function(e,o){$("#block_"+this.blockid+" object").width(e);return true};this.init=function(){var o={bgcolor:"#FFFFFF",wmode:"transparent",menu:"false"};var i={playerID:"block_"+l.blockid+"_flash_placeholder",autostart:l.settings.autostart,checkpolicy:l.settings.checkpolicy,soundFile:l.settings.url};var a={name:"block_"+l.blockid+"_flash_placeholder",style:"outline: none"};if(!e.block.AudioPlayerBlock.isFlashSupported()||l.settings.defaultPlayer!="flash"&&e.block.AudioPlayerBlock.isHtml5AudioSupported()){$("#block_"+l.blockid+"_audio_placeholder").width(l.settings.width).show();$("#block_"+l.blockid+"_flash_placeholder").remove();if(l.settings.autostart=="yes"&&e.editmode){$("#block_"+l.blockid+"_audio_placeholder")[0].play()}}else if(e.block.AudioPlayerBlock.isFlashSupported()){$("#block_"+l.blockid+"_audio_placeholder")[0].pause();$("#block_"+l.blockid+"_audio_placeholder").remove();swfobject.embedSWF(e.publicdir+"js/audioplayer/player.swf","block_"+l.blockid+"_flash_placeholder",l.settings.width,"24","9",false,i,o,a)}else{$("#block_"+l.blockid+"_flash_placeholder").show()}};var i=false;this.angularBlockServiceListener=function(o,a){var t=$("#block_"+l.blockid);switch(o){case"changeAudio":var c="block_"+l.blockid+"_flash_placeholder",s="block_"+l.blockid+"_audio_placeholder",r=a.url,n=a.autostart,d=a.userFileId;if($("#"+c).length==1){AudioPlayer.load(c,r);if(n&&d>0){AudioPlayer.open(c)}}else if($("#"+s).length==1){var u=$("#"+s);var p=u[0];if(u.find("source[type='audio/mpeg']").length==0){i=true}else{u.find("source[type='audio/mpeg']").attr("src",r);p.load();if(n&&d>0){p.play()}else{p.pause()}}}break;case"ReloadBlockOnSave":i=true;break;case"SettingsSaved":if(i){e.block.reloadBlock(l.blockid);i=false}break}};this.BCPActions={blockSettings:function(){var o=true;if(o&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.AudioPlayerBlock.settings(this.blockid)}}}};h24core.prototype.block.AudioPlayerBlock.isFlashSupported=function(e){return swfobject.getFlashPlayerVersion().major!==0};h24core.prototype.block.AudioPlayerBlock.isHtml5AudioSupported=function(e){var o=$("<audio></audio>");if(o.get(0).canPlayType){var l=o.get(0).canPlayType("audio/mpeg;");if(typeof l!="undefined"){if(l=="probably"||l=="maybe"){return true}}var i="mp3";var a=new Audio;var t=typeof a.canPlayType==="function"&&a.canPlayType("audio/mpeg")!=="";if(t){return true}else{var c=document.createElement("audio");return!!(c.canPlayType&&c.canPlayType("audio/mpeg;").replace(/no/,""))}}return false};h24core.prototype.block.AudioPlayerBlock.settings=function(e){$h24.block.settingsDialog(e,{onReady:function(){$h24.block.AudioPlayerBlock.initUploader(e)},onClose:function(){$h24.uploader.destroy("audio_block_settings");this.close()}})};h24core.prototype.block.AudioPlayerBlock.file_manager=function(e){$h24.block.saveSettings(e,{onClose:function(o,l){$h24.uploader.destroy("block_"+e+"_uploader");this.close();$h24.file_manager.openDialog(null,null,function(){reloadColumns(function(){closeDialogBox();$h24.block.AudioPlayerBlock.settings(e)})})}})};h24core.prototype.block.AudioPlayerBlock.initUploader=function(e){$h24.coreUploader.create("audio_block_settings",$("#block_"+e+"_uploader"),{maxQueuedFiles:1,type:"default",mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"150mb",pluploaderOptions:{filters:[{title:"MP3 files",extensions:"mp3"}]},beforeUpload:function(){$("#block_"+e+"_settings_save_and_close").addClass("h24_disabled_button")},allFilesUploaded:function(){var o=$("#settings_block_"+e+" select[name=music_user_file_id]");$h24.file_manager.generateHTMLFileList(o,"*.mp3");$("#block_"+e+"_settings_save_and_close").removeClass("h24_disabled_button")}})};
h24core.prototype.block.CleanGalleryBlock=function(e,i){var a=this;this.innerblocktype="CleanGalleryBlock";this.blockid=i;this.currentCategory=-1;this.sidepanel=true;e.addToExecOnInit(this,function(){if(e.editmode){$("#block_container_"+i+" .h24_sg_imagecontainer").each(function(){var e=$(this);e.hover(function(){e.children(".h24_glrylink").show();e.children(".h24_glrypicnik").show()},function(){e.children(".h24_glrylink").hide();e.children(".h24_glrypicnik").hide()})})}});this.BCPActions={imageManagerUploadTab:function(e){showDialog("#image_manager",0);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory,this.blockid)}else{loadImageManagerTabs(e.currentCategory,e.currentCategory,this.blockid)}},imageManagerCategoriesTab:function(e){showDialog("#image_manager",1);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory)}else{loadImageManagerTabs(e.currentCategory,e.currentCategory)}},blockSettings:function(){var i=true;if(i&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.settingsDialog(this.blockid,560)}},deleteBlock:function(){e.image_manager.galleryDelete(this.blockid)}};this.angularBlockServiceResponder=function(e,i){switch(e){case"Boundaries":var t=$("#block_"+a.blockid);return{collectionSize:parseInt(t.closest(".h24_collection").width(),10)};break}};var t=false;this.angularBlockServiceListener=function(i,o){switch(i){case"SizeChanged":var n=$("#block_"+a.blockid),c=n.closest(".h24_collection").width(),s=n.find("[data-image-container]"),r,h,l,g;switch(o.thumbMode){case 0:s.width(o.size+"px").height(o.size+"px");s.find("img").each(function(){var e=$(this);h=e.data("maxHeight")<o.size?e.data("maxHeight"):o.size;r=e.data("maxWidth")<o.size?e.data("maxWidth"):o.size;if(e.width()>e.height()){e.width(r+"px").height("auto")}else{e.height(h+"px").width("auto")}e.css("marginTop",(parseInt(o.size,10)-parseInt(e.height(),10))/2+"px");e.css("marginLeft",(parseInt(o.size,10)-parseInt(e.width(),10))/2+"px")});break;case 1:var d=parseInt(o.size,10)+parseInt(o.spacing,10);var p=Math.floor((c+parseInt(o.spacing,10))/d);var u=0;s.find("img").width(o.size+"px");s.height("auto");s.each(function(){var e=$(this);if(p==1){e.css("paddingRight",0).width("100%")}else if(u>0&&(u+1)%p==0){e.css("paddingRight",0).width(o.size+"px")}else{e.css("paddingRight",o.spacing+"px").width(o.size+"px")}u++});t=true;break;case 2:s.height(o.size+"px").width("auto");s.find("img").each(function(){var e=$(this);h=e.data("maxHeight")<o.size?e.data("maxHeight"):o.size;e.height(h+"px").width("auto")});break}t=true;break;case"SpacingChanged":var n=$("#block_"+a.blockid),c=n.closest(".h24_collection").width(),s=n.find("[data-image-container]");n.css("marginBottom","-"+o.spacing+"px");s.css("paddingBottom",o.spacing+"px").height(o.size+"px");if(o.thumbMode==1){var d=parseInt(o.size,10)+parseInt(o.spacing,10);var p=Math.floor((c+parseInt(o.spacing,10))/d);var u=0;s.each(function(){var e=$(this);if(p==1){e.css("paddingRight",0).width("100%")}else if(u>0&&(u+1)%p==0){e.css("paddingRight",0).width(o.size+"px")}else{e.css("paddingRight",o.spacing+"px").width(o.size+"px")}u++})}else{s.css("paddingRight",o.spacing+"px")}break;case"PicturesPerPageChanged":var n=$("#block_"+a.blockid);n.find("[data-image-container]:gt("+(parseInt(o,10)-1)+")").hide();n.find("[data-image-container]:lt("+o+")").show();t=true;break;case"CategoryChanged":a.currentCategory=o;t=true;break;case"SortingChanged":case"ThumbModeChanged":t=true;break;case"SettingsSaved":if(t){e.block.reloadBlock(a.blockid);t=false}break}}};h24core.prototype.block.CleanGalleryBlock.initSettingsOk=function(e){var i=$("#block_init_prompt input[name=category_choice]:checked").val();if(i=="new_category"){var a=$("#block_init_prompt input[name=category_name]").val();$h24.dialogs.block_init_prompt.close();showDialog("#image_manager");loadImageManagerTabs(0,0,e,1,a)}else{var t=$h24.utils.getParameters($h24.dialogs.markup,".save_parameter");var o={blockid:e,modelaction:"save_init_settings",save_parameters:t};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",o,function(e){if(!e.successful&&$h24.devmode)console.log(e);else reloadColumn(e.collection);$h24.dialogs.block_init_prompt.close()})}};h24core.prototype.block.CleanGalleryBlock.initSelectRadio=function(e,i){if(i=="new_category"){$("#h24_block_"+e+"_init_category_choice_0")[0].checked=true}else{$("#h24_block_"+e+"_init_category_choice_1")[0].checked=true}};
h24core.prototype.block.BigHeadingBlock=function(e,t){this.innerblocktype="BigHeadingBlock";this.blockid=t;this.ckeditor=null;this.editorIsActive=false;this.autosaveTimeoutTimer=-1;this.lastSavedData=null;this.autoSaveTime=10*1e3;this.sidepanel=true;this.deleted=false;var i=this;this.save=function(){if(i.deleted){return}if(!i.ckeditor){return}var t=i.getCkeditorData();if(i.lastSavedData===null){i.lastSavedData=t}else if(t!=i.lastSavedData){if(t!=""){e.post(e.slashwebroot+"Block/Edit-Communicator",{blockid:i.blockid,modelaction:"save_content",content:t,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){})}i.lastSavedData=t}if(i.editorIsActive){i.autosaveTimeoutTimer=setTimeout(i.save,i.autoSaveTime)}if($("html").hasClass("faux-section-support")){e.fauxSections.reposition()}};this.getCkeditorData=function(){var e=i.ckeditor.getData();if(e===null){e=""}return e};if(e.editmode){e.addToExecOnInit(this,function(){this.$textContent=$("#block_"+t+"_text_content");this.isContentEditableActive=this.$textContent.data("isContentEditable")})}this.initCKEDitor=function(){var o,n,l;if(e.design_system!=0&&i.isContentEditableActive){this.$textContent.prop("contentEditable",true);n=[];n.push({items:["Bold","Italic","Underline","Strike","-","Anchor","-","RemoveFormat"]});if(e.devmode){n.push({items:["H24Html"]})}this.ckeditor=CKEDITOR.inline(i.$textContent[0],{enterMode:CKEDITOR.ENTER_BR,toolbar:n,removePlugins:"liststyle"});this.ckeditor.on("instanceReady",function(e){var t=e.editor;var i=$(e.editor.element.$);if(i.data("linked")=="yes"){i.attr("title",i.data("description"))}else{i.attr("title","")}});this.ckeditor.on("focus",function(t){e.block.toggleBlock("edit",i.blockid);i.editorIsActive=true;i.save();if(i.$textContent.data("linked")=="yes"){$("#block_container_"+i.blockid+" .h24_cke_heading_link_helper").show()}for(var o in e.blocks){if(o!=i.blockid&&!!e.blocks[o].ckeditor&&!!e.blocks[o].ckeditor.fire){e.blocks[o].ckeditor.fire("blur")}}},this);if(!e.utils.touchMode){this.ckeditor.on("blur",function(){this.save();this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);e.block.toggleBlock("deselect",i.blockid);if(i.$textContent.data("linked")=="yes"){$("#block_container_"+i.blockid+" .h24_cke_heading_link_helper").hide()}},this)}}else if(e.design_system==0){var s=$("#block_"+t),a=s.find("a");if(a.length==0){$("#block_"+t).bind("click.heading_shortcut",function(){e.block.BigHeadingBlock.settings(t)})}}};this.destroyCKEditor=function(){var e=this.getCkeditorData();this.$textContent.prop("contentEditable",false);this.ckeditor.destroy();this.ckeditor=null;this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);if(i.$textContent.data("linked")=="yes"){$("#block_container_"+i.blockid+" .h24_cke_heading_link_helper").hide()}};this.destroy=function(){if(!!i.ckeditor){i.ckeditor.destroy();this.ckeditor=null}};this.BCPActions={textEditor:function(){if(e.design_system==0){i.BCPActions.blockSettings()}else{i.ckeditor.fire("focus");e.block.toggleBlock("edit",i.blockid)}},blockSettings:function(){if(i.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",i.blockid)}else{e.block.BigHeadingBlock.settings(i.blockid)}},fontSettings:function(){if(e.design_system==0){showDialog("#style_manager",2);e.style_manager.loadStyleManagerTabs()}else{e.design_manager.managerDialog("fonts","headings")}},deleteBlock:function(){e.block.remove(i.blockid);i.deleted=true}};this.angularBlockServiceListener=function(t,o){switch(t){case"AlignmentChanged":var n={0:"",1:"h24_heading_center",2:"h24_heading_right"};i.$textContent.removeClass("h24_heading_center h24_heading_right");i.$textContent.addClass(n[o.value]);i.$textContent.parent().removeClass("h24_heading_center h24_heading_right");i.$textContent.parent().addClass(n[o.value]);break;case"LevelChanged":var l=$("#block_"+i.blockid).find(".small_heading_block, .big_heading_block");var s={1:"big_heading_block",2:"small_heading_block"};l.removeClass("big_heading_block small_heading_block");l.addClass(s[o.value]);break;case"SettingsClosed":e.block.reloadBlock(i.blockid,{hideLoadingSpinner:true});break;case"BCPActions":var a=o;if(typeof i.BCPActions[a]!="undefined"){i.BCPActions[a].call(this)}break}}};h24core.prototype.block.BigHeadingBlock.settings=function(e){$("#block_"+e).unbind("click.heading_shortcut");$h24.block.previewSettingsDialog(e,{onReady:function(){var t=$("#settings_block_"+e),i=$("#settings_block_"+e+"_tabs"),o=$("#block_"+e),n=$("#block_container_"+e),l=o.find(".h24_heading span"),s=o.find("> *");i.tabs();if($h24.design_system==0){var a=t.find("input[name=content]");a.select();a.inputTimeout({onKeyUp:function(i,o){if(o==13){$h24.block.BigHeadingBlock.saveSettings(e);$h24.dialogs["block_"+e+"_settings_dialog"].close();return false}else if($h24.design_system==1){l.text(i);t.addClass("h24_modified_settings")}},onTimeout:function(t){if($h24.design_system==0&&t!=""){$h24.block.BigHeadingBlock.saveSettings(e)}}})}t.change(function(i){var o=$(i.target);if(o.is('[name="alignment"]')){t.addClass("h24_modified_settings");$h24.block.BigHeadingBlock.saveSettings(e)}else if(o.is('[name="element"]')){t.addClass("h24_modified_settings");$h24.block.BigHeadingBlock.saveSettings(e)}else if(o.is('[name="level"]')){t.addClass("h24_modified_settings");$h24.block.BigHeadingBlock.saveSettings(e)}})},dialogSettings:{width:350},onClose:function(){$h24.block.BigHeadingBlock.saveSettings(e);this.close()}})};h24core.prototype.block.BigHeadingBlock.saveSettings=function(e){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(t){if(t.removed){$("#liblock_"+e).remove();$h24.removeBlock(e);$h24.block.addSnippetOnEmptyCollections();return}if($h24.design_system==0){var i=$("#liblock_"+e);var o=i.parent().attr("id").substring(12);i.loadingSpinner();reloadColumn(o,null,true)}else{$h24.block.reloadBlock(e,{hideLoadingSpinner:true})}}})};h24core.prototype.block.BigHeadingBlock.linkDialog=function(e){$h24.link.blockLinkDialog("BigHeadingBlock",e,undefined,true)};h24core.prototype.block.BigHeadingBlock.pickBehavior=function(e,t){$h24.link.blockPickBehavior(e,t);$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.BigHeadingBlock.linkingCallback=function(e,t){$h24.link.blockLinkingCallback("BigHeadingBlock",e,t,1,true);if(typeof t.scope!="undefined"){$("#settings_block_"+t.scope).addClass("h24_modified_settings")}};h24core.prototype.block.BigHeadingBlock.enableInlineEdit=function(){$h24.block.BigHeadingBlock.inlineEditEnabled=true};h24core.prototype.block.BigHeadingBlock.disableInlineEdit=function(){$h24.block.BigHeadingBlock.inlineEditEnabled=false};
h24core.prototype.block.MapBlock=function(t,e){this.innerblocktype="MapBlock";this.blockid=e;this.sidepanel=false;this.map={};this.settings_map={};this.init=function(){t.block.MapBlock.callInitializeBlock(e,false)}};h24core.prototype.block.MapBlock.callInitializeBlock=function(t,e){var i=$h24.blocks[t];$h24.google_maps.initializeBlock(i.blockid,e,{zoom:i.zoom,center:new google.maps.LatLng(i.latitude,i.longitude),mapTypeId:google.maps.MapTypeId[i.view],streetViewControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}},i.mapInfo)};h24core.prototype.block.MapBlock.settings=function(t){$h24.block.settingsDialog(t,{onReady:function(){$h24.google_maps.initializeAutoComplete(t);$h24.block.MapBlock.callInitializeBlock(t,true)},dialogSettings:{width:650}})};h24core.prototype.block.MapBlock.updateSettings=function(t){var e=$h24.blocks[t].settings_map;$("#settings_block_"+t+" input[name=latitude]").val(e.map.getCenter().lat());$("#settings_block_"+t+" input[name=longitude]").val(e.map.getCenter().lng());$("#settings_block_"+t+" input[name=zoom]").val(e.map.getZoom());$("#settings_block_"+t+" input[name=view]").val(e.map.getMapTypeId().toUpperCase());$("#settings_block_"+t+" input[name=marker_latitude]").val(e.marker.getPosition().lat());$("#settings_block_"+t+" input[name=marker_longitude]").val(e.marker.getPosition().lng());if(e.streetview.getVisible()==true){$("#settings_block_"+t+" input[name=street_visible]").val(1);$("#settings_block_"+t+" input[name=street_latitude]").val(e.streetview.getPosition().lat());$("#settings_block_"+t+" input[name=street_longitude]").val(e.streetview.getPosition().lng());$("#settings_block_"+t+" input[name=street_zoom]").val(e.streetview.getPov().zoom);$("#settings_block_"+t+" input[name=street_heading]").val(e.streetview.getPov().heading);$("#settings_block_"+t+" input[name=street_pitch]").val(e.streetview.getPov().pitch)}else{$("#settings_block_"+t+" input[name=street_visible]").val(0)}$("#settings_block_"+t+" input[name=infowindow_visible]").val(e.infowindow.getAnchor()!=null?1:0);$h24.block.saveSettings(t)};h24core.prototype.block.MapBlock.sizePersonal=function(t,e,i){if(e==0){$("#settings_block_"+t+" .h24_map_size_personal_"+t).hide()}else{$("#settings_block_"+t+" .h24_map_size_personal_"+t).show()}};
h24core.prototype.block.BlogBlock=function(e,o){this.innerblocktype="BlogBlock";this.blockid=o;this.sidepanel=false;if(e.editmode){e.addToExecOnInit(this,function(){if(e.editmode)e.block.BlogBlock.initHoverButtons()})}this.initPrompt=function(o,t){var n=this.blockid;e.get(e.slashwebroot+"Block/Init-Prompt/",{blockid:n},function(o){if(o!=""){var t=e.dialog.create("block_init_prompt",o,{width:600,noCloseFlap:true});t.contents.find(".h24_bbs_blog_source_admin").click(function(o){e.block.BlogBlock.blogSourceAdmin({type:$(this).data("type"),onDeleteBlogSource:function(e){t.contents.find('select[name="blog_source_id"] option[value="'+e+'"]').remove()},onCreateBlogSource:function(e,o,n){var i=t.contents.find(".h24_bbs_blog_source_admin");if(i.data("type")==n){var a=$('<option value="'+e+'"></option>');a.text(o);t.contents.find('select[name="blog_source_id"]').append(a);a.prop("selected",true)}},onUpdateBlogSource:function(e,o){t.contents.find('select[name="blog_source_id"] option[value="'+e+'"]').text(o)}});return false});$("#block_"+n+"_init_save_and_close").click(function(o){var i=e.utils.getParameters(t.contents,".save_parameter");var a={blockid:n,modelaction:"save_init_settings",save_parameters:i};if(typeof i.blog_source_id=="undefined"){t.close();return false}e.post(e.slashwebroot+"Block/Edit-Communicator",a,function(o){if(o.successful){e.block.reloadBlock(n);t.close()}});return false})}})};this.BCPActions={createPost:function(){e.block.BlogBlock.createPost(this.blockid)},commentManager:function(){e.comment_manager.loadCommentManager(0)}}};h24core.prototype.block.BlogBlock.settings=function(e){$h24.block.settingsDialog(e,{onReady:function(){var o=$("#settings_block_"+e);$("#settings_block_"+e+"_tabs").tabs().tabs("option","active",0);o.find(".h24_bbs_blog_source_admin").click(function(){$h24.block.BlogBlock.blogSourceAdmin({type:$(this).data("type"),onDeleteBlogSource:function(o){$("#settings_block_"+e+' select[name="blog_source_id"] option[value="'+o+'"]').remove()},onCreateBlogSource:function(o,t,n){var i=$("#settings_block_"+e+" .h24_bbs_blog_source_admin");if(i.data("type")==n){var a=$('<option value="'+o+'"></option>');a.text(t);$("#settings_block_"+e+' select[name="blog_source_id"]').append(a);a.prop("selected",true)}},onUpdateBlogSource:function(o,t){$("#settings_block_"+e+' select[name="blog_source_id"] option[value="'+o+'"]').text(t)}});return false})},dialogSettings:{width:933}})};h24core.prototype.block.BlogBlock.initHoverButtons=function(e){$("div.blog_block div.h24_post_container").each(function(){$(this).hover(function(){$(this).children("div.h24_blog_buttons").show()},function(){$(this).children("div.h24_blog_buttons").hide()})})};h24core.prototype.block.BlogBlock.createPost=function(e){$h24.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/post",{homepageid:$h24.homepageid,blockid:e,__keep_loading_overlay:true},function(e){if(e=="statuscode/0"){showReloginDialog();return}var o=e.split("/");if(o[1]==1){window.location.href="?p="+o[3]}})};h24core.prototype.block.BlogBlock.deletePost=function(e,o,t){if(typeof t=="undefined")var n=confirm($h24.phrase.GUIPhrase("Block-Blog","Are you sure you want to delete the entire post and all its contents?"));else var n=true;if(n){show_loading_overlay();$.post($h24.publicdir+"../Page/Inline-Save/model/PageManager/modelaction/delete",{homepageid:$h24.homepageid,pageid:o},function(e){if(e=="statuscode/0"){showReloginDialog();return}reload_HideLoadingMessage();reloadColumns()})}};h24core.prototype.block.BlogBlock.retroactiveness=function(e){$("#settings_block_"+e+" .block_"+e+"_retroactiveness input[name=retroactive]")[0].checked=true};h24core.prototype.block.BlogBlock.blogSourceSelected=function(e,o){var t=$(this),n=t.find("option:selected"),i=n.data();if(typeof i.password!="undefined"){$("#settings_block_"+e+" input[name=blog_source_password]").val(i.password)}};h24core.prototype.block.BlogBlock.blogSourceAdmin=function(e){var o={type:0,onDeleteBlogSource:function(e){},onCreateBlogSource:function(e,o,t){},onUpdateBlogSource:function(e,o){}};var e=$.extend(o,e);$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DialogManager",modelaction:"blogSourceAdmin",homepageid:$h24.homepageid,defaultType:e.type},function(o){if(typeof $h24.coreDialogs!="undefined"&&typeof $h24.coreDialogs.blogSourceAdmin!="undefined"){$h24.coreDialogs.blogSourceAdmin.content.html(o)}else{var t=$h24.coreDialog.create("blogSourceAdmin",o,{width:600});t.content.click(function(o){var n=$(o.target),i=$(this),a,l,c,s,r,d,u,g;if(n.hasClass("h24_dm_bsams_show_posts")){$("#h24_dm_bsams_post_container").slideDown("slow");return false}else if(n.hasClass("h24_dm_bsams_delete_all_posts")){c=i.find('select[name="blog_source_id"]').val();if(c!=0){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"deleteBlogSourcePosts",blogSourceId:c},function(e){$("#h24_dm_bsa_modify_container").html(e)})}return false}else if(n.hasClass("h24_dm_bsams_delete_source")){a=i.find('select[name="blog_source_id"]');l=a.find("option:selected");c=l.val();if(c!=0){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"deleteBlogSource",blogSourceId:c},function(o){l.remove();a.find('option[value="0"]').prop("selected",true);$("#h24_dm_bsa_modify_container").html("");if(typeof e.onDeleteBlogSource=="function"){e.onDeleteBlogSource(c)}})}return false}else if(n.hasClass("h24_dm_bsa_create_source")){r=i.find('input[name="name"]').val();d=i.find('select[name="type"]').val();$.post($h24.slashwebroot+"Page/Inline-Save",{model:"PageManager",modelaction:"addsource",homepageid:$h24.homepageid,name:r,type:d},function(o){var t=$h24.utils.legacyAjaxToObject(o);c=t.blog_source;r=t.name;a=i.find('select[name="blog_source_id"]');l=$('<option value="'+c+'"></option>');l.text(r);a.append(l);l.prop("selected",true);$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DialogManager",modelaction:"blogSourceAdminModifySource",homepageid:$h24.homepageid,blogSourceId:c},function(e){$("#h24_dm_bsa_modify_container").html(e)});if(typeof e.onCreateBlogSource=="function"){e.onCreateBlogSource(c,r,d)}});return false}else if(n.hasClass("h24_dm_bsa_modify_name")){u=i.find('input[name="new_name"]');r=u.val();u.prop("disabled",true);a=i.find('select[name="blog_source_id"]');l=a.find("option:selected");c=l.val();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageManager",modelaction:"updateBlogSource",name:r,blogSourceId:c},function(o){if(o.successful){u.val(o.name);l.text(o.name);if(typeof e.onUpdateBlogSource=="function"){e.onUpdateBlogSource(c,o.name)}}u.prop("disabled",false)});return false}else if(n.hasClass("h24_dm_bsa_close")){t.close();return false}}).change(function(e){var o=$(e.target),t;if(o.attr("name")=="blog_source_id"){t=parseInt(o.val(),10);if(t==0){return}$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DialogManager",modelaction:"blogSourceAdminModifySource",homepageid:$h24.homepageid,blogSourceId:t},function(e){$("#h24_dm_bsa_modify_container").html(e)})}})}})};
h24core.prototype.block.FormBlock=function(e,t){this.innerblocktype="FormBlock";this.blockid=t;e.addToExecOnInit(this,function(){e.block.FormBlock.loadRestrictedInputs(t);$("#h24_form_"+t).submit(function(){return e.block.FormBlock.validateForm(t)})});this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.FormBlock.loadSettingsEvents(this.blockid,0)}},formSettings:function(){e.block.FormBlock.loadSettingsEvents(this.blockid,1)},formEntryManager:function(t){e.form_entry_manager.openDialog(this.blockid,t.commonIdentifier)}}};h24core.prototype.block.FormBlock.initializeFormSettings=function(e){if($("#settings_block_"+e+" input[name=autoreply_"+e+"]:checked").val()==0)$h24.block.FormBlock.setAutoReply(e,0);if($("#settings_block_"+e+" input[name=confirmation_"+e+"]:checked").val()=="message")$h24.block.FormBlock.setConfirmation(e,"message");else $h24.block.FormBlock.setConfirmation(e,"link");if($("#settings_block_"+e+" input[name=mailconfirmation_"+e+"]:checked").val()==0)$h24.block.FormBlock.setMailConfirmation(e,0)};h24core.prototype.block.FormBlock.addField=function(e){var t=$("#h24_form_settings_"+e+" .h24_form_field_collection_list_div .h24_form_fieldlist option:selected").val();if(t.search("input_text")!=-1){var a=t.substr(11,t.length-1);var o="";var r="";var i="200";t="input_text";switch(a){case"text":o=$h24.phrase.GUIPhrase("Block-Form","Text field");break;case"mail":o=$h24.phrase.GUIPhrase("General","Email");break;case"date":o=$h24.phrase.GUIPhrase("General","Date");i="100";break;case"numeric":o=$h24.phrase.GUIPhrase("General","Digits");break;case"socialnr":o=$h24.phrase.GUIPhrase("Block-Form","Social security number");i="200";break;case"homepage":o=$h24.phrase.GUIPhrase("General","Website");r="http://";break;default:o=$h24.phrase.GUIPhrase("Block-Form","Text field");a="text";break}}var n={blockid:e,modelaction:"addField",type:t};switch(t){case"input_text":n.name=o;n.size=i;n.filter=a;n.defaulttext=r;n.helptext="";n.required="0";n.subjectchooser="0";break;case"textarea":n.name=$h24.phrase.GUIPhrase("Block-Form","Text area");n.size="300";n.rows="3";n.defaulttext="";n.helptext="";n.required="0";break;case"heading":n.name=$h24.phrase.GUIPhrase("General","Heading");n.size="12";n.helptext=$h24.phrase.GUIPhrase("Block-Form","Text");break;case"input_checkbox":n.name=$h24.phrase.GUIPhrase("Block-Form","Checkboxes");n.helptext="";n.required="0";n.option_value_0=$h24.phrase.GUIPhrase("Block-Form","Option 1");n.option_checked_0="0";n.option_value_1=$h24.phrase.GUIPhrase("Block-Form","Option 2");n.option_checked_1="0";n.option_value_2=$h24.phrase.GUIPhrase("Block-Form","Option 3");n.option_checked_2="0";n.option_count="3";break;case"input_radio":n.name=$h24.phrase.GUIPhrase("Block-Form","Radio buttons");n.helptext="";n.required="0";n.subjectchooser="0";n.option_value_0=$h24.phrase.GUIPhrase("Block-Form","Option 1");n.option_checked_0="0";n.option_value_1=$h24.phrase.GUIPhrase("Block-Form","Option 2");n.option_checked_1="0";n.option_value_2=$h24.phrase.GUIPhrase("Block-Form","Option 3");n.option_checked_2="0";n.option_count="3";break;case"select":n.name=$h24.phrase.GUIPhrase("Block-Form","Drop-down list");n.helptext="";n.required="0";n.subjectchooser="0";n.option_value_0=$h24.phrase.GUIPhrase("Block-Form","Option 1");n.option_checked_0="0";n.option_value_1=$h24.phrase.GUIPhrase("Block-Form","Option 2");n.option_checked_1="0";n.option_value_2=$h24.phrase.GUIPhrase("Block-Form","Option 3");n.option_checked_2="0";n.option_count="3";break;case"input_file":n.name=$h24.phrase.GUIPhrase("Block-Form","File upload");n.helptext="";n.required="0";break;case"address":n.name=$h24.phrase.GUIPhrase("Block-Form","Address field");n.size="200";n.helptext="";n.required="0";break}$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",n,function(a){if(typeof a["error"]=="undefined"){var o=a.indexOf(",");var r=a.substr(0,o);var i=a.substr(o+1,a.length-o-1);$h24.block.FormBlock.reloadFields(e,i,r);$h24.block.FormBlock.openFieldSettings(e,r,t)}})};h24core.prototype.block.FormBlock.removeField=function(e,t){if(confirm($h24.phrase.GUIPhrase("Block-Form","Remove selected field")+"?")!=true)return;$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"removeField",removeid:t},function(t){$h24.block.FormBlock.reloadFields(e,t)},"text")};h24core.prototype.block.FormBlock.updateSorting=function(e,t){var a=t.split("&");var o=new Array;var r="";for(key in a){o=a[key].split("=");r+=o[1]+","}r=r.substr(0,r.length-1);$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"updateSorting",sorting:r},function(e){})};h24core.prototype.block.FormBlock.initializeSorting=function(e){$("#h24_form_sortable_settings_"+e).sortable({update:function(){var t=$("#h24_form_sortable_settings_"+e).sortable("serialize");$h24.block.FormBlock.updateSorting(e,t)},placeholder:"h24_form_fieldsettings_placeholder",cursorAt:{top:35,left:100},helper:function(e,t){return $("#sortable_helper").clone().css("opacity",.8).width(440).height(50)},axis:"y"})};h24core.prototype.block.FormBlock.startPauseSorting=function(e,t){var a=t=="start"?false:true;$("#h24_form_sortable_settings_"+e).sortable({disabled:a})};h24core.prototype.block.FormBlock.initializeTabs=function(e,t){};h24core.prototype.block.FormBlock.openFieldSettings=function(e,t,a){$h24.block.FormBlock.closeAllFieldSettings(e);$("#h24_form_field_settings_"+e+"_"+t).addClass("h24_form_field_settings_active");$("#h24_form_field_settings_"+e+"_"+t+" .h24_form_field_settings_div").fadeIn();$h24.block.FormBlock.startPauseSorting(e,"pause");if(a=="input_checkbox"||a=="input_radio"||a=="select"){h24core.prototype.block.FormBlock.initializeOptionSorting(e,t,a)}};h24core.prototype.block.FormBlock.closeAllFieldSettings=function(e){$("#settings_block_"+e+" .h24_form_field_settings_div").each(function(){$(this).hide();$(this).removeClass("h24_form_field_settings_active")})};h24core.prototype.block.FormBlock.closeFieldSettings=function(e,t){$("#h24_form_field_settings_"+e+"_"+t+" .h24_form_field_settings_div").hide();$("#h24_form_field_settings_"+e+"_"+t).removeClass("h24_form_field_settings_active");$h24.block.FormBlock.startPauseSorting(e,"start")};h24core.prototype.block.FormBlock.openButtonSettings=function(e){$("#h24_form_settings_button_inline_"+e+" .h24_form_field_settings_div").fadeIn()};h24core.prototype.block.FormBlock.closeButtonSettings=function(e){$("#h24_form_settings_button_inline_"+e+" .h24_form_field_settings_div").hide()};h24core.prototype.block.FormBlock.openFieldCollectionList=function(e){$("#h24_form_settings_"+e+" .h24_form_field_collection_list_div").fadeIn()};h24core.prototype.block.FormBlock.closeFieldCollectionList=function(e){$("#h24_form_settings_"+e+" .h24_form_field_collection_list_div").hide()};h24core.prototype.block.FormBlock.loadSettingsEvents=function(e,t){$h24.block.settingsDialog(e,{onReady:function(){$h24.block.FormBlock.initializeSorting(e);$h24.block.FormBlock.initializeFormSettings(e)},onClose:function(){this.close();$h24.block.reloadBlock(e)},dialogSettings:{width:650}})};h24core.prototype.block.FormBlock.updateButtonSettings=function(e){var t="#h24_form_settings_button_inline_"+e+" .h24_form_field_settings_div";var a={blockid:e,modelaction:"updateButton",buttontext:$(t+" input[name=change_name]").val()};$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",a,function(t){$h24.block.FormBlock.reloadFields(e,t)})};h24core.prototype.block.FormBlock.updateFieldSettings=function(e,t,a){var o="#h24_form_field_settings_"+e+"_"+t+" .h24_form_field_settings_div";var r={blockid:e,modelaction:"updateField",type:a,fieldid:t};switch(a){case"input_text":r.name=$(o+" input[name=change_name]").val();r.filter=$(o+" select[name=change_filter] option:selected").val();r.size=$(o+" select[name=change_size] option:selected").val();r.defaulttext=$(o+" input[name=change_defaulttext]").val();r.helptext=$(o+" textarea[name=change_helptext]").val();r.required=$(o+" input[name=change_required]:checked").val()=="on"?1:0;r.subjectchooser=$(o+" input[name=change_subjectchooser]:checked").val()=="on"?1:0;break;case"textarea":r.name=$(o+" input[name=change_name]").val();r.size=$(o+" select[name=change_size] option:selected").val();r.rows=$(o+" input[name=change_rows]").val();var i=$(o+" input[name=change_rows]").val();if(i>100)i=100;else if(i<2)i=2;r.rows=i;r.defaulttext=$(o+" input[name=change_defaulttext]").val();r.helptext=$(o+" textarea[name=change_helptext]").val();r.required=$(o+" input[name=change_required]:checked").val()=="on"?1:0;break;case"heading":r.name=$(o+" input[name=change_name]").val();var n=$(o+" input[name=change_size]").val();if(n>50)n=50;else if(n<6)n=6;r.size=n;r.helptext=$(o+" textarea[name=change_helptext]").val();break;case"input_checkbox":case"input_radio":case"select":var l=a=="input_checkbox"?"checkbox":"radio";r.name=$(o+" input[name=change_name]").val();r.helptext=$(o+" textarea[name=change_helptext]").val();r.required=$(o+" input[name=change_required]:checked").val()=="on"?1:0;if(l!="input_checkbox")r.subjectchooser=$(o+" input[name=change_subjectchooser]:checked").val()=="on"?1:0;var s=0;var c="";var h="";$("#h24_form_fieldsettings_options_"+e+"_"+t+" input[type="+l+"]").each(function(){c=$(this).prop("checked")==true?1:0;h=$("#h24_form_fieldsettings_options_"+e+"_"+t+" input[type=text]:eq("+s+")").val();r["option_checked_"+s]=c;r["option_value_"+s]=h;s++});r.option_count=s;break;case"input_file":r.name=$(o+" input[name=change_name]").val();r.helptext=$(o+" textarea[name=change_helptext]").val();r.required=$(o+" input[name=change_required]:checked").val()=="on"?1:0;break;case"address":r.name=$(o+" input[name=change_name]").val();r.size=$(o+" select[name=change_size] option:selected").val();r.helptext=$(o+" textarea[name=change_helptext]").val();r.required=$(o+" input[name=change_required]:checked").val()=="on"?1:0;break}$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",r,function(t){$h24.block.FormBlock.reloadFields(e,t)})};h24core.prototype.block.FormBlock.reloadFields=function(e,t,a){$("#h24_form_settings_"+e).html(t);$h24.block.FormBlock.initializeSorting(e);$h24.block.FormBlock.loadRestrictedInputs(e)};h24core.prototype.block.FormBlock.initializeOptionSorting=function(e,t,a){$("#h24_form_fieldsettings_options_"+e+"_"+t).unbind("sortable").sortable({cursorAt:{top:35,left:100},helper:function(e,t){return $("#sortable_helper").clone().css("opacity",.8).width(242).height(24)},axis:"y"});$h24.block.FormBlock.initializeRemoveOptionInlineSettingsClickEvent(e,t,a)};h24core.prototype.block.FormBlock.addOptionInlineSettings=function(e,t,a){var o="";switch(a){case"input_checkbox":o+='<li><input type="checkbox"/><input type="text"/> <a href="javascript: void(0);">'+$h24.phrase.GUIPhrase("General","Remove")+"</a></li>";break;case"input_radio":case"select":o+='<li><input type="radio" name="change_option_checked_'+t+'"/><input type="text"/> <a href="javascript: void(0);">'+$h24.phrase.GUIPhrase("General","Remove")+"</a></li>";break}$("#h24_form_fieldsettings_options_"+e+"_"+t).append(o);$h24.block.FormBlock.initializeOptionSorting(e,t,a);a=="select"?$h24.block.FormBlock.checkIfSelectedSelect(e,t):""};h24core.prototype.block.FormBlock.addPredefinedOptions=function(e,t,a){var o=$("#h24_form_field_settings_"+e+"_"+t+" .h24_form_fieldsettings_options_predefined option:selected").val();var r="#h24_form_fieldsettings_options_"+e+"_"+t;var n;var l;var s;var c;var h=new Array;switch(o){case"gender":c=$h24.phrase.GUIPhrase("Block-Form","Select sex");l=new Array($h24.phrase.GUIPhrase("General","Male"),$h24.phrase.GUIPhrase("General","Female"));break;case"age":c=$h24.phrase.GUIPhrase("Block-Form","What is your age")+"?";l=new Array($h24.phrase.GUIPhrase("General","Under")+" 13","13-18","19-25","26-35","36-50",$h24.phrase.GUIPhrase("General","Over")+" 50",$h24.phrase.GUIPhrase("Block-Form","No answer"));break;case"marketing":c=$h24.phrase.GUIPhrase("Block-Form","How did you find us")+"?";l=new Array($h24.phrase.GUIPhrase("General","Internet"),$h24.phrase.GUIPhrase("General","Commercial"),$h24.phrase.GUIPhrase("General","Friend"),$h24.phrase.GUIPhrase("General","Other"));break;case"answer":c=$h24.phrase.GUIPhrase("Block-Form","Your question")+"?";l=new Array($h24.phrase.GUIPhrase("General","Yes"),$h24.phrase.GUIPhrase("General","No"),$h24.phrase.GUIPhrase("General","Maybe"),$h24.phrase.GUIPhrase("General","Don't know"));break;case"grade":c=$h24.phrase.GUIPhrase("Block-Form","Choose grade");l=new Array(1,2,3,4,5);break;case"months":c=$h24.phrase.GUIPhrase("Block-Form","Choose month");l=new Array($h24.phrase.GUIPhrase("Date-And-Time","January"),$h24.phrase.GUIPhrase("Date-And-Time","February"),$h24.phrase.GUIPhrase("Date-And-Time","March"),$h24.phrase.GUIPhrase("Date-And-Time","April"),$h24.phrase.GUIPhrase("Date-And-Time","May"),$h24.phrase.GUIPhrase("Date-And-Time","June"),$h24.phrase.GUIPhrase("Date-And-Time","July"),$h24.phrase.GUIPhrase("Date-And-Time","August"),$h24.phrase.GUIPhrase("Date-And-Time","September"),$h24.phrase.GUIPhrase("Date-And-Time","October"),$h24.phrase.GUIPhrase("Date-And-Time","November"),$h24.phrase.GUIPhrase("Date-And-Time","December"));break;case"weekdays":c=$h24.phrase.GUIPhrase("Block-Form","Choose weekday");l=new Array($h24.phrase.GUIPhrase("Date-And-Time","Sunday"),$h24.phrase.GUIPhrase("Date-And-Time","Monday"),$h24.phrase.GUIPhrase("Date-And-Time","Tuesday"),$h24.phrase.GUIPhrase("Date-And-Time","Wednesday"),$h24.phrase.GUIPhrase("Date-And-Time","Thirsday"),$h24.phrase.GUIPhrase("Date-And-Time","Friday"),$h24.phrase.GUIPhrase("Date-And-Time","Saturday"));break}$(r+" li").remove();for(i=0;i<l.length;i++){switch(a){case"input_checkbox":if(n&&n[i]==1)s='checked="checked"';else s="";h[i]='<li><input type="checkbox" name="change_option_checked" '+s+'/><input type="text" value="'+l[i]+'"/> <a href="javascript: void(0);">Ta bort</a></li>';break;case"input_radio":case"select":if(n&&n[i]==1)s='checked="checked"';else s="";h[i]='<li><input type="radio" name="change_option_checked" '+s+'/><input type="text" value="'+l[i]+'"/> <a href="javascript: void(0);">Ta bort</a></li>';break}}for(i=0;i<h.length;i++){$(r).append(h[i])}$("#h24_form_field_settings_"+e+"_"+t+" .h24_form_field_settings_div input[name=change_name]").val(c);$h24.block.FormBlock.initializeOptionSorting(e,t,a);a=="select"?$h24.block.FormBlock.checkIfSelectedSelect(e,t):""};h24core.prototype.block.FormBlock.initializeRemoveOptionInlineSettingsClickEvent=function(e,t,a){var o="#h24_form_fieldsettings_options_"+e+"_"+t;$(o+" a").click(function(){var r=$(o+" a").index(this);$(o+" li:eq("+r+")").remove();a=="select"?$h24.block.FormBlock.checkIfSelectedSelect(e,t):""})};h24core.prototype.block.FormBlock.checkIfSelectedSelect=function(e,t){var a;$("#h24_form_fieldsettings_options_"+e+"_"+t+" input[type=radio]").each(function(){$(this).attr("checked")==true?a=1:""});if(a!=1)$("#h24_form_fieldsettings_options_"+e+"_"+t+" li input[type=radio]:eq(0)").attr("checked",true)};h24core.prototype.block.FormBlock.setAutoReply=function(e,t){if(t==0){$("#settings_block_"+e+" #h24_form_settings_autoreply_"+e).hide()}else{$("#settings_block_"+e+" #h24_form_settings_autoreply_"+e).show()}};h24core.prototype.block.FormBlock.setConfirmation=function(e,t){if(t=="link"){$("#settings_block_"+e+" textarea[name=confirmation_message]").hide();$("#settings_block_"+e+" #block_"+e+"_generic_link").show()}else{$("#settings_block_"+e+" textarea[name=confirmation_message]").show();$("#settings_block_"+e+" #block_"+e+"_generic_link").hide()}};h24core.prototype.block.FormBlock.setMailConfirmation=function(e,t){if(t==0){$("#h24_form_settings_mailconfirmation_mail_"+e).hide()}else{$("#h24_form_settings_mailconfirmation_mail_"+e).show()}};h24core.prototype.block.FormBlock.linkDialog=function(e){$h24.link.blockLinkDialog("FormBlock",e,{hide_file:1,hide_mailto:1,hide_video:1},true)};h24core.prototype.block.FormBlock.pickBehavior=function(e,t){$h24.link.blockPickBehavior(e,t)};h24core.prototype.block.FormBlock.linkingCallback=function(e,t){var a=t.scope;if(typeof default_behavior=="undefined")default_behavior=0;if(e=="save"){var o={blockid:a,model:"DialogManager",modelaction:"get_link_description",link:t.link,link_type:t.link_type,link_target:t.link_target,link_metadata:t.link_metadata,homepageid:$h24.homepageid};$("#block_"+a+"_generic_link button.modify").show();$("#block_"+a+"_generic_link button.create").hide();$("#settings_block_"+a+" input[name=link]").val(t.link);$("#settings_block_"+a+" input[name=link_type]").val(t.link_type);$("#settings_block_"+a+" input[name=link_target]").val(t.link_target);$("#settings_block_"+a+" input[name=link_metadata]").val(t.link_metadata);$("#settings_block_"+a+" input[name=confirmation_"+a+"][value=link]")[0].checked=true;$h24.block.FormBlock.setConfirmation(a,"link");$("#block_"+a+"_link_description").show();$h24.post($h24.slashwebroot+"Page/Inline-load/",o,function(e){if(e!="")$("#block_"+a+"_link_description").html(translatedString("Send the visitor")+" "+e)})}else if(e=="remove"){$("#block_"+a+"_generic_link button.modify").hide();$("#block_"+a+"_generic_link button.create").show();$("#settings_block_"+a+" input[name=confirmation_"+a+"][value=message]")[0].checked=true;$h24.block.FormBlock.setConfirmation(a,"message");$("#settings_block_"+a+" input[name=link]").val("");$("#settings_block_"+a+" input[name=link_type]").val("");$("#settings_block_"+a+" input[name=link_target]").val("");$("#settings_block_"+a+" input[name=link_metadata]").val("");$("#block_"+a+"_link_description").hide()}else if(e=="cancel"){}$h24.dialogs.h24_generic_linking_dialog.close()};h24core.prototype.block.FormBlock.validateForm=function(e){var t=false;var a=new Array;var o=new Array;var r=new Array;var i=new Array;var n=new Array;var l="#h24_form_"+e;var s="h24-HpInput__stateInvalid";var c="h24_form_field_error_color";$.each($("#h24_form_"+e+" .form_field_validate_"+e),function(e,t){if(t.name.search("required")!=-1){o[t.name]=t.type;r[t.name]=t.value;i[t.name]=t.name.replace(/\D/g,"")}else if(t.name.search("mail")!=-1){n[t.name]=true;o[t.name]=t.type;r[t.name]=t.value;i[t.name]=t.name.replace(/\D/g,"")}});for(currentField in o){switch(o[currentField]){case"text":$(l+" input[name="+currentField+"]").removeClass(s);if(a[i[currentField]]!=true)$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").removeClass(c);if(r[currentField]==""){if(n[currentField]!=true){t=true;a[i[currentField]]=true;$(l+" input[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}}else{if(currentField.search("mail")!=-1){if($h24.utils.mailValidation(r[currentField])==false){t=true;a[currentField]=true;$(l+" input[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}}else if(currentField.search("numeric")!=-1){if(isNaN(r[currentField])==true){t=true;a[currentField]=true;$(l+" input[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}}else if(currentField.search("homepage")!=-1){if(r[currentField].length<=7){t=true;a[currentField]=true;$(l+" input[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}}}break;case"textarea":$(l+" textarea[name="+currentField+"]").removeClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").removeClass(c);if(r[currentField]==""){t=true;$(l+" textarea[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}break;case"checkbox":case"radio":$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").removeClass(c);if($(l+' input[name="'+currentField+'"]:checked').length<1){t=true;$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}break;case"file":$(l+" input[name="+currentField+"]").removeClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").removeClass(c);if(r[currentField]==""){t=true;$(l+" input[name="+currentField+"]").addClass(s);$(l+" #h24_form_field_"+e+"_"+i[currentField]+" .h24_form_field_name").addClass(c)}break}}if(t==false){$("#h24_form_field_error_message_"+e).hide();$(l+" input[type=submit]").attr("disabled","disabled");$(l+" input[name=referer]").val(document.URL);show_loading_overlay();return true}else{$("#h24_form_field_error_message_"+e).show();return false}};h24core.prototype.block.FormBlock.loadRestrictedInputs=function(e){$h24.block.FormBlock.loadRestrictedInput_numeric(e);$h24.block.FormBlock.loadRestrictedInput_date(e);$h24.block.FormBlock.loadRestrictedInput_socialnr(e)};h24core.prototype.block.FormBlock.loadRestrictedInput_numeric=function(e){$("#block_"+e+" .h24_form_only_numeric").each(function(){$(this).keypress(function(e){if(e.charCode!=0&&(e.charCode<48||e.charCode>57)){return false}})})};h24core.prototype.block.FormBlock.loadRestrictedInput_date=function(e){$("#block_"+e+" .h24_form_only_date").each(function(){$(this).datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,yearRange:"1900:2100",dayNames:[$h24.phrase.HomepagePhrase("Date-And-Time","Sunday"),$h24.phrase.HomepagePhrase("Date-And-Time","Monday"),$h24.phrase.HomepagePhrase("Date-And-Time","Tuesday"),$h24.phrase.HomepagePhrase("Date-And-Time","Wednesday"),$h24.phrase.HomepagePhrase("Date-And-Time","Thursday"),$h24.phrase.HomepagePhrase("Date-And-Time","Friday"),$h24.phrase.HomepagePhrase("Date-And-Time","Saturday")],dayNamesMin:[$h24.phrase.HomepagePhrase("Date-And-Time","Sunday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Monday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Tuesday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Wednesday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Thursday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Friday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Saturday").substr(0,2)],monthNamesShort:[$h24.phrase.HomepagePhrase("Date-And-Time","January").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","February").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","March").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","April").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","May").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","June").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","July").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","August").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","September").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","October").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","November").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","December").substr(0,3)]});$(this).masked_input("9999-99-99")})};h24core.prototype.block.FormBlock.loadRestrictedInput_socialnr=function(e){$("#block_"+e+" .h24_form_only_socialnr").each(function(){$(this).masked_input("99999999-9999","-")})};h24core.prototype.block.FormBlock.loadFilterChangedCheck=function(e,t){var a=$(e).closest("div").attr("id");var o=e.value;$("#"+a+" input[name=change_defaulttext]").val("");$("#"+a+" input[name=change_defaulttext]").datepicker("destroy");$("#"+a+" input[name=change_defaulttext]").unbind();$("#"+a+" input[name=change_defaulttext]").removeClass("h24_form_only_date");$("#"+a+" input[name=change_defaulttext]").removeClass("h24_form_only_numeric");$("#"+a+" input[name=change_defaulttext]").removeClass("h24_form_only_socialnr");switch(o){case"date":$("#"+a+" input[name=change_defaulttext]").addClass("h24_form_only_date");$h24.block.FormBlock.loadRestrictedInput_date(t);break;case"numeric":$("#"+a+" input[name=change_defaulttext]").addClass("h24_form_only_numeric");$h24.block.FormBlock.loadRestrictedInput_numeric(t);break;case"socialnr":$("#"+a+" input[name=change_defaulttext]").addClass("h24_form_only_socialnr");$h24.block.FormBlock.loadRestrictedInput_socialnr(t);break;case"homepage":$("#"+a+" input[name=change_defaulttext]").val("http://");break}};
h24core.prototype.block.RssBlock=function(e,t){this.innerblocktype="RssBlock";this.blockid=t;e.addToExecOnInit(this,function(){$.get(e.publicdir+"generate/timestamp.php",function(i){var o=i;if(o-e.blocks[t].settings.timestampFetched>1200){e.blocks[t].settings.timestampFetched=o;e.post(e.slashwebroot+"Block/Common-Communicator",{blockid:t,modelaction:"updateFeed",__skip_loading_overlay:true},function(i){if(i["successful"]==true){e.block.reloadBlock(t,{hideLoadingSpinner:true,runExecOnInit:false})}else{$("#block_"+t+" #loading_placeholder").hide();$("#block_"+t+" #no_content_placeholder").show()}})}})});var i=false;this.angularBlockServiceListener=function(t,o){var s=$("#block_"+this.blockid);switch(t){case"ShowImageChanged":i=true;break;case"FeedUrlChanged":e.block.reloadBlock(this.blockid);break;case"TitleChanged":var n=s.find("> div > h2, > div > h3");if(!!o.value.length){n.text(o.value)}else{n.text(n.data("original-title"))}break;case"TitleDisplayChanged":var n=s.find("> div > h2, > div > h3");var l={0:"hidden",1:"h24_feed_title_default h24_normal_text",3:"h24_feed_title_small",2:"h24_feed_title_big"};n.removeClass().addClass(l[o.value]);break;case"ItemLimitChanged":$feedItems=s.find(".h24_feed_item");if($feedItems.length>=o.value&&o.value>0){$feedItems.slice(o.value).hide();$feedItems.slice(0,o.value).show()}else{i=true}break;case"ShowContentChanged":if(!o.value){s.find(".js-rss-content").hide()}else{i=true}break;case"ShowAuthorChanged":if(!o.value){s.find(".h24_author").hide()}else{i=true}break;case"ShowDateChanged":if(!o.value){s.find(".h24_timestamp").hide()}else{i=true}break;case"HyperlinkChanged":i=true;break;case"HyperlinkBlankChanged":var n=s.find("a").prop("target",!!o.value?"_blank":"");break;case"WidthChanged":s.children().css("width",o.value);break;case"PositionChanged":switch(o.value){case 0:s.children().css({"margin-left":"","margin-right":""});break;case 1:s.children().css({"margin-left":"auto","margin-right":"auto"});break;case 2:s.children().css({"margin-left":"auto","margin-right":""});break}break;case"SettingsSaved":if(i){e.block.reloadBlock(this.blockid);i=false}break}};this.angularBlockServiceResponder=function(i,o){switch(i){case"CollectionWidth":return e.blocks[t].settings.collectionsize;break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.RssBlock.settings(this.blockid)}}}};h24core.prototype.block.RssBlock.settings=function(e){$h24.block.previewSettingsDialog(e,{onReady:function(){var t=150;var i=$h24.blocks[e].settings.collectionsize;var o=$("#settings_block_"+e+" input[name=width]");var s=o.val();if(s>i||s<t){s=i;o.val(i)}var n=$("#settings_block_"+e);n.find("input, select").each(function(){var o=$(this);var s=o.attr("name");var n;var l;if(s=="feedUrl"){o.inputTimeout({onTimeout:function(t){if(t!=""){$h24.block.RssBlock.setFeedUrl(e,t)}}})}else if(s=="feedUrlSelect"){o.change(function(){$("#settings_block_"+e+" .changeUrl").show();$h24.block.RssBlock.setFeedUrl(e,o.val())})}else if(s=="title"){o.inputTimeout({onTimeout:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setTitle(e,o.val())}})}})}else if(s=="titleDisplay"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setTitleDisplay(e,o.val())}})})}else if(s=="showContent"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setShowContent(e,o.val())}})})}else if(s=="showAuthor"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setShowAuthor(e,o.val())}})})}else if(s=="showDate"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setShowDate(e,o.val())}})})}else if(s=="hyperlink"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setHyperlink(e,o.val())}})})}else if(s=="itemLimit"){o.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.RssBlock.setItemLimit(e,o.val())}})})}else if(s=="width"){o.inputTimeout({onTimeout:function(){var s=$(this).val();if(isNaN(parseInt(s))||!isFinite(s))s=t;else if(s>i)s=i;else if(s<t)s=t;o.val(parseInt(s));$("#settings_block_"+e+" .slider_container").slider("option","value",s);$h24.block.RssBlock.setWidth(e,s)}})}else if(s=="position"){o.change(function(){$h24.block.RssBlock.setPosition(e,o.val());$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})})}});$("#settings_block_"+e+" .enterUrl").click(function(){$("#settings_block_"+e+" .changeUrl").hide();$("#settings_block_"+e+" .feed_url_message").hide();$("#settings_block_"+e+" .input_message").show();$("#settings_block_"+e+" input[name=feedUrl]").show();$("#settings_block_"+e+" select[name=feedUrlSelect]").hide();$("#settings_block_"+e+" select[name=feedUrlSelect]").children().remove();return false});$("#settings_block_"+e+" .slider_container").slider({min:t,max:i,value:s,slide:function(t,i){o.val(i.value);$h24.block.RssBlock.setWidth(e,i.value)},change:function(t,i){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})}})},dialogSettings:{width:530},onRevert:function(e){var t=this;$h24.block.revertSettings(e);var i=$("#settings_block_"+e+" input[name=feedUrl]").val();$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"updateFeedUrl",feedUrl:i,__keep_loading_overlay:true},function(i){$h24.block.saveSettings(e,{hideLoadingSpinner:false,onClose:function(){$h24.block.reloadBlock(e)}});t.close()})}})};h24core.prototype.block.RssBlock.setFeedUrl=function(e,t){var i=$("#settings_block_"+e+" select[name=feedUrlSelect]");$("#settings_block_"+e).addClass("h24_modified_settings");$("#settings_block_"+e+" .feed_url_message").hide();$("#settings_block_"+e+" .loading_message").show();$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"updateFeedUrl",feedUrl:t,__skip_loading_overlay:true},function(t){if(t["content"]=="No feeds"){$("#settings_block_"+e+" .feed_url_message").hide();$("#settings_block_"+e+" .error_message").show()}else if(t["content"]=="feeds"){$("#settings_block_"+e+" .feed_url_message").hide();$("#settings_block_"+e+" .success_message").show();$("#settings_block_"+e+" input[name=feedUrl]").val(t["url"]);$("#settings_block_"+e+" input[name=feedUrl]").data("initial-value",t["url"]);$h24.block.reloadBlock(e,{hideLoadingSpinner:true})}else if(t["content"]=="feedLinks"){$("#settings_block_"+e+" .feed_url_message").hide();$("#settings_block_"+e+" .choose_message").show();$("#settings_block_"+e+" input[name=feedUrl]").hide();i.show();i.empty();for(var o in t["feedLinks"]){var s=t["feedLinks"][o];i.append('<option class="feed_suggestion" value="'+s["href"]+'">'+s["title"]+"</option>")}i[0].selectedIndex=0;$("#settings_block_"+e+" input[name=feedUrl]").val(t["feedLinks"][0]["href"]);$("#settings_block_"+e+" input[name=feedUrl]").data("initial-value",t["feedLinks"][0]["href"]);$h24.block.reloadBlock(e,{hideLoadingSpinner:true})}})};h24core.prototype.block.RssBlock.setTitle=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setTitleDisplay=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setShowContent=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setShowAuthor=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setShowDate=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setHyperlink=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setItemLimit=function(e,t){$("#settings_block_"+e).addClass("h24_modified_settings");$h24.block.reloadBlock(e,{hideLoadingSpinner:true})};h24core.prototype.block.RssBlock.setWidth=function(e,t){$("#block_"+e+" > div").css("width",t);$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.RssBlock.setPosition=function(e,t){if(t==0){$("#block_"+e+" > div").css({"margin-left":"","margin-right":""})}else if(t==1){$("#block_"+e+" > div").css({"margin-left":"auto","margin-right":"auto"})}else if(t==2){$("#block_"+e+" > div").css({"margin-left":"auto","margin-right":""})}$("#settings_block_"+e).addClass("h24_modified_settings")};
h24core.prototype.block.FlashBlock=function(e,t){this.innerblocktype="FlashBlock";this.blockid=t;var l=this;e.addToExecOnInit(this,function(){e.block.FlashBlock.initializeBlock(t);if(e.editmode){if($("#settings_block_"+t+" input[name=swf_source_"+t+"]:checked").val()=="internal")e.block.FlashBlock.setSWFSource(t,"internal",true);else e.block.FlashBlock.setSWFSource(t,"external",true)}});var s=false;this.angularBlockServiceListener=function(t,o){var i=$("#block_"+l.blockid);switch(t){case"changeSwf":s=true;break;case"ReloadBlockOnSave":s=true;break;case"SettingsSaved":if(s){e.block.reloadBlock(l.blockid);s=false}break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.FlashBlock.settings(this.blockid)}}}};h24core.prototype.block.FlashBlock.settings=function(e){$h24.block.settingsDialog(e,{onClose:function(e){$h24.uploader.destroy("flash_block_settings");this.close()},onReady:function(){$h24.block.FlashBlock.initUploader(e)},dialogSettings:{width:650}})};h24core.prototype.block.FlashBlock.initializeBlock=function(e){var t=$h24.blocks[e].settings;if(swfobject.getFlashPlayerVersion().major>=9){if(t.swfExist==1){if(t.swf_source=="external"&&t.swf_external!=""){var l=t.swf_external}else if(t.swf_source=="internal"&&t.swf_internal!=0){var l=t.swf_internal}else var l="";if(l!=""){var s={};var o={};var i={};if(t.wmode=="transparent")i.wmode="transparent";else i.wmode="opaque";swfobject.embedSWF(l,"h24_flash_"+e,t.width,t.height,"9.0.0",false,s,i,o)}}}else{$("#block_"+e+" .h24_flash_wrong_version").show()}};h24core.prototype.block.FlashBlock.initUploader=function(e){$h24.coreUploader.create("flash_block_settings",$("#h24_flash_upload_swf_"+e),{maxQueuedFiles:1,type:"default",mode:$h24.coreUploader.GENERIC_USER_FILE_MODE,maxFileSize:"150mb",pluploaderOptions:{filters:[$h24.coreUploader.FLASH_FILES_FILTER]},beforeUpload:function(){$("#block_"+e+"_settings_save_and_close").addClass("h24_disabled_button")},fileUploaded:function(t){$h24.block.FlashBlock.updateSWFList(e,true);$h24.block.FlashBlock.getSWFSize(e,t.user_file_id)},allFilesUploaded:function(){$("#block_"+e+"_settings_save_and_close").removeClass("h24_disabled_button")}})};h24core.prototype.block.FlashBlock.updateSWFList=function(e,t){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"getSWFList",select_first:t},function(t){$("#h24_flash_upload_content_"+e).html(t)})};h24core.prototype.block.FlashBlock.setSWFSource=function(e,t,l){if(t=="internal"){$("#settings_block_"+e+" #h24_flash_settings_internal_select").show();$("#settings_block_"+e+" #h24_flash_settings_internal_upload").show();$("#settings_block_"+e+" #h24_flash_settings_external").hide();if(l!=true){var s=$("#settings_block_"+e+" select[name=swf_internal] option:selected").val();$h24.block.FlashBlock.getSWFSize(e,s)}}else{$("#settings_block_"+e+" #h24_flash_settings_external").show();$("#settings_block_"+e+" #h24_flash_settings_internal_select").hide();$("#settings_block_"+e+" #h24_flash_settings_internal_upload").hide();if(l!=true)$h24.block.FlashBlock.getSWFSize(e,"external")}};h24core.prototype.block.FlashBlock.getSWFSize=function(e,t){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"getSWFSize",user_file_id:t},function(l){var s=l.split(",");var o=s[0];var i=s[1];var a=s[2];var n=s[3];$("#settings_block_"+e+" em[name=scaleWidth_em]").hide();$("#settings_block_"+e+" em[name=scaleHeight_em]").hide();if(t==0){o=0;i=0}else if(o==0&&i==0){o=a;i=a/2}else{if(o>a&&!n){var c=o/a;var _=Math.round(a*10)/10;var h=Math.round(i/c*10)/10;$("#settings_block_"+e+" em[name=scaleWidth_em]").show();$("#settings_block_"+e+" em[name=scaleHeight_em]").show();$("#settings_block_"+e+" span[name=scaleWidth_span]").html(_);$("#settings_block_"+e+" span[name=scaleHeight_span]").html(h)}}$("#settings_block_"+e+" input[name=width]").val(o);$("#settings_block_"+e+" input[name=height]").val(i)})};
h24core.prototype.block.WidgetBlock=function(e,o){this.innerblocktype="WidgetBlock";this.blockid=o;this.sidepanel=false;this.type=""};h24core.prototype.block.WidgetBlock.init=function(e,o){this.type=o};h24core.prototype.block.WidgetBlock.saveSettings=function(e,o){$h24.block.WidgetBlock.customSettings(e,o);$h24.block.saveSettings(e)};h24core.prototype.block.WidgetBlock.settings=function(e){var o=this.type;$h24.block.settingsDialog(e,{onReady:function(){$h24.block.WidgetBlock.previewWidget(e);switch(o){case"google_search":if($h24.block.WidgetBlock.detectGoogleSearchNewWindowSupport(e)!=="not_supported"){$("#google_search_checkbox_container").removeClass("hidden")}break}},dialogSettings:{width:650}})};h24core.prototype.block.WidgetBlock.previewWidget=function(e){var o=$h24.blocks[e].settings;$("#h24_widgetblock_preview_iframe_"+e).attr("src",$h24.slashwebroot+"Block/Edit-Communicator/blockid/"+e+"/modelaction/iframe");if(o.displayPreview==0)$("#h24_widgetblock_preview_div_"+e).hide()};h24core.prototype.block.WidgetBlock.onloadPreviewIframe=function(e,o){hide_loading_overlay();if(o==0){$("#h24_widgetblock_preview_div_"+e).show();$h24.block.WidgetBlock.iframeHeight(e)}else $("#h24_widgetblock_preview_div_"+e).hide()};h24core.prototype.block.WidgetBlock.iframeHeight=function(e){var o=$("#h24_widgetblock_preview_iframe_"+e).contents().find("body").height();o+=40;if(o>400)o=400;else if(o<150)o=150;$("#h24_widgetblock_preview_iframe_"+e).attr("height",o)};h24core.prototype.block.WidgetBlock.saveWidget=function(e){var o=$("#settings_block_"+e+" textarea[name=content]").val();$.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:e,modelaction:"saveWidget",content:o},function(o){$h24.block.WidgetBlock.reloadPreviewIframe(e)})};h24core.prototype.block.WidgetBlock.reloadPreviewIframe=function(e){$("#h24_widgetblock_preview_div_"+e).hide();show_loading_overlay();var o=$("#h24_widgetblock_preview_iframe_"+e);o.attr("src",o.attr("src"))};h24core.prototype.block.WidgetBlock.moreInfo=function(e){var o=e.id;$("#"+o+"_div").slideToggle("fast")};h24core.prototype.block.WidgetBlock.detectGoogleSearchNewWindowSupport=function(e){var o=$("#settings_block_"+e+" textarea[name=content]");var t=o.val();if(t){if(t.indexOf("google.search.CustomSearchControl")!==-1){return"version_2014"}else if(t.indexOf("gcse:searchbox-only")!==-1){return"version_2017"}}return"not_supported"};h24core.prototype.block.WidgetBlock.customSettings=function(e,o){if(o=="google_search"){var t=$("#settings_block_"+e+" textarea[name=content]");var i=t.val();var r=$("#settings_block_"+e+" input[name=google_search_target]").is(":checked");var c=$h24.block.WidgetBlock.detectGoogleSearchNewWindowSupport(e);if(c==="version_2014"){var l=false;var a=/LINK_TARGET_SELF/;var n=i.search(a);if(n!=-1)l=true;var s="customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);";var d="customSearchControl.draw('cse');";if(l&&r){var h=i.split(s);var g="";for(var v in h){g+=h[v]}t.val(g)}else if(!l&&!r){var h=i.split(d);var g="";if(h.length==2){g=h[0]+d+s+h[1]}else g=i;t.val(g)}}else if(c==="version_2017"){if(i.match(/newWindow=\"?(true|false)\"?/i)){if(r){if(i.match(/newWindow=\"?(false)\"?/i)){i=i.replace(/newWindow=\"?false\"?/,'newWindow="true"');t.val(i)}}else{if(i.match(/newWindow=\"?(true)\"?/i)){i=i.replace(/newWindow=\"?true\"?/,'newWindow="false"');t.val(i)}}}else{if(r){var k="<gcse:searchbox-only";var _=i.indexOf(k);if(_!==-1){var f=i.slice(0,_);var p=i.slice(_+k.length);i=f+k+' newWindow="true"'+p;t.val(i)}}}}}};
h24core.prototype.block.DividerBlock=function(i,d){this.innerblocktype="DividerBlock";this.blockid=d;var e=this;if(i.editmode){i.addToExecOnInit(this,function(){})}this.BCPActions={blockSettings:function(){var d=true;if(d&&$("html").hasClass("angularjs-in-edit-mode")){i.block.toggleBlock("select",this.blockid)}else{i.block.DividerBlock.openDividerDialog(this.blockid)}}};this.angularBlockServiceResponder=function(i,d){switch(i){case"Boundaries":var r=$("#block_"+e.blockid);return{collectionSize:parseInt(r.closest(".h24_collection").width(),10)};break}};var r=false;this.angularBlockServiceListener=function(d,t){switch(d){case"WidthChanged":var n=$("#block_"+e.blockid),a=n.closest(".h24_collection").width(),_=n.find(".h24_divider_width"),v="";if(t==0){v="100%"}else if(t<a){v=t+"px"}else{v=a+"px"}_.width(v);break;case"PaddingTopChanged":var n=$("#block_"+e.blockid),l=n.find(".h24_divider_padding");l.css("padding-top",t+"px");break;case"PaddingBottomChanged":var n=$("#block_"+e.blockid),l=n.find(".h24_divider_padding");l.css("padding-bottom",t+"px");break;case"AlignmentChanged":var n=$("#block_"+e.blockid),_=n.find(".h24_divider_width");_.css("margin","");_.css("float","");if(t=="center")_.css("margin"," 0 auto");else if(t=="right")_.css("float"," right");break;case"TypeChanged":r=true;break;case"SettingsSaved":if(r){i.block.reloadBlock(e.blockid);r=false}break}}};h24core.prototype.block.DividerBlock.openDividerDialog=function(i){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:i,modelaction:"getDividerDialog"},function(d){var e=d[0];var r=d[1];var t=d[2];var n=t.split("_")[0];var a=d[3];var _=d[4];if(a<550)a=550;a=parseInt(a)+50;$h24.dialog.create("h24_divider_dialog",e,{width:a,title:$h24.phrase.GUIPhrase("Block-Divider","Divider")});if(n=="line")var v=0;else if(n=="figu")var v=1;else if(n=="deco")var v=2;else if(n=="empty")var v=3;$("#h24_divider_tab_"+i).tabs().tabs("option","active",v);if(r=="")r=[0,0,0,0];$divider_block=$("#h24_divider_"+i);$divider_block.find("input[name=h24_divider_selected_name]").val(t);if(_["min"]==_["max"])$divider_block.find(".h24_divider_width_no_slider").show();else $divider_block.find(".h24_divider_width_no_slider").hide();$h24.block.DividerBlock.initDividerEvents(i);$h24.block.DividerBlock.initDividerSliders(i,r,_);$h24.block.DividerBlock.updateDividerSliders(i,r,_)})};h24core.prototype.block.DividerBlock.initDividerEvents=function(i){$("#h24_divider_"+i+" .h24_divider_list_wrapper").unbind();$("#h24_divider_"+i+" .h24_divider_list_wrapper").each(function(){$(this).click(function(){var d=$(this).find("input[name=h24_divider_list_name]").val();$("#h24_divider_"+i+" .h24_divider_list_wrapper").removeClass("h24_divider_list_selected");$(this).addClass("h24_divider_list_selected");if(d=="empty")$(".h24_divider_list .h24_divider_empty_notice").hide();else $(".h24_divider_list .h24_divider_empty_notice").show();$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:i,modelaction:"getDividerPreview",dividertype:d},function(e){var r=e[0];var t=e[1];var n=e[2];var a=e[3];$("#h24_divider_"+i+" select[name=h24_divider_align]").val(a);$("#h24_divider_"+i+" .h24_divider_preview_markup").html(r);$("#h24_divider_"+i+" input[name=h24_divider_selected_name]").val(d);$h24.block.DividerBlock.updateDividerSliders(i,t,n)})})});$("#h24_divider_"+i+" input[name=h24_divider_padding_top_value]").unbind("keyup").keyup(function(d){var e=$h24.block.DividerBlock.getInt($(this).val());$("#h24_divider_"+i+" .h24_divider_padding_top_slider").slider("option","value",e)});$("#h24_divider_"+i+" input[name=h24_divider_padding_bottom_value]").unbind("keyup").keyup(function(d){var e=$h24.block.DividerBlock.getInt($(this).val());$("#h24_divider_"+i+" .h24_divider_padding_bottom_slider").slider("option","value",e)});$("#h24_divider_"+i+" input[name=h24_divider_width_value]").unbind("blue").blur(function(d){var e=$h24.block.DividerBlock.getInt($(this).val());$("#h24_divider_"+i+" .h24_divider_width_slider").slider("option","value",e)});$("#h24_divider_"+i+" select[name=h24_divider_align]").change(function(d){var e=d.currentTarget.value;var r=$("#h24_divider_"+i+" .h24_divider_preview .h24_divider_width");r.css("margin","");r.css("float","");if(e=="center")r.css("margin","0 auto");else if(e=="right")r.css("float","right")})};h24core.prototype.block.DividerBlock.getInt=function(i){if(i=="")return 0;else return parseInt(i)};h24core.prototype.block.DividerBlock.updateDividerSliders=function(i,d,e){var r=$("#h24_divider_"+i);r.find("input[name=h24_divider_padding_top_value]").val(d[0]);r.find(".h24_divider_padding_top_slider").slider("option","value",d[0]);r.find("input[name=h24_divider_padding_bottom_value]").val(d[2]);r.find(".h24_divider_padding_bottom_slider").slider("option","value",d[2]);r.find("input[name=h24_divider_width_value]").val(e["width"]);r.find(".h24_divider_width_slider").slider("option","min",e["min"]);r.find(".h24_divider_width_slider").slider("option","max",e["max"]);r.find(".h24_divider_width_slider").slider("option","value",e["width"]);r.find(".h24_divider_width_slider").slider("option","step",e["step"]);if(e["min"]==e["max"])r.find(".h24_divider_width_no_slider").show();else r.find(".h24_divider_width_no_slider").hide()};h24core.prototype.block.DividerBlock.initDividerSliders=function(i,d,e){var r=$("#h24_divider_"+i);r.find("input[name=h24_divider_padding_top_value]").val(d[0]);r.find(".h24_divider_padding_top_slider").slider({min:0,max:100,value:d[0],slide:function(i,d){var e=r.find(".h24_divider_preview .h24_divider_padding");e.css("padding-top",d.value+"px");r.find("input[name=h24_divider_padding_top_value]").val(d.value)},change:function(i,d){var e=r.find(".h24_divider_preview .h24_divider_padding");e.css("padding-top",d.value+"px");r.find("input[name=h24_divider_padding_top_value]").val(d.value)}});r.find("input[name=h24_divider_padding_bottom_value]").val(d[2]);r.find(".h24_divider_padding_bottom_slider").slider({min:0,max:100,value:d[2],slide:function(i,d){var e=r.find(".h24_divider_preview .h24_divider_padding");e.css("padding-bottom",d.value+"px");r.find("input[name=h24_divider_padding_bottom_value]").val(d.value)},change:function(i,d){var e=r.find(".h24_divider_preview .h24_divider_padding");e.css("padding-bottom",d.value+"px");r.find("input[name=h24_divider_padding_bottom_value]").val(d.value)}});r.find("input[name=h24_divider_width_value]").val(e["width"]);r.find(".h24_divider_width_slider").slider({min:e["min"],max:e["max"],value:e["width"],step:e["step"],slide:function(i,d){r.find(".h24_divider_preview .h24_divider_width").css("width",d.value+"px");var e=r.find(".h24_divider_preview .h24_divider_padding").width();r.find("input[name=h24_divider_width_value]").val(d.value)},change:function(i,d){r.find(".h24_divider_preview .h24_divider_width").css("width",d.value+"px");var e=r.find(".h24_divider_preview .h24_divider_padding").width();r.find("input[name=h24_divider_width_value]").val(d.value)}})};h24core.prototype.block.DividerBlock.saveDividerSettings=function(i){var d=$("#h24_divider_"+i);var e=d.find("input[name=h24_divider_selected_name]").val();if(e!=""){var r=parseInt(d.find("input[name=h24_divider_padding_top_value]").val());var t=parseInt(d.find("input[name=h24_divider_padding_bottom_value]").val());var n=parseInt(d.find("input[name=h24_divider_width_value]").val());var a=d.find("select[name=h24_divider_align]").val();var _={top:r,right:0,bottom:t,left:0}}else{var _=""}$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:i,modelaction:"saveDividerSettings",dividertype:e,padding:_,width:n,align:a},function(i){$h24.dialogs.h24_divider_dialog.close();reloadColumns()})};
h24core.prototype.block.RecommendationBlock=function(o,t){this.innerblocktype="RecommendationBlock";this.blockid=t;this.initPrompt=function(t,i){o.get(o.slashwebroot+"Block/Init-Prompt/",{blockid:t.blocks[0].blockid},function(t){if(t.length>10){var e='<div id="block_init_prompt">'+t+"</div>";o.dialog.create("block_init_prompt",e,{width:800,noCloseFlap:true});$("#h24_recommendation_block_init_prompt a.h24_hover_preview").hoverPreview()}else reloadColumn(i)})};o.addToExecOnInit(this,function(){o.block.RecommendationBlock.initializeBlock(t);if(o.editmode){}})};h24core.prototype.block.RecommendationBlock.initializeBlock=function(o){};h24core.prototype.block.RecommendationBlock.initializeDialog=function(o){$("#h24_recommendation_block .h24_hover_preview").hoverPreview()};h24core.prototype.block.RecommendationBlock.getTextLinkList=function(o){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:o,modelaction:"getTextLinkList"},function(o){if(o["statuscode"]==1){$("#recommendation_text_link").show();$("#recommendation_text_link_list").html(o["markup"])}})};h24core.prototype.block.RecommendationBlock.selectTextLinkAsBlock=function(o,t){$h24.post($h24.slashwebroot+"Block/Edit-Communicator/",{blockid:o,modelaction:"selectTextLinkAsBlock",text_link_id:t},function(o){if(o["statuscode"]==1){refreshBrowser();$h24.dialogs.block_init_prompt.close()}})};
h24core.prototype.block.BlogRollBlock=function(o,l){this.innerblocktype="BlogRollBlock";this.blockid=l;var e=false;this.angularBlockServiceListener=function(t,c){var n=$("#block_"+self.blockid);switch(t){case"Reload":e=true;break;case"SettingsSaved":if(e){o.block.reloadBlock(l);e=false}break}};this.BCPActions={blockSettings:function(){var l=true;if(l&&$("html").hasClass("angularjs-in-edit-mode")){o.block.toggleBlock("select",this.blockid)}else{o.block.settingsDialog(this.blockid)}}}};h24core.prototype.block.BlogRollBlock.reloadBlogrollSettings=function(o,l){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:o,modelaction:"settings",blog_source_id:l},function(l){$("#settings_block_"+o).html($(l).html())})};h24core.prototype.block.BlogRollBlock.newLink=function(o){var l=$("#settings_block_"+o+" input[name=link_count]");var e=parseInt(l.val())+1;l.val(e);var t='<tr><td><input type="text" class="save_parameter" name="name_'+e+'" /></td><td><input type="text" class="save_parameter long_textField" name="url_'+e+'" value="http://" /></td></tr>';$("#block_"+o+"_linktable").append(t)};h24core.prototype.block.BlogRollBlock.blogSourceSelected=function(o,l,e){if($("#settings_block_"+l+" input[name=changes]").val()==1){var t=confirm($h24.phrase.GUIPhrase("Block-General","You will lose any unsaved changes. Do you want to continue?"));if(t!=true){$(o).children("option[value="+e+"]").attr("selected","selected");return}}var e=o.options[o.selectedIndex].value;$h24.block.BlogRollBlock.reloadBlogrollSettings(l,e)};h24core.prototype.block.BlogRollBlock.markChange=function(o){$("#settings_block_"+o+" input[name=changes]").val(1)};
h24core.prototype.block.ProductPriceBlock=function(o,e){this.innerblocktype="ProductPriceBlock";this.blockid=e;this.BCPActions={legacyStoreSettings:function(){o.homepage_settings.loadHomepageSettings(7)},legacyStoreToggleStock:function(e){var t=$("#block_"+this.blockid+' .h24_bcp_bottom_inner_container > [data-action="legacyStoreToggleStock"]');if(e.changeToInStock){e.changeToInStock=false;t.data("parameters",e);o.block.ProductPriceBlock.webShopToggleStock(this.blockid,1);t.contents().filter(function(){return this.nodeType===3}).remove();t.append(" "+e.changeToOutOfStockPhrase)}else{e.changeToInStock=true;t.data("parameters",e);o.block.ProductPriceBlock.webShopToggleStock(this.blockid,0);t.contents().filter(function(){return this.nodeType===3}).remove();t.append(" "+e.changeToInStockPhrase)}}}};h24core.prototype.block.ProductPriceBlock.initTabs=function(o){$("#block_"+o+"_tabs").tabs();$("#block_"+o+"_subtabs").unbind().tabs()};h24core.prototype.block.ProductPriceBlock.settings=function(o){$h24.block.settingsDialog(o,{onReady:function(){$h24.block.ProductPriceBlock.initTabs(o)},dialogSettings:{width:560}})};h24core.prototype.block.ProductPriceBlock.calcVatInputs=function(o,e){var t=$("#block_"+o+"_price_excl_input");var c=$("#block_"+o+"_price_incl_input");var i=$("#block_"+o+"_price_vat option:selected").val();var l=t.val();var r=c.val();r=r.replace(/,/g,".").replace(/:/g,".");l=l.replace(/,/g,".").replace(/:/g,".");if(isNaN(l)||l<0||isNaN(r)||r<0){if(e==0)c.val("0");else t.val("0");return}var n=1+i/100;var a=l*n;if(i>0)var s=r*(1/n);else var s=r;if(e==0)c.val(a.toFixed(3));else t.val(s.toFixed(3))};h24core.prototype.block.ProductPriceBlock.createProductVersion=function(o){$h24.block.saveSettings(o,{onClose:function(){if($h24.design_system==1){var e=$("#liblock_"+o).closest(".h24_collection").attr("id").substring(10);reloadColumn(e)}else reloadColumns();var t=$("#settings_block_"+o+" input[name=product_identifier]").val();$h24.get($h24.publicdir+"../Block/Edit-Communicator/",{blockid:o,modelaction:"create_product",current_version:t},function(e){$("#block_"+o+"_tab0").html(e);$h24.block.ProductPriceBlock.initTabs(o)})}})};h24core.prototype.block.ProductPriceBlock.getCurrentStockBalance=function(o,e){var t=Math.random()*9999;$.get($h24.publicdir+"../Page/Communicator/model/WebShopManager/modelaction/get_current_stock_balance/anticache/"+t,{homepageid:$h24.homepageid,product_identifier:e},function(e){if(e!="error"&&!isNaN(e))$("#block_"+o+"_subtab1 input[name=stock_balance]").val(e)})};h24core.prototype.block.ProductPriceBlock.loadProductVersion=function(o){$h24.block.saveSettings(o,{onClose:function(){if($h24.design_system==1){var e=$("#liblock_"+o).closest(".h24_collection").attr("id").substring(10);reloadColumn(e)}else reloadColumns();var t=$("#settings_block_"+o+" select[name=select_product_identifier] option:selected").val();$h24.get($h24.publicdir+"../Block/Edit-Communicator/",{blockid:o,modelaction:"product_settings",current_version:t},function(e){$("#block_"+o+"_tab0").html(e);$h24.block.ProductPriceBlock.initTabs(o)})}})};h24core.prototype.block.ProductPriceBlock.deleteProductVersion=function(o){var e=confirm(translatedString("del_prod_version"));if(e!=true)return;$h24.block.saveSettings(o,{onClose:function(){if($h24.design_system==1){var e=$("#liblock_"+o).closest(".h24_collection").attr("id").substring(10);reloadColumn(e)}else reloadColumns();var t=$("#settings_block_"+o+" select[name=select_product_identifier] option:selected").val();$h24.get($h24.publicdir+"../Block/Edit-Communicator/",{blockid:o,modelaction:"delete_version",current_version:t},function(e){$("#block_"+o+"_tab0").html(e);$h24.block.ProductPriceBlock.initTabs(o)})}})};h24core.prototype.block.ProductPriceBlock.webShopToggleStock=function(o,e){$.post($h24.publicdir+"../Block/Edit-Communicator",{blockid:o,modelaction:"toggle_stock",in_stock:e},function(e){if($h24.design_system==1){var t=$("#liblock_"+o).closest(".h24_collection").attr("id").substring(10);reloadColumn(t)}else reloadColumns()})};h24core.prototype.block.ProductPriceBlock.setSpecialFreeShipping=function(o,e){var t=$("#settings_block_"+e+" input[name=special_shipment_price]");if(o==1){t.val("0.00");t.removeAttr("disabled")}else{t.attr("disabled","disabled");t.val("0.01")}};
h24core.prototype.block.SimpleCommentBlock=function(e,t){this.innerblocktype="SimpleCommentBlock";this.blockid=t;self=this;if(e.editmode){e.addToExecOnInit(this,function(){e.block.SimpleCommentBlock.initReplyButtons(t)})}this.BCPActions={commentManager:function(){e.comment_manager.loadCommentManager(0)},blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.SimpleCommentBlock.settings(this.blockid)}}};var o=false;this.angularBlockServiceListener=function(t,i){var l=this.blockid;var n=$("#block_"+l);switch(t){case"NameFieldTextChanged":var c=n.find("[data-label=name]");if(c.length==1){c.html(i)}break;case"EmailFieldTextChanged":var c=n.find("[data-label=email]");if(c.length==1){c.html(i)}break;case"UrlFieldTextChanged":var c=n.find("[data-label=url]");if(c.length==1){c.html(i)}break;case"CommentFieldTextChanged":var c=n.find("[data-label=comment]");if(c.length==1){c.html(i)}break;case"SubmitTextChanged":var a=n.find("[data-function=submit]");if(a.length==1){a.text(i)}break;case"ReloadBlockOnSave":o=true;break;case"SettingsSaved":if(o){e.block.reloadBlock(l);o=false}break;case"BCPActions":var m=i;if(typeof self.BCPActions[m]!="undefined"){self.BCPActions[m].call(this)}break}}};h24core.prototype.block.SimpleCommentBlock.initReplyButtons=function(e){$("#block_"+e+" div.h24_comment_block_comments li").each(function(){$(this).hover(function(){$(this).children("div.buttons").show()},function(){$(this).children("div.buttons").hide()})})};h24core.prototype.block.SimpleCommentBlock.settings=function(e){$h24.block.settingsDialog(e,{onReady:function(){$("#settings_block_"+e+"_tabs").tabs().tabs("option","active",0)},dialogSettings:{width:600}})};h24core.prototype.block.SimpleCommentBlock.saveCommentReply=function(e,t){var o=$("#h24_reply_editor_"+t+" textarea").val();$.post($h24.publicdir+"../Block/Edit-Communicator",{blockid:e,modelaction:"reply",visitor_comment_id:t,reply:o},function(o){if(o.successful){$("#block_"+e+" .reply_to_comment_"+t).hide();$("#h24_reply_editor_"+t).hide();if(o.reply!=""){$("#block_"+e+" .reply_to_comment_"+t+" .h24_normal_text").html(o.reply);$("#block_"+e+" .reply_to_comment_"+t).show();$("#h24_reply_editor_"+t).hide()}}})};h24core.prototype.block.SimpleCommentBlock.toggleCommentReplyEditor=function(e,t){if($("#h24_reply_editor_"+t).is(":hidden")){$("#block_"+e+" .reply_to_comment_"+t).hide();$("#h24_reply_editor_"+t).show()}else{$("#block_"+e+" .reply_to_comment_"+t).show();$("#h24_reply_editor_"+t).hide()}};
h24core.prototype.block.BlogArchiveBlock=function(i,o){this.innerblocktype="BlogArchiveBlock";this.blockid=o;this.sidepanel=false;i.addToExecOnInit(this,function(){$("#block_"+o+" span.collapser").hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","arrow")}).click(function(){var i=$(this);$(this).siblings("ul").each(function(){$(this).toggle();if($(this).is(":hidden"))i.html("&#9658;");else i.html("&#9660;")})})})};
h24core.prototype.block.BlogPostHeaderBlock=function(t,e){this.innerblocktype="BlogPostHeaderBlock";this.blockid=e;this.ckeditor=null;this.editorIsActive=false;this.autosaveTimeoutTimer=-1;this.lastSavedData=null;this.autoSaveTime=10*1e3;this.$textContent=null;this.isContentEditableActive=false;var i=this;if(t.editmode){t.addToExecOnInit(this,function(){i.$textContent=$("#block_"+e+"_text_content");i.isContentEditableActive=this.$textContent.data("isContentEditable")})}this.BCPActions={textEditor:function(){if(t.design_system==0){i.BCPActions.blockSettings()}else{i.ckeditor.fire("focus");t.block.toggleBlock("edit",this.blockid)}},fontSettings:function(){if(t.design_system==0){showDialog("#style_manager",2);t.style_manager.loadStyleManagerTabs()}else{t.design_manager.managerDialog("fonts","headings")}},blockSettings:function(){var e=true;if(e&&$("html").hasClass("angularjs-in-edit-mode")){t.block.toggleBlock("select",this.blockid)}else{t.block.BlogPostHeaderBlock.settings(this.blockid)}}};this.save=function(e){var o=i.getCkeditorData();if(i.lastSavedData===null){i.lastSavedData=o}else if(o!=i.lastSavedData){if(o!=""){o=$.trim(o);t.post(t.slashwebroot+"Block/Edit-Communicator",{blockid:i.blockid,modelaction:"save_content",content:o,__skip_loading_overlay:true,__keep_loading_overlay:true},function(i){if(typeof e==="function"){e(i)}if(i.successful==true){var o=t.blocks;for(var s in o){switch(o[s].innerblocktype){case"LatestBlogPostsBlock":case"BlogArchiveBlock":t.block.reloadBlock(parseInt(o[s].blockid));break}}}})}i.lastSavedData=o}if(i.editorIsActive){i.autosaveTimeoutTimer=setTimeout(i.save,i.autoSaveTime)}if($("html").hasClass("faux-section-support")){t.fauxSections.reposition()}};this.getCkeditorData=function(){var t=i.ckeditor.getData();if(t===null){t=""}return t};this.deleteEmptyContent=function(){t.block.remove(e,null,true)};this.initCKEDitor=function(){var o,s;if(t.design_system!=0&&i.isContentEditableActive){this.$textContent.prop("contentEditable",true);s=[];s.push({items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]});if(t.devmode){s.push({items:["H24Html"]})}this.ckeditor=CKEDITOR.inline(i.$textContent[0],{forcePasteAsPlainText:true,keystrokes:[[13,"blur"],[CKEDITOR.SHIFT+13,"blur"]],toolbar:s,removePlugins:"liststyle"});this.ckeditor.on("instanceReady",function(t){var e=$(t.editor.element.$).attr("title","")});this.ckeditor.on("focus",function(e){t.block.toggleBlock("edit",i.blockid);i.editorIsActive=true;i.save();e.editor.focus();for(var o in t.blocks){if(o!=i.blockid&&!!t.blocks[o].ckeditor&&!!t.blocks[o].ckeditor.fire){t.blocks[o].ckeditor.fire("blur")}}},this);if(!t.utils.touchMode){this.ckeditor.on("blur",function(){var e=this.getCkeditorData();if(e==""){e="&nbsp;"}else{this.save()}this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);if(window.location.hash=="#/block/"+i.blockid+"/settings/"){t.block.toggleBlock("select",i.blockid)}else{t.block.toggleBlock("deselect",i.blockid)}if(i.$textContent.data("linked")=="yes"){$("#block_container_"+i.blockid+" .h24_cke_heading_link_helper").hide()}},this)}}else if(t.design_system==0){var l=$("#block_"+e),n=l.find("a");if(n.length==0){$("#block_"+e).bind("click.heading_shortcut",function(){t.block.BigHeadingBlock.settings(e)})}}};this.destroyCKEditor=function(){var t=this.getCkeditorData();if(t==""){this.deleteEmptyContent()}else{this.save()}this.$textContent.prop("contentEditable",false);this.ckeditor.destroy();this.ckeditor=null;this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);if(i.$textContent.data("linked")=="yes"){$("#block_container_"+i.blockid+" .h24_cke_heading_link_helper").hide()}};this.destroy=function(){if(!!i.ckeditor){i.ckeditor.destroy();this.ckeditor=null}};var o=false;this.angularBlockServiceListener=function(e,s){switch(e){case"TimestampChanged":o=true;break;case"SettingsSaved":if(o){t.block.reloadBlock(i.blockid);o=false}break}}};h24core.prototype.block.BlogPostHeaderBlock.settings=function(t){$h24.block.settingsDialog(t,{dialogSettings:{width:450}})};h24core.prototype.block.BlogPostHeaderBlock.saveSettings=function(t){$h24.block.saveSettings(t,{onClose:function(t,e){if(t.successful)refreshBrowser();else if($h24.devmode)console.log(t)},keepLoadingSpinner:true})};
h24core.prototype.block.BlogTagBlock=function(l,t){this.innerblocktype="BlogTagBlock";this.blockid=t;var o=this;this.angularBlockServiceListener=function(t,e){switch(t){case"SettingsSaved":l.block.reloadBlock(o.blockid);break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){l.block.toggleBlock("select",this.blockid)}else{l.block.settingsDialog(this.blockid)}}}};h24core.prototype.block.BlogTagBlock.tagSelected=function(l,t){var o=t.options[t.selectedIndex];var e=$(o).val();if(e=="1"){var c=$(o).text();var i=$("#settings_block_"+l+"_tags");if(i.val()=="")i.val(i.val()+c);else i.val(i.val()+", "+c)}};
h24core.prototype.block.ContactFormBlock=function(e,t){this.innerblocktype="ContactFormBlock";this.blockid=t;this.BCPActions={settingsDialog:function(){e.block.toggleBlock("deselect");e.block.settingsPanel(-1);e.block.settingsDialog(this.blockid,600)}}};h24core.prototype.block.ContactFormBlock.createField=function(e){var t=-1;$("#settings_block_"+e+" .field").each(function(e){if(t>-1)return;if($(this).hasClass("hidden")){$(this).removeClass("hidden");t=e}});if(t==9)$("#settings_block_"+e+" .create_new_field").hide()};h24core.prototype.block.ContactFormBlock.removeField=function(e,t){$("#settings_block_"+e+" .field").each(function(i){if(t==i+1){$(this).find("input[name=field"+t+"_text]").val("");$(this).find("input[name=field"+t+"_req]")[0].checked=false;$(this).find("select[name=field"+t+"_type]")[0].selectedIndex=0;var n=$(this).find("input[name=email_field]")[0].checked;if(n){$(this).find("input[name=email_field]")[0].checked=false;$("#settings_block_"+e+" input[name=email_field]:last")[0].checked=true}}})};
h24core.prototype.block.BlockTemplateBlock=function(o,e){this.innerblocktype="BlockTemplateBlock";this.blockid=e;o.addToExecOnInit(this,function(){})};h24core.prototype.block.BlockTemplateBlock.settings=function(o){$h24.block.previewSettingsDialog(o,{onReady:function(){var e=$("#settings_block_"+o);e.find("input, select").each(function(){var e=$(this);var t=e.attr("name");if(t=="content"){e.inputTimeout({onTimeout:function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){}})},onKeyUp:function(){$h24.block.BlockTemplateBlock.setContent(o,e.val())}})}else if(t=="foregroundColor"){e.change(function(){$h24.block.BlockTemplateBlock.setForegroundColor(o,e.val());$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){}})})}else if(t=="backgroundColor"){e.change(function(){$h24.block.BlockTemplateBlock.setBackgroundColor(o,e.val());$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){}})})}})}})};h24core.prototype.block.BlockTemplateBlock.reloadBlockForFun=function(o){$h24.block.reloadBlock(o)};h24core.prototype.block.BlockTemplateBlock.setContent=function(o,e){$("#block_"+o+" p span").text(e);$("#settings_block_"+o).addClass("h24_modified_settings")};h24core.prototype.block.BlockTemplateBlock.setForegroundColor=function(o,e){$("#block_"+o+" p span").css("color",e);$("#settings_block_"+o).addClass("h24_modified_settings")};h24core.prototype.block.BlockTemplateBlock.setBackgroundColor=function(o,e){$("#block_"+o+" p").css("background-color",e);$("#settings_block_"+o).addClass("h24_modified_settings")};h24core.prototype.block.BlockTemplateBlock.doSomething=function(o){$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:o,modelaction:"getRandomNumber"},function(o){alert(o.randomNumber)})};
h24core.prototype.block.GalleriaBlock=function(e,a){this.innerblocktype="GalleriaBlock";this.blockid=a;this.galleria="";this.settings={};this.currentCategory=-1;this.sidepanel=true;var i=this;e.addToExecOnInit(this,function(){$(document).ready(function(){e.block.GalleriaBlock.createGalleria(a)})});this.initPrompt=function(a,i){var l=this.blockid;e.get(e.slashwebroot+"Block/Init-Prompt/",{blockid:l},function(a){if(a!=""){e.dialog.create("block_init_prompt",a,{width:600,noCloseFlap:true});$("#block_init_prompt select[name=commoncategoryids]").multiSelect({selectAllText:e.phrase.GUIPhrase("Image-Manager","All my categories"),noneSelected:e.phrase.GUIPhrase("Image-Manager","All my categories"),oneOrMoreSelected:"% "+e.phrase.GUIPhrase("Image-Manager","categories selected")});$("#block_init_prompt .multiSelectOptions input.selectAll").hide()}else reloadColumn(i)})};this.BCPActions={imageManagerUploadTab:function(e){showDialog("#image_manager",0);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory,this.blockid)}else{loadImageManagerTabs(e.uploadLinkCategory,e.manageLinkCategory,this.blockid)}},imageManagerCategoriesTab:function(e){showDialog("#image_manager",1);if(this.currentCategory>=0){loadImageManagerTabs(this.currentCategory,this.currentCategory)}else{loadImageManagerTabs(e.uploadLinkCategory,e.manageLinkCategory)}},blockSettings:function(){if(!!this.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.GalleriaBlock.settings(this.blockid)}}};this.angularBlockServiceResponder=function(e,a){switch(e){case"Boundaries":var l=$("#block_"+i.blockid);return{collectionSize:parseInt(l.closest(".h24_collection").width(),10)};break}};var l=false;this.angularBlockServiceListener=function(a,o){var t=$("#block_"+i.blockid);switch(a){case"ReloadBlockOnSave":l=true;break;case"CategoriesChanged":if(o.length==0){i.currentCategory=0}else{i.currentCategory=o[0]}l=true;break;case"SlideshowAutoplayChanged":case"SlideshowIntervalChanged":var n=o.autoplay,r=o.interval;if(n==false){i.galleria.pause()}else{i.galleria.play(r*1e3)}break;case"PictureScaleChanged":var s=o==1?true:false;s=o=="height"||o=="width"?o:s;var c=s==false?1:0;i.galleria.setOptions("imageCrop",s).setOptions("maxScaleRatio",c).refreshImage();break;case"TransitionStyleChanged":i.galleria.setOptions("transition",o);break;case"TransitionSpeedChanged":i.galleria.setOptions("transitionSpeed",o);break;case"BackgroundColorChanged":l=true;break;case"SettingsSaved":if(l){e.block.reloadBlock(i.blockid);l=false}break}}};h24core.prototype.block.GalleriaBlock.createGalleria=function(e){if($("#galleria_"+e).length==0){return}var a=$h24.blocks[e].settings;if($("#galleria_"+e+" a").length==0){return}var i=a["transition_speed"]==0?400:a["transition_speed"];var l=a["picture_scale"]==1?true:false;var o=a["thumbnail_show"]==1?true:false;l=a["picture_scale"]=="height"||a["picture_scale"]=="width"?a["picture_scale"]:l;autoplay=a["slideshow_autoplay"]==1&&a["slideshow_interval"]>0?a["slideshow_interval"]*1e3:false;var t=true;var n=true;var r=true;var s=true;var c=true;if(a["slim_mode"]==true){t=false;n=false;r=false}var h=a["gallery_height"];var g=a["collectionsize"];var d=$(window).width();var u=1023;if($h24.isMobile&&d!=0&&d<=u){g=Math.round($("#block_"+e).width());var k=a["gallery_height"]/a["collectionsize"];if(k>1){k=1}var d=$(window).width();var _=Math.round(d*k);$("#galleria_"+e).css("height",_+"px");h=k;$galleryHeight=h}else{g=Math.round(g);h=Math.round(h)}if(typeof a["has_links"]!="undefined"&&a["has_links"]==1){s=false}var f=l==false?1:0;if(typeof $h24.blocks[e].galleria=="object"){$h24.blocks[e].galleria.destroy()}else{if(typeof Galleria.theme=="undefined"){if(a["theme"]=="azur"){Galleria.loadTheme($h24.publicdir+"js/galleria-1.5.7/themes/azur/galleria.azur.js")}else{Galleria.loadTheme($h24.publicdir+"js/galleria-1.5.7/themes/classic/galleria.classic.js")}}}if(typeof Galleria.theme!="undefined"){if(Galleria.theme.name=="classic"&&a["theme"]!=""&&a["theme"]!="classic"){$h24.utils.ajaxLoaderStart();$(".h24_galleria_block").loadingSpinner(true);window.location.href=window.location.href;return}else if(Galleria.theme.name=="azur"&&a["theme"]!="azur"){$h24.utils.ajaxLoaderStart();$(".h24_galleria_block").loadingSpinner(true);window.location.href=window.location.href;return}}if(a["theme"]=="azur"){Galleria.run("#galleria_"+e,{wait:true,height:h,width:g,transition:a["transition_style"],fullscreenTransition:a["transition_style"],transitionSpeed:i,maxScaleRatio:f,thumbnails:o,showCounter:t,showInfo:n,showImagenav:r,imageCrop:l,fullscreenCrop:false,autoplay:autoplay,clicknext:s,imageMargin:a["frame_size"],swipe:"disabled",debug:c,extend:function(a){var i=this;this.bind("image",function(e){var a=i.getData(i.getIndex());var l=a.original;var o=$(l).attr("title");$(e.imageTarget).attr("alt",o)});this.bind("thumbnail",function(e){var a=i.getData(e.index);var l=a.original;var o=$(l).attr("alt");$(e.thumbTarget).attr("alt",o)});this.bind("fullscreen_enter",function(){this.setOptions("maxScaleRatio",1)});this.bind("fullscreen_exit",function(){this.setOptions("maxScaleRatio",f)});if($h24.editmode){$("#galleria_"+e+" div.galleria-fullscreen").unbind("click")}else{if(s){this.bind("image",function(e){$(e.imageTarget).off("touchend").on("touchend",this.proxy(function(){i.next()}))})}}},_locale:{show_captions:$h24.phrase.HomepagePhrase("Block-Galleria","Show captions"),hide_captions:$h24.phrase.HomepagePhrase("Block-Galleria","Hide captions"),play:$h24.phrase.HomepagePhrase("Block-Galleria","Play slideshow"),pause:$h24.phrase.HomepagePhrase("Block-Galleria","Pause slideshow"),enter_fullscreen:$h24.editmode?$h24.phrase.GUIPhrase("Block-Galleria","Fullscreen only works in published mode"):$h24.phrase.HomepagePhrase("Block-Galleria","Enter fullscreen"),exit_fullscreen:$h24.phrase.HomepagePhrase("Block-Galleria","Exit fullscreen"),next:$h24.phrase.HomepagePhrase("Block-Galleria","Next image"),prev:$h24.phrase.HomepagePhrase("Block-Galleria","Previous image"),showing_image:$h24.phrase.HomepagePhrase("Block-Galleria","Showing image %s of %s")},_showCaption:true,_toggleCaption:false})}else{Galleria.run("#galleria_"+e,{wait:true,height:h,width:g,transition:a["transition_style"],transitionSpeed:i,thumbnails:o,showCounter:t,showInfo:n,showImagenav:r,imageCrop:l,fullscreenCrop:false,autoplay:autoplay,clicknext:s,swipe:false,debug:c,maxScaleRatio:f,extend:function(e){var a=this;this.bind("image",function(e){var i=a.getData(a.getIndex());var l=i.original;var o=$(l).attr("title");$(e.imageTarget).attr("alt",o)});this.bind("thumbnail",function(e){var i=a.getData(e.index);var l=i.original;var o=$(l).attr("alt");$(e.thumbTarget).attr("alt",o)})}})}Galleria.on("fullscreen_enter",function(e){$("html").addClass("Galleria__fullscreen")});Galleria.on("fullscreen_exit",function(e){$("html").removeClass("Galleria__fullscreen")});$h24.blocks[e].galleria=$("#galleria_"+e).data("galleria")};h24core.prototype.block.GalleriaBlock.settings=function(e){var a=$h24.blocks[e].settings;var i=$("#settings_block_"+e);$h24.block.previewSettingsDialog(e,{dialogSettings:{sidePadding:15},onClose:function(){this.close();$h24.block.reloadBlock(e)},onReady:function(){var i=$("#settings_block_"+e);$("#settings_block_"+e+" select[name=commoncategoryids]").multiSelect({selectAllText:$h24.phrase.GUIPhrase("Image-Manager","All my categories"),noneSelected:$h24.phrase.GUIPhrase("Image-Manager","All my categories"),oneOrMoreSelected:"% "+$h24.phrase.GUIPhrase("Image-Manager","categories selected")});$("#settings_block_"+e+" .multiSelectOptions input.selectAll").hide();var l=i.find("input[name=commoncategoryids]").closest("div.multiSelectOptions");l.find("input.selectAll").attr("name","commoncategoryids");i.find("input, select").each(function(){var l=$(this);var o=l.attr("name");if(o=="content"){l.inputTimeout({onTimeout:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})},onKeyUp:function(){$h24.block.GalleriaBlock.setContent(e,l.val())}})}else if(o=="commoncategoryids"){l.change(function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})})}else if(o=="pictureScale"){l.change(function(){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["picture_scale"]=l.val();var a=l.val();var i=a==1?true:false;i=a=="height"||a=="width"?a:i;var o=i==false?1:0;$h24.blocks[e].galleria.setOptions("imageCrop",i).setOptions("maxScaleRatio",o).refreshImage();$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})})}else if(o=="slideshowAutoplay"){l.change(function(){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["slideshow_autoplay"]=l.val();var a=l.val()==1?i.find("input[name=slideshowInterval]").val()*1e3:false;if(a==false){$h24.blocks[e].galleria.pause()}else{$h24.blocks[e].galleria.play(a)}if(l.val()==1){i.find("#h24_galleria_block_settings_slideshow_interval").closest("tr").show()}else{i.find("#h24_galleria_block_settings_slideshow_interval").closest("tr").hide()}$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})})}else if(o=="transitionStyle"){l.change(function(){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["transition_style"]=l.val();$h24.blocks[e].galleria.setOptions("transition",l.val());$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})})}else if(o=="transitionSpeed"){l.change(function(){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["transition_speed"]=l.val();$h24.blocks[e].galleria.setOptions("transitionSpeed",l.val());$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})})}else if(o=="thumbnailShow"){l.change(function(){$h24.blocks[e].settings["thumbnail_show"]=l.val();$h24.block.GalleriaBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})})}else if(o=="slimMode"){l.change(function(){$h24.blocks[e].settings["slim_mode"]=l.val();$h24.block.GalleriaBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})})}else if(o=="sorting"){l.change(function(){$h24.blocks[e].settings["sorting"]=l.val();$h24.block.GalleriaBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})})}else if(o=="galleryHeight"){l.inputTimeout({onTimeout:function(){var e=i.find("#h24_galleria_block_settings_gallery_height .h24_galleria_block_settings_slider");var o=e.slider("option","value");var t=parseInt(l.val());if(t>=130&&t<=a["collectionsize"]*2){e.slider("option","value",t);var n=e.slider("option","value")}},onKeyUp:function(){}})}});var o=a["gallery_height"]>a["collectionsize"]*2?a["collectionsize"]*2:a["gallery_height"];var t=$("#h24_galleria_block_settings_gallery_height");t.find("input[name=galleryHeight]").val(o);t.find("div.h24_galleria_block_settings_slider").slider({min:130,max:a["collectionsize"]*2,value:o,slide:function(a,i){t.find("input[name=galleryHeight]").val(i.value);$h24.blocks[e].settings["gallery_height"]=i.value},change:function(a,i){$h24.block.GalleriaBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})}});var n=$("#h24_galleria_block_settings_slideshow_interval");n.find("input[name=slideshowInterval]").val(a["slideshow_interval"]);n.find("div.h24_galleria_block_settings_slider").slider({min:1,max:60,value:a["slideshow_interval"],slide:function(e,a){n.find("input[name=slideshowInterval]").val(a.value)},change:function(a,i){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["slideshow_interval"]=i.value;$h24.blocks[e].galleria.setPlaytime(i.value*1e3);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})}});var r=$("#h24_galleria_block_settings_frame_size");r.find("input[name=frameSize]").val(a["frame_size"]);r.find("div.h24_galleria_block_settings_slider").slider({min:0,max:50,value:a["frame_size"],slide:function(a,i){r.find("input[name=frameSize]").val(i.value);$h24.blocks[e].settings["frame_size"]=i.value},change:function(a,i){$h24.block.GalleriaBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})}});var s=i.find("input[name=backgroundColor]").closest(".h24_block_galleria_settings_color");i.find("a[name=backgroundColor]").click(function(){$h24.dialogs["block_"+e+"_settings_dialog"].markup.hide();$h24.utils.colorPicker({color:a["background_color"],dialogSettings:{transparentOverlay:true,showCloseButton:false},dragCallback:function(a){s.find("div").css("background-color",a);s.find("input[name=backgroundColor]").val(a);$("#galleria_"+e+" .galleria-container").css("background-color",a)},saveCallback:function(a){$h24.block.GalleriaBlock.setModified(e);$h24.blocks[e].settings["background_color"]=a;$h24.dialogs["block_"+e+"_settings_dialog"].markup.show();$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){}})}});return false});i.find("a[name=linkDialog]").click(function(a){a.preventDefault();$h24.block.GalleriaBlock.openLinkDialog(e)})}})};h24core.prototype.block.GalleriaBlock.openLinkDialog=function(e){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:e,modelaction:"link_dialog"},function(a){if(a.length>50){$h24.dialog.create("h24_galleria_block_link_dialog",a,{title:$h24.phrase.GUIPhrase("Block-Galleria","Link images"),width:660,closeCallback:function(){$h24.block.GalleriaBlock.closeLinkDialog(e)}});$("#h24_galleria_block_link_dialog .h24_galleria_block_link_image a").click(function(a){a.preventDefault();var i=$(this);var l=i.attr("name");var o=i.closest(".h24_galleria_block_link_image");var t=o.data("pictureid");switch(l){case"createLink":case"editLink":$h24.link.h24coreDialog("block",e,t,{hide_target:1},function(e,a){if(e=="save"&&typeof a=="object"&&typeof a["link"]!="undefined"&&a["link"]!=""){o.find(".h24_galleria_block_link_image_create").hide();o.find(".h24_galleria_block_link_image_modify").show();$h24.dialogs.h24_generic_linking_dialog.close()}else if(e=="remove"){o.find(".h24_galleria_block_link_image_create").show();o.find(".h24_galleria_block_link_image_modify").hide();$h24.dialogs.h24_generic_linking_dialog.close()}else if(e=="cancel"){$h24.dialogs.h24_generic_linking_dialog.close()}});break;case"removeLink":var n={homepageid:$h24.homepageid,type:"block",scope:e,target:t};$h24.post($h24.slashwebroot+"Page/Inline-Save/model/DialogManager/modelaction/delete_generic_link",n,function(e){if(e=="statuscode/0"){showReloginDialog();return}o.find(".h24_galleria_block_link_image_create").show();o.find(".h24_galleria_block_link_image_modify").hide()});break}})}})};h24core.prototype.block.GalleriaBlock.setContent=function(e,a){$("#block_"+e+" p span").text(a);$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.GalleriaBlock.setForegroundColor=function(e,a){$("#block_"+e+" p span").css("color",a);$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.GalleriaBlock.setBackgroundColor=function(e,a){$("#galleria_"+e).css("background-color",a);$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.GalleriaBlock.setCommonCategoryIds=function(e,a){$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.GalleriaBlock.setModified=function(e){$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.GalleriaBlock.doSomething=function(e){$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"getRandomNumber"},function(e){alert(e.randomNumber)})};h24core.prototype.block.GalleriaBlock.initSelectRadio=function(e,a){if(a=="new_category"){$("#h24_block_"+e+"_init_category_choice_0").attr("checked",true)}else{$("#h24_block_"+e+"_init_category_choice_1").attr("checked",true)}};h24core.prototype.block.GalleriaBlock.initSettingsOk=function(e){var a=$("#block_init_prompt input[name=category_choice]:checked").val();if(a=="new_category"){var i=$("#block_init_prompt input[name=category_name]").val();$h24.dialogs.block_init_prompt.close();showDialog("#image_manager");loadImageManagerTabs(0,0,e,1,i)}else{var l=$h24.utils.getParameters($h24.dialogs.markup,".save_parameter");var o={blockid:e,modelaction:"save_init_settings",save_parameters:l};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",o,function(e){if(!e.successful&&$h24.devmode)console.log(e);else reloadColumn(e.collection);$h24.dialogs.block_init_prompt.close()})}};h24core.prototype.block.GalleriaBlock.setOption=function(e,a,i){$h24.blocks[e].galleria.setOptions(a,i)};h24core.prototype.block.GalleriaBlock.closeLinkDialog=function(e){$h24.block.reloadBlock(e);$h24.dialogs.h24_galleria_block_link_dialog.close()};
h24core.prototype.block.StoreProductBlock=function(t,o){this.innerblocktype="StoreProductBlock";this.blockid=o;this.settings={};var e=this;this.initPrompt=function(o,e){t.block.StoreProductBlock.selectProduct(o.blocks[0].blockid)};t.addToExecOnInit(this,function(){t.block.StoreProductBlock.init(o)});this.BCPActions={activateStore:function(o){t.store_manager.createStore(o.subscriptionName)},selectProduct:function(){t.block.StoreProductBlock.selectProduct(this.blockid)},editProduct:function(t){window.location.href=t.url},blockSettings:function(){var o=true;if(o&&$("html").hasClass("angularjs-in-edit-mode")){t.block.toggleBlock("select",this.blockid)}else{t.block.StoreProductBlock.settings(this.blockid)}}};var i=false;this.angularBlockServiceListener=function(o,r){var c=$("#block_"+e.blockid);switch(o){case"ReloadBlockOnSave":i=true;break;case"SettingsSaved":if(i){t.block.reloadBlock(e.blockid);i=false}break;case"ActivateStore":t.store_manager.createStore(r);break;case"EditProduct":var a=t.slashwebroot+"H24-Store/Product/ID/"+r;window.location.href=a;break}}};h24core.prototype.block.StoreProductBlock.init=function(t){var o=$("#block_container_"+t);o.find("a.javascript_link").click(function(){var t=$(this);var e=t.attr("name");switch(e){case"show_large_image":var i=t.closest("div.h24_store_product_block_small_image");var r=t.closest("div.h24_store_product_block_small_images");var c=i.find("a[name=lightbox_image]");var a=i.find("input[name=image_large]").val();var l=i.find("input[name=image_large_retina]").val();var n=i.find("input[name=image_fullscreen]").val();var s=i.find("input[name=image_width]").val();var _=i.find("input[name=image_height]").val();var d=i.find("img").attr("alt");o.find(".h24_store_product_block_large_image img").attr("src",a);o.find(".h24_store_product_block_large_image img").attr("srcset",l);o.find(".h24_store_product_block_large_image img").attr("alt",d);o.find(".h24_store_product_block_large_image img").prop("width",s).prop("height",_);o.find(".h24_store_product_block_large_image a").attr("href",n);o.find(".h24_store_product_block_large_image a").attr("title",d);if(c.length==1){r.find(".h24_store_product_block_small_image a[name=lightbox_image][lightbox*=lightbox]").each(function(){var t=$(this);t.attr("rel",t.attr("lightbox"));t.removeAttr("lightbox")});c.attr("lightbox",c.attr("rel"));c.removeAttr("rel")}$h24.imageViewer.init();break;default:break}return false});o.find("input, select").each(function(){var e=$(this);var i=e.attr("name");if(i=="variant"){e.change(function(){var e=$(this).val();var i=o.find("input[name=presentationMode]").val();$h24.block.StoreProductBlock.changeVariant(t,e,i)})}})};h24core.prototype.block.StoreProductBlock.selectProduct=function(t,o){$h24.get($h24.slashwebroot+"Block/Init-Prompt/",{blockid:t},function(e){if(e=="HomepageDemo"||e=="HomepageBase"||e=="HomepagePro"||e=="HomepageStore"){}else if(e.length>10){var i=$h24.dialog.create("h24_store_product_block_select_product",e,{width:560,closeCallback:function(){$h24.dialogs.h24_store_product_block_select_product.close();reloadColumns()}});var r=$("#h24_store_product_block_select_product_"+t);r.find("input, select").each(function(){var o=$(this);var e=o.attr("name");if(e=="category"){o.change(function(){var o=$(this).val();$h24.block.StoreProductBlock.getProductList(t,o)})}});$(".h24_store_product_block_product_list_product").die("click").live("click",function(){var e=$(this).find("input[name=product_id]").val();$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:t,productId:e,modelaction:"select_product"},function(e){if(e["successful"]==true){i.close();reloadColumns();if(typeof o!="undefined"&&o){$h24.block.StoreProductBlock.settings(t)}}})})}})};h24core.prototype.block.StoreProductBlock.settings=function(t){$h24.block.previewSettingsDialog(t,{onReady:function(){var o=$("#settings_block_"+t);o.find("input, select").each(function(){var o=$(this);var e=o.attr("name");if(e=="presentation_mode"){o.change(function(){var e=o.val();var i=$("#block_container_"+t);if(e==0){$("#settings_block_"+t+" .h24_store_product_block_settings_image_position").show()}else{$("#settings_block_"+t+" .h24_store_product_block_settings_image_position").hide()}i.loadingSpinner(true);$h24.block.saveSettings(t,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(t);$h24.block.StoreProductBlock.settingsModified(t)}})})}else if(e=="image_position"){o.change(function(){var o=$("#block_container_"+t);o.loadingSpinner(true);$h24.block.saveSettings(t,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(t);$h24.block.StoreProductBlock.settingsModified(t)}})})}});$("a[name=choose_other_product]").click(function(){$h24.block.StoreProductBlock.selectProduct(t,true);return false})},dialogSettings:{width:330,sidePadding:15}})};h24core.prototype.block.StoreProductBlock.settingsModified=function(t){$("#settings_block_"+t).addClass("h24_modified_settings")};h24core.prototype.block.StoreProductBlock.getProductList=function(t,o){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:t,categoryId:o,modelaction:"select_product_list"},function(o){if(o["successful"]==true){$("#h24_store_product_block_product_list_"+t).replaceWith(o["markup"])}})};h24core.prototype.block.StoreProductBlock.changeVariant=function(t,o,e){var i=$("#block_"+t);var r=$("#block_container_"+t+" .h24_store_product_sale");r.loadingSpinner(true);$h24.post($h24.slashwebroot+"Block/Common-Communicator",{__skip_loading_overlay:true,blockid:t,variantId:o,presentationMode:e,modelaction:"sale_box_markup"},function(o){if(typeof o["html"]!="undefined"&&o["html"].length>10){var e=$("#block_container_"+t);e.find("#h24_store_product_block_sale_"+t).html(o["html"]);var r=i.find(".h24_store_product_block_small_images input[value='"+o["pictureid"]+"']").closest("div.h24_store_product_block_small_image");if(r.length==1){var c=r.find("input[name=image_large]").val();var a=r.find("input[name=image_fullscreen]").val();var l=r.find("img").attr("alt");e.find(".h24_store_product_block_large_image img").attr("src",c);e.find(".h24_store_product_block_large_image img").attr("alt",l);e.find(".h24_store_product_block_large_image a").attr("href",a);e.find(".h24_store_product_block_large_image a").attr("title",l);$h24.imageViewer.init()}$h24.block.StoreProductBlock.init(t)}})};
h24core.prototype.block.FacebookLikeBoxBlock=function(e,t){this.innerblocktype="FacebookLikeBoxBlock";this.blockid=t;this.iframeSettings={};this.baseUrl="";this.heights=undefined;this.$block=null;var i=this;this.loadSDK=function(e,t,i){var o=false;window.fbAsyncInit=function(){if(typeof i==="function"){i()}};$("script").each(function(){var e=$(this);if(typeof e.attr("src")!=="undefined"){var t=e.attr("src");if(t.indexOf("connect.facebook.net")!==-1&&t.indexOf("sdk.js")!==-1){o=true}}});if(!o){!function(i,o,c){var n,s=i.getElementsByTagName(o)[0];if(i.getElementById(c))return;n=i.createElement(o);n.id=c;n.src="https://connect.facebook.net/"+t+"/sdk.js#xfbml=1&version=v2.12&appId="+e;n.async=true;s.parentNode.insertBefore(n,s)}(document,"script","facebook-jssdk")}};this.adjustForNewCollection=function(e,t){$("#block_"+this.blockid+" iframe").width(e)};var o=false;this.angularBlockServiceListener=function(c,n){var s=$("#block_"+i.blockid);switch(c){case"Reload":o=true;break;case"SaveAndClose":break;case"SettingsSaved":if(o){e.block.reloadBlock(t);o=false}break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.FacebookLikeBoxBlock.settings(this.blockid)}}}};
h24core.prototype.block.FacebookLikeButtonBlock=function(e,t){this.innerblocktype="FacebookLikeButtonBlock";this.blockid=t;this.baseUrl="";this.iframeSettings={};var i=this;e.addToExecOnInit(this,function(){if(typeof FB!="undefined"){FB.XFBML.parse($("#block_"+t)[0])}});this.captureIframeSettings=function(){var e=$("#block_"+this.blockid+" iframe"),t,i,s,o;if(this.baseUrl==""){t=e.attr("src");i=t.split("?");if(i.length!=2){return}this.baseUrl=i[0];s=i[1].split("&");for(var a in s){o=s[a].split("=");this.iframeSettings[o[0]]=o[1]}}};this.reloadIframe=function(t){var i=$("#block_"+this.blockid+" iframe"),s,o,a,l=this,n;this.captureIframeSettings();if(typeof t!="object"){var t=e.utils.getParameters($("#settings_block_"+this.blockid),".save_parameter")}this.iframeSettings.layout=escape(t.layout_style);this.iframeSettings.show_faces=t.show_faces==1?"true":"false";this.iframeSettings.action=escape(t.action);this.iframeSettings.locale=escape(t.locale);o=this.baseUrl+"?";a=0;for(var c in this.iframeSettings){if(a++>0){o+="&"}o+=c+"="+this.iframeSettings[c]}$("#block_"+this.blockid).loadingSpinner(true);i.loadWithTimeout({onLoad:function(){i.css("height",l.iframeSettings.height);$("#block_"+l.blockid).loadingSpinner(false);if($("html").hasClass("faux-section-support")){e.fauxSections.reposition()}},timeout:3e3});i.attr("src",o)};var s=false;var o={};this.angularBlockServiceListener=function(e,t){var a=$("#block_"+i.blockid);switch(e){case"ReloadIframeOnSave":o={layout_style:t.layoutStyle,show_faces:t.showFaces,action:t.action,locale:t.locale};s=true;break;case"SettingsSaved":if(s){i.reloadIframe(o);s=false}break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.FacebookLikeButtonBlock.settings(this.blockid)}}}};h24core.prototype.block.FacebookLikeButtonBlock.settings=function(e){$h24.block.previewSettingsDialog(e,{onReady:function(){var t=$("#settings_block_"+e);t.bind("click change",function(i){var s=$(i.target),o=i.type;if(s.is('input[type="radio"]')){$h24.blocks[e].reloadIframe();t.addClass("h24_modified_settings")}else if(s.attr("name")=="locale"&&o=="change"){$h24.blocks[e].reloadIframe();t.addClass("h24_modified_settings")}else if(s.is("select")&&o=="change"){$h24.blocks[e].reloadIframe();t.addClass("h24_modified_settings")}})},onSave:function(){$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){var t=$("#settings_block_"+e+' select[name="locale"]');if(t.val()!=t.attr("revert")){refreshBrowser()}else{this.close()}}})},onRevert:function(){$h24.block.revertSettings(e);$h24.blocks[e].reloadIframe();this.close()}})};
h24core.prototype.block.H24FaqBlock=function(e,t){this.innerblocktype="H24FaqBlock";this.blockid=t;e.addToExecOnInit(this,function(){e.block.H24FaqBlock.initializeBlock(t)})};h24core.prototype.block.H24FaqBlock.initializeBlock=function(e){var t=$("#block_"+e),o={faq:t.find(".h24_faq_top_faqs"),search:t.find(".h24_faq_search"),categories:t.find(".h24_faq_categories")},a=t.find(".h24_faq_search_no_result"),i=t.find(".h24_faq_search_result");t.on("submit","form",function(s){s.preventDefault();var n=$(this).find("input").blur().val();if(n!=""&&n.length>=2){o["search"].show().siblings().hide();o["search"].fadeTo("fast",.5);t.find('.stateButton[data-name="search"]').removeClass("disabled").addClass("active").siblings().removeClass("active");$h24.post($h24.slashwebroot+"Block/Common-Communicator",{__skip_loading_overlay:true,blockid:e,modelaction:"search",term:n},function(e){o["search"].fadeTo(0,1);if(typeof e["questions"]!="undefined"&&e["questions"]!=""){a.hide();i.html("<dl>"+e["questions"]+"</dl>")}else{i.html("");a.show()}})}});t.on("click","dt a",function(t){t.preventDefault();var o=$(this).parent().next();if(!o.is(":visible")){$h24.block.H24FaqBlock.updateClicks(e,"clicks",o.data("question-id"))}o.slideToggle("fast")});t.on("click","dd span.feedback a, ",function(t){t.preventDefault();var o=$(this),a=o.closest("dd"),i=o.attr("name");$h24.block.H24FaqBlock.updateClicks(e,i,a.data("question-id"));o.parent().fadeOut(function(){$(this).siblings().fadeIn()})});t.on("click",".stateButton",function(e){e.preventDefault();var t=$(this),a=t.data("name");if(t.hasClass("disabled"))return false;t.addClass("active").siblings().removeClass("active");o[a].show().siblings().hide()});o["categories"].on("click","li > a",function(t){t.preventDefault();var o=$(this),a=o.next();o.parent().toggleClass("active");if(a.length>0)a.slideToggle("fast");else{var i=o.data("category-id");$h24.post($h24.slashwebroot+"Block/Common-Communicator",{__skip_loading_overlay:true,blockid:e,modelaction:"categoryQuestions",categoryId:i},function(e){if(e!=""){o.after("<dl>"+e+"</dl>")}})}})};h24core.prototype.block.H24FaqBlock.updateClicks=function(e,t,o){$h24.post($h24.slashwebroot+"Block/Common-Communicator",{__skip_loading_overlay:true,blockid:e,modelaction:"updateClicks",type:t,questionId:o})};
h24core.prototype.block.H24HelpBlock=function(e,o){this.innerblocktype="H24HelpBlock";this.blockid=o;e.addToExecOnInit(this,function(){e.block.H24HelpBlock.initializeBlock(o)})};h24core.prototype.block.H24HelpBlock.initializeBlock=function(e){var o=$("#block_"+e);o.find("a[name=category]").unbind("click").click(function(e){e.preventDefault();var o=$(this);var l=o.closest(".h24_help_category");l.toggleClass("h24_help_category_expanded");l.siblings(".h24_help_category_expanded").removeClass("h24_help_category_expanded")})};
h24core.prototype.block.CalendarBlock=function(e,a){this.innerblocktype="CalendarBlock";this.blockid=a;this.settings={};this.currentDate="";var t=this;e.addToExecOnInit(this,function(){e.block.CalendarBlock.init(a)});this.BCPActions={calendarManager:e.calendar_manager.open,blockSettings:function(){var a=true;if(a&&$("html").hasClass("angularjs-in-edit-mode")){e.block.toggleBlock("select",this.blockid)}else{e.block.CalendarBlock.settings(this.blockid)}}};var o=false;this.angularBlockServiceListener=function(a,n){var i=$("#block_"+t.blockid);switch(a){case"DisplayModeChanged":var s=n.displayMode,r=n.widthRequirement,l=i.closest(".h24_collection").width();if(r[s]>l){e.utils.notification(e.phrase.GUIPhrase("Block-Calendar","Collection is too small to display selected display mode")+".","alert")}e.blocks[t.blockid].settings.display_mode=s;o=true;break;case"ReloadBlockOnSave":o=true;break;case"SettingsSaved":if(o){e.block.reloadBlock(t.blockid);o=false}break;case"BCPActions":var c=n;if(typeof t.BCPActions[c]!="undefined"){t.BCPActions[c].call(this)}break}}};h24core.prototype.block.CalendarBlock.init=function(e){var a=$("#block_"+e);var t=$h24.blocks[e].settings;$h24.block.CalendarBlock.checkHash();if(!a.hasClass("h24_block_calendar_init")){a.addClass("h24_block_calendar_init");a.find("a.h24_javascript_link").die("click").live("click",function(t){t.preventDefault();var o=$(this);var n=o.attr("name");switch(n){case"viewEvent":var i=o.data("eventid");if(typeof i!="undefined"&&i>0){$h24.calendar_manager.viewEvent(i)}break;case"showMore":var s=a.find("div.h24_block_calendar_events");var r=o.data("moreevents");var l=$h24.blocks[e].currentDate;s.loadingSpinner(true);$h24.post($h24.slashwebroot+"Block/Common-Communicator/",{blockid:e,__skip_loading_overlay:true,modelaction:"getMoreEvents",moreEvents:r,startDate:l},function(e){s.loadingSpinner(false);if(e.success&&e.markup!=""){a.find("div.h24_block_calendar_events").replaceWith(e.markup);a.find("a[name=showMore]").data("moreevents",e.moreEvents);$h24.fauxSections.reposition()}});break}});if(!$h24.editmode){$.get($h24.slashwebroot+"Block/Common-Communicator",{blockid:e,modelaction:"getInitialEvents"},function(e){if(e.success&&e.markup!==""){a.find(".h24_block_calendar_event_placeholder").replaceWith(e.markup);$h24.fauxSections.reposition()}})}}if(t.display_mode==1||t.display_mode==2){$h24.block.CalendarBlock.initDatepicker(e)}};h24core.prototype.block.CalendarBlock.initDatepicker=function(e){var a=$h24.blocks[e].settings;var t=typeof a.event_dates=="object"?a.event_dates:{};var o=$("#block_"+e);o.find("div.h24_block_calendar_event_datepicker_start").datepicker({firstDay:1,dateFormat:"yy-mm-dd",onSelect:function(a,t){$h24.blocks[e].currentDate=a;var n=o.find("div.h24_block_calendar_events");n.loadingSpinner(true);$h24.post($h24.slashwebroot+"Block/Common-Communicator/",{blockid:e,__skip_loading_overlay:true,modelaction:"filterEvents",startDate:a},function(e){n.loadingSpinner(false);if(e.success&&e.markup!=""){o.find("div.h24_block_calendar_events").replaceWith(e.markup)}})},beforeShowDay:function(e){var a=e.getTime()/1e3;for(key in t){if(a==key){return[true,"h24_block_calendar_datepicker_has_event"]}}return[true,""]},dayNamesMin:[$h24.phrase.HomepagePhrase("Date-And-Time","Sunday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Monday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Tuesday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Wednesday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Thursday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Friday").substr(0,2),$h24.phrase.HomepagePhrase("Date-And-Time","Saturday").substr(0,2)],monthNamesShort:[$h24.phrase.HomepagePhrase("Date-And-Time","January").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","February").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","March").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","April").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","May").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","June").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","July").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","August").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","September").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","October").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","November").substr(0,3),$h24.phrase.HomepagePhrase("Date-And-Time","December").substr(0,3)],monthNames:[$h24.phrase.HomepagePhrase("Date-And-Time","January"),$h24.phrase.HomepagePhrase("Date-And-Time","February"),$h24.phrase.HomepagePhrase("Date-And-Time","March"),$h24.phrase.HomepagePhrase("Date-And-Time","April"),$h24.phrase.HomepagePhrase("Date-And-Time","May"),$h24.phrase.HomepagePhrase("Date-And-Time","June"),$h24.phrase.HomepagePhrase("Date-And-Time","July"),$h24.phrase.HomepagePhrase("Date-And-Time","August"),$h24.phrase.HomepagePhrase("Date-And-Time","September"),$h24.phrase.HomepagePhrase("Date-And-Time","October"),$h24.phrase.HomepagePhrase("Date-And-Time","November"),$h24.phrase.HomepagePhrase("Date-And-Time","December")]})};h24core.prototype.block.CalendarBlock.checkHash=function(e){if($h24.calendar_manager.autoView==false){if(window.location.hash!=""){var a=window.location.hash;var t=$h24.block.CalendarBlock.getToObject(a);if(typeof t.calendar!="undefined"&&t.calendar==1&&typeof t.id!="undefined"){$h24.calendar_manager.viewEvent(t.id);$h24.calendar_manager.autoView=true}}}};h24core.prototype.block.CalendarBlock.settings=function(e){var a=$h24.blocks[e].settings;$h24.block.previewSettingsDialog(e,{onReady:function(){var t=$("#settings_block_"+e);var o=$("#block_"+e);t.find("input, select").each(function(){var o=$(this);var n=o.attr("name");switch(n){case"displayMode":o.change(function(){var n=o.val();if(a.display_mode_width_requirement[n]>a.collectionsize){$h24.utils.notification($h24.phrase.GUIPhrase("Block-Calendar","Collection is too small to display selected display mode")+".","alert")}if(n==0||n==1){t.find("table tr").show()}else if(n==2){t.find("table tr:not(.h24_block_calendar_settings_display_mode_2)").hide()}$h24.blocks[e].settings.display_mode=n;$h24.block.CalendarBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})});break;case"displayDescription":o.change(function(){var a=o.val();var n=t.find("tr.h24_calendar_manager_settings_display_image");if(a==0){n.hide()}else if(a==1||a==2){n.show()}$h24.block.CalendarBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})});break;case"displayGrouping":case"displayImage":case"datePosition":o.change(function(){$h24.block.CalendarBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})});break}});var n=$("#h24_block_calendar_settings_display_count");n.find("input[name=displayCount]").val(a["display_count"]);n.find("div.h24_block_calendar_settings_slider").slider({min:1,max:50,value:a["display_count"],slide:function(e,a){n.find("input[name=displayCount]").val(a.value)},change:function(a,t){$h24.blocks[e].settings.display_count=t.value;$h24.block.CalendarBlock.setModified(e);$h24.block.saveSettings(e,{hideLoadingSpinner:true,onClose:function(){$h24.block.reloadBlock(e)}})}})}})};h24core.prototype.block.CalendarBlock.setModified=function(e){$("#settings_block_"+e).addClass("h24_modified_settings")};h24core.prototype.block.CalendarBlock.getToObject=function(e){var a={},t;if(e!=""){t=e.replace(/\//g,"");t=t.replace(/#/g,"");var o=t.split("&");for(var n=0;n<o.length;n++){var i=o[n].split("=");if(i.length==2){a[i[0]]=i[1]}}}return a};
h24core.prototype.block.OfferTagBlock=function(t,o){this.innerblocktype="OfferTagBlock";this.blockid=o;this.showStatusCode=function(t){$("#settings_block_"+this.blockid+" .h24_otb_statusCode").hide();$("#settings_block_"+this.blockid+" .h24_otb_statusCode_"+t).show()};this.getDiscountStatistics=function(){var o=this.blockid;$.get(t.slashwebroot+"Block/Edit-Communicator",{blockid:this.blockid,modelaction:"getDiscountStatistics"},function(t){var s=$("#settings_block_"+o+" .h24_otb_statistics tr"),i={},e={};if(t.successful){i=t.tagCount;e=t.accountCount;s.each(function(t){var o=$(this),s=o.data("tag"),a=o.find(".h24_otb_statistics_count"),c=o.find(".h24_otb_accounts_count");if(!!i[s]){a.text(i[s])}else{a.text(0)}if(!!e[s]){c.text(e[s])}else{c.text(0)}})}})};this.reloadSettingsDialog=function(o){var s=this;t.post(t.slashwebroot+"Block/Edit-Communicator",{blockid:this.blockid,modelaction:"settings"},function(t){$("#settings_block_"+s.blockid).html($(t).html());s.initSettingsDialog();if(typeof o=="function"){o()}})};this.initSettingsDialog=function(){var o=$("#h24_otb_"+this.blockid+"_tabs"),s=this.blockid;o.tabs({activate:function(o,i){if($(i.newTab).hasClass("h24_otb_statistics_tab")){t.blocks[s].getDiscountStatistics()}$("#settings_block_"+s+" .h24_otb_statusCode").hide()}})}};h24core.prototype.block.OfferTagBlock.settings=function(t){$h24.block.previewSettingsDialog(t,{onReady:function(){$h24.blocks[t].initSettingsDialog();$("#settings_block_"+t).on({click:function(o){var s=$(this),i=$(o.target),e;if(i.hasClass("h24_create_discount")){e=$h24.utils.getParameters(s,".h24_otb_create_parameter");e.blockid=t;e.modelaction="createDiscount";$h24.post($h24.slashwebroot+"Block/Edit-Communicator",e,function(o){var s;$h24.blocks[t].showStatusCode(o.statusCode);if(o.successful){$h24.blocks[t].reloadSettingsDialog(function(){$("#h24_otb_"+t+"_tabs").tabs("option","active",0)})}});return false}else if(i.hasClass("h24_otb_get_discount")){if(s.find('select[name="discount_to_edit"] option').length==0){return false}e={blockid:t,modelaction:"editDiscount",tag:s.find('select[name="discount_to_edit"]').val()};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",e,function(o){$("#h24_otb_"+t+"_edit_container").html(o)});return false}else if(i.hasClass("h24_edit_discount")||i.hasClass("h24_edit_and_create_discount")){e=$h24.utils.getParameters(s,".h24_otb_edit_parameter");e.blockid=t;e.modelaction="updateDiscount";e.createMissing=i.hasClass("h24_edit_and_create_discount");$h24.post($h24.slashwebroot+"Block/Edit-Communicator",e,function(o){$h24.blocks[t].showStatusCode(o.statusCode);if(o.successful){$("#h24_otb_"+t+"_edit_container").html(o.markup)}});return false}else if(i.hasClass("h24_delete_discount")){e={blockid:t,modelaction:"deleteDiscount",tag:s.find('input[name="tag"].h24_otb_edit_parameter').val()};$h24.post($h24.slashwebroot+"Block/Edit-Communicator",e,function(o){$h24.blocks[t].showStatusCode(o.statusCode);if(o.successful){$("#h24_otb_"+t+"_edit_container").slideUp(500,function(){$(this).empty().show()});$h24.blocks[t].reloadSettingsDialog(function(){$("#h24_otb_"+t+"_tabs").tabs("option","active",2)})}});return false}else if(i.hasClass("h24_close")){$h24.dialogs["block_"+t+"_settings_dialog"].close();return false}else if(i.hasClass("h24_save_and_close")){$h24.block.saveSettings(t);return false}},keyup:function(o){var s=$(this),i=$(o.target);if(i.is('input[name="buttonText"]')){$("#block_"+t+" a").text(i.val())}}})},dialogSettings:{width:700}})};
h24core.prototype.block.LatestCommentsBlock=function(t,e){this.innerblocktype="LatestCommentsBlock";this.blockid=e;this.sidepanel=false;this.BCPActions={commentManager:function(){t.comment_manager.loadCommentManager(0)}}};
h24core.prototype.block.InstagramBlock=function(o,t){this.innerblocktype="InstagramBlock";this.blockid=t;this.firstinit=true;var e=this;o.addToExecOnInit(this,function(){if(this.firstinit==true){var e=$("#block_"+t).find("[data-time]").data("time");var a=$("#block_"+t).find("[data-token]").data("token");var n=new Date;var i=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());var c=i.getTime()/1e3-i.getTimezoneOffset()*60;var s=c-e;if(s>1800&&a=="1"){o.block.reloadBlock(t,{hideLoadingSpinner:true,onComplete:function(t){setTimeout(function(){o.fauxSections.reposition()},200)}})}this.firstinit=false}});var a=false;this.angularBlockServiceListener=function(t,n){var i=$("#block_"+e.blockid);switch(t){case"ReloadBlock":o.block.reloadBlock(e.blockid);break;case"ReloadBlockOnSave":console.log(n);a=true;break;case"SettingsSaved":if(a){o.block.reloadBlock(e.blockid);a=false}break}};this.BCPActions={blockSettings:function(){var t=true;if(t&&$("html").hasClass("angularjs-in-edit-mode")){o.block.toggleBlock("select",this.blockid)}else{o.block.InstagramBlock.settings(this.blockid)}}}};h24core.prototype.block.InstagramBlock.settings=function(o){$h24.block.previewSettingsDialog(o,{onReady:function(){$("#settings_block_"+o).tooltip({selector:'[data-toggletip="tooltip"]'});var t=$("#settings_block_"+o);t.find("input, select, a, span").each(function(){var t=$(this);var e=t.attr("name");if(e=="accessButton"){t.click(function(){$h24.block.InstagramBlock.newWindow(o)})}else if(e=="updateButton"){t.click(function(){$h24.block.InstagramBlock.newWindow(o)})}else if(e=="deleteButton"){t.click(function(){$h24.block.InstagramBlock.clearUserInDatabase(o)})}else if(e=="view_count"){t.change(function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){$h24.block.InstagramBlock.reloadBlock(o)}});$h24.block.InstagramBlock.setModified(o)})}else if(e=="show_date"){t.change(function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){$h24.block.InstagramBlock.reloadBlock(o)}});$h24.block.InstagramBlock.setModified(o)})}else if(e=="show_caption"){t.change(function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){$h24.block.InstagramBlock.reloadBlock(o)}});$h24.block.InstagramBlock.setModified(o)})}else if(e=="show_comment"){t.change(function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){$h24.block.InstagramBlock.reloadBlock(o)}});$h24.block.InstagramBlock.setModified(o)})}else if(e=="show_likes"){t.change(function(){$h24.block.saveSettings(o,{hideLoadingSpinner:true,onClose:function(){$h24.block.InstagramBlock.reloadBlock(o)}});$h24.block.InstagramBlock.setModified(o)})}})}})};h24core.prototype.block.InstagramBlock.setModified=function(o){$("#settings_block_"+o).addClass("h24_modified_settings")};h24core.prototype.block.InstagramBlock.reloadBlock=function(o){$h24.block.reloadBlock(o,{hideLoadingSpinner:true,onComplete:function(){$h24.imageViewer.init()}})};h24core.prototype.block.InstagramBlock.setContent=function(o,t){$("#block_"+o+" p span").text(t);$("#settings_block_"+o).addClass("h24_modified_settings")};h24core.prototype.block.InstagramBlock.newWindow=function(o,t,e){var a=$h24.editorBrandname=="Hemsida24"?"772c582f28984a21b7ed717db2f50747":"e50e2655ef08492b9b3c9b4e1dd5a525";var n=$h24.editorBrandname=="Hemsida24"?"hemsida24.se":"pagepicnic.com";var i="https://edit."+n+"/H24-Third-Party/Instagram-Auth-Return-Url?blockid="+o;var t="https://api.instagram.com/oauth/authorize/?client_id="+a+"&redirect_uri="+i+"&response_type=code";var e="Instagram validation";var c=window.open(t,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width=600, height=500");window.addEventListener("message",function(t){if(t.source==c&&t.data=="reloadInstagramBlockSettings"){$h24.dialogs["block_"+o+"_settings_dialog"].close(true);$h24.block.InstagramBlock.reloadBlock(o);$h24.block.InstagramBlock.settings(o)}},false)};h24core.prototype.block.InstagramBlock.clearUserInDatabase=function(o){$h24.post($h24.slashwebroot+"Block/Edit-Communicator",{blockid:o,modelaction:"clearUserInDatabase"},function(t){var e=t.successful;if(e==true){$h24.dialogs["block_"+o+"_settings_dialog"].close(true);$h24.block.InstagramBlock.reloadBlock(o);$h24.block.InstagramBlock.settings(o)}})};h24core.prototype.block.InstagramBlock.comments=function(o,t,e){var a=$(".h24-InstagramBlock-commentLoadSpinner-"+t);if(a.data("status")==""){a.loadingSpinner(true);a.data("status","loading");var n=$(".h24-InstagramBlock-commentFieldNr-"+t);var i=n.data("page");$h24.post($h24.slashwebroot+"Block/Common-Communicator",{blockid:o,modelaction:"comments",postcount:t,page:i,blockwidth:e,__skip_loading_overlay:true},function(o){a.data("status","");a.loadingSpinner(false);if(o.successful==true){n.append(o.comments.join(""));n.data("page",i+1);var e=n.data("page")*o.limit;if(o.maxcount<=e+1){$(".h24-InstagramBlock-commentLoadWrapper-"+t).hide()}}})}else{return}};
h24core.prototype.block.ButtonBlock=function(t,e){this.innerblocktype="ButtonBlock";this.blockid=e;this.ckeditor=null;this.editorIsActive=false;this.autosaveTimeoutTimer=-1;this.lastSavedData=null;this.autoSaveTime=10*1e3;this.sidepanel=true;var o=this;this.save=function(){if(!o.ckeditor){return}var i=o.getCkeditorData();if(o.lastSavedData===null){o.lastSavedData=i}else if(i!=o.lastSavedData){if(i!=""){t.post(t.slashwebroot+"Block/Edit-Communicator",{blockid:o.blockid,modelaction:"save_content",content:i,__skip_loading_overlay:true,__keep_loading_overlay:true},function(o){if(o.removed){t.block.remove(e);return}})}o.lastSavedData=i}if(o.editorIsActive){o.autosaveTimeoutTimer=setTimeout(o.save,o.autoSaveTime)}};this.getCkeditorData=function(){var t=o.ckeditor.getData();if(t===null){t=""}return t};this.deleteEmptyContent=function(){t.block.remove(e,null,true)};this.destroyCKEditor=function(){var t=this.getCkeditorData();if(t==""){this.deleteEmptyContent()}else{this.save()}this.$textContent.prop("contentEditable",false);this.ckeditor.destroy();this.ckeditor=null;this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);if(o.$textContent.data("linked")=="yes"){$("#block_container_"+o.blockid+" .h24_cke_heading_link_helper").hide()}};if(t.editmode){t.addToExecOnInit(this,function(){o.$textContent=$("#block_"+e+"_text_content");o.isContentEditableActive=this.$textContent.data("isContentEditable")})}this.initCKEDitor=function(){var e,i;if(o.isContentEditableActive){this.$textContent.prop("contentEditable",true);this.ckeditor=CKEDITOR.inline(o.$textContent[0],{blockedKeystrokes:[13,CKEDITOR.SHIFT+13],enterMode:CKEDITOR.ENTER_BR,toolbar:[{items:["Bold","Italic","Underline","Strike","-","RemoveFormat"]}],keystrokes:[[13,"blur"],[CKEDITOR.SHIFT+13,"blur"]],removePlugins:"contextmenu,tabletools,liststyle,tableresize"});this.ckeditor.on("instanceReady",function(t){var e=t.editor;var o=$(t.editor.element.$);t.editor.document.on("drop",function(t){t.data.preventDefault(true)});if(o.data("linked")=="yes"){o.attr("title",o.data("description"))}else{o.attr("title","")}});this.ckeditor.on("focus",function(e){t.block.toggleBlock("edit",o.blockid);o.editorIsActive=true;o.save();if(o.$textContent.data("linked")=="yes"){$("#block_container_"+o.blockid+" .h24_cke_heading_link_helper").show()}for(var i in t.blocks){if(i!=o.blockid&&!!t.blocks[i].ckeditor&&!!t.blocks[i].ckeditor.fire){t.blocks[i].ckeditor.fire("blur")}}},this);if(!t.utils.touchMode){this.ckeditor.on("blur",function(){var e=this.getCkeditorData();if(e==""){this.deleteEmptyContent()}else{this.save()}this.editorIsActive=false;clearTimeout(this.autosaveTimeoutTimer);if(window.location.hash=="#/block/"+o.blockid+"/settings/"){t.block.toggleBlock("select",o.blockid)}else{t.block.toggleBlock("deselect",o.blockid)}if(o.$textContent.data("linked")=="yes"){$("#block_container_"+o.blockid+" .h24_cke_heading_link_helper").hide()}},this)}}};this.destroy=function(){if(!!o.ckeditor){o.ckeditor.destroy();o.ckeditor=null}};this.BCPActions={textEditor:function(){o.ckeditor.fire("focus")},blockSettings:function(){var e=true;if(!!this.sidepanel&&$("html").hasClass("angularjs-in-edit-mode")){t.block.toggleBlock("select",o.blockid)}else{t.block.ButtonBlock.settings(o.blockid)}},fontSettings:function(){t.design_manager.managerDialog("fonts","store")},tweakSettings:function(){t.design_manager.managerDialog("tweaks","store")},deleteBlock:function(){t.block.remove(o.blockid)}};var i=false;this.angularBlockServiceListener=function(e,n){var a=$("#block_"+o.blockid);switch(e){case"AlignmentChanged":var c=a.find("[data-function=alignment]");var l=a.find("[data-function=button]");var s={1:"h24-ButtonBlock-alignLeft",2:"h24-ButtonBlock-alignCenter",3:"h24-ButtonBlock-alignRight",4:"h24-HpButton__fullWidth"};c.removeClass(s[1]+" "+s[2]+" "+s[3]);l.removeClass(s[4]);switch(n){case 1:case 2:case 3:c.addClass(s[n]);break;case 4:l.addClass(s[n]);break}break;case"SizeChanged":var l=a.find("[data-function=button]");var r={1:"h24-HpButton__isMedium",2:"h24-HpButton__isBig"};l.removeClass(r[1]+" "+r[2]);l.addClass(r[n]);break;case"TypeChanged":var l=a.find("[data-function=button]");var k={1:"h24-HpButton__isPrimary",2:"h24-HpButton__isSecondary"};l.removeClass(k[1]+" "+k[2]);l.addClass(k[n]);break;case"IconAlignmentChanged":var d=a.find("[data-icon-alignment=left]"),u=a.find("[data-icon-alignment=right]");switch(n){case 1:d.hide();u.hide();break;case 2:d.show();u.hide();break;case 3:d.hide();u.show();break}break;case"IconUrlChanged":var l=a.find("[data-function=button]"),h=l.find("[data-icon]");h.attr("data-icon",$("<div />").html(n).text());break;case"ReloadBlockOnSave":i=true;break;case"SettingsSaved":if(i){t.block.reloadBlock(o.blockid);i=false}break;case"BCPActions":var B=n;if(typeof o.BCPActions[B]!="undefined"){o.BCPActions[B].call(this)}break}}};h24core.prototype.block.ButtonBlock.settings=function(t){$h24.block.previewSettingsDialog(t,{onReady:function(){var e=$("#settings_block_"+t);var o=$("#block_"+t);var i=$("input[name='use_link']");var n=$("input[name='link']");var a=$("input[name='link_type']");if(n.val()==""||a.val()==""){i.removeAttr("checked");i.attr("disabled","disabled")}e.find("input, select, a, span, p").each(function(){var e=$(this);switch(e.attr("name")){case"use_link":e.click(function(){$h24.block.ButtonBlock.saveSettings(t)});break;case"size":e.click(function(){$h24.block.ButtonBlock.saveSettings(t);$h24.block.ButtonBlock.setModified(t)});break;case"type":e.click(function(){$h24.block.ButtonBlock.saveSettings(t);$h24.block.ButtonBlock.setModified(t)});break;case"alignment":e.change(function(){switch(parseInt(e.val(),10)){case 1:o.removeClass("h24-ButtonBlockSettings-alignCenter h24-ButtonBlockSettings-alignRight");break;case 2:o.removeClass("h24-ButtonBlockSettings-alignRight").addClass("h24-ButtonBlockSettings-alignCenter");break;case 3:o.removeClass("h24-ButtonBlockSettings-alignCenter").addClass("h24-ButtonBlockSettings-alignRight");break}$h24.block.ButtonBlock.saveSettings(t);$h24.block.ButtonBlock.setModified(t)});break;case"icon_alignment":e.change(function(){var e=$(".h24-ButtonBlockSettings-iconHolder");var o=$('select[name="icon_alignment"] option:selected').val();if(o==1){e.hide()}else{e.show()}$h24.block.ButtonBlock.saveSettings(t);$h24.block.ButtonBlock.setModified(t)});break;case"pickIcon":e.click(function(){if($(".h24-ButtonBlockSettings-iconPicker").data("display")=="no"){$h24.block.ButtonBlock.showIconPicker(t)}else{$h24.block.ButtonBlock.hideIconPicker(t)}});break;case"closeIconPicker":e.click(function(){$h24.block.ButtonBlock.hideIconPicker(t)});break;case"chooseIcon":e.click(function(){$(".h24-ButtonBlockSettings-iconDefault").attr("data-icon",e.data("icon"));$("input[name='icon_url']").val(e.data("raw"));$h24.block.ButtonBlock.hideIconPicker(t);$("span[name='chooseIcon']").removeClass("h24-ButtonBlockSettings-icon__isMarked");e.addClass("h24-ButtonBlockSettings-icon__isMarked");$h24.block.ButtonBlock.saveSettings(t)});break}})}})};h24core.prototype.block.ButtonBlock.showIconPicker=function(t){var e=$(".h24-ButtonBlockSettings-iconPicker");e.show();e.data("display","yes")};h24core.prototype.block.ButtonBlock.hideIconPicker=function(t){var e=$(".h24-ButtonBlockSettings-iconPicker");e.hide();e.data("display","no")};h24core.prototype.block.ButtonBlock.reloadBlock=function(t){$h24.block.reloadBlock(t,{hideLoadingSpinner:false})};h24core.prototype.block.ButtonBlock.saveSettings=function(t){$h24.block.saveSettings(t,{hideLoadingSpinner:true,onClose:function(){$h24.block.ButtonBlock.reloadBlock(t)}})};h24core.prototype.block.ButtonBlock.setModified=function(t){$("#settings_block_"+t).addClass("h24_modified_settings")};h24core.prototype.block.ButtonBlock.linkDialog=function(t){$h24.link.blockLinkDialog("ButtonBlock",t,undefined,true)};h24core.prototype.block.ButtonBlock.pickBehavior=function(t,e){$h24.link.blockPickBehavior(t,e)};h24core.prototype.block.ButtonBlock.linkingCallback=function(t,e){$h24.link.blockLinkingCallback("ButtonBlock",t,e,1,true);var o=$("input[name='use_link']");var i=$("input[name='link']");var n=$("input[name='link_type']");var a=$("input[name='link_target']");var c=$("input[name='link_metadata']");var l=$(".h24-ButtonBlockSettings-linkButtonTextEdit");var s=$(".h24-ButtonBlockSettings-linkButtonTextCreate");if(typeof e.scope!="undefined"&&typeof e.link!="undefined"&&e.link!=""&&typeof e.link_type!="undefined"&&e.link_type!=""){o.attr("checked",true);o.removeAttr("disabled");l.show();s.hide()}else if(typeof e.scope!="undefined"){o.removeAttr("checked");o.attr("disabled","disabled");i.val("");n.val("");a.val("");c.val("");l.hide();s.show()}if(typeof e.scope!="undefined"){$h24.block.ButtonBlock.saveSettings(e.scope)}};h24core.prototype.block.ButtonBlock.enableInlineEdit=function(){$h24.block.ButtonBlock.inlineEditEnabled=true};h24core.prototype.block.ButtonBlock.disableInlineEdit=function(){$h24.block.ButtonBlock.inlineEditEnabled=false};
h24core.prototype.block.LatestBlogPostsBlock=function(t,e){this.innerblocktype="LatestBlogPostsBlock";this.blockid=e;var o=this;var s=false;this.angularBlockServiceListener=function(e,i){switch(e){case"PostLimitChanged":case"BlogSourceChanged":s=true;break;case"SettingsSaved":if(s){t.block.reloadBlock(o.blockid);s=false}break}};this.BCPActions={blockSettings:function(){var e=true;if(e&&$("html").hasClass("angularjs-in-edit-mode")){t.block.toggleBlock("select",this.blockid)}else{t.block.settingsDialog(this.blockid)}}}};
h24core.prototype.fauxSections=function(){var e=[];var a;var n;var o;var t=function(){var a,n,o;var t=$(".sitepreview").length?$(".h24-u-documentBackgroundHolder").scrollTop():0;e=[];$(".h24_collection_newline").each(function(i){var l=$(this);if(i==0){n=$("#h24_content_container").offset().top+t}else{n=a}o=l.offset().top+l.outerHeight()+t;e.push({top:n,height:o-n});a=o})};var i=function(){var a;var n;t();if($(".pp-FauxSection").length==0){n=$(".h24-u-documentBackgroundHolder > video.h24-PageBackground-video");for(var o=0;o<e.length;o++){a=$("<div>").addClass("pp-FauxSection pp-FauxSection-index"+o).data("index",o);if($h24.editmode&&!!$(".sitepreview").length){a=$('<div class="pp-FauxSection-container">').append(a);a.append('<div class="pp-FauxSection-hovertop"></div><div class="pp-FauxSection-hoverbottom"></div><div class="pp-FauxSection-controls"><span class="pp-FauxSection-button" data-action="FauxSectionToggleMenu">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Section")+"</span></div>")}if(n.length){a.insertAfter(n)}else{a.prependTo(".h24-u-documentBackgroundHolder")}}}for(var o=0;o<e.length;o++){a=$(".pp-FauxSection-index"+o);if(a.length){if($h24.editmode&&!!$(".sitepreview").length)a=a.parent();a.css({top:e[o].top,height:e[o].height})}}if($h24.editmode&&!!$(".sitepreview").length){var i=[];if(e.length>0){i=e}else{var l=$(".sitepreview").length?$(".h24-u-documentBackgroundHolder").scrollTop():0;var r=$("#h24_content_container").offset().top+l;var s=$("#h24_content_container").outerHeight();i.push({top:r,height:s})}$h24.footer.reposition(i);$h24.header.reposition(i)}};var l=function(n,o){if(o===false&&!a)return;if(!a){a=$('<ul class="pp-FauxSection-menu" role="menu" data-action="FauxNoToggle">'+'<li><div class="pp-FauxSection-menuHeading">'+$h24.phrase.GUIPhrase("PageBackgroundManager","Section Layout")+"</div>"+"<div>"+$(".js-section-layouts").html()+"</div>"+"</li>"+'<li data-action="FauxSectionSettings"><a href="#"><span data-icon="&#xc3ae;" aria-hidden="true"></span> '+$h24.phrase.GUIPhrase("PageBackgroundManager","Change Background")+"</li>"+'<li data-action="FauxSectionDisable"><a href="#"><span data-icon="&#xe208;" aria-hidden="true"></span> '+$h24.phrase.GUIPhrase("PageBackgroundManager","Remove Background")+"</a></li>"+'<li data-action="FauxSectionDelete"'+(true?"":" disabled")+'><a href="#" class=""><span data-icon="&#49744;" aria-hidden="true"></span> '+$h24.phrase.GUIPhrase("PageBackgroundManager","Delete Section")+"</li>"+"</ul></div>")}if(n){var t=n.siblings(".pp-FauxSection").data("index");a.find("[data-action=FauxSectionDisable]").toggleClass("disabled",!$('head [data-selector=".pp-FauxSection-index'+t+'"]').length);a.find("[data-action=FauxSectionDelete]").toggleClass("disabled",e.length===1)}if(n&&!$.contains(n[0],a[0])){var i=r(t);var l=v().slice(i.first().data("collectionIndex"),i.last().data("collectionIndex")+1).join('","');a.appendTo(n);a.removeClass("u-hidden");a.find(".current").removeClass("current");a.find('[data-layout="["'+l+'"]"]').addClass("current");$(".sitepreview").addClass("h24-menu__isOpen")}else{if(typeof o=="undefined"){a.toggleClass("u-hidden");$(".sitepreview").toggleClass("h24-menu__isOpen",!a.hasClass("u-hidden"))}else{a.toggleClass("u-hidden",!o);$(".sitepreview").toggleClass("h24-menu__isOpen",o)}}};var r=function(e){var a=0;var n=$([]);$("#h24_content_container > div").each(function(){var o=$(this);if(a==e&&o.hasClass("h24_collection")){n=n.add(o)}if(o.hasClass("h24_collection_newline")){a++}});return n};var s=function(a){if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide()}t();if(typeof e[a]=="undefined"){return}if(!$('.h24-PageBackground-stylesheet[data-selector=".pp-FauxSection-index'+a+'"]').length){$h24.pageBackgroundManager.prepareFauxSection($h24.pageid,a,function(){var e=r(a).addClass("h24_faux_section_collection");e.first().prevAll(".h24_collection_newline:eq(0)").addClass("h24_collection_newline_fauxafter");e.last().nextAll(".h24_collection_newline:eq(0)").addClass("h24_collection_newline_fauxbefore");i();$h24.pageBackgroundManager.settings({onCancel:function(){c(a)}},".pp-FauxSection-index"+a)})}else{$h24.pageBackgroundManager.settings({onCancel:function(){}},".pp-FauxSection-index"+a)}$(".pp-FauxSection-index"+a+' [data-action="FauxSectionDisable"]').removeClass("disabled")};var c=function(e){$h24.pageBackgroundManager.removeFauxSection($h24.pageid,e,function(){$(".pp-FauxSection-index"+e+' [data-action="FauxSectionDisable"]').addClass("disabled");var a=r(e);a.removeClass("h24_faux_section_collection");a.first().prevAll(".h24_collection_newline:eq(0)").removeClass("h24_collection_newline_fauxafter");a.last().nextAll(".h24_collection_newline:eq(0)").removeClass("h24_collection_newline_fauxbefore");i()})};var d=function(e){var a=$("[data-layout-id]:eq(0)").data("layoutId"),n=r(e);block_count=n.find("> ul > li.sortable").length;if(block_count>0&&!confirm($h24.phrase.GUIPhrase("PageBackgroundManager","Continue to permanently delete this section and its %no% blocks?",{no:block_count})))return;$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",__keep_loading_overlay:true,homepageid:$h24.homepageid,pageid:$h24.pageid,modelaction:"delete_section",collection_index:n.first().data("collectionIndex"),collection_count:n.length,current_layout:a,faux_index:e},function(e){if(e.successful)refreshBrowser();else{hide_loading_overlay();if($h24.devmode)console.log(e)}})};var u=function(e,a){var n=r(a);$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",__keep_loading_overlay:true,homepageid:$h24.homepageid,pageid:$h24.pageid,modelaction:"change_section",collection_index:n.first().data("collectionIndex"),collection_count:n.length,current_layout:v(),new_layout:e},function(e){if(e.successful)refreshBrowser();else{hide_loading_overlay();if($h24.devmode)console.log(e)}})};var h=function(e){var a=e.closest("[data-collection]").data("collection"),n=e.data("layout"),o=$("[data-layout-id]:eq(0)").data("layoutId"),t=v().slice(0,a+1),i=0,l=0;if(t.length>0){i=t.reduce(function(e,a){return parseFloat(e)+parseFloat(a)});l=Math.round(i/100)}$h24.post($h24.slashwebroot+"Page/Communicator",{model:"DesignManager",__keep_loading_overlay:true,homepageid:$h24.homepageid,pageid:$h24.pageid,modelaction:"insert_section",layout:n,current_layout:o,collection:a,faux_index:l},function(e){if(e.successful){refreshBrowser()}else{hide_loading_overlay();if($h24.devmode)console.log(e)}})};var p=function(e,a){var o;if(!n)n=$(".h24_section_picker");if(!e){o=n.parent()}else{o=e.parent();if(!e.siblings().is(n)){n.parent().removeClass("active");o.prepend(n)}}o.toggleClass("active",a);$("html").toggleClass("h24-add-section__isActive",a);i()};var g=function(e,n,o){if($("html").hasClass("h24_collage-editor-active"))return false;var t=e.siblings(".pp-FauxSection").data("index");if(n=="top")t--;$(".h24_section_add_group").removeClass("hover");$('.h24_section_add[data-section="'+t+'"] > .h24_section_add_group').addClass("hover");if(a&&!a.hasClass("u-hidden"))return;$(".pp-FauxSection-container, .pp-FauxSection-hovertop, .pp-FauxSection-hoverbottom").removeClass("hover");e.addClass("hover").parent().addClass("hover")};var f=function(e){if(!$(e.toElement).closest(".pp-FauxSection-container").length)return false;if(!!$(".pp-FauxSection-container:hover,.h24_content_container:hover,#main:hover").length)return;$(".h24_section_add_group").removeClass("hover");if(a&&!a.hasClass("u-hidden"))return;$(".pp-FauxSection-container, .pp-FauxSection-hovertop, .pp-FauxSection-hoverbottom").removeClass("hover")};var v=function(){if(!o){o=$("[data-design-layout]").data("design-layout");o=$.map(o,function(e,a){return[e]})}return o};return{reposition:i,settings:s,disable:c,remove:d,fauxSectionCalc:e,toggleMenu:l,toggleAddSection:p,changeLayout:u,applyLayout:h,hoverAction:g,mouseoutAction:f}}();
h24core.prototype.data=function(){return{}}();
h24core.prototype.data.help={"sv-SE":{blocks:{UserFileBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/ladda-upp-filer-12597"},MapBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-karta-654086"},CleanGalleryBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-galleri-278387"},AudioPlayerBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-ljud-33456"},FormBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-formular-12704"}},dialogs:{style_manager:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-design-108893",tab_0:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-design-108893"},tab_1:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-layout-108923"},tab_2:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-typsnitt-107257"},tab_3:{}}},h24coreDialogs:{emailCenter:{url:"http://www.hemsida24.se/guider/e-post/e-post-via-hemsida24-14115205"},seo_overview:{url:"http://www.hemsida24.se/help/item/guide/sökmotoroptimera-din-hemsida-5668"}},autonomous:{}},"en-US":{blocks:{UserFileBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/ladda-upp-filer-12597"},MapBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-karta-654086"},CleanGalleryBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-galleri-278387"},AudioPlayerBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-ljud-33456"},StandardTextBlock:{url:"http://www.hemsida24.se/hjalp/komma-igang/lagga-in-text-12716"},PresentationImageBlock:{url:"http://www.hemsida24.se/hjalp/komma-igang/lagga-in-bilder-12779"},FormBlock:{url:"http://www.hemsida24.se/hjalp/skapa-innehall/lagga-in-formular-12704"}},dialogs:{page_manager_dialog:{url:"http://www.hemsida24.se/hjalp/komma-igang/lagga-till-nya-sidor-14295"},style_manager:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-design-108893",tab_0:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-design-108893"},tab_1:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-layout-108923"},tab_2:{url:"http://www.hemsida24.se/hjalp/utseende-layout/andra-typsnitt-107257"}}},h24coreDialogs:{},autonomous:{}}};
h24core.prototype.legacy=function(){function e(){$("#homepage_settings_dialogbox_tabs").tabs();$("#image_manager_tabs").tabs();$("#style_manager_tabs").tabs({select:function(e,l){if(typeof $h24.data.help[$h24.fullLanguage].dialogs.style_manager=="undefined")return;switch(l.newTab.index()){case 0:if(typeof $h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_0=="undefined")return;var t=$h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_0;break;case 1:if(typeof $h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_1=="undefined")return;var t=$h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_1;break;case 2:if(typeof $h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_2=="undefined")return;var t=$h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_2;break;case 3:if(typeof $h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_3=="undefined")return;var t=$h24.data.help[$h24.fullLanguage].dialogs.style_manager.tab_3;break}if(typeof t.video!="undefined"){$("#h24_preloaded_dialog_box a.h24_dialog_videohelp_link").show().unbind().click(function(){$h24.utils.loadVideo(t.video.src,{videoWidth:t.video.width,videoHeight:t.video.height});return false})}else $("#h24_preloaded_dialog_box a.h24_dialog_videohelp_link").hide();if(typeof t.url!="undefined"){$("#h24_preloaded_dialog_box a.h24_dialog_help_link").show().attr("href",t.url)}else $("#h24_preloaded_dialog_box a.h24_dialog_help_link").hide()}})}function l(){var e=$();if($("#ulcollection0").length>0){$("#ulcollection0").sortable({appendTo:"body",placeholder:"sort_helper",handle:".h24_bcp_top-bar",revert:false,cursorAt:{top:27,left:35},zIndex:1200,helper:function(e,l){return $('<div class="h24_add_content_block"><span data-icon="&#'+$(l).data("blockicon")+';" aria-hidden="true">')},connectWith:["#ulcollection1,#ulcollection2,#ulcollection3,#ulcollection4"],start:function(l,t){$("ul.sortable").append('<li class="sortable h24_empty_li" style="height: 30px;"></li>');e=$(this);e.addClass("h24_sortable_is-receiver");$("html").addClass("h24_block-sorting");t.helper.css({width:70,height:55,opacity:.8});t.placeholder.html($("#h24_sortable_placeholder").html())},over:function(l,t){e.removeClass("h24_sortable_is-receiver");e=$(this);e.addClass("h24_sortable_is-receiver")},stop:function(l,t){if(t.item.hasClass("sortable"))t.item.height(t.item.originalHeight);t.item.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");e.removeClass("h24_sortable_is-receiver");$h24.block.dragReport(null,0);$("ul.sortable li.h24_empty_li").remove();$("#ulcollection0").sortable("refresh");$h24.block.addSnippetOnEmptyCollections()},receive:function(e,l){var t=0;if(l.item.hasClass("h24_force_reload")==true||l.item.hasClass("sortable")==false){var t=1}$h24.block.dragReport(null,0,t);$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})}if($("#ulcollection1").length>0){$("#ulcollection1").sortable({appendTo:"body",placeholder:"sort_helper",handle:".h24_bcp_top-bar",revert:false,cursorAt:{top:27,left:35},zIndex:1200,helper:function(e,l){return $('<div class="h24_add_content_block"><span data-icon="&#'+$(l).data("blockicon")+';" aria-hidden="true">')},connectWith:["#ulcollection0,#ulcollection2,#ulcollection3,#ulcollection4"],start:function(l,t){e=$(this);e.addClass("h24_sortable_is-receiver");$("html").addClass("h24_block-sorting");t.helper.css({width:70,height:55,opacity:.8});t.placeholder.html($("#h24_sortable_placeholder").html())},over:function(l,t){e.removeClass("h24_sortable_is-receiver");e=$(this);e.addClass("h24_sortable_is-receiver")},stop:function(l,t){if(t.item.hasClass("sortable"))t.item.height(t.item.originalHeight);t.item.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");e.removeClass("h24_sortable_is-receiver");$h24.block.dragReport(null,1);$("ul.sortable li.h24_empty_li").remove();$("#ulcollection0").sortable("refresh");$h24.block.addSnippetOnEmptyCollections()},receive:function(e,l){var t=0;if(l.item.hasClass("h24_force_reload")==true||l.item.hasClass("sortable")==false){var t=1}$h24.block.dragReport(null,1,t);$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})}if($("#ulcollection2").length>0){$("#ulcollection2").sortable({appendTo:"body",placeholder:"sort_helper",handle:".h24_bcp_top-bar",revert:false,cursorAt:{top:27,left:35},zIndex:1200,helper:function(e,l){return $('<div class="h24_add_content_block"><span data-icon="&#'+$(l).data("blockicon")+';" aria-hidden="true">')},connectWith:["#ulcollection0,#ulcollection1,#ulcollection3,#ulcollection4"],start:function(l,t){e=$(this);e.addClass("h24_sortable_is-receiver");$("html").addClass("h24_block-sorting");t.helper.css({width:70,height:55,opacity:.8});t.placeholder.html($("#h24_sortable_placeholder").html())},over:function(l,t){e.removeClass("h24_sortable_is-receiver");e=$(this);e.addClass("h24_sortable_is-receiver")},stop:function(l,t){if(t.item.hasClass("sortable"))t.item.height(t.item.originalHeight);t.item.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");e.removeClass("h24_sortable_is-receiver");$h24.block.dragReport(null,2);$("ul.sortable li.h24_empty_li").remove();$("#ulcollection0").sortable("refresh");$h24.block.addSnippetOnEmptyCollections()},receive:function(e,l){var t=0;if(l.item.hasClass("h24_force_reload")==true||l.item.hasClass("sortable")==false){var t=1}$h24.block.dragReport(null,2,t);$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})}if($("#ulcollection3").length>0){$("#ulcollection3").sortable({appendTo:"body",placeholder:"sort_helper",handle:".h24_bcp_top-bar",revert:false,cursorAt:{top:27,left:35},zIndex:1200,helper:function(e,l){return $('<div class="h24_add_content_block"><span data-icon="&#'+$(l).data("blockicon")+';" aria-hidden="true">')},connectWith:["#ulcollection0,#ulcollection1,#ulcollection2,#ulcollection4"],start:function(l,t){e=$(this);e.addClass("h24_sortable_is-receiver");$("html").addClass("h24_block-sorting");t.helper.css({width:70,height:55,opacity:.8});t.placeholder.html($("#h24_sortable_placeholder").html())},over:function(l,t){e.removeClass("h24_sortable_is-receiver");e=$(this);e.addClass("h24_sortable_is-receiver")},stop:function(l,t){if(t.item.hasClass("sortable"))t.item.height(t.item.originalHeight);t.item.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");e.removeClass("h24_sortable_is-receiver");$h24.block.dragReport(null,3);$("ul.sortable li.h24_empty_li").remove();$("#ulcollection0").sortable("refresh");$h24.block.addSnippetOnEmptyCollections()},receive:function(e,l){var t=0;if(l.item.hasClass("h24_force_reload")==true||l.item.hasClass("sortable")==false){var t=1}$h24.block.dragReport(null,3,t);$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})}if($("#ulcollection4").length>0){$("#ulcollection4").sortable({appendTo:"body",placeholder:"sort_helper",handle:".h24_bcp_top-bar",revert:false,cursorAt:{top:27,left:35},zIndex:1200,helper:function(e,l){return $('<div class="h24_add_content_block"><span data-icon="&#'+$(l).data("blockicon")+';" aria-hidden="true">')},connectWith:["#ulcollection0,#ulcollection1,#ulcollection2,#ulcollection3"],start:function(l,t){e=$(this);e.addClass("h24_sortable_is-receiver");$("html").addClass("h24_block-sorting");t.helper.css({width:70,height:55,opacity:.8});t.placeholder.html($("#h24_sortable_placeholder").html())},over:function(l,t){e.removeClass("h24_sortable_is-receiver");e=$(this);e.addClass("h24_sortable_is-receiver")},stop:function(l,t){if(t.item.hasClass("sortable"))t.item.height(t.item.originalHeight);t.item.css({height:"auto",overflow:"visible"});$("html").removeClass("h24_block-sorting");e.removeClass("h24_sortable_is-receiver");$h24.block.dragReport(null,4);$("ul.sortable li.h24_empty_li").remove();$("#ulcollection0").sortable("refresh");$h24.block.addSnippetOnEmptyCollections()},receive:function(e,l){var t=0;if(l.item.hasClass("h24_force_reload")==true||l.item.hasClass("sortable")==false){var t=1}$h24.block.dragReport(null,4,t);$("ul.sortable li.h24_empty_li").remove();$h24.block.addSnippetOnEmptyCollections()}})}$h24.block.reloadAddContentPanelSortables()}return{initiate_tabs:e,reloadSortables:l}}();
h24core.prototype.comment_manager=function(){function e(e){var a=$h24.coreDialog.create("comment_manager_dialog",'<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>',{width:765,title:$h24.phrase.GUIPhrase("Dialogs","Comment Manager"),onClose:function(){reloadColumns()},removeSidePadding:true});$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"CommentManager",modelaction:"dialog"},function(o){a.content.html(o);var m=$("#comment_manager_dialog_tabs").tabs();if(typeof e!="undefined"){m.tabs("option","active",e)}$("#comment_manager_dialog_tab_1 li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var n=$("#comment_manager_dialog");n.find("a[name=1], a[name=3]").click(function(){var e=$(this);var a=e.attr("name");if(e.hasClass("comment_manager_dialog_tab_refresh")){$h24.comment_manager.refreshTab(a);e.removeClass("comment_manager_dialog_tab_refresh")}})})}function a(e,a,o,m){var n=confirm($h24.phrase.GUIPhrase("Comment-Manager","Are you sure you want to remove this comment?"));if(n!=true)return;$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/CommentManager/modelaction/del_comment",{id:e},function(n){if(n=="statuscode/1"){if(typeof a!="undefined"){$h24.common.simpleComment(a,o,m);var i=$("#block_"+a+" .visitor_comment_"+e);i.remove()}else{var t=$("#comment_manager_dialog");var r=t.find(".visitor_comment_"+e);r.slideUp("fast");$("#comment_manager_dialog a[name=1], #comment_manager_dialog a[name=3]").addClass("comment_manager_dialog_tab_refresh")}$h24.utils.notification($h24.phrase.GUIPhrase("Comment-Manager","The comment has been deleted"),"accept");reload_HideLoadingMessage()}})}function o(e){$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/CommentManager/modelaction/appr_comment",{id:e},function(a){if(a=="statuscode/1"){var o=$("#comment_manager_dialog");var m=o.find(".visitor_comment_"+e);m.slideUp("fast");$h24.utils.notification($h24.phrase.GUIPhrase("Comment-Manager","The comment has been approved"),"accept");$("#comment_manager_dialog a[name=1], #comment_manager_dialog a[name=3]").addClass("comment_manager_dialog_tab_refresh")}})}function m(e,a,o,m){$h24.post($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/CommentManager/modelaction/spam_comment",{id:e},function(n){if(n=="statuscode/1"){if(typeof a!="undefined"){$h24.common.simpleComment(a,o,m);var i=$("#block_"+a+" .visitor_comment_"+e);i.remove()}else{var t=$("#comment_manager_dialog");var r=t.find(".visitor_comment_"+e);r.slideUp("fast");$("#comment_manager_dialog a[name=1], #comment_manager_dialog a[name=3]").addClass("comment_manager_dialog_tab_refresh")}$h24.utils.notification($h24.phrase.GUIPhrase("Comment-Manager","The comment has been marked as spam"),"accept");reload_HideLoadingMessage()}})}function n(){var e=$("#comment_manager_dialog_tab_2 select[name=source] option:selected").val();var a=Math.random()*9999;$("#comment_manager_dialog_archive").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/CommentManager/modelaction/tab2_comments/source/"+e+"/anticache/"+a,function(e){$("#comment_manager_dialog_archive").html(e)})}function i(e){if(e=="1"||e=="3"){var a=Math.random()*9999;$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/CommentManager/modelaction/tab"+e+"/anticache/"+a,{__skip_loading_overlay:true},function(a){$("#comment_manager_dialog_tab_"+e).html(a)})}}return{loadCommentManager:e,deleteComment:a,approveComment:o,spamComment:m,loadCommentArchive:n,refreshTab:i}}();
h24core.prototype.publishing_manager=function(){function e(e){var i=confirm($h24.phrase.GUIPhrase("Publishing","Are you sure you want to unpublish the website?"));if(i!=true)return;$h24.post($h24.publicdir+"../Page/Depublish",{homepageid:$h24.homepageid,__keep_loading_overlay:true},function(i){alert($h24.phrase.GUIPhrase("Publishing","Your website is now unpublished."));if(typeof e!="undefined")refreshBrowser();else{$h24.utils.ajaxLoaderStop();$h24.homepage_settings.loadHomepageSettingsTab(7)}})}function i(e){var e=!!e?1:0;var i=confirm($h24.phrase.GUIPhrase("Publishing","Are you sure you want to do a reversed publishing?"));if(i!=true)return;show_loading_overlay();$.post($h24.publicdir+"../Page/Reverse-Publish",{homepageid:$h24.homepageid,force:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}reload_HideLoadingMessage();if(e=="statuscode/3"||e=="statuscode/4"){alert($h24.phrase.GUIPhrase("Publishing","Reverse publishing is inactivated for your homepage, please contact support for assistance."))}else if(e!="statuscode/1"){alert($h24.phrase.GUIPhrase("Publishing","An error occurred, please contact our support for help."))}else{refreshBrowser()}})}function a(e){var i=$("#publishing_signup_username").val();var a=$("#publishing_signup_password").val();var s=$("#publishing_signup_email").val();$("#publishing_signup_messages .hidden").hide();$h24.post($h24.publicdir+"../Page/Communicator",{homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"save_acc_settings",username:i,password:a,email:s,register:1,requirepassword:1},function(i){var a=i.split("/");var s=a[1];$("#publishing_signup_msg"+s).show();if(s==1){$h24.coreDialogs.h24_domain_publishing_dialog.close();if(typeof e!="undefined")window.location=$h24.slashwebroot+"H24-Order-Guide";else $h24.publishing_manager.publish()}})}function s(e){switch(e){case"subdomain":var i=$(".h24-PublishingModel-subdomainInput").val();$("#publishing_domain_messages .hidden").hide();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PublishingModel",modelaction:"tie_subdomain",name:i},function(e){var i=e.split("/");var a=i[1];$("#publishing_domain_msg"+a).show();if(a==1){$h24.coreDialogs.h24_domain_publishing_dialog.close();$h24.publishing_manager.publish()}});break;case"newdomain":alert("inte implementerat!");break;case"existingdomain":alert("inte implementerat!");break}}function o(e){$h24.post($h24.publicdir+"../Page/Publish",{homepageid:$h24.homepageid},function(i){var a=i.split("/");var s=a[1];var o=Math.random()*9999;if(a.length==4){var r=a[3]}else{var r=0}switch(s){case"2":var h="pre";var n=445;var l=$h24.phrase.GUIPhrase("Dialogs","Create Account");break;case"3":var h="domain";var n=585;var l=$h24.phrase.GUIPhrase("Dialogs","Domain Name");break;case"4":alert($h24.phrase.GUIPhrase("Publishing","Your website is already beeing published, please try again in a few moments."));return;break;case"5":$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Homepage-Settings","Please choose a name for your homepage"),input:"",requireInput:true,okCallback:function(e){var i={homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"set_homepage_name",name:e,set_collage:0};$h24.post("/"+$h24.webroot+"Page/Communicator",i,function(e){if(e.successful){$h24.publishing_manager.publish()}})}});break}if(typeof e=="undefined")e=0;else e=1;if(r==1){}if(s==1){$h24.get($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/PublishingModel/modelaction/load/auto_order/"+e+"/first_publish/"+r+"/anticache/"+o,{pageid:$h24.pageid},function(e){$h24.dialog.create("publishing_dialog",e,{closeCallback:function(){var e=$('dd button[data-action="unpublish"]');if(e.length){e.show()}if(r==1){show_loading_overlay();refreshBrowser()}else{this.close()}var i=$('.h24-SidePanel-mobileContainer [data-action="publish"]');if(i.length){i.prop("disabled",true)}},sidePadding:20,width:600,title:$h24.phrase.GUIPhrase("Publishing","Publish Website")});$("#h24_publishing_dialog a.h24_hover_preview").hoverPreview({clickReturnFalse:true})})}else if(s!=5){$h24.coreDialog.create("h24_"+h+"_publishing_dialog",'<div id="'+h+'_publishing_div"><div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div></div>',{width:n,title:l});$("#"+h+"_publishing_div").load($h24.publicdir+"../Page/Communicator/homepageid/"+$h24.homepageid+"/model/PublishingModel/modelaction/load/auto_order/"+e+"/first_publish/"+r+"/anticache/"+o)}})}return{publishingSignup:a,publishingDomain:s,publish:o,reversePublish:i,dePublish:e}}();
h24core.prototype.frontpage=function(){var e=function(){var e=document.createElement("input");if("placeholder"in e){jQuery.support.placeholder=true}else{jQuery.support.placeholder=false;$("html").addClass("no-placeholder")}var t=$("form.h24_regForm"),o=t.find("input, button"),n="unknown",i=false,s=$('<div class="tooltip"></div>');var r=function(e,a){submitted=false;e.after(s.html(e.data(a)).show());s.css({"margin-top":-(s.outerHeight()/2)})};t.on("change","input",function(){s.hide()});$("#h24_content_container").on("click","a.expand",function(){$(this).toggleClass("expanded").closest("div").find(".expandable").slideToggle("fast");return false});if(typeof $(".main_nav_more_lnk")!="undefined"&&$(".main_nav_more_lnk").length>0&&$h24.homepageid==44){a()}$userInput=t.find('[name="accountUser"]');var l=function(){$h24.post("/"+$h24.webroot+"Account/Validate-User-Name",{user:$userInput.val(),__skip_loading_overlay:true},function(e){if(i){o.prop("disabled",false)}if(e.error_message){if(e.error_message=="username_taken"){n="taken"}else{n="invalid"}if(i){i=false;r($userInput,n)}}else{n="valid";if(i){i=false;t.submit()}}})};$userInput.inputTimeout({onTimeout:function(){if(n!="dirty"){return}l()},onKeyUp:function(e){if($userInput.data("inputTimeout").lastValue==e){return false}var a=/^[^\s\\'"%][^\\'"%]{3,}[^\s\\'"%]$/;if(!a.test(e)){n="invalid"}else{n="dirty"}}});t.on("submit",function(e){if(i){return false}s.hide();o.each(function(){$this=$(this);switch($this.prop("name")){case"accountEmail":if(!$h24.utils.mailValidation($this.val())){i=false;r($this,"invalid");e.preventDefault();return false}break;case"accountUser":if(n=="dirty"){i=true}else if(n=="unknown"){l();i=true;e.preventDefault()}else if(n!="valid"){i=false;r($userInput,n);e.preventDefault();return false}break;case"accountPwd":var a=/^[^ \\'"][^\\'"]{4,}[^ \\'"]$/;if(!a.test($this.val())){i=false;r($this,"invalid");e.preventDefault();return false}break}});if(i){o.prop("disabled",true);return false}});var d=$(".h24-FrontpageTheme-expandableContainer");$(".h24-FrontpageTheme-topNavLink[data-action=openNavDrawer]").on("click",function(e){d.toggleClass("h24-FrontpageTheme-expandableContainer__expanded");e.preventDefault()});$("body").on("click",function(e){var a=$(e.target);if(a.data("dismiss")=="drawer"||!a.closest(".h24-FrontpageTheme-expandableContainer").length)d.removeClass("h24-FrontpageTheme-expandableContainer__expanded")});$("body").on("click",'a[target="h24-terms"]',function(){$this=$(this);window.open($this.prop("href"),"_blank","height=500,width=500,toolbar=0,location=0,menubar=0,scrollbars=1");return false})};var a=function(){$(window).scroll(function(){if(!$(".mobile_sidebar_menu").hasClass("m_toggle")&&!$(".top_under_header").hasClass("act")){if($(this).scrollTop()>20){$(".header").addClass("fixed")}else{$(".header").removeClass("fixed")}}});$("body").on("click",function(a){var t=$(a.target);var o=$(".top_under_header");var n=$(".mobile_sidebar_menu");if(!t.closest(".header").length&&o.hasClass("act")||!t.closest(".header").length&&!t.closest(".mobile_sidebar_menu").length&&n.hasClass("m_toggle")){e()}if($("body").hasClass("modal-open")){if(!t.closest("#terms_of_service_modal").length&&!t.closest("#cookies_modal").length&&!t.closest("#our_promises_modal").length&&!t.closest("#contact_choice_modal").length){$(".modal.in").modal("hide")}}});$("[data-action='hide_navigations']").bind("click",function(a){e()});$(".header").on("click",".main_nav_more_lnk, .tuh_close",function(e){if($(".top_under_header").hasClass("act")){$(".top_under_header").removeClass("act")}else{$(".top_under_header").addClass("act");$(".header").addClass("fixed")}e.preventDefault()});$("body").on("click",".activateMobileMenu, .close-mobile-menu",function(e){if($("#root").hasClass("m_toggle")){$("#root, .mobile_sidebar_menu, .header, body").removeClass("m_toggle")}else{$("#root, .mobile_sidebar_menu, .header, body").addClass("m_toggle")}e.preventDefault()});$(".terms_of_service, .cookies, .our_promises, .contact_choice").bind("click",function(e){if($(e.target).is(".terms_of_service")){$("#terms_of_service_modal").modal("show")}else if($(e.target).is(".cookies")){$("#cookies_modal").modal("show")}else if($(e.target).is(".our_promises")){$("#our_promises_modal").modal("show")}else if($(e.target).is(".contact_choice")||$(e.target).is(".floatingContact-question")||$(e.target).is(".floatingContact-profile")){$("#contact_choice_modal").modal("show")}return false});function e(){$(".top_under_header").removeClass("act");$("#root, .mobile_sidebar_menu, .header, body").removeClass("m_toggle")}};var t=function(){$h24.utils.vimeoVideo(44231829,{videoWidth:936,videoHeight:528})};return{init:e,showIntroVideo:t}}();
h24core.prototype.SEOGuide=function(){var e;var t=null;var n;var i;var a;var o;function s(){l({step:"overview"})}function l(i){var a=i.step,s,d,c,f;if(i["contentEditable"]!=o||t==null){o=i["contentEditable"];r(i)}if(typeof u[i.step]!=="undefined"){if(typeof u[i.step].substeps!=="undefined"){if(typeof i["substep"]!=="number")i["substep"]=0;a=u[i.step].substeps[i.substep];s=i.step;d=i.step;c=i.substep+1;f=i.substep-1;if(c>=u[i.step].substeps.length)s=u[i.step].next;if(f<0)d=u[i.step].previous}else{s=u[i.step].next;d=u[i.step].previous}}n.fadeTo("fast",.1);$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"SEOGuide",modelaction:a,save_parameters:e,pageid:$h24.pageid,__skip_loading_overlay:true},function(t){e=null;n.html(t);n.fadeTo("fast",1);$confirm=n.find("input[name=confirm]");$confirmToggle=n.find(".h24_showOnConfirm");$confirm.change(function(){if($confirm.is(":checked"))$confirmToggle.show();else $confirmToggle.hide()});n.find(".h24_SEOGuide_cancel-link").click(function(){l({step:"overview"});return false});n.find("a.h24_toggle_visibility").click(function(){$(this).closest(".h24_toggle_scope").find(".h24_toggle_visibility:not(a)").slideToggle("fast");$(this).closest(".h24_toggle_scope").find("a.h24_toggle_visibility").toggle();return false});n.find(".h24_SEOGuide_continue").click(function(){if(typeof i.onContinue==="function"){var t=i.onContinue.call(this,i.step);if(typeof t=="boolean"&&t===false){return false}}if(typeof i.onUnLoad==="function"){i.onUnLoad.call(this);if(typeof t=="boolean"&&t===false){return false}}if(typeof i.substep!=="undefined")b(i.step+"_"+u[i.step].substeps[i.substep]);else b(i.step);if($confirm.length==1){var n=$confirm.is(":checked");var a=$confirm.data("initial_checked")==1;if(n!=a){var o={update_step:i.step,done:n};if(e==null)e=o;else $.extend(e,o)}}if(s!=null)$h24.SEOGuide["dialog_"+s].call(this,c);else if(e!=null)S();return false});n.find("a.h24_SEOGuide_back-link").click(function(){if(typeof i.onUnLoad==="function"){var e=i.onUnLoad.call(this,i.step);if(typeof e=="boolean"&&e===false){return false}}if(d!=null)$h24.SEOGuide["dialog_"+d].call(this,f);return false});if(typeof i.onLoad==="function"){i.onLoad.call(this)}})}function r(e){if(t!=null){t.close()}var i='<div style="text-align:center; padding:80px 0;"><img src="'+$h24.publicdir+'css/common/images/ajax-loader.gif" /><p style="text-align:center; margin-top:10px">Loading...</p></div>';var a={width:900,title:$h24.phrase.GUIPhrase("SEO-Guide","Search Engine Optimization"),draggable:true,onClose:function(){t=null}};$.extend(a,e);if(e["contentEditable"]){$.extend(a,{baseZ:2e3,alignment:"right",useOverlay:false,width:500})}if(typeof e.onUnLoad==="function"){$.extend(true,a,{onClose:e.onUnLoad})}t=$h24.coreDialog.create("seo_"+e["step"],i,a);n=t.content}var u={add_to_search_engine:{next:"website_name",previous:null},website_name:{next:"frontpage",previous:"add_to_search_engine"},frontpage:{next:"footer",previous:"website_name",substeps:new Array("keywords_frontpage","page_name","heading_frontpage","body_text","links","images_alt")},subpages_overview:{next:"sitemap",previous:"footer"},subpages:{next:"subpages_overview",previous:"subpages_overview",substeps:new Array("keywords","page_name","heading","body_text","links","images_alt")},footer:{next:"subpages_overview",previous:"frontpage"},sitemap:{next:"inlinks",previous:"subpages_overview"},inlinks:{next:"overview",previous:"sitemap"}};function d(){l({step:"status"})}function c(e){l({step:"add_to_search_engine"})}function f(e){l({step:"inlinks"})}function p(e){l({step:"sitemap"})}function _(e){l({step:"footer",width:500,contentEditable:true,onLoad:function(){$(".sitepreview").animate({scrollTop:$("#h24_footer").offset().top},1e3,function(){});n.find(".h24_edit_footer").click(function(){$h24.editors.footer();return false})}})}function h(e){l({step:"website_name"})}function g(e){l({step:"subpages_overview",onLoad:function(){n.find(".h24_SEOGuide_pageList ul a").click(function(){n.fadeTo("fast",.1);if($(this).attr("href")=="#"){m();return false}else{$.cookie("SEO_dialog","subpages",{path:"/"});return true}})}})}function m(e){var t=false;if(typeof e=="undefined"||typeof u.subpages.substeps[e]=="undefined")e=0;var n={step:"subpages",substep:e};switch(u.subpages.substeps[e]){case"page_name":$.extend(n,{onLoad:O});break;case"heading":$.extend(n,{contentEditable:true,onLoad:x});break;case"body_text":$.extend(n,{contentEditable:true,onLoad:w});break;case"links":$.extend(n,{contentEditable:true,onLoad:k});break;case"images_alt":$.extend(n,{contentEditable:true,onLoad:y,onUnLoad:E})}l(n)}function v(e){var t=false;if(typeof e=="undefined"||typeof u.subpages.substeps[e]=="undefined")e=0;var i=$(".h24_SEOGuide_do_frontpage").data("goto-ci");if(typeof i=="number"&&i>0){t=true;S(function(){$.cookie("SEO_dialog","frontpage",{path:"/"});n.fadeTo("fast",.1);location.href="?ci="+i})}if(!t){var a={step:"frontpage",substep:e};switch(u.frontpage.substeps[e]){case"keywords_frontpage":$.extend(a,{onContinue:function(e){var t=$("#h24_SEOGuide_keywords").val()!="";u[e].done=t;return true}});break;case"page_name":$.extend(a,{onLoad:O});break;case"heading_frontpage":$.extend(a,{contentEditable:true,onLoad:x});break;case"body_text":$.extend(a,{contentEditable:true,onLoad:w});break;case"links":$.extend(a,{contentEditable:true,onLoad:k});break;case"images_alt":$.extend(a,{contentEditable:true,onLoad:y,onUnLoad:E})}l(a)}}function b(t){var i=n.find(".save_parameter");var a=null;i.each(function(e){$this=$(this);if($this.val()!=$this.data("initial-value")){a=$h24.utils.getParameters(n,".save_parameter");return false}});if(a!==null){$.extend(a,{save_to:t});if(e==null)e=a;else $.extend(e,a);return true}else return false}function x(){$edit_object=$(".h24_heading:eq(0)");if($edit_object.length>0){var e=195;$(".sitepreview").animate({scrollTop:$edit_object.offset().top-e-20},1e3,function(){})}return true}function w(){$edit_objects=$("#h24_content_container .standard_text_block");if($edit_objects.length>0){var e=195;$(".sitepreview").animate({scrollTop:$edit_objects.offset().top-e-20},1e3,function(){})}return true}function k(){$edit_objects=$("#h24_content_container .standard_text_block .h24link");if($edit_objects.length>0){var e=195;$(".sitepreview").animate({scrollTop:$edit_objects.offset().top-e-20},1e3,function(){})}return true}function y(){$edit_objects=$("#h24_content_container .presentation_image_block_image:not([src='']), #h24_content_container .text_image:not([src=''])");if($edit_objects.length>0){$edit_objects.each(function(){$this=$(this);var e=$this.attr("alt");if(e==""){e="<i>Not set</i>"}$this.closest("div").prepend('<span class="h24_SEOGuide_alt-text hidden"><strong>Alt:</strong> '+e+"</span>")});var e=$("#h24_content_container .h24_SEOGuide_alt-text");var t=195;$(".sitepreview").animate({scrollTop:$edit_objects.offset().top-t-20},1e3,function(){e.fadeIn("slow").last().queue(function(){$(this).dequeue()})})}return true}function E(){var e=$("#h24_content_container .h24_SEOGuide_alt-text");e.fadeOut("slow",function(){e.remove()})}function T(){defaultPageTitle=$inputPageName.val()+" | "+websiteName;$inputCustomTitle.attr("placeholder",defaultPageTitle);if($inputCustomTitle.val()==""){$windowTitle.html(defaultPageTitle);$searchTitle.html(defaultPageTitle);$url.html(websiteUrl+$inputPageName.val()+"-"+123)}if($inputCustomTitle.val()==""){$searchTitle.html(defaultPageTitle);$windowTitle.html(defaultPageTitle)}else{$windowTitle.html($inputCustomTitle.val());$searchTitle.html($inputCustomTitle.val())}$searchDescription.html($inputDescription.val())}function O(){var e="",t=n.find(".h24_SEOGuide_example span").html(),i=n.find("input[name=h24_SEOGuide_website_name]").val(),a=n.find("input[name=h24_SEOGuide_page_name]"),o=n.find("input[name=h24_SEOGuide_page_title_input]"),s=n.find("textarea[name=h24_SEOGuide_description]"),l=n.find(".h24_SEOGuide_example strong"),r=n.find(".h24_SEOGuide_example span, .h24_SEOGuide_search_body cite"),u=n.find(".h24_SEOGuide_search_body h5"),d=n.find(".h24_SEOGuide_search_body p"),c=d.html();pageNameChange=function(){var n=a.val();o.attr("placeholder",n+" | "+i);var s=n.toLowerCase()+"-"+123;s=String(s).replace(/\s/g,"-").replace(/\\/g,"").replace(/&/g,"-").replace(/\//g,"-").replace(/\?/g,"-").replace(/=/g,"-").replace(/#/g,"-").replace(/:/g,"-").replace(/---/g,"-").replace(/--/g,"--").replace(/"/g,"").replace(/'/g,"").replace(/\%/g,"").replace(/\+/g,"-").replace(/>/g,"-").replace(/</g,"-");n=$("<div/>").text(n).html();r.html(t+s);e=n+" | "+i;if(o.val()==""){l.html(e);if(e.length>65)u.html(e.substr(0,65)+"...");else u.html(e)}},customTitleChange=function(){var t=o.val();t=$("<div/>").text(t).html();if(t==""){u.html(e);l.html(e)}else{l.html(t);if(t.length>65)u.html(t.substr(0,65)+"...");else u.html(t)}},descriptionChange=function(){var e=s.val();e=$("<div/>").text(e).html();if(e.length>150)e=e.substr(0,150)+"...";else if(e.length==0)e=c;d.html(e)};pageNameChange.call(this);customTitleChange.call(this);descriptionChange.call(this);a.keyup(pageNameChange);o.keyup(customTitleChange);s.keyup(descriptionChange)}function S(t){if(e!=null){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"SEOGuide",modelaction:"submit_data",save_parameters:e,__keep_loading_overlay:true},t);e=null}else t.call()}return{dialog_overview:s,dialog_status:d,dialog_add_to_search_engine:c,dialog_website_name:h,dialog_footer:_,dialog_subpages:m,dialog_frontpage:v,dialog_sitemap:p,dialog_inlinks:f,dialog_subpages_overview:g}}();
h24core.prototype.tooltipGuide=function(){var e;var o=function(t,a){if(t in e&&a in e[t].steps){var s=e[t].steps[a];var p=e[t].step_text.replace(/#/,a);var n=$(s.element).first(),r=s.position,l=s.selector_trigger_this,d=s.event_trigger_this,v=s.selector_trigger_next,c=s.event_trigger_next;if(n.length==0||!n.is(":visible")){if(typeof l=="string"&&l!=""&&typeof d=="string"&&d!=""){var u=new RegExp(/(.+)\[\"(.+)\"\]/);var h=u.exec(d);if(h!=null){var d=h[1];var m=h[2]}$(l).bind(d,function(e,i){$(l).unbind(d);if(typeof m=="string"&&m==i||h==null)setTimeout(function(){o(t,a)},500)})}else{if(a>0){o(t,a-1)}}return}if(a+1 in e[t].steps){var f='<a href="#" class="h24_tooltipGuide_close">'+e[t].close_text+"</a>",g='<div class="popover" data-tooltip-guide="'+t+'" data-tooltip-step="'+a+'"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div><div class="popover-footer"><span class="pull-left">'+p+"</span>"+f+"</div></div></div>";n.popover({html:true,animation:true,title:s.title,content:s.content,template:g,placement:r,trigger:"manual"}).popover("show");var _=n.data().popover.$tip;var b=_.offset().top;if(b<0){var G=parseInt(_.css("top"));_.css("top",G-b);_.find(".arrow").css("margin-top",b-10)}}else{i()}$(v).on(c,function(i){if(!(t in e&&a in e[t].steps)){$(v).off(i);return}var s=e[t].steps[a];$(v).off(i);n.popover("destroy");if(a+1 in e[t].steps){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"TooltipGuide",modelaction:"stepCompleted",guide:t,step:a,__skip_loading_overlay:true});setTimeout(function(){o(t,a+1)},500)}else{$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"TooltipGuide",modelaction:"guideCompleted",guide:t,step:a,__skip_loading_overlay:true})}})}};var t=function(o){e=o;$("body").on("click",".h24_tooltipGuide_close",function(o){var t=$(this),a=t.closest("[data-tooltip-guide]"),s=a.data("tooltip-guide"),p=a.data("tooltip-step"),n=a.prev();$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"TooltipGuide",modelaction:"cancelGuide",guide:s,step:p,__skip_loading_overlay:true});n.popover("destroy");i();delete e[s];o.preventDefault()})};var i=function(){var e=$(".h24_admin_panel .h24-helpButton");e.popover("destroy");var o=$h24.phrase.GUIPhrase("Tooltip-Guide","Find more help"),t=$h24.phrase.GUIPhrase("Tooltip-Guide",'You can always find more guides by pressing the "Help" button.'),i='<button type="button" class="btn btn-info btn-xs" data-action="closePopover">'+$h24.phrase.GUIPhrase("Tooltip-Guide","Close")+"</button>";var a=0;if(!!$h24.GUI.instances.blockDrawer&&$h24.GUI.instances.blockDrawer.isVisible()){$h24.GUI.instances.blockDrawer.hide();$h24.adminPanel.togglePanel(false);a=500}setTimeout(function(){e.popover({html:true,animation:true,title:o,content:t,template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div><div class="popover-bottom">'+i+"</div></div></div>",placement:"top",trigger:"manual"}).popover("show");$(".h24_admin_panel").find(".popover").addClass("popover-adjustment");$('[data-action="closePopover"]').on("click.h24_admin_panel",function(o){e.popover("destroy")})},a)};return{showStep:o,load:t}}();
h24core.prototype.menuOverflow=function(){var e=function(){if($h24.design_system==1&&$h24.overflow_item_selector!=""&&$h24.overflow_width!=""&&(!!$("#h24_menu_overflow_modal").length||!$h24.editmode)&&($h24.editmode||!$h24.overflowing_menu_allowed)){var e=$h24.overflow_item_selector.split(",");var o=$h24.overflow_width.split(",");if(e.length!=o.length){if($h24.devmode)console.log("$h24.item_selectors count != $h24.overflow_width count");return}for(var r=0;r<e.length;r++){var t=e[r];var a=parseInt(o[r]);var i=0;var l=false;var n;var h=0;var f;$(t).each(function(e){var o=$(this);var r=o.outerWidth(true);if(!l){i+=r}if(!l&&i>=a){l=true}if(l&&!$h24.overflowing_menu_allowed){o.remove()}});if($h24.editmode&&l&&!$h24.overflowing_menu_allowed){$h24.utils.notification($h24.phrase.GUIPhrase("Control-Panel","Du har fler sidor än vad som får plats i menyn")+'. <a href="#h24_menu_overflow_modal" class="h24_notification_action" data-toggle="modal" data-backdrop="false" data-dismiss="notification">'+$h24.phrase.GUIPhrase("General","Read more")+"</a>","alert",{timeoutTime:10});break}}}};return{check:e}}();
h24core.prototype.designGallery=function(){var e;var a=function(a){var h="";if(location.search.length>0){h=i(location.search,"theme_id")}$(window).off("scroll.h24_scrollDown").on("scroll.h24_scrollDown",function(){if($(window).scrollTop()>100){if($(".h24-DesignGallery-scrollDown").is(":visible")){$(".h24-DesignGallery-scrollDown").fadeOut()}}else{if(!$("h24-DesignGallery-scrollDown").is(":visible")&&screen.width>700){$(".h24-DesignGallery-scrollDown").fadeIn()}}});e="https://"+window.location.host+"/"+$h24.webroot+"Page/Edit/homepageid/"+$h24.homepageid+h;if(screen.width<=700){$(".h24-DesignGallery-holder").hide();$(".h24-DesignGallery-scrollDown").hide();$(".h24-DesignGallery__isMobile").show();$("head").append('<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">');setTimeout(function(){window.location.href="/"+$h24.webroot+"Account/Logout"},15*1e3)}if($("body").hasClass("h24_intro")&&a>0){r(a);m("homepageName")}$("body").on("click","[data-action]",function(a){a.preventDefault();var l=$(a.target).closest("[data-action]");var i=l.data("action");if($("body").hasClass("h24-DesignGallery-disableButtonClicks")){return}switch(i){case"chooseTheme":var t=$(this).closest("[data-function=theme]");var h=t.data("themeId");r(h);break;case"previewTheme":var t=$(this).closest("[data-function=theme]");var h=t.data("themeId");var g=t.data("preview");d(h,g);break;case"nextTheme":var v=$(".h24-DesignGallery-dialogPreview"),h=v.data("themeId");if(h>0){var t=$(".h24-DesignGallery-themes").find("[data-theme-id="+h+"]");var y=t.next().data("theme-id");var p=t.next().data("preview");c(y,p)}break;case"previousTheme":var v=$(".h24-DesignGallery-dialogPreview"),h=v.data("themeId");if(h>0){var t=$(".h24-DesignGallery-themes").find("[data-theme-id="+h+"]");var y=t.prev().data("theme-id");var p=t.prev().data("preview");c(y,p)}break;case"chooseContentTemplate":var v=$(this).closest(".h24-DesignGallery-dialogContentTemplate"),h=v.data("themeId"),u=v.find(".h24-DesignGallery-contentTemplate__selected").data("template");if(h>=0&&typeof u!="undefined"){if($("body").hasClass("h24_intro")){n(h,u)}else{if(u=="empty"||u=="example"){var D=v.find("input[name=deleteVerification]");var G=D.val();D.removeClass("error");if(G.toLowerCase()=="delete"||G.toLowerCase()=="radera"){o(h,u)}else if(G!=""){D.addClass("error")}else{D.val("");m("delete")}}else{o(h,u)}}}break;case"goBack":location.href=e;break;case"chooseThemeFromPreview":var v=$(".h24-DesignGallery-dialogPreview"),h=v.data("themeId");if(h>0){f();r(h)}break;case"closePreviewDialog":f();break;case"closeContentTemplateDialog":s();break;case"goBackContentTemplate":m("content");break}}).on("hover","[data-action=previewTheme]",function(e){var a=$(e.target).closest("[data-function=theme]");var l=a.data("preview");t(l)});var g=$(".h24-DesignGallery-overlay");g.on("click",function(){if(g.data("closeDialogOnClick")){if($(".h24-DesignGallery-dialogContentTemplate").is(":visible")){s()}if($(".h24-DesignGallery-dialogPreview").is(":visible")){f()}if($(".h24-DesignGallery-dialogTweakConflict").is(":visible")){$(".h24-DesignGallery-dialogTweakConflict").hide()}}});l()};var l=function(){$(window).bind("popstate",function(e){var a=e.originalEvent.state;if(a!=null){s();f()}});history.replaceState(true,null,window.location.href)};var i=function(e,a){var l=[],i=[],t;i=e.slice(1).split("&");for(var n=0;n<i.length;n++){t=i[n].split("=");if(t[0]==a){continue}l[l.length]=i[n]}return l.length>=1?"?"+l.join("&"):""};var t=function(e){$dialog=$(".h24-DesignGallery-dialogPreview"),$iframe=$dialog.find("iframe[data-function=previewSrc]");if($iframe.attr("src")!=e){$iframe.attr("src",e);$iframe.data("loading",true).unbind("load").load(function(){$(this).data("loading",false)})}};var n=function(e,a){var l=$(".h24-DesignGallery-overlay");var i=$(".h24-DesignGallery-dialogContentTemplate");var t=i.find("input[name=homepageName]");var n=t.val();t.removeClass("error");if(n!=""){var r={homepageid:$h24.homepageid,model:"HomepageSettingsModel",modelaction:"set_homepage_name",name:n,set_collage:1};l.addClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner");$h24.post("/"+$h24.webroot+"Page/Communicator",r,function(l){o(e,a)})}else if(i.hasClass("h24-DesignGallery-contentTemplateSlide__homepagename")){t.addClass("error")}else{m("homepageName")}};var o=function(a,l){var i=$(".h24-DesignGallery-overlay"),t=$(".h24-DesignGallery-dialogContentTemplate"),n=$(".h24-DesignGallery-dialogTweakConflict");$("body").addClass("h24-DesignGallery-disableButtonClicks");i.data("closeDialogOnClick",false);i.addClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner");t.addClass("h24-DesignGallery-dialogBlur");var o=$("input[name=csrf]").val();var r=$("body").hasClass("h24_intro");$h24.post("/"+$h24.webroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"pick_theme",theme_id:a,contentTemplate:l,csrf:o,intro:r},function(o){if(typeof o.refresh_page!="undefined"&&o.refresh_page){location.reload()}else if(!o.conflicts_found){location.href=e}else{var r=t.position().top;$("body").removeClass("h24-DesignGallery-disableButtonClicks");i.removeClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner");t.removeClass("h24-DesignGallery-dialogBlur");t.hide();n.html(o.html).css("top",r+"px").show();n.off("click").on("click","[data-action]",function(o){o.preventDefault();var r=$(o.target).closest("[data-action]");var s=r.data("action");switch(s){case"continue":var d={homepageid:$h24.homepageid,model:"DesignManager",modelaction:"resolve_theme_conflict",theme_id:a,contentTemplate:l,keep_local_tweaks:{},keep_global_tweaks:{},keep_local_fonts:{},keep_global_fonts:{}};var h=n.find("ul");h.find("li.header_collage input[type=checkbox]").each(function(){d.header_collage=this.checked});h.find("li.local_tweak input[type=checkbox]").each(function(){var e=$(this);d.keep_local_tweaks[e.attr("name")]=e[0].checked});h.find("li.global_tweak input[type=checkbox]").each(function(){var e=$(this);d.keep_global_tweaks[e.attr("name")]=e[0].checked});h.find("li.local_font input[type=checkbox]").each(function(){var e=$(this);d.keep_local_fonts[e.attr("name")]=e[0].checked});h.find("li.global_font input[type=checkbox]").each(function(){var e=$(this);d.keep_global_fonts[e.attr("name")]=e[0].checked});$("body").addClass("h24-DesignGallery-disableButtonClicks");i.addClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner");n.addClass("h24-DesignGallery-dialogBlur");$h24.post("/"+$h24.webroot+"Page/Communicator",d,function(a){if(a.successful){location.href=e}else if($h24.devmode)console.log(a)});break;case"cancel":t.show();n.html("").hide();i.data("closeDialogOnClick",true);break}})}})};var r=function(e){var a=$(".h24-DesignGallery-overlay"),l=$(".h24-DesignGallery-dialogContentTemplate"),i=$(".h24-DesignGallery-contentTemplateContinueWarning"),t="h24-DesignGallery-blur",n=$("body").hasClass("h24_intro"),o;if(!l.is(":visible")){l.data("themeId",e);a.show();l.show();$("body").addClass("h24-DesignGallery-blur");$("html").addClass("h24-DesignGallery-themeContentTemplateDialog__open");if(l.find(".h24-DesignGallery-contentTemplate__selected").length==0){if(n){l.find("[data-template=example]").addClass("h24-DesignGallery-contentTemplate__selected")}else{l.find("[data-template=current]").addClass("h24-DesignGallery-contentTemplate__selected")}}o=l.find(".h24-DesignGallery-contentTemplate__selected").data("template");if(!n&&(o=="empty"||o=="example")){i.show()}else{i.hide()}l.find("[data-template]").off("click").on("click",function(e){var a=$(e.target).closest("[data-template]");var t=a.data("template");var o=l.find("[data-template]");if(!n&&(t=="empty"||t=="example")){i.show()}else{i.hide()}o.removeClass("h24-DesignGallery-contentTemplate__selected");a.addClass("h24-DesignGallery-contentTemplate__selected")});m("content")}};var s=function(){var e=$(".h24-DesignGallery-overlay"),a=$(".h24-DesignGallery-dialogContentTemplate"),l="h24-DesignGallery-blur";if(a.is(":visible")){a.data("themeId",0);e.hide();a.hide();$("body").removeClass("h24-DesignGallery-blur");$("html").removeClass("h24-DesignGallery-themeContentTemplateDialog__open")}};var d=function(e,a){var l=$(".h24-DesignGallery-overlay"),i=$(".h24-DesignGallery-dialogPreview"),t=i.find("iframe[data-function=previewSrc]"),n=$(".h24-DesignGallery-dialogPreviewBar"),o="h24-DesignGallery-blur";if(!i.is(":visible")){if(t.attr("src")!=a){t.attr("src",a);t.data("loading",true).unbind("load").load(function(){$(this).data("loading",false)})}g(e);l.show();i.show();n.show();i.data("themeId",e);$("body").addClass("h24-DesignGallery-blur h24-DesignGallery-noScroll");$("html").addClass("h24-DesignGallery-themePreviewDialog__open")}history.pushState(true,null,window.location.href);if(t.data("loading")){h()}};var h=function(){var e=$(".h24-DesignGallery-overlay"),a=$(".h24-DesignGallery-dialogPreview"),l=a.find("iframe[data-function=previewSrc]");e.addClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner");l.load(function(){e.removeClass("h24-DesignGallery-overlayToFront h24-DesignGallery-overlaySpinner")})};var c=function(e,a){var l=$(".h24-DesignGallery-overlay"),i=$(".h24-DesignGallery-dialogPreview"),t=i.find("iframe[data-function=previewSrc]"),n=$(".h24-DesignGallery-dialogPreviewBar"),o="h24-DesignGallery-blur";if(i.is(":visible")){if(t.attr("src")!=a){t.attr("src",a);t.data("loading",true).unbind("load").load(function(){$(this).data("loading",false)})}g(e);i.data("themeId",e);$("body").addClass("h24-DesignGallery-blur h24-DesignGallery-noScroll");$("html").addClass("h24-DesignGallery-themePreviewDialog__open");if(t.data("loading")){h()}}};var g=function(e){var a=$(".h24-DesignGallery-themes").find("[data-theme-id="+e+"]"),l=a.next().data("theme-id"),i=$(".h24-DesignGallery-dialogPreviewBar").find("[data-action=nextTheme]"),t=a.prev().data("theme-id"),n=$(".h24-DesignGallery-dialogPreviewBar").find("[data-action=previousTheme]");if(typeof l!="undefined"){i.css("visibility","visible")}else{i.css("visibility","hidden")}if(typeof t!="undefined"){n.css("visibility","visible")}else{n.css("visibility","hidden")}};var f=function(){var e=$(".h24-DesignGallery-overlay"),a=$(".h24-DesignGallery-dialogPreview"),l=a.find("iframe[data-function=previewSrc]"),i=$(".h24-DesignGallery-dialogPreviewBar"),t="h24-DesignGallery-blur";if(a.is(":visible")){l.attr("src","");e.hide();a.hide();i.hide();$("body").removeClass("h24-DesignGallery-blur h24-DesignGallery-noScroll");$("html").removeClass("h24-DesignGallery-themePreviewDialog__open")}history.replaceState(true,null,window.location.href)};var m=function(e){$dialog=$(".h24-DesignGallery-dialogContentTemplate");if(e=="delete"){$dialog.addClass("h24-DesignGallery-contentTemplateSlide__delete");setTimeout(function(){$dialog.find("input[name=deleteVerification]").focus()},600)}else if(e=="homepageName"){$dialog.addClass("h24-DesignGallery-contentTemplateSlide__homepagename");setTimeout(function(){$dialog.find("input[name=homepageName]").focus()},600)}else{$dialog.removeClass("h24-DesignGallery-contentTemplateSlide__delete");$dialog.removeClass("h24-DesignGallery-contentTemplateSlide__homepagename");$dialog.find("input[name=deleteVerification]").val("");$dialog.find("input[name=name]").val("")}};return{init:a}}();
h24core.prototype.emailCenter=function(){var e=0;var a=1;var t=2;var n=3;var o=4;var i=5;var r=6;var l=7;var c=8;var s=9;var m=10;var h=11;var u=12;var d=13;var f=14;var _=15;var g=16;var p=17;var C=18;var v=19;var D=20;var A=1;var w=50;var E=8;var P=50;var b="A-Za-z0-9._@#$^&+=?!*-";var k=new RegExp("[^"+b+"]+","g");var y=function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"overview"},function(e){$h24.coreDialog.create("emailCenter",e,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Email Manager"),showHelpUrlButton:true});$("#h24_ec_tabs").tabs();$('[data-function="h24_ec_glesys_accounts_table"]').find("[data-email-account-row]").each(function(){var e=$(this);var a=e.find('[data-function="quota_usage"]');var t=e.data("emailAccountRow");$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"fetchEmailAccountQuota",emailAccount:t},function(e){if(e.successful){a.text(e.usage_mb)}})});j()})};var N=function(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"changeAltEmailMarkup"},function(a){$h24.coreDialog.create("emailCenterChangeAltEmail",a,{width:"auto",title:$h24.phrase.GUIPhrase("Email-Center","Change alternative email")});$("#h24_ec_alt_email_container").on({click:function(a){var t=$(this),n=$(a.target);if(n.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterChangeAltEmail.close();return false}else if(n.hasClass("h24_ec_confirm_change_alt_email")){t.find(".h24_ec_error_message").hide();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"changeAltEmail",altEmail:t.find('input[name="altEmail"]').val()},function(a){if(a.successful){if(typeof e=="function"){e(t.find('input[name="altEmail"]').val(),a)}$h24.coreDialogs.emailCenterChangeAltEmail.close()}else{t.find(".h24_ec_error_message_"+a.errorCode).show()}});return false}}})})};var S=function(e,a){var a=typeof a!="undefined"?a:"glesys";$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"createEmailAccountMarkup",provider:a,domain:e},function(t){$h24.coreDialog.create("emailCenterCreateAccount",t,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Create e-mail account")});$("#h24_ec_create_account_container").on({click:function(t){var n=$(t.target),o=$(this);if(n.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterCreateAccount.close();return false}else if(n.hasClass("h24_ec_create")){if(a=="google_apps"){var i=o.find('input[name="accountName"]').val(),r=o.find('input[name="firstname"]').val(),l=o.find('input[name="lastname"]').val();I(i,e,r,l)}else{var i=o.find('input[name="accountName"]').val(),c=o.find('select[name="accountDomain"]').val(),s=o.find('input[name="password"]').val(),m=o.find('input[name="repeatPassword"]').val();M(i,c,s,m)}return false}},keyup:function(t){var n=$(this);if(t.keyCode==13){if(a=="google_apps"){var o=n.find('input[name="accountName"]').val(),i=n.find('input[name="firstname"]').val(),r=n.find('input[name="lastname"]').val();I(o,e,i,r)}else{var o=n.find('input[name="accountName"]').val(),l=n.find('select[name="accountDomain"]').val(),c=n.find('input[name="password"]').val(),s=n.find('input[name="repeatPassword"]').val();M(o,l,c,s)}}}})})};var I=function(e,t,n,o){Z($h24.coreDialogs.emailCenterCreateAccount.content);if(!$h24.utils.mailValidation(e+"@"+t)){F(a,$h24.coreDialogs.emailCenterCreateAccount.content);return}else if(n==""){F(C,$h24.coreDialogs.emailCenterCreateAccount.content);return}else if(o==""){F(v,$h24.coreDialogs.emailCenterCreateAccount.content);return}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"createGoogleAppsUser",accountName:e,accountDomain:t,firstname:n,lastname:o},function(e){if(e.successful){q(t,function(){},5e3);Z();F(e.statusCode);$h24.coreDialogs.emailCenterCreateAccount.close()}else{F(e.errorCode,$h24.coreDialogs.emailCenterCreateAccount.content)}})};var M=function(e,o,i,r){Z($h24.coreDialogs.emailCenterCreateAccount.content);if(!$h24.utils.mailValidation(e+"@"+o)){F(a,$h24.coreDialogs.emailCenterCreateAccount.content);return}else if(i.length<E||i.length>P||k.test(i)){F(t,$h24.coreDialogs.emailCenterCreateAccount.content);return}else if(e.length<A||e.length>w){F(t,$h24.coreDialogs.emailCenterCreateAccount.content);return}else if(i!=r){F(n,$h24.coreDialogs.emailCenterCreateAccount.content);return}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"createEmailAccount",accountName:e,accountDomain:o,password:i,repeatPassword:r},function(e){if(e.successful){B(function(){});Z();F(e.statusCode);$h24.coreDialogs.emailCenterCreateAccount.close()}else{F(e.errorCode,$h24.coreDialogs.emailCenterCreateAccount.content)}})};var U=function(e){var a=typeof e=="undefined"?"add":"edit";var t=a=="add"?$h24.phrase.GUIPhrase("Email-Center","Create e-mail alias"):$h24.phrase.GUIPhrase("Email-Center","Edit e-mail alias");var e=a=="add"?"":e;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"createEmailAliasMarkup",type:a,editAlias:e},function(e){$h24.coreDialog.create("emailCenterCreateAlias",e,{width:600,title:t});$("#h24_ec_create_alias_container").on({click:function(e){var a=$(e.target),t=$(this);if(a.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterCreateAlias.close();return false}else if(a.hasClass("h24_ec_create")){var n=t.find('input[name="accountName"]').val(),o=t.find('select[name="accountDomain"]').val(),i=t.find('input[name="targetEmail"]').val(),r=t.data("type"),l=t.data("editAlias");G(n,o,i,r,l);return false}},keyup:function(e){var a=$(this);if(e.keyCode==13){var t=a.find('input[name="accountName"]').val(),n=a.find('select[name="accountDomain"]').val(),o=a.find('input[name="targetEmail"]').val(),i=a.data("type"),r=a.data("editAlias");G(t,n,o,i,r)}}})})};var G=function(e,t,n,o,i){Z($h24.coreDialogs.emailCenterCreateAlias.content);if(!$h24.utils.mailValidation(e+"@"+t)){F(a,$h24.coreDialogs.emailCenterCreateAlias.content);return}else if(e.length<A||e.length>w){F(a,$h24.coreDialogs.emailCenterCreateAlias.content);return}var r=n.split(",");for(var l=0;l<r.length;l++){if(!$h24.utils.mailValidation(jQuery.trim(r[l]))){F(c,$h24.coreDialogs.emailCenterCreateAlias.content);return}}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"createEmailAlias",accountName:e,accountDomain:t,targetEmail:n,type:o,editAlias:i},function(e){if(e.successful){H();Z();F(e.statusCode);$h24.coreDialogs.emailCenterCreateAlias.close()}else{F(e.errorCode,$h24.coreDialogs.emailCenterCreateAlias.content)}})};var x=function(e,a){var a=typeof a!="undefined"?a:"glesys";$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"setPasswordMarkup",email:e},function(e){$h24.coreDialog.create("emailCenterSetPassword",e,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Set password")});$("#h24_ec_set_password_container").on({click:function(e){var t=$(e.target),n=$(this);if(t.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterSetPassword.close();return false}else if(t.hasClass("h24_ec_set_password")){var o=n.find('input[name="password"]').data("email"),i=n.find('input[name="password"]').val(),r=n.find('input[name="repeatPassword"]').val();V(o,i,r,a);return false}},keyup:function(e){var t=$(this);if(e.keyCode==13){var n=t.find('input[name="password"]').data("email"),o=t.find('input[name="password"]').val(),i=t.find('input[name="repeatPassword"]').val();V(n,o,i,a)}}})})};var V=function(e,a,o,i){Z($h24.coreDialogs.emailCenterSetPassword.content);if(a.length<E||a.length>P||k.test(a)){F(t,$h24.coreDialogs.emailCenterSetPassword.content);return}else if(a!=o){F(n,$h24.coreDialogs.emailCenterSetPassword.content);return}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"setPassword",email:e,password:a,repeatPassword:o,provider:i},function(e){if(e.successful){Z();F(e.statusCode);$h24.coreDialogs.emailCenterSetPassword.close()}else{F(e.errorCode,$h24.coreDialogs.emailCenterSetPassword.content)}})};createChangeAccountNameDialog=function(e,a){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"changeAccountNameMarkup",email:e},function(e){$h24.coreDialog.create("emailCenterChangeAccountName",e,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Change Account Name")});$("#h24_ec_change_account_name_container").on({click:function(e){var t=$(e.target),n=$(this);if(t.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterChangeAccountName.close();return false}else if(t.hasClass("h24_ec_change_account_name")){var o=n.find('input[name="accountName"]').data("previousAccountName"),i=n.find('input[name="accountName"]').val();accountDomain=n.find('input[name="accountName"]').data("accountDomain");z(i,o,accountDomain,a);return false}},keyup:function(e){var t=$(this);if(e.keyCode==13){var n=t.find('input[name="accountName"]').data("previousAccountName"),o=t.find('input[name="accountName"]').val();accountDomain=t.find('input[name="accountName"]').data("accountDomain");z(o,n,accountDomain,a);return false}}})})};var z=function(e,t,n,o){Z($h24.coreDialogs.emailCenterChangeAccountName.content);if(!$h24.utils.mailValidation(e+"@"+n)){F(a,$h24.coreDialogs.emailCenterChangeAccountName.content);return}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"changeAccountName",accountName:e,accountDomain:n,previousAccountName:t,provider:o},function(e){if(e.successful){if(o=="google_apps"){q(n,function(){},5e3)}Z();F(e.statusCode);$h24.coreDialogs.emailCenterChangeAccountName.close()}else{F(e.errorCode,$h24.coreDialogs.emailCenterChangeAccountName.content)}})};var Q=function(e){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"deleteEmailAliasMarkup",email:e},function(e){$h24.coreDialog.create("emailCenterDeleteAlias",e,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Delete alias")});$("#h24_ec_delete_email_alias_container").on({click:function(e){var a=$(e.target),t=$(this);if(a.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterDeleteAlias.close();return false}else if(a.hasClass("h24_ec_confirm_alias_deletion")){Z();$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"deleteEmailAlias",email:t.find('input[name="aliasToDelete"]').val()},function(e){if(e.successful){H(function(){F(e.statusCode)})}else{F(e.errorCode)}$h24.coreDialogs.emailCenterDeleteAlias.close()});return false}}})})};var R=function(e,a){var a=typeof a!="undefined"?a:"glesys";$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"deleteEmailAccountMarkup",email:e},function(e){$h24.coreDialog.create("emailCenterDeleteAccount",e,{width:600,title:$h24.phrase.GUIPhrase("Email-Center","Delete account")});$("#h24_ec_delete_email_account_container").on({click:function(e){var t=$(e.target),n=$(this);if(t.hasClass("h24_ec_cancel")){$h24.coreDialogs.emailCenterDeleteAccount.close();return false}else if(t.hasClass("h24_ec_confirm_account_deletion")){var o=n.find('input[name="password"]').data("email"),i=n.find('input[name="password"]').val();T(o,i,a);return false}},keyup:function(e){var t=$(this);if(e.keyCode==13){var n=t.find('input[name="password"]').data("email"),o=t.find('input[name="password"]').val();T(n,o,a)}}})})};var T=function(e,a,t){Z($h24.coreDialogs.emailCenterDeleteAccount.content);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"deleteEmailAccount",email:e,confirmationPassword:a,provider:t},function(e){if(e.successful){if(t=="google_apps"){q($("#h24_ec_tab_google_apps select[name=domain]").val(),function(){},5e3);Z();F(e.statusCode);$h24.coreDialogs.emailCenterDeleteAccount.close()}else{B(function(){Z();F(e.statusCode);$h24.coreDialogs.emailCenterDeleteAccount.close()})}}else{F(e.errorCode,$h24.coreDialogs.emailCenterDeleteAccount.content)}})};var j=function(){var e=$("#h24_ec_overview");if(e.hasClass("h24_initialized")){return}e.on({click:function(e){var a=$(e.target),t=$(this);if(a.hasClass("h24_ec_create_email_account")){S(a.data("domain"),a.data("emailProvider"));return false}else if(a.hasClass("h24_ec_delete")){R(a.data("emailAccount"),a.data("emailProvider"));return false}else if(a.hasClass("h24_ec_delete_alias")){Q(a.data("emailAlias"));return false}else if(a.hasClass("h24_ec_set_password")){x(a.data("emailAccount"),a.data("emailProvider"));return false}else if(a.hasClass("h24_ec_open_domain_center")){$h24.coreDialogs.emailCenter.close();$h24.domain_center.openDomainCenter();return false}else if(a.hasClass("h24_ec_alt_email_dialog")){N(function(e,a){Z();$("#h24_ec_overview .h24_ec_alt_email_dialog").text($h24.utils.shortenString(e,25));F(a.statusCode)});return false}else if(a.hasClass("h24_ec_create_email_alias")){U();return false}else if(a.hasClass("h24_ec_edit_alias")){U(a.data("emailAlias"));return false}else if(a.hasClass("h24_ec_change_account_name")){createChangeAccountNameDialog(a.data("emailAccount"),a.data("emailProvider"));return false}}}).addClass("h24_initialized");$("html").off("change","#h24_ec_tab_google_apps select[name=domain]").on("change","#h24_ec_tab_google_apps select[name=domain]",function(){var e=$(this).val();Z($h24.coreDialogs.emailCenter.content);q(e,function(){})});$("html").on("click","#h24_ec_tab_google_apps [data-action]",function(e){e.preventDefault();var a=$(e.target).closest("[data-action]");var t=a.data("action");switch(t){case"setEmailAccountPassword":break;case"deleteEmailAccount":break}})};var q=function(e,a,t){$("#h24_ec_tab_google_apps").loadingSpinner(true);var t=typeof t=="undefined"?0:parseInt(t,10);setTimeout(function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"googleAppsMarkup",domain:e,__skip_loading_overlay:true},function(e){$("#h24_ec_tab_google_apps").html(e);if(typeof a=="function"){a()}})},t)};var B=function(e){$("#h24_ec_tab_email_accounts").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"emailAccountsMarkup"},function(a){$("#h24_ec_tab_email_accounts").html(a);J();if(typeof e=="function"){e()}})};var H=function(e){$("#h24_ec_tab_email_aliases").loadingSpinner(true);$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"EmailCenter",modelaction:"emailAliasesMarkup"},function(a){$("#h24_ec_tab_email_aliases").html(a);J();if(typeof e=="function"){e()}})};var Z=function(e){if(e){e.find(".h24_ec_error_message").hide()}else{$("#h24_ec_overview .h24_ec_error_message").hide()}};var F=function(e,a){if(a){a.find(".h24_ec_error_message_"+e).show()}else{$("#h24_ec_overview .h24_ec_error_message_"+e).show()}};var J=function(){var e=$("#h24_ec_overview"),a=e.find(".h24_ec_email_account_row").length,t=e.find(".h24_ec_accounts_limit_count"),n=e.find(".h24_ec_accounts_left_count");n.text(parseInt(t.text(),10)-a)};return{overviewDialog:y,changeAltEmailDialog:N}}();
h24core.prototype.pageBackgroundManager=function(){var e,a,n={onSave:function(e,n){var t,r;switch(n){case"default":t="saveAsDefault";break;case"page":t="saveAsPageSpecific";break;case"revert":t="revertPageSpecific";break;case"faux-section":t="saveAsFauxSection";break}$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageBackgroundManager",modelaction:t,type:e.type,resource:e.resource,backgroundColor:e.backgroundColor,opacity:e.opacity,settings:e.settings,userFileId:e.userFileId,pictureid:e.pictureid,pageid:$h24.pageid,selector:e.selector},function(e){if(e.successful){var t=$('.h24-PageBackground-stylesheet[data-selector="'+a.selector+'"]'),r=$h24.slashwebroot+"Page/Page-Background-CSS?h="+$h24.homepageid+"&b="+e.pageBackgroundId;t.remove();$("<link />",{"class":"h24-PageBackground-stylesheet",rel:"stylesheet",media:"screen",type:"text/css",href:$h24.slashwebroot+"Page/Page-Background-CSS?h="+$h24.homepageid+"&b="+e.pageBackgroundId}).attr("data-selector",a.selector).appendTo("head")}M(false,n=="revert")})},onCancel:function(){}},t=false;var r=function(t,r){if(!!$h24.GUI.instances.PageBackgroundManager){return}var c=[];var i;$.extend(n,t);$h24.adminPanel.togglePanel(true);$h24.GUI.create("Overlay","PageBackgroundManagerOverlay",{opacity:1,zIndex:3997,backgroundColor:"rgba(0, 0, 0, 0)"});$.each([{type:"primary",text:$h24.phrase.GUIPhrase("General","Done"),action:"saveBackground",icon:"E207"},{type:"link",text:$h24.phrase.GUIPhrase("General","Cancel"),action:"cancelBackground"}],function(e,a){dust.render("Button",a,function(e,a){c.push(a)})});e=$h24.GUI.create("SidePanel","PageBackgroundManager",{side:"right",controls:c,slideDelay:500,zIndex:3998});i={model:"PageBackgroundManager",modelaction:"settings",homepageid:$h24.homepageid,pageid:$h24.pageid};if(r){i.selector=r}$h24.post($h24.slashwebroot+"Page/Communicator",i,function(n){e.innerContent.html(n);a=e.innerContent.find(".h24-PageBackgroundManager-container").data();o()})};var o=function(){var n,t,r,o,d,l,h,f=e.content.find('[data-function="opacity"]'),v=e.content.find('[data-function="opacitySlider"]');e.content.off(".h24").on("mouseenter.h24",'[data-function="previewItem"]',function(){}).on("mouseleave.h24",'[data-function="previewItem"]',function(){}).on("click.h24","[data-action]",function(n){var t=$(this),r;switch(t.data("action")){case"choosePreviewItem":p(this);break;case"saveBackground":S();n.preventDefault();break;case"cancelBackground":_();n.preventDefault();break;case"openColorPicker":$h24.utils.colorPicker({color:i(e.content.find('[data-function="backgroundColor"]').val()),changedCallback:function(n){e.content.find('[data-function="backgroundColor"]').val(n).trigger("change.h24");e.content.find('[data-function="colorSwatch"]').css("background-color",n);a.chosenBackgroundColor=n;if(!a.hasChosenBackground&&a.hasRevertBackground){s()}},saveCallback:function(a){var n,r;if(e.content.find('[data-function="type"]').val()=="color"){n=false;e.content.find('[data-function="colorContainer"] [data-function="previewItem"]').each(function(e){if(t.data("backgroundColor")==a){n=true;p(this);return false}});if(!n){r=e.content.find('[data-function="colorContainer"] [data-function="previewItem"]:last-child').clone(true);r.data("isRevertBackground",false);r.data("disabledPreview",false);r.data("backgroundColor",a);r.css("background-color",a);r.appendTo(e.content.find('[data-function="colorContainer"]'));p(r)}}},allowTransparency:false,dialogSettings:{transparentOverlay:true}});n.preventDefault();break;case"changeCategory":if(t.data("enabled")){r=e.content.find('[data-function="'+t.data("target")+'"]');r.find('[data-function="categoryChanger"]').each(function(){var e=$(this);if(e.data("category")==t.data("category")){e.addClass("h24-PageBackgroundManager-categoryChanger__active");e.data("enabled",false)}else{e.removeClass("h24-PageBackgroundManager-categoryChanger__active");e.data("enabled",true)}});r.find('[data-function="categoryContainer"]').each(function(){var e=$(this);if(e.data("category")==t.data("category")){e.addClass("h24-PageBackgroundManager-previewItemCategory__active")}else{e.removeClass("h24-PageBackgroundManager-previewItemCategory__active")}})}n.preventDefault();break;case"enableControlsAndRestoreBackground":e.content.removeClass("h24-PageBackgroundManager-container__disabledControls");B();break;case"disableControlsAndForceDefaultBackground":e.content.addClass("h24-PageBackgroundManager-container__disabledControls");y();break;case"openFileUploader":$h24.file_manager.openDialog(0,false,function(){c()});break;case"openImageUploader":$h24.image_database.open({uploadCallback:function(n,t){var r=isRevertBackground=a.hasRevertBackground&&a.revertType=="user-image"&&a.revertPictureid==n,o=isChosen=a.hasChosenBackground&&a.chosenType=="user-image"&&a.chosenPictureid==n,c=e.content.find('[data-function="userImageContainer"] [data-function="innerContainment"]'),i=e.content.find('[data-function="presentation"]');dust.render("PageBackgroundManager-userImage",{pictureid:n,fullUrl:t.fullscreenUrl,disabledPreview:o,isRevertBackground:isRevertBackground,isCurrent:r,isChosen:isChosen},function(e,a){var n=$(a);c.append(n);n.trigger("click.h24")})}});break;case"changeSelect":if(!t.parent("li").hasClass("active")){e.content.find('[data-function="type"]').val(t.data("alternative")).change()}break}}).on("change.h24","[data-action]",function(){var n=$(this),t=n.find("option:selected");switch(n.data("action")){case"changeType":e.content.find('[data-function="type"] option').each(function(){var a=$(this);if(a.prop("selected")){e.content.addClass("h24-PageBackgroundManager-container__"+a.data("target")+"TypeActive")}else{e.content.removeClass("h24-PageBackgroundManager-container__"+a.data("target")+"TypeActive")}});e.content.find(".h24-PageBackgroundManager-typeContainer").each(function(){var n=$(this),r;if(n.data("function")==t.data("target")){n.addClass("h24-PageBackgroundManager-typeContainer__open");if(n.data("allowSettings")){e.content.find('[data-function="backgroundSettings"]').addClass("h24-PageBackgroundManager-backgroundSettings__allowed")}else{e.content.find('[data-function="backgroundSettings"]').removeClass("h24-PageBackgroundManager-backgroundSettings__allowed")}if(n.data("allowColor")){e.content.find('[data-function="colorSettings"]').addClass("h24-PageBackgroundManager-colorSettings__allowed")}else{e.content.find('[data-function="colorSettings"]').removeClass("h24-PageBackgroundManager-colorSettings__allowed")}if(n.data("allowOpacity")){e.content.find('[data-function="opacitySettings"]').addClass("h24-PageBackgroundManager-opacitySettings__allowed")}else{e.content.find('[data-function="opacitySettings"]').removeClass("h24-PageBackgroundManager-opacitySettings__allowed")}}else{n.removeClass("h24-PageBackgroundManager-typeContainer__open")}if(n.data("hasCategories")){if(a.hasChosenBackground){r=n.find(".h24-PageBackgroundManager-previewItem__chosen").data("category")}else if(a.hasRevertBackground){r=n.find(".h24-PageBackgroundManager-previewItem__current").data("category")}if(!!r){n.find('[data-function="categoryChanger"]').each(function(){var e=$(this);if(e.data("category")==r){e.addClass("h24-PageBackgroundManager-categoryChanger__active");e.data("enabled",false);n.find('[data-function="categoryContainer"][data-category="'+e.data("category")+'"]').addClass("h24-PageBackgroundManager-previewItemCategory__active")}else{e.removeClass("h24-PageBackgroundManager-categoryChanger__active");e.data("enabled",true);n.find('[data-function="categoryContainer"][data-category="'+e.data("category")+'"]').removeClass("h24-PageBackgroundManager-previewItemCategory__active")}})}else{n.find('[data-function="categoryChanger"].h24-PageBackgroundManager-categoryChanger__active').data("enabled",true).trigger("click.h24")}}});var r=e.content.find('[data-function="type"]').val();switch(r){case"color":e.content.find('a[data-alternative="color"]').tab("show");break;case"user-image":case"user-file":case"library-image":e.content.find('a[data-alternative="user-image"]').tab("show");break;case"library-pattern":case"library-video":e.content.find('a[data-alternative="library-pattern"]').tab("show");break}e.content.find("button[data-alternative]").each(function(){$(this).removeClass("active-alternative")});e.content.find('button[data-alternative="'+r+'"]').addClass("active-alternative");break;case"changePresentation":case"changeBackgroundRepeat":case"changeBackgroundAttachment":case"changeBackgroundPosition":case"changeBackgroundSize":case"changeBackgroundColor":g();break;case"changeOpacity":var o=parseInt(n.val(),10);if(!isNaN(o)&&isFinite(o)&&o>=0&&o<=100){n.val(o);u(o)}else{n.val(v.slider("option","value"))}break}}).on("keyup.h24","[data-action]",function(e){var a=$(this);switch(a.data("action")){case"changeBackgroundColor":g();break;case"changeOpacity":var n=a.val(),t=parseInt(n,10);if(!isNaN(n)&&isFinite(t)&&t>=0&&t<=100){v.slider("option","value",t);u(t);a.val(t)}else if(e.keyCode==13){a.val(v.slider("option","value"))}break}});e.content.tooltip({selector:'[data-toggletip="tooltip"]'});if(a.hasRevertBackground){n=e.content.find('[data-action="changeType"]');if(a.revertIsConvertedTweak){n.find('option[value="library-image"]').prop("selected",true)}else{n.find('option[value="'+a.revertType+'"]').prop("selected",true)}n.trigger("change.h24");if(typeof a.revertSettings=="object"){t=e.content.find('[data-action="changePresentation"]');r=e.content.find('[data-action="changeBackgroundRepeat"]');o=e.content.find('[data-action="changeBackgroundAttachment"]');d=e.content.find('[data-action="changeBackgroundPosition"]');l=e.content.find('[data-action="changeBackgroundSize"]');e.content.find('[data-function="colorSwatch"]').css("background-color",i(e.content.find('[data-function="backgroundColor"]').val()));if(!!a.revertSettings["background-repeat"]&&jQuery.trim(a.revertSettings["background-repeat"])!=""){h=r.find('option[value="'+a.revertSettings["background-repeat"].replace(/"/g,'\\"')+'"]');if(!h.length){h=$("<option />").prop("value",a.revertSettings["background-repeat"]).text(a.revertSettings["background-repeat"]);r.append(h)}h.prop("selected",true)}if(!!a.revertSettings["background-attachment"]&&jQuery.trim(a.revertSettings["background-attachment"])!=""){h=o.find('option[value="'+a.revertSettings["background-attachment"].replace(/"/g,'\\"')+'"]');if(!h.length){h=$("<option />").prop("value",a.revertSettings["background-attachment"]).text(a.revertSettings["background-attachment"]);o.append(h)}h.prop("selected",true)}if(!!a.revertSettings["background-position"]&&jQuery.trim(a.revertSettings["background-position"])!=""){h=d.find('option[value="'+a.revertSettings["background-position"].replace(/"/g,'\\"')+'"]');if(!h.length){h=$("<option />").prop("value",a.revertSettings["background-position"]).text(a.revertSettings["background-position"]);d.append(h)}h.prop("selected",true)}if(!!a.revertSettings["background-size"]&&jQuery.trim(a.revertSettings["background-size"])!=""){h=l.find('option[value="'+a.revertSettings["background-size"].replace(/"/g,'\\"')+'"]');if(!h.length){h=$("<option />").prop("value",a.revertSettings["background-size"]).text(a.revertSettings["background-size"]);l.append(h)}h.prop("selected",true)}if(!!a.revertSettings["presentation"]){t.val(a.revertSettings["presentation"]);t.trigger("change.h24")}}}else{n=e.content.find('[data-action="changeType"]');n.find('option[value="library-image"]').prop("selected",true);n.trigger("change.h24")}v.slider({min:0,max:100,value:f.val(),slide:function(e,a){f.val(a.value);u(a.value)}})};var c=function(){$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"PageBackgroundManager",modelaction:"getUserFiles"},function(n){var t,r,o,c,i,d=e.content.find('[data-function="userFileContainer"] [data-function="innerContainment"]');d.find('[data-function="previewItem"]').remove();for(var s=0;s<n.length;s++){t=n[s];c=o=a.hasRevertBackground&&a.revertType=="user-file"&&a.revertUserFileId==t.userFileId;r=i=a.hasChosenBackground&&a.chosenType=="user-file"&&a.chosenUserFileId==t.userFileId;dust.render("PageBackgroundManager-userFile",{userFileId:t.userFileId,fullUrl:t.realUrl,disabledPreview:r,isRevertBackground:o,isCurrent:c,isChosen:i,name:t.name},function(e,a){d.append(a)})}})};var i=function(e){return e.replace(/;|\{|\}|\/|'|"/g,"")};var d=function(e){switch(e){case"fill":return a.cssPresetFill;case"stretch":return a.cssPresetStretch;case"center":return a.cssPresetCenter;case"tile":return a.cssPresetTile}};var s=function(){a.hasChosenBackground=true;a.chosenType=a.revertType+"";a.chosenResource=a.revertResource+"";a.chosenBackgroundColor=a.revertBackgroundColor+"";a.chosenSettings=jQuery.extend({},a.revertSettings);a.chosenUserFileId=a.revertUserFileId+"";a.chosenPictureid=a.revertPictureid+"";a.chosenOpacity=a.revertOpacity+""};var g=function(){var n=e.content.find('[data-function="presentation"]'),t=n.find("option:selected"),r={},o=e.content.find('[data-function="backgroundRepeat"]'),c=e.content.find('[data-function="backgroundAttachment"]'),g=e.content.find('[data-function="backgroundPosition"]'),u=e.content.find('[data-function="backgroundSize"]'),l=i(e.content.find('[data-function="opacity"]').val());r[a.selector]={};if(!a.hasChosenBackground&&a.hasRevertBackground){s()}if(t.data("openCustomSettings")){e.content.find('[data-function="customBackgroundSettings"]').addClass("h24-PageBackgroundManager-customBackgroundSettings__open")}else{e.content.find('[data-function="customBackgroundSettings"]').removeClass("h24-PageBackgroundManager-customBackgroundSettings__open")}switch(n.val()){case"fill":case"stretch":case"center":case"tile":r[a.selector]=d(n.val());o.val(r[a.selector]["background-repeat"]);c.val(r[a.selector]["background-attachment"]);g.val(r[a.selector]["background-position"]);u.val(r[a.selector]["background-size"]);a.chosenSettings={presentation:n.val()};break;case"custom":r[a.selector]["background-repeat"]=o.val();r[a.selector]["background-attachment"]=c.val();r[a.selector]["background-position"]=g.val();r[a.selector]["background-size"]=u.val();a.chosenSettings={presentation:"custom","background-repeat":o.val(),"background-attachment":c.val(),"background-position":g.val(),"background-size":u.val()};break}if(a.hasChosenBackground){if(a.chosenUserFileId!=""&&a.chosenUserFileId!=0){r[a.selector]["background-image"]='url("'+e.content.find('[data-function="userFileContainer"] [data-user-file-id="'+a.chosenUserFileId+'"]').data("fullUrl")+'")'}else if(a.chosenPictureid!=""&&a.chosenPictureid!=0){r[a.selector]["background-image"]='url("'+e.content.find('[data-function="userImageContainer"] [data-pictureid="'+a.chosenPictureid+'"]').data("fullUrl")+'")'}}else if(a.hasRevertBackground){if(a.revertUserFileId!=""&&a.revertUserFileId!=0){r[a.selector]["background-image"]='url("'+e.content.find('[data-function="userFileContainer"] [data-user-file-id="'+a.revertUserFileId+'"]').data("fullUrl")+'")'}else if(a.revertPictureid!=""&&a.revertPictureid!=0){r[a.selector]["background-image"]='url("'+e.content.find('[data-function="userImageContainer"] [data-pictureid="'+a.chosenPictureid+'"]').data("fullUrl")+'")'}}backgroundColor=i(e.content.find('[data-function="backgroundColor"]').val());r[a.selector]["background-color"]=backgroundColor;a.chosenBackgroundColor=backgroundColor;e.content.find('[data-function="colorSwatch"]').css("background-color",backgroundColor);r[a.selector+":before"]={"background-color":backgroundColor,opacity:(1-l/100).toFixed(2)};a.chosenOpacity=l;v(r)};var u=function(e){a.chosenOpacity=e;l()};var l=function(){var n=$("#h24-PageBackgroundManager-previewStyle"),t,r={};if(!n.length){t=e.content.find(".h24-PageBackgroundManager-previewItem__chosen");if(!t.length){t=e.content.find(".h24-PageBackgroundManager-previewItem__current")}h(t)}else{n=$("#h24-PageBackgroundManager-previewOpacity");if(!n.length){n=$("<style />").prop("id","h24-PageBackgroundManager-previewOpacity");n.appendTo("head")}r[a.selector+":before"]={opacity:(1-a.chosenOpacity/100).toFixed(2)};n.text($h24.utils.objectToCss(r))}};var h=function(n){var t=$(n),r,o,c,i,s,g,u,l,h,f;if(!t.length)return;r=t.data();switch(r.type){case"library-video":C(r.resource,r.backgroundColor);break;case"library-image":P();o={};o[a.selector]={};if(!!r.settings.presentation&&r.settings.presentation!="custom"){o[a.selector]=d(r.settings.presentation)}else{if(!!r.settings["background-repeat"]){o[a.selector]["background-repeat"]=r.settings["background-repeat"]}if(!!r.settings["background-attachment"]){o[a.selector]["background-attachment"]=r.settings["background-attachment"]}if(!!r.settings["background-size"]){o[a.selector]["background-size"]=r.settings["background-size"]}if(!!r.settings["background-position"]){o[a.selector]["background-position"]=r.settings["background-position"]}}I();$("<img />").prop("src",a.baseUrl+"background-images/"+r.resource).loadWithTimeout({onLoad:function(){F();$(this).remove()}});f=e.content.find('[data-function="opacity"]');o[a.selector]["background-image"]='url("'+a.baseUrl+"background-images/"+r.resource+'")';o[a.selector]["background-color"]=r.backgroundColor;o[a.selector+":before"]={"background-color":"#000",opacity:(1-f.val()/100).toFixed(2)};v(o);break;case"library-pattern":P();o={};o[a.selector]=d("tile");o[a.selector]["background-image"]='url("'+a.baseUrl+"background-patterns/"+r.resource+'")';o[a.selector]["background-color"]=r.backgroundColor;o[a.selector+":before"]={"background-color":"transparent"};v(o);break;case"color":P();c={};c[a.selector]={"background-image":"none","background-color":r.backgroundColor};c[a.selector+":before"]={"background-color":"transparent"};v(c);break;case"user-image":case"user-file":P();i=e.content.find('[data-function="presentation"]');s=e.content.find('[data-function="backgroundColor"]');f=e.content.find('[data-function="opacity"]');if(i.val()!="custom"){o={};o[a.selector]=d(i.val())}else{g=e.content.find('[data-function="backgroundRepeat"]');u=e.content.find('[data-function="backgroundAttachment"]');l=e.content.find('[data-function="backgroundPosition"]');h=e.content.find('[data-function="backgroundSize"]');o={};o[a.selector]={"background-color":s.val(),"background-repeat":g.val(),"background-attachment":u.val(),"background-size":h.val(),"background-position":l.val()}}o[a.selector]["background-image"]='url("'+r.fullUrl+'")';o[a.selector+":before"]={"background-color":s.val(),opacity:(1-f.val()/100).toFixed(2)};v(o);break;case"external-image":P();i=e.content.find('[data-function="presentation"]');if(i.val()!="custom"){o={};o[a.selector]=d(i.val())}else{s=e.content.find('[data-function="backgroundColor"]');g=e.content.find('[data-function="backgroundRepeat"]');u=e.content.find('[data-function="backgroundAttachment"]');l=e.content.find('[data-function="backgroundPosition"]');h=e.content.find('[data-function="backgroundSize"]');f=e.content.find('[data-function="opacity"]');o={};o[a.selector]={"background-color":s.val(),"background-repeat":g.val(),"background-attachment":u.val(),"background-size":h.val(),"background-position":l.val()}}o[a.selector]["background-image"]='url("'+r.resource+'")';o[a.selector+":before"]={"background-color":s.val(),opacity:(1-f.val()/100).toFixed(2)};v(o);break}};var f=function(){if(a.hasChosenBackground){switch(a.chosenType){case"library-video":case"library-image":case"library-pattern":case"external-image":h(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.chosenType+'"][data-resource="'+a.chosenResource+'"]'));break;case"color":e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.chosenType+'"]').each(function(){if($(this).data("backgroundColor")==a.chosenBackgroundColor){h(this);return false}});break;case"user-file":h(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.chosenType+'"][data-user-file-id="'+a.chosenUserFileId+'"]'));break;case"user-image":h(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.chosenType+'"][data-pictureid="'+a.chosenPictureid+'"]'));break}}else{if(a.hasRevertBackground&&a.revertType=="library-video"){C(a.revertResource,a.revertBackgroundColor)}k()}};var p=function(n){var t=$(n),r=t.data(),o=e.content.find(".h24-PageBackgroundManager-previewItem__chosen"),c=e.content.find(".h24-PageBackgroundManager-previewItem__current");if(r.disabledPreview){return}o.removeClass("h24-PageBackgroundManager-previewItem__chosen");o.data("disabledPreview",false);if(!t.is(o)){c.data("disabledPreview",false)}t.addClass("h24-PageBackgroundManager-previewItem__chosen");t.data("disabledPreview",true);a.hasChosenBackground=true;a.chosenType=r.type;a.chosenResource=!!r.resource?r.resource:"";a.chosenUserFileId=!!r.userFileId?r.userFileId:0;a.chosenPictureid=!!r.pictureid?r.pictureid:0;if(!!r.backgroundColor){a.chosenBackgroundColor=r.backgroundColor;e.content.find('[data-function="backgroundColor"]').val(r.backgroundColor);e.content.find('[data-function="colorSwatch"]').css("background-color",r.backgroundColor)}else{a.chosenBackgroundColor=e.content.find('[data-function="backgroundColor"]').val()}if(!!r.opacity){a.chosenOpacity=r.opacity;e.content.find('[data-function="opacity"]').val(r.opacity)}else{a.chosenOpacity=e.content.find('[data-function="opacity"]').val()}if(!!r.settings){a.chosenSettings=jQuery.extend({},r.settings)}else if(e.content.find('[data-function="'+e.content.find('[data-function="type"] option[value="'+r.type+'"]').data("target")+'"]').data("allowSettings")){a.chosenSettings={presentation:e.content.find('[data-function="presentation"]').val(),"background-repeat":e.content.find('[data-function="backgroundRepeat"]').val(),"background-attachment":e.content.find('[data-function="backgroundAttachment"]').val(),"background-position":e.content.find('[data-function="backgroundPosition"]').val(),"background-size":e.content.find('[data-function="backgroundSize"]').val()}}else{a.chosenSettings={}}if(e.content.find('[data-function="'+e.content.find('[data-function="type"] option:selected').data("target")+'"]').data("allowSettings")){e.content.find('[data-function="backgroundSettings"]').addClass("h24-PageBackgroundManager-backgroundSettings__allowed");if(e.content.find('[data-function="presentation"] option:selected').data("openCustomSettings")){e.content.find('[data-function="customBackgroundSettings"]').addClass("h24-PageBackgroundManager-customBackgroundSettings__open")}else{e.content.find('[data-function="customBackgroundSettings"]').removeClass("h24-PageBackgroundManager-customBackgroundSettings__open")}}else{e.content.find('[data-function="backgroundSettings"]').removeClass("h24-PageBackgroundManager-backgroundSettings__allowed");e.content.find('[data-function="customBackgroundSettings"]').removeClass("h24-PageBackgroundManager-customBackgroundSettings__open")}h(n)};var v=function(e){var a=$("#h24-PageBackgroundManager-previewStyle");if(!a.length){a=$("<style />").prop("id","h24-PageBackgroundManager-previewStyle");a.appendTo("head")}a.text($h24.utils.objectToCss(e));$("#h24-PageBackgroundManager-previewOpacity").remove()};var k=function(){$("#h24-PageBackgroundManager-previewStyle").remove();$("#h24-PageBackgroundManager-previewOpacity").remove()};var b,m=$();var y=function(){var e;if(!a.hasDefaultBackground){return}e=$("#h24-PageBackgroundManager-previewStyle");b=e.text();e.text("");if(a.defaultHasVideo){C(a.defaultResource,a.defaultBackgroundColor)}else{P()}m=$("<link />",{"class":"h24-PageBackground-stylesheet",rel:"stylesheet",media:"screen",type:"text/css",href:$h24.slashwebroot+"Page/Page-Background-CSS?h="+$h24.homepageid+"&b="+a.defaultPageBackgroundId}).attr("data-selector",a.selector);m.appendTo("head")};var B=function(){if(!a.hasDefaultBackground){return}m.remove();if(a.defaultHasVideo){P()}$("#h24-PageBackgroundManager-previewStyle").text(b);if(a.hasChosenBackground&&a.chosenType=="library-video"){C(a.chosenResource,a.chosenBackgroundColor)}else if(a.hasRevertBackground&&a.revertType=="library-video"){C(a.revertResource,a.revertBackgroundColor)}};var C=function(e,n){var t=$(".h24-PageBackground-video"),r=false,o=a.baseUrl+"background-videos/"+e,c={};c[a.selector]=d("fill");c[a.selector]["background-image"]='url("'+o+'.jpg")';c[a.selector]["background-color"]=n;v(c);t.each(function(){var a=$(this);if(a.data("resource")==e){if(this.paused){this.play()}a.show();r=true}else{this.pause();a.hide()}});if(!r){$video=$("<video />").addClass("h24-PageBackground-video").prop("loop",true).prop("autoplay",true).data("resource",e);$video.append($("<source />").prop("type","video/mp4").prop("src",o+".mp4"));$video.append($("<source />").prop("type","video/webm").prop("src",o+".webm"));$video.append($("<source />").prop("type","video/ogg").prop("src",o+".ogv"));$video.prependTo(a.selector);I();$video.on("progress.h24",function(){F()});setTimeout(function(){F()},3e3)}};var P=function(){if(a.managerMode!="document"){return}$(".h24-PageBackground-video").each(function(){if(!this.paused){this.pause()}$(this).hide()})};var S=function(){var t;if(a.hasChosenBackground){t={type:a.chosenType,resource:a.chosenResource,backgroundColor:a.chosenBackgroundColor,settings:a.chosenSettings,userFileId:a.chosenUserFileId,pictureid:a.chosenPictureid,selector:a.selector,opacity:a.chosenOpacity}}else if(a.hasRevertBackground){t={type:a.revertType,resource:a.revertResource,backgroundColor:a.revertBackgroundColor,settings:a.revertSettings,userFileId:a.revertUserFileId,pictureid:a.revertPictureid,selector:a.selector,opacity:a.chosenOpacity}}else{}if(a.managerMode=="document"){n.onSave(t,e.content.find('[data-function="saveMethod"]:checked').val())}else{n.onSave(t,"faux-section")}};var _=function(){var t=e.content.find('[data-function="saveMethod"]:checked').val()=="revert";if(t){B()}if(a.hasRevertBackground&&a.revertType=="library-video"){p(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="library-video"][data-resource="'+a.revertResource+'"]'))}else if(a.hasRevertBackground&&a.hasChosenBackground){switch(a.revertType){case"library-video":case"library-image":case"library-pattern":case"external-image":p(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.revertType+'"][data-resource="'+a.revertResource+'"]'));break;case"color":e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.revertType+'"]').each(function(){if($(this).data("backgroundColor")==a.revertBackgroundColor){p(this);return false}});break;case"user-file":p(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.revertType+'"][data-user-file-id="'+a.revertUserFileId+'"]'));break;case"user-image":p(e.content.find('.h24-PageBackgroundManager-previewItem[data-type="'+a.revertType+'"][data-pictureid="'+a.revertPictureid+'"]'));break}}M();n.onCancel()};var M=function(e,n){if(!!n&&a.defaultHasVideo){$(".h24-PageBackground-video").each(function(){var e=$(this);if(e.data("resource")!=a.defaultResource){e.remove()}});$(".h24-PageBackgroundManager-hoverHelper").removeClass("h24-PageBackgroundManager-hoverHelper__imageBackground").addClass("h24-PageBackgroundManager-hoverHelper__videoBackground")}else if(!!n&&!a.defaultHasVideo){$(".h24-PageBackground-video").remove();$(".h24-PageBackgroundManager-hoverHelper").removeClass("h24-PageBackgroundManager-hoverHelper__videoBackground").addClass("h24-PageBackgroundManager-hoverHelper__imageBackground")}else if(a.hasChosenBackground&&a.chosenType=="library-video"){$(".h24-PageBackground-video").each(function(){var e=$(this);if(e.data("resource")!=a.chosenResource){e.remove()}});$(".h24-PageBackgroundManager-hoverHelper").removeClass("h24-PageBackgroundManager-hoverHelper__imageBackground").addClass("h24-PageBackgroundManager-hoverHelper__videoBackground")}else if(!a.hasChosenBackground&&a.hasRevertBackground&&a.revertType=="library-video"){$(".h24-PageBackground-video").each(function(){var e=$(this);if(e.data("resource")!=a.revertResource){e.remove()}});$(".h24-PageBackgroundManager-hoverHelper").removeClass("h24-PageBackgroundManager-hoverHelper__imageBackground").addClass("h24-PageBackgroundManager-hoverHelper__videoBackground")}else{$(".h24-PageBackground-video").remove();$(".h24-PageBackgroundManager-hoverHelper").removeClass("h24-PageBackgroundManager-hoverHelper__videoBackground").addClass("h24-PageBackgroundManager-hoverHelper__imageBackground")}$h24.GUI.destroy("PageBackgroundManager");$h24.GUI.destroy("PageBackgroundManagerOverlay");$h24.adminPanel.togglePanel(false);if(!e){k()}};var w;var I=function(){return};var F=function(){return};var T=function(e,a,n){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"PageBackgroundManager",modelaction:"prepareFauxSection",homepageid:$h24.homepageid,pageid:e,index:a},function(e){if(e.successful){$("<link />",{"class":"h24-PageBackground-stylesheet",rel:"stylesheet",media:"screen",type:"text/css",href:$h24.slashwebroot+"Page/Page-Background-CSS?h="+$h24.homepageid+"&b="+e.pageBackgroundId}).attr("data-selector",".pp-FauxSection-index"+a).appendTo("head");if(typeof n==="function")n(e)}else if(e.statusCode==5){alert($h24.phrase.GUIPhrase("PageBackgroundManager","You have reached the maximum number of sections on this page."))}})};var x=function(e,a,n){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"PageBackgroundManager",modelaction:"removeFauxSection",homepageid:$h24.homepageid,pageid:e,index:a},function(e){if(e.successful){$('head [data-selector=".pp-FauxSection-index'+a+'"]').remove();if(typeof n==="function")n(e)}})};return{settings:r,destroy:M,refreshUserFiles:c,prepareFauxSection:T,removeFauxSection:x}}();
h24core.prototype.GUI=function(){var r={};var e=function(e,n,t){if(!$h24.GUI[e]){console.error("Missing GUI module: "+e)}var o=new $h24.GUI[e](t,n);r[n]=o;return o};var n=function(r,n,t){var o=e(r,n,t);o.renderTemplate();o.init();return o};var t=function(r,n,t,o){var a=e(n,t,o);a.content=$(r);a.init();return a};var o=function(e){r[e].destroy();delete r[e]};return{create:n,createFromMarkup:t,destroy:o,instances:r}}();
h24core.prototype.GUI.SidePanel=function(e){var i=$.extend(true,{side:"right",content:"",zIndex:994,slideDelay:0,makeWay:true,slideIn:true,startOpen:true,handle:false,controls:false},e),n=this;var t=false;this.content=$();this.hide=function(e){var l=e||0;setTimeout(function(){n.content.removeClass("h24-SidePanel-left__visible h24-SidePanel-right__visible");if(i.makeWay){$("html").removeClass("h24-SidePanel__leftPanelVisibleOnPage h24-SidePanel__rightPanelVisibleOnPage")}t=false},l)};this.show=function(e){var l=e||0;setTimeout(function(){if(i.side=="left"){n.content.addClass("h24-SidePanel-left__visible");if(i.makeWay){$("html").addClass("h24-SidePanel__leftPanelVisibleOnPage")}}else if(i.side=="right"){n.content.addClass("h24-SidePanel-right__visible");if(i.makeWay){$("html").addClass("h24-SidePanel__rightPanelVisibleOnPage")}}t=true},l)};this.isVisible=function(){return t};this.destroy=function(){if(i.makeWay){n.content.removeClass("h24-SidePanel-left__visible h24-SidePanel-right__visible");$("html").removeClass("h24-SidePanel__leftPanelVisibleOnPage h24-SidePanel__rightPanelVisibleOnPage");n.content.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.content.remove()});setTimeout(function(){n.content.remove()},500)}else{n.content.remove()}};var l=function(){n.content.css({"z-index":i.zIndex});if(!i.startOpen){return}else{t=true}if(i.slideIn||i.makeWay){if(i.side=="left"){if(!i.slideIn){n.content.addClass("h24-SidePanel-left__visible")}setTimeout(function(){if(i.slideIn){n.content.addClass("h24-SidePanel-left__visible")}if(i.makeWay){$("html").addClass("h24-SidePanel__leftPanelVisibleOnPage")}},i.slideDelay)}else if(i.side=="right"){if(!i.slideIn){n.content.addClass("h24-SidePanel-right__visible")}setTimeout(function(){if(i.slideIn){n.content.addClass("h24-SidePanel-right__visible")}if(i.makeWay){$("html").addClass("h24-SidePanel__rightPanelVisibleOnPage")}},i.slideDelay)}}else{if(i.side=="left"){if(!n.content.hasClass("h24-SidePanel-left__visible")){n.content.addClass("h24-SidePanel-left__visible")}}else if(i.side=="right"){if(!n.content.hasClass("h24-SidePanel-right__visible")){n.content.addClass("h24-SidePanel-right__visible")}}}};this.renderTemplate=function(){dust.render("SidePanel",{content:i.content,side:i.side,startVisible:!i.slideIn,handle:i.handle,controls:i.controls},function(e,i){n.content=$(i);n.content.appendTo("body");n.innerContent=n.content.find(".h24-SidePanel-scrollable")})};this.init=function(){l();if(i.handle){$(this.content).on("click.h24-SidePanel-handle",".h24-SidePanel-handle",function(e){if(i.makeWay){if(i.side=="left"){n.content.toggleClass("h24-SidePanel-left__visible");$("html").toggleClass("h24-SidePanel__leftPanelVisibleOnPage")}else if(i.side=="right"){$("html").toggleClass("h24-SidePanel__rightPanelVisibleOnPage");n.content.toggleClass("h24-SidePanel-right__visible")}}})}}};
h24core.prototype.GUI.FullPanel=function(e){var l=$.extend(true,{side:"left",content:"",zIndex:1e3,slideDelay:0,slideIn:true,startOpen:true},e),t=this;var i=false;this.content=$();this.destroy=function(){t.content.removeClass("h24-FullPanel-left__visible h24-FullPanel-right__visible");setTimeout(function(){t.content.remove()},500)};this.hide=function(){t.content.removeClass("h24-FullPanel-left__visible h24-FullPanel-right__visible");i=false};this.show=function(){if(l.side=="left"){t.content.addClass("h24-FullPanel-left__visible")}else if(l.side=="right"){t.content.addClass("h24-FullPanel-right__visible")}i=true};this.isVisible=function(){return i};var n=function(){t.content.css({"z-index":l.zIndex});if(!l.startOpen){return}else{i=true}if(l.slideIn){if(l.side=="left"){if(!l.slideIn){t.content.addClass("h24-FullPanel-left__visible")}setTimeout(function(){if(l.slideIn){t.content.addClass("h24-FullPanel-left__visible")}},l.slideDelay)}else if(l.side=="right"){if(!l.slideIn){t.content.addClass("h24-FullPanel-right__visible")}setTimeout(function(){if(l.slideIn){t.content.addClass("h24-FullPanel-right__visible")}},l.slideDelay)}}else{if(l.side=="left"){if(!t.content.hasClass("h24-FullPanel-left__visible")){t.content.addClass("h24-FullPanel-left__visible")}}else if(l.side=="right"){if(!t.content.hasClass("h24-FullPanel-right__visible")){t.content.addClass("h24-FullPanel-right__visible")}}}};this.renderTemplate=function(){dust.render("FullPanel",{content:l.content,side:l.side,startVisible:!l.slideIn},function(e,l){t.content=$(l);t.content.appendTo("body")})};this.init=function(){n()}};
h24core.prototype.GUI.Overlay=function(n){var t=$.extend(true,{zIndex:1e4,opacity:.5,backgroundColor:"#ffffff",onClick:null,duration:1e3},n),o=this;this.content=$();this.destroy=function(){o.content.remove()};var e=function(){if(typeof t.onClick==="function"){o.content.on("click.h24",t.onClick)}};var c=function(){o.content.css({"z-index":t.zIndex,opacity:0,"background-color":t.backgroundColor});o.content.appendTo("body");o.content.animate({opacity:t.opacity},t.duration)};this.renderTemplate=function(){dust.render("Overlay",{content:t.content},function(n,t){o.content=$(t)})};this.init=function(){e();c()}};
h24core.prototype.GUI.Settings=function(t){var e=$.extend(true,{template:"",templateData:{},popoverPlacement:"left"},t),o=this;var r={};this.content=$();this.destroy=function(){o.content.remove()};this.renderTemplate=function(){dust.render(e.template,e.templateData,function(t,e){o.content=$(e)})};this.setData=function(t){$.each(t,function(t,e){r[t].set.call(r[t].elem,e)})};this.getData=function(t){var e=r[t];return e.get.call(e.elem)};this.getAllData=function(){var t={};$.each(r,function(e,o){t[e]=o.get.call(o.elem)});return t};this.showError=function(t,e){var o=r[t];o.showError.call(o.elem,e);return o.elem};this.hideError=function(t){var e=r[t];e.hideError.call(e.elem);return e.elem};this.init=function(){o.content.find("[data-holder]").each(function(){var t=$(this),n=t.data(),i;i={elem:this};if(n.customDataHolder){i.customDataHolder=new $h24.GUI.Settings[n.customDataHolder](this,e);i.get=i.customDataHolder.get;i.set=i.customDataHolder.set;i.showError=i.customDataHolder.showError;i.hideError=i.customDataHolder.hideError}else{if(t.is("input")){switch(t.prop("type")){case"checkbox":i.get=function(){return $(this).prop("checked")};i.set=function(t){$(this).prop(t)};i.showError=function(t){};i.hideError=function(){};break;case"radio":i.get=function(){return o.content.find('[data-function="'+n.function+'"]:checked').val()};i.set=function(t){$(this).val(t)};i.showError=function(t){};i.hideError=function(){};break;default:i.get=function(){return $(this).val()};i.set=function(t){$(this).val(t)};i.showError=function(t){var e=$(this);e.data().popover.options.content=t;if(!$(e.data().popover.$tip).is(":visible")){e.popover("show")}};i.hideError=function(){t.popover("hide")};break}}else if(t.is("textarea")){i.get=function(){return $(this).val()};i.set=function(t){$(this).val(t)};i.showError=function(t){var e=$(this);if(!!t){e.data().popover.options.content=t;if(!$(e.data().popover.$tip).is(":visible")){e.popover("show")}}};i.hideError=function(){t.popover("hide")}}else if(t.is("select")){i.get=function(){return $(this).val()};i.set=function(t){var e=$(this),o;if(typeof t=="string"){e.find('option[value="'+t+'"]').prop("selected",true)}else{$.each(t,function(t,r){if(!r.group){o=$("<option />");o.prop("value",r.value);o.text(r.text);if(r.selected){o.prop("selected",r.selected)}o.appendTo(e)}else{o=$("<optgroup />");o.prop("label",r.label);$.each(r.options,function(t,e){var n=$("<option />");n.prop("value",r.value);n.text(r.text);n.appendTo(o);if(e.selected){n.prop("selected",e.selected)}});o.appendTo(e)}})}};i.showError=function(t){};i.hideError=function(){}}t.popover({trigger:"manual",content:"",placement:e.popoverPlacement,delay:5e3})}r[t.data("function")]=i})}};
h24core.prototype.GUI.Settings.SwitchControl=function(o,t){var e=$(o);e.popover({trigger:"manual",content:"",placement:t.popoverPlacement,delay:5e3});this.get=function(){return e.find("input").prop("checked")};this.set=function(o){e.find("input").prop("checked",o)};this.showError=function(o){e.data().popover.options.content=o;if(!$(e.data().popover.$tip).is(":visible")){e.popover("show")}};this.hideError=function(){e.popover("hide")}};
h24core.prototype.mobile_admin=function(){function e(){r();var e=$(".h24-mobileWebsite"),i=$(".sitepreview").height(),l=e.height()+20;if(i<l){var s=i/l;e.find(".h24-mobileWebsiteViewContainer").css({"-webkit-transform":"scale("+s+")",transform:"scale("+s+")"})}c();var h=$h24.GUI.instances.MobileSidepanel.content;h.find("[data-action]").each(function(){var e=$(this);switch(e.attr("data-action")){case"toogle_activate_mobile":var i=3;e.change(function(){if(e.prop("checked")){i=1}else{i=0}if(i!=3){$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"changeMobileStatus",__skip_loading_overlay:true,__keep_loading_overlay:true,status:i},function(e){})}});break;case"mobileDone":e.on("click",function(){$h24.adminPanel.hideMobilePanel()});break;case"toogle_activate_header":var l=$(".h24-mobileWebsiteView");var c=$(".h24-SidePanel-changeImageButton");var i=3;e.change(function(){if(e.prop("checked")){i=1;c.show()}else{i=0;c.hide()}if(i!=3){$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"setMobileHeaderStatus",state:i,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){})}l.prop("src",l.prop("src"));r()});break;case"toogle_activate_title":var l=$(".h24-mobileWebsiteView");e.change(function(){if(e.prop("checked")){state=1}else{state=0}if(state===0||state===1){$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"setMobileMenuNameState",state:state,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){})}l.prop("src",l.prop("src"));r()});break;case"toogle_activate_sidebar":var l=$(".h24-mobileWebsiteView");e.change(function(){if(e.prop("checked")){state=1}else{state=0}if(state===0||state===1){$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"setMobileMenuSidebarState",state:state,__skip_loading_overlay:true,__keep_loading_overlay:true},function(e){if(e.successful){r();l.prop("src",l.prop("src"))}})}});break;case"choose_image":e.click(function(){var e=$(".h24-mobileWebsiteView");$h24.image_database.open({uploadCallback:function(a){$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"chooseImage",pictureid:a,__skip_loading_overlay:true,__keep_loading_overlay:true},function(a){if(a.successful===true){e.prop("src",e.prop("src"));r()}})}})});break;case"choose_color":e.click(function(){var e=$(".h24-SidePanel");$h24.utils.colorPicker({color:n(e.find('[data-function="backgroundColor"]').val()),changedCallback:function(e){},saveCallback:function(e){t(e)},allowTransparency:false,dialogSettings:{transparentOverlay:true}})});break;case"changeBackgroundColor":e.keyup(function(){var a=e.val();if(a.length==7){t(a)}});break;case"revert_color":e.click(function(){var e=$(".h24-SidePanel");var a=e.find('[data-function="backgroundColor"]');t(a.data("default"))});break;case"change_title_styles":e.click(function(){var e=$(".h24-SidePanel");$h24.design_manager.modalFontPreview("global",83,{closeCallback:o,cancelCallback:a})});break;case"change_big_heading_styles":e.click(function(){var e=$(".h24-SidePanel");$h24.design_manager.modalFontPreview("global",81,{closeCallback:o,cancelCallback:a})});break;case"change_small_heading_styles":e.click(function(){var e=$(".h24-SidePanel");$h24.design_manager.modalFontPreview("global",82,{closeCallback:o,cancelCallback:a})});break;case"publish":e.click(function(){$h24.publishing_manager.publish()});break}})}var a=function(){$("#h24_dm_mfp_right_panel").remove();$("#h24_dm_mfp_transparent_overlay").remove();if($("html").hasClass("h24_admin_panel_hidden")){$h24.adminPanel.togglePanel(false)}};var o=function(e){var o=$("#h24_dm_mfp_right_panel"),t=o.find("input[name=slot_id]").val(),n=o.find("input[name=slot_type]").val();e["id"]=t;e["slot_type"]=n;$h24.post($h24.slashwebroot+"Page/Communicator",{homepageid:$h24.homepageid,model:"DesignManager",modelaction:"save_fonts",data:[e],__skip_loading_overlay:true},function(e){if(e.successful===true){i()}});a()};var i=function(){$(".h24-mobileWebsiteView").prop("src",$(".h24-mobileWebsiteView").prop("src"));r()};var t=function(e){var a=$(".h24-SidePanel");var o=a.find('[data-function="backgroundColor"]');var i=a.find('[data-function="colorSwatch"]');var t=a.find('[data-action="revert_color"]');var e=n(e);if(l(e)){o.val(e.toUpperCase());i.css({backgroundColor:e});if(o.data("default")==o.val()){t.hide()}else{t.show()}$h24.post($h24.slashwebroot+"H24-Mobile/Edit-Communicator",{modelaction:"setMobileMenuColor",__skip_loading_overlay:true,__keep_loading_overlay:true,color:e},function(e){if(e.successful===true){$(".h24-mobileWebsiteView").prop("src",$(".h24-mobileWebsiteView").prop("src"));r()}})}};var n=function(e){return e.replace(/;|\{|\}|\/|'|"/g,"")};function l(e){return e.match(/^#[a-f0-9]{6}$/i)!==null}var r=function(){$(".h24-mobileWebsiteViewContainer").loadingSpinner(true);$(".h24-mobileWebsiteView").load(function(){$(".h24-mobileWebsiteViewContainer").loadingSpinner(false)})};var c=function(){var e=$h24.utils.getScrollbarWidth();if(e>0){var a=$(".h24-mobileWebsiteViewContainer");a.width(a.width()+e)}};return{init:e}}();
h24core.prototype.imageViewer=function(){var e;var i=function(){if(e){$h24.imageViewer[e].destroy();$h24.imageViewer[e].init()}};var t=function(i){if($h24.imageViewer[i]){e=i}};return{init:i,setCurrent:t}}();h24core.prototype.imageViewer.Photobox={destroy:function(){$(".h24-js-iv").each(function(){var e=$(this),i=e.data("_photobox");if(i){i.destroy()}})},init:function(){var e={},i={history:false};$(".h24-js-iv").each(function(){var t=$(this),o=t.prop("rel");if(o){if(!e[o]){e[o]=true}}else{t.parent().photobox(".h24-js-iv",i)}});$.each(e,function(e){$("body").photobox('.h24-js-iv[rel="'+e+'"]',i)})}};h24core.prototype.imageViewer.Fancybox={destroy:function(){$(".h24-js-iv").off()},init:function(){var e={closeClick:false,helpers:{thumbs:{width:50,height:50}},beforeShow:function(){$(".fancybox-skin").css({"border-width":0,"margin-top":0,"margin-left":0})},afterShow:function(){$(".fancybox-close").css({top:-10,right:-10})},afterLoad:function(){if(this.group.length>1){this.title=this.index+1+" / "+this.group.length+(this.title?" - "+this.title:"")}}};if(screen.width<=480){e.arrows=false;e.margin=0;e.padding=15;e.autoSize=true}$(".h24-js-iv").fancybox(e)}};h24core.prototype.imageViewer.Swipebox={destroy:function(){$(".h24-js-iv").off()},init:function(){$(".h24-js-iv").swipebox({useCSS:true,hideBarsDelay:3e3})}};h24core.prototype.imageViewer.jQueryTools={destroy:function(){},init:function(){var e=$(".h24-js-iv").not(".h24_initiated_media_viewer");if(e.length>0){e.overlay({target:"#h24_jq_tools_gallery",fixed:false,mask:{color:$("#h24_jq_tools_gallery").data("color"),opacity:$("#h24_jq_tools_gallery").data("opacity")}});e.gallery({speed:$("#h24_jq_tools_gallery").data("speed"),template:"<strong>${title}</strong> <span>${index}/${total}</span>",opacity:.8,info:".h24_jqt_info",next:".h24_jqt_next",prev:".h24_jqt_prev",progress:".h24_jqt_progress"});e.addClass("h24_initiated_media_viewer")}}};h24core.prototype.imageViewer.Lightbox={destroy:function(){$(".h24-js-iv").off()},init:function(){$(".h24-js-iv").lightbox();$.Lightbox.construct({show_linkback:false,download_link:false,auto_resize:false,padding:"1",auto_scroll:"disabled",text:{image:"Bild",of:"av",close:"Stäng X",closeInfo:"Du kan klicka utanför bilden för att stänga bildvisaren.",download:"Direktlänk till bildfilen.",help:{close:"Klicka utanför bilden för att stänga.",interact:"Håll musen över bilden för att interagera"},about:{text:"jQuery Lightbox Plugin (balupton edition)",title:"Licenced under the GNU Affero General Public License.",link:"http://jquery.com/plugins/project/jquerylightbox_bal"}},src:$h24.publicdir+"js/jquery/jquery_lightbox/sv/js/jquery.lightbox.js",baseurl:"http://edit.hemsida24.se",files:{js:{lightbox:"http://edit.hemsida24.se/"+$h24.publicdir+"js/jquery/jquery_lightbox/sv/js/jquery.lightbox.js",colorBlend:"http://edit.hemsida24.se/"+$h24.publicdir+"js/jquery/jquery_lightbox/sv/js/jquery.color.packed.js"},images:{prev:$h24.publicdir+"js/jquery/jquery_lightbox/sv/images/prev.gif",next:$h24.publicdir+"js/jquery/jquery_lightbox/sv/images/next.gif",blank:$h24.publicdir+"js/jquery/jquery_lightbox/sv/images/blank.gif",loading:$h24.publicdir+"js/jquery/jquery_lightbox/sv/images/loading.gif"}}})}};h24core.prototype.imageViewer.Facebox={destroy:function(){$(".h24-js-iv").off()},init:function(){jQuery.facebox.settings.loading_image=$h24.publicdir+"js/jquery/facebox/sv/loading.gif";jQuery.facebox.settings.close_image=$h24.publicdir+"js/jquery/facebox/sv/closelabel.gif";jQuery.facebox.settings.image_types=["png","jpg","jpeg","gif"];jQuery.facebox.settings.next_image=$h24.publicdir+"js/jquery/facebox/sv/fast_forward.png";jQuery.facebox.settings.prev_image=$h24.publicdir+"js/jquery/facebox/sv/rewind.png";jQuery.facebox.settings.play_image=$h24.publicdir+"js/jquery/facebox/sv/play.png";jQuery.facebox.settings.pause_image=$h24.publicdir+"js/jquery/facebox/sv/pause.png";jQuery.facebox.settings.slide_duration=6,jQuery.facebox.settings.facebox_html='		<div id="facebox" style="display:none;"> 		<div class="popup"> 		  <table> 			<tbody> 			  <tr> 				<td class="tl"/><td class="b"/><td class="tr"/> 			  </tr> 			  <tr> 				<td class="b"/> 				<td class="body"> 				  <div class="content"> 				  </div> 				  <div class="info"></div> 				  <div class="footer"> 					<div class="navigation"></div> 					<a href="#" class="close"> 					  <img src="'+$h24.publicdir+'js/jquery/facebox/sv/loading.gif" title="close" class="close_image" /> 					</a> 				  </div> 				</td> 				<td class="b"/> 			  </tr> 			  <tr> 				<td class="bl"/><td class="b"/><td class="br"/> 			  </tr> 			</tbody> 		  </table> 		</div> 		</div>';$(".h24-js-iv").facebox({closeImage:$h24.publicdir+"js/jquery/facebox/sv/closelabel.gif",loadingImage:$h24.publicdir+"js/jquery/facebox/sv/loading.gif"})}};h24core.prototype.imageViewer.Shadowbox={destroy:function(){$(".h24-js-iv").off()},init:function(){if($(".h24-js-iv").length){Shadowbox.init({handleOversize:"drag",displayNav:true,overlayOpacity:"0.8",overlayColor:"#000",animate:true,animateFade:false,animSequence:"sync",resizeDuration:"0.55",fadeDuration:"0.35",continuous:false,handleOversize:"resize",counterType:"default",flvPlayer:$h24.publicdir+"js/shadowbox/flvplayer.swf",autoplayMovies:true});Shadowbox.clearCache();Shadowbox.setup($(".h24-js-iv"))}}};
h24core.prototype.registry=function(){var e;var t=function(){if(typeof e!="undefined"){return e}var t,d,r,i;t=document.createElement("div");t.style.visibility="hidden";t.style.width="100px";document.body.appendChild(t);d=t.offsetWidth;t.style.overflow="scroll";r=document.createElement("div");r.style.width="100%";t.appendChild(r);i=r.offsetWidth;t.parentNode.removeChild(t);e=d-i;return e};return{scrollbarWidth:t}}();
h24core.prototype.metaManager=function(){var e=0,a=1,t=2,n=3,s=4,r=5,i=6,o=7;var c=function(e){if(jQuery.trim(e)!=e||e.search(/'|\\|"|%/)!=-1||e.length<6){return false}return true};var h=function(e){if(jQuery.trim(e)!=e||e.search(/'|\\|"|%/)!=-1||e.length<5){return false}return true};var l=function(){var e,t;t=$h24.GUI.create("Settings","AccountSettings-settings",{template:"AccountSettings",templateData:{diskSpaceHeading:$h24.phrase.GUIPhrase("Homepage-Settings","Disk space"),progressBarLoading:true,usedSpacePercentage:30,freeSpacePercentage:70,accountSettingsHeading:$h24.phrase.GUIPhrase("Homepage-Settings","Account Settings"),confirmChangesHeading:$h24.phrase.GUIPhrase("Homepage-Settings","Password confirmation"),settings:{username:{title:$h24.phrase.GUIPhrase("General","User name"),labelId:"h24-AccountSettings-username","function":"username",value:"",placeholder:$h24.phrase.GUIPhrase("General","User name")},email:{title:$h24.phrase.GUIPhrase("Homepage-Settings","Email"),placeholder:$h24.phrase.GUIPhrase("Homepage-Settings","Email"),labelId:"h24-AccountSettings-email","function":"email"},altEmail:{title:$h24.phrase.GUIPhrase("Homepage-Settings","Alternative email"),placeholder:$h24.phrase.GUIPhrase("Homepage-Settings","Alternative email"),"function":"altEmail",action:"setAltEmail",readOnlyText:"",buttonText:$h24.phrase.GUIPhrase("General","Change")},newPassword:{title:$h24.phrase.GUIPhrase("Homepage-Settings","New password"),placeholder:$h24.phrase.GUIPhrase("Homepage-Settings","New password"),labelId:"h24-AccountSettings-newPassword","function":"newPassword"},repeatedNewPassword:{title:$h24.phrase.GUIPhrase("Homepage-Settings","Repeat new password"),placeholder:$h24.phrase.GUIPhrase("Homepage-Settings","Repeat new password"),labelId:"h24-AccountSettings-repeatNewPassword","function":"repeatedNewPassword"},confirmChangesPassword:{title:$h24.phrase.GUIPhrase("General","Password"),placeholder:$h24.phrase.GUIPhrase("General","Password"),labelId:"h24-AccountSettings-confirmChangesPassword","function":"confirmChangesPassword"}},buttons:{primaryButton:{action:"saveSettings",text:$h24.phrase.GUIPhrase("General","Save")},secondaryButton:{action:"cancel",text:$h24.phrase.GUIPhrase("General","Cancel")}}}});e=$h24.GUI.create("SidePanel","AccountSettings-sidePanel",{zIndex:1e3});e.content.append(t.content);$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,__keep_loading_overlay:true,model:"MetaManager",modelaction:"getAccountData",homepageid:$h24.homepageid},function(a){e.content.find('[data-function="diskSpaceVisualisation"]').removeClass("h24-Progress__striped h24-Progress__active");e.content.find('[data-function="usedSpace"]').width(a.storage.usedSpacePerc+"%");e.content.find('[data-function="freeSpace"]').width(a.storage.freeSpacePerc+"%");e.content.find('[data-function="diskSpaceText"]').text($h24.phrase.GUIPhrase("Homepage-Settings","%used% MB used of total %limit% MB.",{used:a.storage.usedSpaceMB,limit:a.storage.limitMB}));t.setData({username:a.user.username,email:a.user.email});e.content.find('[data-function="altEmail"]').val(a.user.altEmail)});e.content.on("click.h24-AccountSettings","[data-action]",function(r){var c=$(this),h=c.data(),l;switch(h.action){case"saveSettings":l=e.content.find('[data-function="confirmChangesPassword"]');if(l.val().length==0){t.showError("confirmChangesPassword",$h24.phrase.GUIPhrase("Homepage-Settings","The provided account password is incorrect"));l.addClass("h24-InputField__warning");return}$h24.post($h24.slashwebroot+"Page/Communicator",{__skip_loading_overlay:true,__keep_loading_overlay:true,model:"MetaManager",modelaction:"setAccountData",homepageid:$h24.homepageid,accountData:t.getAllData()},function(e){if(!e.successful){var r;switch(e.statusCode){case a:r=$(t.showError("newPassword",$h24.phrase.GUIPhrase("Homepage-Settings","The new password is invalid")));break;case n:r=$(t.showError("confirmChangesPassword",$h24.phrase.GUIPhrase("Homepage-Settings","The provided account password is incorrect")));break;case s:r=$(t.showError("email",$h24.phrase.GUIPhrase("Homepage-Settings","The provided email is invalid")));break;case i:r=$(t.showError("username",$h24.phrase.GUIPhrase("Homepage-Settings","The provided username is invalid")));break;case o:r=$(t.showError("username",$h24.phrase.GUIPhrase("Homepage-Settings","The provided username is alreay taken")));break}r.addClass("h24-InputField__warning")}else{$h24.GUI.destroy("AccountSettings-settings");$h24.GUI.destroy("AccountSettings-sidePanel")}});r.preventDefault();break;case"setAltEmail":$h24.emailCenter.changeAltEmailDialog(function(a){e.content.find('[data-function="altEmail"]').val(a)});break;case"cancel":$h24.GUI.destroy("AccountSettings-settings");$h24.GUI.destroy("AccountSettings-sidePanel");r.preventDefault();break}}).on("keyup.h24-AccountSettings paste.h24-AccountSettings","[data-holder]",function(a){var n=$(this),s=n.data();switch(s.function){case"username":if(h(n.val())){n.removeClass("h24-InputField__warning");t.hideError("username")}else{n.addClass("h24-InputField__warning");t.showError("username",$h24.phrase.GUIPhrase("Homepage-Settings","Username must be over 5 letters long, and must not contain the following characters: ' \" % \\"))}break;case"newPassword":if(n.val().length==0){n.removeClass("h24-InputField__warning");return}if(c(n.val())){n.removeClass("h24-InputField__warning");t.hideError("newPassword")}else{n.addClass("h24-InputField__warning");t.showError("newPassword",$h24.phrase.GUIPhrase("Homepage-Settings","Password must be over 6 letters long, and must not contain the following characters: ' \" % \\"))}break;case"email":if($h24.utils.mailValidation(n.val())){n.removeClass("h24-InputField__warning")}else{n.addClass("h24-InputField__warning")}break;case"confirmChangesPassword":n.removeClass("h24-InputField__warning");t.hideError("confirmChangesPassword");if(a.keyCode==13){e.content.find('[data-action="saveSettings"]').trigger("click.h24-AccountSettings")}break}}).on("blur.h24-AccountSettings",function(){var e=$(this),a=e.data();switch(a.function){case"username":case"newPassword":case"email":that.hideError(a.function);break}});e.content.find('[data-function="newPassword"]').on("change.h24-AccountSettings",function(){var a=$(this),t=e.content.find('[data-function="repeatedNewPassword"]');if(a.val()!=""&&a.val()!=t.val()){t.addClass("h24-InputField__warning")}else{t.removeClass("h24-InputField__warning")}});e.content.find('[data-function="repeatedNewPassword"]').on("keyup.h24-AccountSettings paste.h24-AccountSettings",function(){var a=$(this),t=e.content.find('[data-function="newPassword"]');if(t.val()!=a.val()){a.addClass("h24-InputField__warning")}else{a.removeClass("h24-InputField__warning")}})};return{accountSettings:l}}();
window.rangy=function(){function e(e,t){var n=typeof e[t];return n=="function"||!!(n=="object"&&e[t])||n=="unknown"}function t(e,t){return!!(typeof e[t]=="object"&&e[t])}function n(e,t){return typeof e[t]!="undefined"}function o(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return false;return true}}function r(e){return e&&l(e,u)&&g(e,d)}function i(e){window.alert("Rangy not supported in your browser. Reason: "+e);p.initialized=true;p.supported=false}function a(){if(!p.initialized){var n,o=false,a=false;if(e(document,"createRange")){n=document.createRange();if(l(n,f)&&g(n,c))o=true;n.detach()}if((n=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(n,"createTextRange")){n=n.createTextRange();if(r(n))a=true}!o&&!a&&i("Neither Range nor TextRange are implemented");p.initialized=true;p.features={implementsDomRange:o,implementsTextRange:a};o=C.concat(m);a=0;for(n=o.length;a<n;++a)try{o[a](p)}catch(s){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",s)}}}function s(e){this.name=e;this.supported=this.initialized=false}var c=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],f=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],d=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],u=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],l=o(e),h=o(t),g=o(n),p={version:"1.2.3",initialized:false,supported:true,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:l,areHostObjects:h,areHostProperties:g,isTextRange:r},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};p.fail=i;p.warn=function(e){e="Rangy warning: "+e;if(p.config.alertOnWarn)window.alert(e);else typeof window.console!="undefined"&&typeof window.console.log!="undefined"&&window.console.log(e)};if({}.hasOwnProperty)p.util.extend=function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};else i("hasOwnProperty not supported");var m=[],C=[];p.init=a;p.addInitListener=function(e){p.initialized?e(p):m.push(e)};var R=[];p.addCreateMissingNativeApiListener=function(e){R.push(e)};p.createMissingNativeApi=function(e){e=e||window;a();for(var t=0,n=R.length;t<n;++t)R[t](e)};s.prototype.fail=function(e){this.initialized=true;this.supported=false;throw Error("Module '"+this.name+"' failed to load: "+e)};s.prototype.warn=function(e){p.warn("Module "+this.name+": "+e)};s.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)};p.createModule=function(e,t){var n=new s(e);p.modules[e]=n;C.push(function(e){t(e,n);n.initialized=true;n.supported=true})};p.requireModules=function(e){for(var t=0,n=e.length,o,r;t<n;++t){r=e[t];o=p.modules[r];if(!o||!(o instanceof s))throw Error("Module '"+r+"' not found");if(!o.supported)throw Error("Module '"+r+"' not supported")}};var N=false;h=function(){if(!N){N=true;p.initialized||a()}};if(typeof window=="undefined")i("No window found");else if(typeof document=="undefined")i("No document found");else{e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",h,false);if(e(window,"addEventListener"))window.addEventListener("load",h,false);else e(window,"attachEvent")?window.attachEvent("onload",h):i("Window does not have required addEventListener or attachEvent method");return p}}();rangy.createModule("DomUtil",function(e,t){function n(e){for(var t=0;e=e.previousSibling;)t++;return t}function o(e,t){var n=[],o;for(o=e;o;o=o.parentNode)n.push(o);for(o=t;o;o=o.parentNode)if(g(n,o))return o;return null}function r(e,t,n){for(n=n?e:e.parentNode;n;){e=n.parentNode;if(e===t)return n;n=e}return null}function i(e){e=e.nodeType;return e==3||e==4||e==8}function a(e,t){var n=t.nextSibling,o=t.parentNode;n?o.insertBefore(e,n):o.appendChild(e);return e}function s(e){if(e.nodeType==9)return e;else if(typeof e.ownerDocument!="undefined")return e.ownerDocument;else if(typeof e.document!="undefined")return e.document;else if(e.parentNode)return s(e.parentNode);else throw Error("getDocument: no document found for node")}function c(e){if(!e)return"[No node]";return i(e)?'"'+e.data+'"':e.nodeType==1?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName}function f(e){this._next=this.root=e}function d(e,t){this.node=e;this.offset=t}function u(e){this.code=this[e];this.codeName=e;this.message="DOMException: "+this.codeName}var l=e.util;l.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method");l.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var h=document.createElement("div");l.areHostMethods(h,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation");l.isHostProperty(h,"innerHTML")||t.fail("Element is missing innerHTML property");h=document.createTextNode("test");l.areHostMethods(h,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var g=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return true;return false};f.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t;if(this._current)if(t=e.firstChild)this._next=t;else{for(t=null;e!==this.root&&!(t=e.nextSibling);)e=e.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}};d.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+c(this.node)+":"+this.offset+")]"}};u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};u.prototype.toString=function(){return this.message};e.dom={arrayContains:g,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI=="undefined"||(t=e.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"},parentElement:function(e){e=e.parentNode;return e.nodeType==1?e:null},getNodeIndex:n,getNodeLength:function(e){var t;return i(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:o,isAncestorOf:function(e,t,n){for(t=n?t:t.parentNode;t;)if(t===e)return true;else t=t.parentNode;return false},getClosestAncestorIn:r,isCharacterDataNode:i,insertAfter:a,splitDataNode:function(e,t){var n=e.cloneNode(false);n.deleteData(0,t);e.deleteData(t,e.length-t);a(n,e);return n},getDocument:s,getWindow:function(e){e=s(e);if(typeof e.defaultView!="undefined")return e.defaultView;else if(typeof e.parentWindow!="undefined")return e.parentWindow;else throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if(typeof e.contentWindow!="undefined")return e.contentWindow;else if(typeof e.contentDocument!="undefined")return e.contentDocument.defaultView;else throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if(typeof e.contentDocument!="undefined")return e.contentDocument;else if(typeof e.contentWindow!="undefined")return e.contentWindow.document;else throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return l.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,i,a){var s;if(e==i)return t===a?0:t<a?-1:1;else if(s=r(i,e,true))return t<=n(s)?-1:1;else if(s=r(e,i,true))return n(s)<a?-1:1;else{t=o(e,i);e=e===t?t:r(e,t,true);i=i===t?t:r(i,t,true);if(e===i)throw Error("comparePoints got to case 4 and childA and childB are the same!");else{for(t=t.firstChild;t;){if(t===e)return-1;else if(t===i)return 1;t=t.nextSibling}throw Error("Should not be here!")}}},inspectNode:c,fragmentFromNodeChildren:function(e){for(var t=s(e).createDocumentFragment(),n;n=e.firstChild;)t.appendChild(n);return t},createIterator:function(e){return new f(e)},DomPosition:d};e.DOMException=u});rangy.createModule("DomRange",function(e){function t(e,t){return e.nodeType!=3&&(H.isAncestorOf(e,t.startContainer,true)||H.isAncestorOf(e,t.endContainer,true))}function n(e){return H.getDocument(e.startContainer)}function o(e,t,n){if(t=e._listeners[t])for(var o=0,r=t.length;o<r;++o)t[o].call(e,{target:e,args:n})}function r(e){return new M(e.parentNode,H.getNodeIndex(e))}function i(e){return new M(e.parentNode,H.getNodeIndex(e)+1)}function a(e,t,n){var o=e.nodeType==11?e.firstChild:e;if(H.isCharacterDataNode(t))n==t.length?H.insertAfter(e,t):t.parentNode.insertBefore(e,n==0?t:H.splitDataNode(t,n));else n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]);return o}function s(e){for(var t,o,r=n(e.range).createDocumentFragment();o=e.next();){t=e.isPartiallySelectedSubtree();o=o.cloneNode(!t);if(t){t=e.getSubtreeIterator();o.appendChild(s(t));t.detach(true)}if(o.nodeType==10)throw new B("HIERARCHY_REQUEST_ERR");r.appendChild(o)}return r}function c(e,t,n){var o,r;for(n=n||{stop:false};o=e.next();)if(e.isPartiallySelectedSubtree())if(t(o)===false){n.stop=true;return}else{o=e.getSubtreeIterator();c(o,t,n);o.detach(true);if(n.stop)return}else for(o=H.createIterator(o);r=o.next();)if(t(r)===false){n.stop=true;return}}function f(e){for(var t;e.next();)if(e.isPartiallySelectedSubtree()){t=e.getSubtreeIterator();f(t);t.detach(true)}else e.remove()}function d(e){for(var t,o=n(e.range).createDocumentFragment(),r;t=e.next();){if(e.isPartiallySelectedSubtree()){t=t.cloneNode(false);r=e.getSubtreeIterator();t.appendChild(d(r));r.detach(true)}else e.remove();if(t.nodeType==10)throw new B("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function u(e,t,n){var o=!!(t&&t.length),r,i=!!n;if(o)r=RegExp("^("+t.join("|")+")$");var a=[];c(new h(e,false),function(e){if((!o||r.test(e.nodeType))&&(!i||n(e)))a.push(e)});return a}function l(e){return"["+(typeof e.getName=="undefined"?"Range":e.getName())+"("+H.inspectNode(e.startContainer)+":"+e.startOffset+", "+H.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function h(e,t){this.range=e;this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer;this.so=e.startOffset;this.ec=e.endContainer;this.eo=e.endOffset;var n=e.commonAncestorContainer;if(this.sc===this.ec&&H.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=this.sc===n&&!H.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:H.getClosestAncestorIn(this.sc,n,true);this._last=this.ec===n&&!H.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:H.getClosestAncestorIn(this.ec,n,true)}}}function g(e){this.code=this[e];this.codeName=e;this.message="RangeException: "+this.codeName}function p(e,t,n){this.nodes=u(e,t,n);this._next=this.nodes[0];this._position=0}function m(e){return function(t,n){for(var o,r=n?t:t.parentNode;r;){o=r.nodeType;if(H.arrayContains(e,o))return r;r=r.parentNode}return null}}function C(e,t){if(Y(e,t))throw new g("INVALID_NODE_TYPE_ERR")}function R(e){if(!e.startContainer)throw new B("INVALID_STATE_ERR")}function N(e,t){if(!H.arrayContains(t,e.nodeType))throw new g("INVALID_NODE_TYPE_ERR")}function v(e,t){if(t<0||t>(H.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new B("INDEX_SIZE_ERR")}function E(e,t){if(j(e,true)!==j(t,true))throw new B("WRONG_DOCUMENT_ERR")}function _(e){if(q(e,true))throw new B("NO_MODIFICATION_ALLOWED_ERR")}function S(e,t){if(!e)throw new B(t)}function O(e){return!!e.startContainer&&!!e.endContainer&&!(!H.arrayContains(W,e.startContainer.nodeType)&&!j(e.startContainer,true))&&!(!H.arrayContains(W,e.endContainer.nodeType)&&!j(e.endContainer,true))&&e.startOffset<=(H.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(H.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)}function w(e){R(e);if(!O(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function y(){}function T(e){e.START_TO_START=X;e.START_TO_END=Z;e.END_TO_END=$;e.END_TO_START=J;e.NODE_BEFORE=K;e.NODE_AFTER=et;e.NODE_BEFORE_AND_AFTER=tt;e.NODE_INSIDE=nt}function D(e){T(e);T(e.prototype)}function x(e,t){return function(){w(this);var n=this.startContainer,o=this.startOffset,r=this.commonAncestorContainer,a=new h(this,true);if(n!==r){n=H.getClosestAncestorIn(n,r,true);o=i(n);n=o.node;o=o.offset}c(a,_);a.reset();r=e(a);a.detach();t(this,n,o,n,o);return r}}function A(n,o,a){function s(e,t){return function(n){R(this);N(n,L);N(V(n),W);n=(e?r:i)(n);(t?c:u)(this,n.node,n.offset)}}function c(e,t,n){var r=e.endContainer,i=e.endOffset;if(t!==e.startContainer||n!==e.startOffset){if(V(t)!=V(r)||H.comparePoints(t,n,r,i)==1){r=t;i=n}o(e,t,n,r,i)}}function u(e,t,n){var r=e.startContainer,i=e.startOffset;if(t!==e.endContainer||n!==e.endOffset){if(V(t)!=V(r)||H.comparePoints(t,n,r,i)==-1){r=t;i=n}o(e,r,i,t,n)}}n.prototype=new y;e.util.extend(n.prototype,{setStart:function(e,t){R(this);C(e,true);v(e,t);c(this,e,t)},setEnd:function(e,t){R(this);C(e,true);v(e,t);u(this,e,t)},setStartBefore:s(true,true),setStartAfter:s(false,true),setEndBefore:s(true,false),setEndAfter:s(false,false),collapse:function(e){w(this);e?o(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):o(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){R(this);C(e,true);o(this,e,0,e,H.getNodeLength(e))},selectNode:function(e){R(this);C(e,false);N(e,L);var t=r(e);e=i(e);o(this,t.node,t.offset,e.node,e.offset)},extractContents:x(d,o),deleteContents:x(f,o),canSurroundContents:function(){w(this);_(this.startContainer);_(this.endContainer);var e=new h(this,true),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);e.detach();return!n},detach:function(){a(this)},splitBoundaries:function(){w(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,i=e===n;H.isCharacterDataNode(n)&&r>0&&r<n.length&&H.splitDataNode(n,r);if(H.isCharacterDataNode(e)&&t>0&&t<e.length){e=H.splitDataNode(e,t);if(i){r-=t;n=e}else n==e.parentNode&&r>=H.getNodeIndex(e)&&r++;t=0}o(this,e,t,n,r)},normalizeBoundaries:function(){w(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,r=this.endOffset,i=function(e){var t=e.nextSibling;if(t&&t.nodeType==e.nodeType){n=e;r=e.length;e.appendData(t.data);t.parentNode.removeChild(t)}},a=function(o){var i=o.previousSibling;if(i&&i.nodeType==o.nodeType){e=o;var a=o.length;t=i.length;o.insertData(0,i.data);i.parentNode.removeChild(i);if(e==n){r+=t;n=e}else if(n==o.parentNode){i=H.getNodeIndex(o);if(r==i){n=o;r=a}else r>i&&r--}}},s=true;if(H.isCharacterDataNode(n))n.length==r&&i(n);else{if(r>0)(s=n.childNodes[r-1])&&H.isCharacterDataNode(s)&&i(s);s=!this.collapsed}if(s)if(H.isCharacterDataNode(e))t==0&&a(e);else{if(t<e.childNodes.length)(i=e.childNodes[t])&&H.isCharacterDataNode(i)&&a(i)}else{e=n;t=r}o(this,e,t,n,r)},collapseToPoint:function(e,t){R(this);C(e,true);v(e,t);if(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)o(this,e,t,e,t)}});D(n)}function I(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset;e.commonAncestorContainer=e.collapsed?e.startContainer:H.getCommonAncestor(e.startContainer,e.endContainer)}function P(e,t,n,r,i){var a=e.startContainer!==t||e.startOffset!==n,s=e.endContainer!==r||e.endOffset!==i;e.startContainer=t;e.startOffset=n;e.endContainer=r;e.endOffset=i;I(e);o(e,"boundarychange",{startMoved:a,endMoved:s})}function b(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};I(this)}e.requireModules(["DomUtil"]);var H=e.dom,M=H.DomPosition,B=e.DOMException;h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;if(e){this._next=e!==this._last?e.nextSibling:null;if(H.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec)(e=e.cloneNode(true)).deleteData(this.eo,e.length-this.eo);if(this._current===this.sc)(e=e.cloneNode(true)).deleteData(0,this.so)}}return e},remove:function(){var e=this._current,t,n;if(H.isCharacterDataNode(e)&&(e===this.sc||e===this.ec)){t=e===this.sc?this.so:0;n=e===this.ec?this.eo:e.length;t!=n&&e.deleteData(t,n-t)}else e.parentNode&&e.parentNode.removeChild(e)},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode){e=this.range.cloneRange();e.collapse()}else{e=new b(n(this.range));var t=this._current,o=t,r=0,i=t,a=H.getNodeLength(t);if(H.isAncestorOf(t,this.sc,true)){o=this.sc;r=this.so}if(H.isAncestorOf(t,this.ec,true)){i=this.ec;a=this.eo}P(e,o,r,i,a)}return new h(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach();this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};g.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};g.prototype.toString=function(){return this.message};p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var L=[1,3,4,5,7,8,10],W=[2,9,11],F=[1,3,4,5,7,8,10,11],U=[1,3,4,5,7,8],V=H.getRootContainer,j=m([9,11]),q=m([5,6,10,12]),Y=m([6,10,12]),k=document.createElement("style"),z=false;try{k.innerHTML="<b>x</b>";z=k.firstChild.nodeType==3}catch(Q){}e.features.htmlParsingConforms=z;var G=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],X=0,Z=1,$=2,J=3,K=0,et=1,tt=2,nt=3;y.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){w(this);E(this.startContainer,t.startContainer);var n=e==J||e==X?"start":"end",o=e==Z||e==X?"start":"end";return H.comparePoints(this[n+"Container"],this[n+"Offset"],t[o+"Container"],t[o+"Offset"])},insertNode:function(e){w(this);N(e,F);_(this.startContainer);if(H.isAncestorOf(e,this.startContainer,true))throw new B("HIERARCHY_REQUEST_ERR");this.setStartBefore(a(e,this.startContainer,this.startOffset))},cloneContents:function(){w(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();else{if(this.startContainer===this.endContainer&&H.isCharacterDataNode(this.startContainer)){e=this.startContainer.cloneNode(true);e.data=e.data.slice(this.startOffset,this.endOffset);t=n(this).createDocumentFragment();t.appendChild(e);return t}else{t=new h(this,true);e=s(t);t.detach()}return e}},canSurroundContents:function(){w(this);_(this.startContainer);_(this.endContainer);var e=new h(this,true),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);e.detach();return!n},surroundContents:function(e){N(e,U);if(!this.canSurroundContents())throw new g("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);a(e,this.startContainer,this.startOffset);e.appendChild(t);this.selectNode(e)},cloneRange:function(){w(this);for(var e=new b(n(this)),t=G.length,o;t--;){o=G[t];e[o]=this[o]}return e},toString:function(){w(this);var e=this.startContainer;if(e===this.endContainer&&H.isCharacterDataNode(e))return e.nodeType==3||e.nodeType==4?e.data.slice(this.startOffset,this.endOffset):"";else{var t=[];e=new h(this,true);c(e,function(e){if(e.nodeType==3||e.nodeType==4)t.push(e.data)});e.detach();return t.join("")}},compareNode:function(e){w(this);var t=e.parentNode,n=H.getNodeIndex(e);if(!t)throw new B("NOT_FOUND_ERR");e=this.comparePoint(t,n);t=this.comparePoint(t,n+1);return e<0?t>0?tt:K:t>0?et:nt},comparePoint:function(e,t){w(this);S(e,"HIERARCHY_REQUEST_ERR");E(e,this.startContainer);if(H.comparePoints(e,t,this.startContainer,this.startOffset)<0)return-1;else if(H.comparePoints(e,t,this.endContainer,this.endOffset)>0)return 1;return 0},createContextualFragment:z?function(e){var t=this.startContainer,n=H.getDocument(t);if(!t)throw new B("INVALID_STATE_ERR");var o=null;if(t.nodeType==1)o=t;else if(H.isCharacterDataNode(t))o=H.parentElement(t);o=o===null||o.nodeName=="HTML"&&H.isHtmlNamespace(H.getDocument(o).documentElement)&&H.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(false);o.innerHTML=e;return H.fragmentFromNodeChildren(o)}:function(e){R(this);var t=n(this).createElement("body");t.innerHTML=e;return H.fragmentFromNodeChildren(t)},toHtml:function(){w(this);var e=n(this).createElement("div");e.appendChild(this.cloneContents());return e.innerHTML},intersectsNode:function(e,t){w(this);S(e,"NOT_FOUND_ERR");if(H.getDocument(e)!==n(this))return false;var o=e.parentNode,r=H.getNodeIndex(e);S(o,"NOT_FOUND_ERR");var i=H.comparePoints(o,r,this.endContainer,this.endOffset);o=H.comparePoints(o,r+1,this.startContainer,this.startOffset);return t?i<=0&&o>=0:i<0&&o>0},isPointInRange:function(e,t){w(this);S(e,"HIERARCHY_REQUEST_ERR");E(e,this.startContainer);return H.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&H.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){w(this);if(n(e)!=n(this))throw new B("WRONG_DOCUMENT_ERR");var o=H.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),r=H.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?o<=0&&r>=0:o<0&&r>0},intersection:function(e){if(this.intersectsRange(e)){var t=H.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=H.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();t==-1&&o.setStart(e.startContainer,e.startOffset);n==1&&o.setEnd(e.endContainer,e.endOffset);return o}return null},union:function(e){if(this.intersectsRange(e,true)){var t=this.cloneRange();H.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset);H.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1&&t.setEnd(e.endContainer,e.endOffset);return t}else throw new g("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,false):this.compareNode(e)==nt},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,H.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);e=n.pop();t.setEnd(e,e.length);e=this.containsRange(t);t.detach();return e}else return this.containsNodeContents(e)},createNodeIterator:function(e,t){w(this);return new p(this,e,t)},getNodes:function(e,t){w(this);return u(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){R(this);this.setEndBefore(e);this.collapse(false)},collapseAfter:function(e){R(this);this.setStartAfter(e);this.collapse(true)},getName:function(){return"DomRange"},equals:function(e){return b.rangesEqual(this,e)},isValid:function(){return O(this)},inspect:function(){return l(this)}};A(b,P,function(e){R(e);e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;e.collapsed=e.commonAncestorContainer=null;o(e,"detach",null);e._listeners=null});e.rangePrototype=y.prototype;b.rangeProperties=G;b.RangeIterator=h;b.copyComparisonConstants=D;b.createPrototypeRange=A;b.inspect=l;b.getRangeDocument=n;b.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset};e.DomRange=b;e.RangeException=g});rangy.createModule("WrappedRange",function(e){function t(e,t,n,o){var a=e.duplicate();a.collapse(n);var s=a.parentElement();r.isAncestorOf(t,s,true)||(s=t);if(!s.canHaveHTML)return new i(s.parentNode,r.getNodeIndex(s));t=r.getDocument(s).createElement("span");var c,f=n?"StartToStart":"StartToEnd";do{s.insertBefore(t,t.previousSibling);a.moveToElementText(t)}while((c=a.compareEndPoints(f,e))>0&&t.previousSibling);f=t.nextSibling;if(c==-1&&f&&r.isCharacterDataNode(f)){a.setEndPoint(n?"EndToStart":"EndToEnd",e);if(/[\r\n]/.test(f.data)){s=a.duplicate();n=s.text.replace(/\r\n/g,"\r").length;for(n=s.moveStart("character",n);s.compareEndPoints("StartToEnd",s)==-1;){n++;s.moveStart("character",1)}}else n=a.text.length;s=new i(f,n)}else{f=(o||!n)&&t.previousSibling;s=(n=(o||n)&&t.nextSibling)&&r.isCharacterDataNode(n)?new i(n,0):f&&r.isCharacterDataNode(f)?new i(f,f.length):new i(s,r.getNodeIndex(t))}t.parentNode.removeChild(t);return s}function n(e,t){var n,o,i=e.offset,a=r.getDocument(e.node),s=a.body.createTextRange(),c=r.isCharacterDataNode(e.node);if(c){n=e.node;o=n.parentNode}else{n=e.node.childNodes;n=i<n.length?n[i]:null;o=e.node}a=a.createElement("span");a.innerHTML="&#feff;";n?o.insertBefore(a,n):o.appendChild(a);s.moveToElementText(a);s.collapse(!t);o.removeChild(a);if(c)s[t?"moveStart":"moveEnd"]("character",i);return s}e.requireModules(["DomUtil","DomRange"]);var o,r=e.dom,i=r.DomPosition,a=e.DomRange;if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange)){!function(){function t(e){for(var t=i.length,n;t--;){n=i[t];e[n]=e.nativeRange[n]}}var n,i=a.rangeProperties,s,c;o=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e;t(this)};a.createPrototypeRange(o,function(e,t,n,o,r){var i=e.endContainer!==o||e.endOffset!=r;if(e.startContainer!==t||e.startOffset!=n||i){e.setEnd(o,r);e.setStart(t,n)}},function(e){e.nativeRange.detach();e.detached=true;for(var t=i.length,n;t--;){n=i[t];e[n]=null}});n=o.prototype;n.selectNode=function(e){this.nativeRange.selectNode(e);t(this)};n.deleteContents=function(){this.nativeRange.deleteContents();t(this)};n.extractContents=function(){var e=this.nativeRange.extractContents();t(this);return e};n.cloneContents=function(){return this.nativeRange.cloneContents()};n.surroundContents=function(e){this.nativeRange.surroundContents(e);t(this)};n.collapse=function(e){this.nativeRange.collapse(e);t(this)};n.cloneRange=function(){return new o(this.nativeRange.cloneRange())};n.refresh=function(){t(this)};n.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");r.getBody(document).appendChild(f);var d=document.createRange();d.setStart(f,0);d.setEnd(f,0);try{d.setStart(f,1);s=true;n.setStart=function(e,n){this.nativeRange.setStart(e,n);t(this)};n.setEnd=function(e,n){this.nativeRange.setEnd(e,n);t(this)};c=function(e){return function(n){this.nativeRange[e](n);t(this)}}}catch(u){s=false;n.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(o){this.nativeRange.setEnd(e,n);this.nativeRange.setStart(e,n)}t(this)};n.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(o){this.nativeRange.setStart(e,n);this.nativeRange.setEnd(e,n)}t(this)};c=function(e,n){return function(o){try{this.nativeRange[e](o)}catch(r){this.nativeRange[n](o);this.nativeRange[e](o)}t(this)}}}n.setStartBefore=c("setStartBefore","setEndBefore");n.setStartAfter=c("setStartAfter","setEndAfter");n.setEndBefore=c("setEndBefore","setStartBefore");n.setEndAfter=c("setEndAfter","setStartAfter");d.selectNodeContents(f);n.selectNodeContents=d.startContainer==f&&d.endContainer==f&&d.startOffset==0&&d.endOffset==f.length?function(e){this.nativeRange.selectNodeContents(e);t(this)}:function(e){this.setStart(e,0);this.setEnd(e,a.getEndOffset(e))};d.selectNodeContents(f);d.setEnd(f,3);s=document.createRange();s.selectNodeContents(f);s.setEnd(f,4);s.setStart(f,2);n.compareBoundaryPoints=d.compareBoundaryPoints(d.START_TO_END,s)==-1&d.compareBoundaryPoints(d.END_TO_START,s)==1?function(e,t){t=t.nativeRange||t;if(e==t.START_TO_END)e=t.END_TO_START;else if(e==t.END_TO_START)e=t.START_TO_END;return this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};if(e.util.isHostMethod(d,"createContextualFragment"))n.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)};r.getBody(document).removeChild(f);d.detach();s.detach()}();e.createNativeRange=function(e){e=e||document;return e.createRange()}}else if(e.features.implementsTextRange){o=function(e){this.textRange=e;this.refresh()};o.prototype=new a(document);o.prototype.refresh=function(){var e,n,o=this.textRange;e=o.parentElement();var i=o.duplicate();i.collapse(true);n=i.parentElement();i=o.duplicate();i.collapse(false);o=i.parentElement();n=n==o?n:r.getCommonAncestor(n,o);n=n==e?n:r.getCommonAncestor(e,n);if(this.textRange.compareEndPoints("StartToEnd",this.textRange)==0)n=e=t(this.textRange,n,true,true);else{e=t(this.textRange,n,true,false);n=t(this.textRange,n,false,false)}this.setStart(e.node,e.offset);this.setEnd(n.node,n.offset)};a.copyComparisonConstants(o);var s=function(){return this}();if(typeof s.Range=="undefined")s.Range=o;e.createNativeRange=function(e){e=e||document;return e.body.createTextRange()}}if(e.features.implementsTextRange)o.rangeToTextRange=function(e){if(e.collapsed)return n(new i(e.startContainer,e.startOffset),true);else{var t=n(new i(e.startContainer,e.startOffset),true),o=n(new i(e.endContainer,e.endOffset),false);e=r.getDocument(e.startContainer).body.createTextRange();e.setEndPoint("StartToStart",t);e.setEndPoint("EndToEnd",o);return e}};o.prototype.getName=function(){return"WrappedRange"};e.WrappedRange=o;e.createRange=function(t){t=t||document;return new o(e.createNativeRange(t))};e.createRangyRange=function(e){e=e||document;return new a(e)};e.createIframeRange=function(t){return e.createRange(r.getIframeDocument(t))};e.createIframeRangyRange=function(t){return e.createRangyRange(r.getIframeDocument(t))};e.addCreateMissingNativeApiListener(function(t){t=t.document;if(typeof t.createRange=="undefined")t.createRange=function(){return e.createRange(this)};t=t=null})});rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function o(e){return(e||window).document.selection}function r(e,t,n){var o=n?"end":"start";n=n?"start":"end";e.anchorNode=t[o+"Container"];e.anchorOffset=t[o+"Offset"];e.focusNode=t[n+"Container"];e.focusOffset=t[n+"Offset"]}function i(e){e.anchorNode=e.focusNode=null;e.anchorOffset=e.focusOffset=0;e.rangeCount=0;e.isCollapsed=true;e._ranges.length=0}function a(t){var n;if(t instanceof C){n=t._selectionNativeRange;if(!n){n=e.createNativeRange(p.getDocument(t.startContainer));n.setEnd(t.endContainer,t.endOffset);n.setStart(t.startContainer,t.startOffset);t._selectionNativeRange=n;t.attachListener("detach",function(){this._selectionNativeRange=null})}}else if(t instanceof R)n=t.nativeRange;else if(e.features.implementsDomRange&&t instanceof p.getWindow(t.startContainer).Range)n=t;return n}function s(e){var t=e.getNodes(),n;e:if(!t.length||t[0].nodeType!=1)n=false;else{n=1;for(var o=t.length;n<o;++n)if(!p.isAncestorOf(t[0],t[n])){n=false;break e}n=true}if(!n)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function c(e,t){var n=new R(t);e._ranges=[n];r(e,n,false);e.rangeCount=1;e.isCollapsed=n.collapsed}function f(t){t._ranges.length=0;if(t.docSelection.type=="None")i(t);else{var n=t.docSelection.createRange();if(n&&typeof n.text!="undefined")c(t,n);else{t.rangeCount=n.length;for(var o,a=p.getDocument(n.item(0)),s=0;s<t.rangeCount;++s){o=e.createRange(a);
o.selectNode(n.item(s));t._ranges.push(o)}t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed;r(t,t._ranges[t.rangeCount-1],false)}}}function d(e,t){var n=e.docSelection.createRange(),o=s(t),r=p.getDocument(n.item(0));r=p.getBody(r).createControlRange();for(var i=0,a=n.length;i<a;++i)r.add(n.item(i));try{r.add(o)}catch(c){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select();f(e)}function u(e,t,n){this.nativeSelection=e;this.docSelection=t;this._ranges=[];this.win=n;this.refresh()}function l(e,t){var n=p.getDocument(t[0].startContainer);n=p.getBody(n).createControlRange();for(var o=0,r;o<rangeCount;++o){r=s(t[o]);try{n.add(r)}catch(i){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}n.select();f(e)}function h(e,t){if(e.anchorNode&&p.getDocument(e.anchorNode)!==p.getDocument(t))throw new N("WRONG_DOCUMENT_ERR")}function g(e){var t=[],n=new v(e.anchorNode,e.anchorOffset),o=new v(e.focusNode,e.focusOffset),r=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined")for(var i=0,a=e.rangeCount;i<a;++i)t[i]=C.inspect(e.getRangeAt(i));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]);e.config.checkSelectionRanges=true;var p=e.dom,m=e.util,C=e.DomRange,R=e.WrappedRange,N=e.DOMException,v=p.DomPosition,E,_,S=e.util.isHostMethod(window,"getSelection"),O=e.util.isHostObject(document,"selection"),w=O&&(!S||e.config.preferTextRange);if(w){E=o;e.isSelectionValid=function(e){e=(e||window).document;var t=e.selection;return t.type!="None"||p.getDocument(t.createRange().parentElement())==e}}else if(S){E=n;e.isSelectionValid=function(){return true}}else t.fail("Neither document.selection or window.getSelection() detected.");e.getNativeSelection=E;S=E();var y=e.createNativeRange(document),T=p.getBody(document),D=m.areHostObjects(S,m.areHostProperties(S,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=D;var x=m.isHostMethod(S,"extend");e.features.selectionHasExtend=x;var A=typeof S.rangeCount=="number";e.features.selectionHasRangeCount=A;var I=false,P=true;m.areHostMethods(S,["addRange","getRangeAt","removeAllRanges"])&&typeof S.rangeCount=="number"&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0;e.style.position="absolute";e.style.left="-10000px";T.appendChild(e);var t=p.getIframeDocument(e);t.open();t.write("<html><head></head><body>12</body></html>");t.close();var n=p.getIframeWindow(e).getSelection(),o=t.documentElement.lastChild.firstChild;t=t.createRange();t.setStart(o,1);t.collapse(true);n.addRange(t);P=n.rangeCount==1;n.removeAllRanges();var r=t.cloneRange();t.setStart(o,0);r.setEnd(o,2);n.addRange(t);n.addRange(r);I=n.rangeCount==2;t.detach();r.detach();T.removeChild(e)}();e.features.selectionSupportsMultipleRanges=I;e.features.collapsedNonEditableSelectionsSupported=P;var b=false,H;if(T&&m.isHostMethod(T,"createControlRange")){H=T.createControlRange();if(m.areHostProperties(H,["item","add"]))b=true}e.features.implementsControlRange=b;_=D?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:false};var M;if(m.isHostMethod(S,"getRangeAt"))M=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}};else if(D)M=function(t){var n=p.getDocument(t.anchorNode);n=e.createRange(n);n.setStart(t.anchorNode,t.anchorOffset);n.setEnd(t.focusNode,t.focusOffset);if(n.collapsed!==this.isCollapsed){n.setStart(t.focusNode,t.focusOffset);n.setEnd(t.anchorNode,t.anchorOffset)}return n};e.getSelection=function(e){e=e||window;var t=e._rangySelection,n=E(e),r=O?o(e):null;if(t){t.nativeSelection=n;t.docSelection=r;t.refresh(e)}else{t=new u(n,r,e);e._rangySelection=t}return t};e.getIframeSelection=function(t){return e.getSelection(p.getIframeWindow(t))};H=u.prototype;if(!w&&D&&m.areHostMethods(S,["removeAllRanges","addRange"])){H.removeAllRanges=function(){this.nativeSelection.removeAllRanges();i(this)};var B=function(t,n){var o=C.getRangeDocument(n);o=e.createRange(o);o.collapseToPoint(n.endContainer,n.endOffset);t.nativeSelection.addRange(a(o));t.nativeSelection.extend(n.startContainer,n.startOffset);t.refresh()};H.addRange=A?function(t,n){if(b&&O&&this.docSelection.type=="Control")d(this,t);else if(n&&x)B(this,t);else{var o;if(I)o=this.rangeCount;else{this.removeAllRanges();o=0}this.nativeSelection.addRange(a(t));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==o+1){if(e.config.checkSelectionRanges)if((o=M(this.nativeSelection,this.rangeCount-1))&&!C.rangesEqual(o,t))t=new R(o);this._ranges[this.rangeCount-1]=t;r(this,t,F(this.nativeSelection));this.isCollapsed=_(this)}else this.refresh()}}:function(e,t){if(t&&x)B(this,e);else{this.nativeSelection.addRange(a(e));this.refresh()}};H.setRanges=function(e){if(b&&e.length>1)l(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else if(m.isHostMethod(S,"empty")&&m.isHostMethod(y,"select")&&b&&w){H.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode)e=p.getDocument(this.anchorNode);else if(this.docSelection.type=="Control"){var t=this.docSelection.createRange();if(t.length)e=p.getDocument(t.item(0)).body.createTextRange()}if(e){e.body.createTextRange().select();this.docSelection.empty()}}}catch(n){}i(this)};H.addRange=function(e){if(this.docSelection.type=="Control")d(this,e);else{R.rangeToTextRange(e).select();this._ranges[0]=e;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;r(this,e,false)}};H.setRanges=function(e){this.removeAllRanges();var t=e.length;if(t>1)l(this,e);else t&&this.addRange(e[0])}}else{t.fail("No means of selecting a Range or TextRange was found");return false}H.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new N("INDEX_SIZE_ERR");else return this._ranges[e]};var L;if(w)L=function(t){var n;if(e.isSelectionValid(t.win))n=t.docSelection.createRange();else{n=p.getBody(t.win.document).createTextRange();n.collapse(true)}if(t.docSelection.type=="Control")f(t);else n&&typeof n.text!="undefined"?c(t,n):i(t)};else if(m.isHostMethod(S,"getRangeAt")&&typeof S.rangeCount=="number")L=function(t){if(b&&O&&t.docSelection.type=="Control")f(t);else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,o=t.rangeCount;n<o;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));r(t,t._ranges[t.rangeCount-1],F(t.nativeSelection));t.isCollapsed=_(t)}else i(t)}};else if(D&&typeof S.isCollapsed=="boolean"&&typeof y.collapsed=="boolean"&&e.features.implementsDomRange)L=function(e){var t;t=e.nativeSelection;if(t.anchorNode){t=M(t,0);e._ranges=[t];e.rangeCount=1;t=e.nativeSelection;e.anchorNode=t.anchorNode;e.anchorOffset=t.anchorOffset;e.focusNode=t.focusNode;e.focusOffset=t.focusOffset;e.isCollapsed=_(e)}else i(e)};else{t.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}H.refresh=function(e){var t=e?this._ranges.slice(0):null;L(this);if(e){e=t.length;if(e!=this._ranges.length)return false;for(;e--;)if(!C.rangesEqual(t[e],this._ranges[e]))return false;return true}};var W=function(e,t){var n=e.getAllRanges(),o=false;e.removeAllRanges();for(var r=0,a=n.length;r<a;++r)if(o||t!==n[r])e.addRange(n[r]);else o=true;e.rangeCount||i(e)};H.removeRange=b?function(e){if(this.docSelection.type=="Control"){var t=this.docSelection.createRange();e=s(e);var n=p.getDocument(t.item(0));n=p.getBody(n).createControlRange();for(var o,r=false,i=0,a=t.length;i<a;++i){o=t.item(i);if(o!==e||r)n.add(t.item(i));else r=true}n.select();f(this)}else W(this,e)}:function(e){W(this,e)};var F;if(!w&&D&&e.features.implementsDomRange){F=function(e){var t=false;if(e.anchorNode)t=p.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1;return t};H.isBackwards=function(){return F(this)}}else F=H.isBackwards=function(){return false};H.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")};H.collapse=function(t,n){h(this,t);var o=e.createRange(p.getDocument(t));o.collapseToPoint(t,n);this.removeAllRanges();this.addRange(o);this.isCollapsed=true};H.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else throw new N("INVALID_STATE_ERR")};H.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else throw new N("INVALID_STATE_ERR")};H.selectAllChildren=function(t){h(this,t);var n=e.createRange(p.getDocument(t));n.selectNodeContents(t);this.removeAllRanges();this.addRange(n)};H.deleteFromDocument=function(){if(b&&O&&this.docSelection.type=="Control"){for(var e=this.docSelection.createRange(),t;e.length;){t=e.item(0);e.remove(t);t.parentNode.removeChild(t)}this.refresh()}else if(this.rangeCount){e=this.getAllRanges();this.removeAllRanges();t=0;for(var n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}};H.getAllRanges=function(){return this._ranges.slice(0)};H.setSingleRange=function(e){this.setRanges([e])};H.containsNode=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(this._ranges[n].containsNode(e,t))return true;return false};H.toHtml=function(){var e="";if(this.rangeCount){e=C.getRangeDocument(this._ranges[0]).createElement("div");for(var t=0,n=this._ranges.length;t<n;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e};H.getName=function(){return"WrappedSelection"};H.inspect=function(){return g(this)};H.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};u.inspect=g;e.Selection=u;e.selectionPrototype=H;e.addCreateMissingNativeApiListener(function(t){if(typeof t.getSelection=="undefined")t.getSelection=function(){return e.getSelection(this)};t=null})});
!function(){var e=0,t=[],i={},n={},r={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},a=/[<>&\"\']/g,o,s=window.setTimeout,f={},l;function u(){this.returnValue=false}function c(){this.cancelBubble=true}!function(e){var t=e.split(/,/),i,r,a;for(i=0;i<t.length;i+=2){a=t[i+1].split(/ /);for(r=0;r<a.length;r++){n[a[r]]=t[i]}}}("application/msword,doc dot,"+"application/pdf,pdf,"+"application/pgp-signature,pgp,"+"application/postscript,ps ai eps,"+"application/rtf,rtf,"+"application/vnd.ms-excel,xls xlb,"+"application/vnd.ms-powerpoint,ppt pps pot,"+"application/zip,zip,"+"application/x-shockwave-flash,swf swfl,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,"+"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,"+"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,"+"application/vnd.openxmlformats-officedocument.presentationml.template,potx,"+"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,"+"application/x-javascript,js,"+"application/json,json,"+"audio/mpeg,mpga mpega mp2 mp3,"+"audio/x-wav,wav,"+"audio/mp4,m4a,"+"image/bmp,bmp,"+"image/gif,gif,"+"image/jpeg,jpeg jpg jpe,"+"image/photoshop,psd,"+"image/png,png,"+"image/svg+xml,svg svgz,"+"image/tiff,tiff tif,"+"text/plain,asc txt text diff log,"+"text/html,htm html xhtml,"+"text/css,css,"+"text/csv,csv,"+"text/rtf,rtf,"+"video/mpeg,mpeg mpg mpe,"+"video/quicktime,qt mov,"+"video/mp4,mp4,"+"video/x-m4v,m4v,"+"video/x-flv,flv,"+"video/x-ms-wmv,wmv,"+"video/avi,avi,"+"video/webm,webm,"+"video/vnd.rn-realvideo,rv,"+"application/vnd.oasis.opendocument.formula-template,otf,"+"application/octet-stream,exe");var p={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:n,ua:function(){var e=navigator,t=e.userAgent,i=e.vendor,n,r,a;n=/WebKit/.test(t);a=n&&i.indexOf("Apple")!==-1;r=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,ie:!n&&!r&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),webkit:n,gecko:!n&&/Gecko/.test(t),safari:a,opera:!!r}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){p.each(arguments,function(t,i){if(i>0){p.each(t,function(t,i){e[i]=t})}});return e},cleanName:function(e){var t,i;i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<i.length;t+=2){e=e.replace(i[t],i[t+1])}e=e.replace(/\s+/g,"_");e=e.replace(/[^a-z0-9_\-\.]+/gi,"");return e},addRuntime:function(e,i){i.name=e;t[e]=i;t.push(i);return i},guid:function(){var t=(new Date).getTime().toString(32),i;for(i=0;i<5;i++){t+=Math.floor(Math.random()*65535).toString(32)}return(p.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var i="";p.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)});if(i){e+=(e.indexOf("?")>0?"&":"?")+i}return e},each:function(e,t){var i,n,r;if(e){i=e.length;if(i===o){for(n in e){if(e.hasOwnProperty(n)){if(t(e[n],n)===false){return}}}}else{for(r=0;r<i;r++){if(t(e[r],r)===false){return}}}}},formatSize:function(e){if(e===o||/\D/.test(e)){return p.translate("N/A")}if(e>1073741824){return Math.round(e/1073741824,1)+" GB"}if(e>1048576){return Math.round(e/1048576,1)+" MB"}if(e>1024){return Math.round(e/1024,1)+" KB"}return e+" b"},getPos:function(e,t){var i=0,n=0,r,a=document,o,s;e=e;t=t||a.body;function f(e){var t,i,n=0,r=0;if(e){i=e.getBoundingClientRect();t=a.compatMode==="CSS1Compat"?a.documentElement:a.body;n=i.left+t.scrollLeft;r=i.top+t.scrollTop}return{x:n,y:r}}if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&a.documentMode<8){o=f(e);s=f(t);return{x:o.x-s.x,y:o.y-s.y}}r=e;while(r&&r!=t&&r.nodeType){i+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}r=e.parentNode;while(r&&r!=t&&r.nodeType){i-=r.scrollLeft||0;n-=r.scrollTop||0;r=r.parentNode}return{x:i,y:n}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;if(typeof e=="string"){e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,""));t=e[2];e=+e[1];if(t=="g"){e*=1073741824}if(t=="m"){e*=1048576}if(t=="k"){e*=1024}}return e},xmlEncode:function(e){return e?(""+e).replace(a,function(e){return r[e]?"&"+r[e]+";":e}):e},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++){i[t]=e[t]}return i},inArray:function(e,t){if(t){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(t,e)}for(var i=0,n=t.length;i<n;i++){if(t[i]===e){return i}}}return-1},addI18n:function(e){return p.extend(i,e)},translate:function(e){return i[e]||e},isEmptyObj:function(e){if(e===o)return true;for(var t in e){return false}return true},hasClass:function(e,t){var i;if(e.className==""){return false}i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return i.test(e.className)},addClass:function(e,t){if(!p.hasClass(e,t)){e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t}},removeClass:function(e,t){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return t===" "&&i===" "?" ":""})},getStyle:function(e,t){if(e.currentStyle){return e.currentStyle[t]}else if(window.getComputedStyle){return window.getComputedStyle(e,null)[t]}},addEvent:function(e,t,i){var n,r,a,s;s=arguments[3];t=t.toLowerCase();if(l===o){l="Plupload_"+p.guid()}if(e.addEventListener){n=i;e.addEventListener(t,n,false)}else if(e.attachEvent){n=function(){var e=window.event;if(!e.target){e.target=e.srcElement}e.preventDefault=u;e.stopPropagation=c;i(e)};e.attachEvent("on"+t,n)}if(e[l]===o){e[l]=p.guid()}if(!f.hasOwnProperty(e[l])){f[e[l]]={}}r=f[e[l]];if(!r.hasOwnProperty(t)){r[t]=[]}r[t].push({func:n,orig:i,key:s})},removeEvent:function(e,t){var i,n,r;if(typeof arguments[2]=="function"){n=arguments[2]}else{r=arguments[2]}t=t.toLowerCase();if(e[l]&&f[e[l]]&&f[e[l]][t]){i=f[e[l]][t]}else{return}for(var a=i.length-1;a>=0;a--){if(i[a].key===r||i[a].orig===n){if(e.removeEventListener){e.removeEventListener(t,i[a].func,false)}else if(e.detachEvent){e.detachEvent("on"+t,i[a].func)}i[a].orig=null;i[a].func=null;i.splice(a,1);if(n!==o){break}}}if(!i.length){delete f[e[l]][t]}if(p.isEmptyObj(f[e[l]])){delete f[e[l]];try{delete e[l]}catch(s){e[l]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[l]===o||!e[l]){return}p.each(f[e[l]],function(i,n){p.removeEvent(e,n,t)})}};p.Uploader=function(e){var i={},n,r=[],a,f=false;n=new p.QueueProgress;e=p.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},e);function l(){var e,t=0,i;if(this.state==p.STARTED){for(i=0;i<r.length;i++){if(!e&&r[i].status==p.QUEUED){e=r[i];e.status=p.UPLOADING;if(this.trigger("BeforeUpload",e)){this.trigger("UploadFile",e)}}else{t++}}if(t==r.length){this.stop();this.trigger("UploadComplete",r)}}}function u(){var e,t;n.reset();for(e=0;e<r.length;e++){t=r[e];if(t.size!==o){n.size+=t.size;n.loaded+=t.loaded}else{n.size=o}if(t.status==p.DONE){n.uploaded++}else if(t.status==p.FAILED){n.failed++}else{n.queued++}}if(n.size===o){n.percent=r.length>0?Math.ceil(n.uploaded/r.length*100):0}else{n.bytesPerSec=Math.ceil(n.loaded/((+new Date-a||1)/1e3));n.percent=n.size>0?Math.ceil(n.loaded/n.size*100):0}}p.extend(this,{state:p.STOPPED,runtime:"",features:{},files:r,settings:e,total:n,id:p.guid(),init:function(){var i=this,n,f,c,d=0,g;if(typeof e.preinit=="function"){e.preinit(i)}else{p.each(e.preinit,function(e,t){i.bind(t,e)})}e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(e.url)){e.url=e.page_url+e.url}e.chunk_size=p.parseSize(e.chunk_size);e.max_file_size=p.parseSize(e.max_file_size);i.bind("FilesAdded",function(t,n,a){var f,l,u=0,c,d=e.filters;if(d&&d.length){c=[];p.each(d,function(e){p.each(e.extensions.split(/,/),function(e){if(/^\s*\*\s*$/.test(e)){c.push("\\.*")}else{c.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))}})});c=new RegExp(c.join("|")+"$","i")}for(f=0;f<n.length;f++){l=n[f];l.loaded=0;l.percent=0;l.status=p.QUEUED;if(typeof a=="object"){l.native_file=a[f]}if(c&&!c.test(l.name)){t.trigger("Error",{code:p.FILE_EXTENSION_ERROR,message:p.translate("File extension error."),file:l});continue}if(l.size!==o&&l.size>e.max_file_size){t.trigger("Error",{code:p.FILE_SIZE_ERROR,message:p.translate("File size error."),file:l});continue}r.push(l);u++}if(u){s(function(){i.trigger("QueueChanged");i.refresh()},1)}else{return false}});if(e.unique_names){i.bind("UploadFile",function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";if(i){n=i[1]}t.target_name=t.id+"."+n})}i.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100;u()});i.bind("StateChanged",function(e){if(e.state==p.STARTED){a=+new Date}else if(e.state==p.STOPPED){for(n=e.files.length-1;n>=0;n--){if(e.files[n].status==p.UPLOADING){e.files[n].status=p.QUEUED;u()}}}});i.bind("QueueChanged",u);i.bind("Error",function(e,t){if(t.file){t.file.status=p.FAILED;u();if(e.state==p.STARTED){s(function(){l.call(i)},1)}}});i.bind("FileUploaded",function(e,t){t.status=p.DONE;t.loaded=t.size;e.trigger("UploadProgress",t);s(function(){l.call(i)},1)});if(e.runtimes){f=[];g=e.runtimes.split(/\s?,\s?/);for(n=0;n<g.length;n++){if(t[g[n]]){f.push(t[g[n]])}}}else{f=t}function m(){var e=f[d++],t,n,r;if(e){t=e.getFeatures();n=i.settings.required_features;if(n){n=n.split(",");for(r=0;r<n.length;r++){if(!t[n[r]]){m();return}}}e.init(i,function(n){if(n&&n.success){i.features=t;i.runtime=e.name;i.trigger("Init",{runtime:e.name});i.trigger("PostInit");i.refresh()}else{m()}})}else{i.trigger("Error",{code:p.INIT_ERROR,message:p.translate("Init error.")})}}m();if(typeof e.init=="function"){e.init(i)}else{p.each(e.init,function(e,t){i.bind(t,e)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(r.length&&this.state!=p.STARTED){this.state=p.STARTED;this.trigger("StateChanged");l.call(this)}},stop:function(){if(this.state!=p.STOPPED){this.state=p.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){f=arguments[0]!==o?arguments[0]:true;this.trigger("DisableBrowse",f)},getFile:function(e){var t;for(t=r.length-1;t>=0;t--){if(r[t].id===e){return r[t]}}},removeFile:function(e){var t;for(t=r.length-1;t>=0;t--){if(r[t].id===e.id){return this.splice(t,1)[0]}}},splice:function(e,t){var i;i=r.splice(e===o?0:e,t===o?r.length:t);this.trigger("FilesRemoved",i);this.trigger("QueueChanged",true);return i},trigger:function(e){var t=i[e.toLowerCase()],n,r;if(t){r=Array.prototype.slice.call(arguments);r[0]=this;for(n=0;n<t.length;n++){if(t[n].func.apply(t[n].scope,r)===false){return false}}}return true},hasEventListener:function(e){return!!i[e.toLowerCase()]},bind:function(e,t,n){var r;e=e.toLowerCase();r=i[e]||[];r.push({func:t,scope:n||this});i[e]=r},unbind:function(e){e=e.toLowerCase();var t=i[e],n,r=arguments[1];if(t){if(r!==o){for(n=t.length-1;n>=0;n--){if(t[n].func===r){t.splice(n,1);break}}}else{t=[]}if(!t.length){delete i[e]}}},unbindAll:function(){var e=this;p.each(i,function(t,i){e.unbind(i)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};p.File=function(e,t,i){var n=this;n.id=e;n.name=t;n.size=i;n.loaded=0;n.percent=0;n.status=0};p.Runtime=function(){this.getFeatures=function(){};this.init=function(e,t){}};p.QueueProgress=function(){var e=this;e.size=0;e.loaded=0;e.uploaded=0;e.failed=0;e.queued=0;e.percent=0;e.bytesPerSec=0;e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};p.runtimes={};window.plupload=p}();
!function(e,t,i,s){var n={},a={};function r(){var e;try{e=navigator.plugins["Shockwave Flash"];e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){e="0.0"}}e=e.match(/\d+/g);return parseFloat(e[0]+"."+e[1])}i.flash={trigger:function(e,t,i){setTimeout(function(){var s=n[e],a,r;if(s){s.trigger("Flash:"+t,i)}},0)}};i.runtimes.Flash=i.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,progress:true,multipart:true,multi_selection:true}},init:function(e,s){var l,o,d=0,u=t.body;if(r()<10){s({success:false});return}a[e.id]=false;n[e.id]=e;l=t.getElementById(e.settings.browse_button);o=t.createElement("div");o.id=e.id+"_flash_container";i.extend(o.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});o.className="plupload flash";if(e.settings.container){u=t.getElementById(e.settings.container);if(i.getStyle(u,"position")==="static"){u.style.position="relative"}}u.appendChild(o);!function(){var s,n;s='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ';if(i.ua.ie){s+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}s+='width="100%" height="100%" style="outline:0">'+'<param name="movie" value="'+e.settings.flash_swf_url+'" />'+'<param name="flashvars" value="id='+escape(e.id)+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>";if(i.ua.ie){n=t.createElement("div");o.appendChild(n);n.outerHTML=s;n=null}else{o.innerHTML=s}}();function c(){return t.getElementById(e.id+"_flash")}function g(){if(d++>5e3){s({success:false});return}if(a[e.id]===false){setTimeout(g,1)}}g();l=o=null;e.bind("Destroy",function(e){var s;i.removeAllEvents(t.body,e.id);delete a[e.id];delete n[e.id];s=t.getElementById(e.id+"_flash_container");if(s){u.removeChild(s)}});e.bind("Flash:Init",function(){var n={},r;try{c().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(l){s({success:false});return}if(a[e.id]){return}a[e.id]=true;e.bind("UploadFile",function(t,s){var a=t.settings,r=e.settings.resize||{};c().uploadFile(n[s.id],a.url,{name:s.target_name||s.name,mime:i.mimeTypes[s.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:a.chunk_size,width:r.width,height:r.height,quality:r.quality,multipart:a.multipart,multipart_params:a.multipart_params||{},file_data_name:a.file_data_name,format:/\.(jpg|jpeg)$/i.test(s.name)?"jpg":"png",headers:a.headers,urlstream_upload:a.urlstream_upload})});e.bind("CancelUpload",function(){c().cancelUpload()});e.bind("Flash:UploadProcess",function(e,t){var s=e.getFile(n[t.id]);if(s.status!=i.FAILED){s.loaded=t.loaded;s.size=t.size;e.trigger("UploadProgress",s)}});e.bind("Flash:UploadChunkComplete",function(e,t){var s,a=e.getFile(n[t.id]);s={chunk:t.chunk,chunks:t.chunks,response:t.text};e.trigger("ChunkUploaded",a,s);if(a.status!==i.FAILED&&e.state!==i.STOPPED){c().uploadNextChunk()}if(t.chunk==t.chunks-1){a.status=i.DONE;e.trigger("FileUploaded",a,{response:t.text})}});e.bind("Flash:SelectFiles",function(t,s){var a,r,l=[],o;for(r=0;r<s.length;r++){a=s[r];o=i.guid();n[o]=a.id;n[a.id]=o;l.push(new i.File(o,a.name,a.size))}if(l.length){e.trigger("FilesAdded",l)}});e.bind("Flash:SecurityError",function(t,s){e.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),details:s.message,file:e.getFile(n[s.id])})});e.bind("Flash:GenericError",function(t,s){e.trigger("Error",{code:i.GENERIC_ERROR,message:i.translate("Generic error."),details:s.message,file:e.getFile(n[s.id])})});e.bind("Flash:IOError",function(t,s){e.trigger("Error",{code:i.IO_ERROR,message:i.translate("IO error."),details:s.message,file:e.getFile(n[s.id])})});e.bind("Flash:ImageError",function(t,s){e.trigger("Error",{code:parseInt(s.code,10),message:i.translate("Image error."),file:e.getFile(n[s.id])})});e.bind("Flash:StageEvent:rollOver",function(s){var n,a;n=t.getElementById(e.settings.browse_button);a=s.settings.browse_button_hover;if(n&&a){i.addClass(n,a)}});e.bind("Flash:StageEvent:rollOut",function(s){var n,a;n=t.getElementById(e.settings.browse_button);a=s.settings.browse_button_hover;if(n&&a){i.removeClass(n,a)}});e.bind("Flash:StageEvent:mouseDown",function(s){var n,a;n=t.getElementById(e.settings.browse_button);a=s.settings.browse_button_active;if(n&&a){i.addClass(n,a);i.addEvent(t.body,"mouseup",function(){i.removeClass(n,a)},s.id)}});e.bind("Flash:StageEvent:mouseUp",function(s){var n,a;n=t.getElementById(e.settings.browse_button);a=s.settings.browse_button_active;if(n&&a){i.removeClass(n,a)}});e.bind("Flash:ExifData",function(t,i){e.trigger("ExifData",e.getFile(n[i.id]),i.data)});e.bind("Flash:GpsData",function(t,i){e.trigger("GpsData",e.getFile(n[i.id]),i.data)});e.bind("QueueChanged",function(t){e.refresh()});e.bind("FilesRemoved",function(e,t){var i;for(i=0;i<t.length;i++){c().removeFile(n[t[i].id])}});e.bind("StateChanged",function(t){e.refresh()});e.bind("Refresh",function(s){var n,a,r;c().setFileFilters(e.settings.filters,e.settings.multi_selection);n=t.getElementById(s.settings.browse_button);if(n){a=i.getPos(n,t.getElementById(s.settings.container));r=i.getSize(n);i.extend(t.getElementById(s.id+"_flash_container").style,{top:a.y+"px",left:a.x+"px",width:r.w+"px",height:r.h+"px"})}});e.bind("DisableBrowse",function(e,t){c().disableBrowse(t)});s({success:true})})}})}(window,document,plupload);
!function(e,t,i,n){function r(e){return t.getElementById(e)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:true,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(n,o){n.bind("Init",function(o){var s=t.body,a,d="javascript",u,l,f,c=[],g=/MSIE/.test(navigator.userAgent),m=[],p=o.settings.filters,v,b,h,y;e:for(v=0;v<p.length;v++){b=p[v].extensions.split(/,/);for(y=0;y<b.length;y++){if(b[y]==="*"){m=[];break e}h=i.mimeTypes[b[y]];if(h&&i.inArray(h,m)===-1){m.push(h)}}}m=m.join(",");function E(){var e,a,d,u;f=i.guid();c.push(f);e=t.createElement("form");e.setAttribute("id","form_"+f);e.setAttribute("method","post");e.setAttribute("enctype","multipart/form-data");e.setAttribute("encoding","multipart/form-data");e.setAttribute("target",o.id+"_iframe");e.style.position="absolute";a=t.createElement("input");a.setAttribute("id","input_"+f);a.setAttribute("type","file");a.setAttribute("accept",m);a.setAttribute("size",1);u=r(o.settings.browse_button);if(o.features.triggerDialog&&u){i.addEvent(r(o.settings.browse_button),"click",function(e){if(!a.disabled){a.click()}e.preventDefault()},o.id)}i.extend(a.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"});i.extend(e.style,{overflow:"hidden"});d=o.settings.shim_bgcolor;if(d){e.style.background=d}if(g){i.extend(a.style,{filter:"alpha(opacity=0)"})}i.addEvent(a,"change",function(t){var s=t.target,d,l=[],c;if(s.value){r("form_"+f).style.top=-1048575+"px";d=s.value.replace(/\\/g,"/");d=d.substring(d.length,d.lastIndexOf("/")+1);l.push(new i.File(f,d));if(!o.features.triggerDialog){i.removeAllEvents(e,o.id)}else{i.removeEvent(u,"click",o.id)}i.removeEvent(a,"change",o.id);E();if(l.length){n.trigger("FilesAdded",l)}}},o.id);e.appendChild(a);s.appendChild(e);o.refresh()}function _(){var n=t.createElement("div");n.innerHTML='<iframe id="'+o.id+'_iframe" name="'+o.id+'_iframe" src="'+d+':&quot;&quot;" style="display:none"></iframe>';a=n.firstChild;s.appendChild(a);i.addEvent(a,"load",function(t){var n=t.target,r,s;if(!u){return}try{r=n.contentWindow.document||n.contentDocument||e.frames[n.id].document}catch(a){o.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:u});return}s=r.body.innerHTML;if(s){u.status=i.DONE;u.loaded=1025;u.percent=100;o.trigger("UploadProgress",u);o.trigger("FileUploaded",u,{response:s})}},o.id)}if(o.settings.container){s=r(o.settings.container);if(i.getStyle(s,"position")==="static"){s.style.position="relative"}}o.bind("UploadFile",function(e,n){var o,s;if(n.status==i.DONE||n.status==i.FAILED||e.state==i.STOPPED){return}o=r("form_"+n.id);s=r("input_"+n.id);s.setAttribute("name",e.settings.file_data_name);o.setAttribute("action",e.settings.url);i.each(i.extend({name:n.target_name||n.name},e.settings.multipart_params),function(e,n){var r=t.createElement("input");i.extend(r,{type:"hidden",name:n,value:e});o.insertBefore(r,o.firstChild)});u=n;r("form_"+f).style.top=-1048575+"px";o.submit()});o.bind("FileUploaded",function(e){e.refresh()});o.bind("StateChanged",function(t){if(t.state==i.STARTED){_()}else if(t.state==i.STOPPED){e.setTimeout(function(){i.removeEvent(a,"load",t.id);if(a.parentNode){a.parentNode.removeChild(a)}},0)}i.each(t.files,function(e,t){if(e.status===i.DONE||e.status===i.FAILED){var n=r("form_"+e.id);if(n){n.parentNode.removeChild(n)}}})});o.bind("Refresh",function(e){var n,o,s,a,d,u,l,c,g;n=r(e.settings.browse_button);if(n){d=i.getPos(n,r(e.settings.container));u=i.getSize(n);l=r("form_"+f);c=r("input_"+f);i.extend(l.style,{top:d.y+"px",left:d.x+"px",width:u.w+"px",height:u.h+"px"});if(e.features.triggerDialog){if(i.getStyle(n,"position")==="static"){i.extend(n.style,{position:"relative"})}g=parseInt(n.style.zIndex,10);if(isNaN(g)){g=0}i.extend(n.style,{zIndex:g});i.extend(l.style,{zIndex:g-1})}s=e.settings.browse_button_hover;a=e.settings.browse_button_active;o=e.features.triggerDialog?n:l;if(s){i.addEvent(o,"mouseover",function(){i.addClass(n,s)},e.id);i.addEvent(o,"mouseout",function(){i.removeClass(n,s)},e.id)}if(a){i.addEvent(o,"mousedown",function(){i.addClass(n,a)},e.id);i.addEvent(t.body,"mouseup",function(){i.removeClass(n,a)},e.id)}}});n.bind("FilesRemoved",function(e,t){var i,n;for(i=0;i<t.length;i++){n=r("form_"+t[i].id);if(n){n.parentNode.removeChild(n)}}});n.bind("DisableBrowse",function(e,i){var n=t.getElementById("input_"+f);if(n){n.disabled=i}});n.bind("Destroy",function(e){var n,o,a,d={inputContainer:"form_"+f,inputFile:"input_"+f,browseButton:e.settings.browse_button};for(n in d){o=r(d[n]);if(o){i.removeAllEvents(o,e.id)}}i.removeAllEvents(t.body,e.id);i.each(c,function(e,t){a=r("form_"+e);if(a){s.removeChild(a)}})});E()});o({success:true})}})}(window,document,plupload);
!function(e,t,n,r){var a={},s;function o(t,i){var n;if("FileReader"in e){n=new FileReader;n.readAsDataURL(t);n.onload=function(){i(n.result)}}else{return i(t.getAsDataURL())}}function l(t,i){var n;if("FileReader"in e){n=new FileReader;n.readAsBinaryString(t);n.onload=function(){i(n.result)}}else{return i(t.getAsBinary())}}function d(e,i,n,r){var s,l,d,u,c=this;o(a[e.id],function(a){s=t.createElement("canvas");s.style.display="none";t.body.appendChild(s);l=s.getContext("2d");d=new Image;d.onerror=d.onabort=function(){r({success:false})};d.onload=function(){var t,o,h,p,m;if(!i["width"]){i["width"]=d.width}if(!i["height"]){i["height"]=d.height}u=Math.min(i.width/d.width,i.height/d.height);if(u<1||u===1&&n==="image/jpeg"){t=Math.round(d.width*u);o=Math.round(d.height*u);s.width=t;s.height=o;l.drawImage(d,0,0,t,o);if(n==="image/jpeg"){p=new f(atob(a.substring(a.indexOf("base64,")+7)));if(p["headers"]&&p["headers"].length){m=new g;if(m.init(p.get("exif")[0])){m.setExif("PixelXDimension",t);m.setExif("PixelYDimension",o);p.set("exif",m.getBinary());if(c.hasEventListener("ExifData")){c.trigger("ExifData",e,m.EXIF())}if(c.hasEventListener("GpsData")){c.trigger("GpsData",e,m.GPS())}}}if(i["quality"]){try{a=s.toDataURL(n,i["quality"]/100)}catch(y){a=s.toDataURL(n)}}}else{a=s.toDataURL(n)}a=a.substring(a.indexOf("base64,")+7);a=atob(a);if(p&&p["headers"]&&p["headers"].length){a=p.restore(a);p.purge()}s.parentNode.removeChild(s);r({success:true,data:a})}else{r({success:false})}};d.src=a})}n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var i,r,a,o,l,d;r=a=l=d=false;if(e.XMLHttpRequest){i=new XMLHttpRequest;a=!!i.upload;r=!!(i.sendAsBinary||i.upload)}if(r){o=!!(i.sendAsBinary||e.Uint8Array&&e.ArrayBuffer);l=!!(File&&(File.prototype.getAsDataURL||e.FileReader)&&o);d=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}s=n.ua.safari&&n.ua.windows;return{html5:r,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:l,pngresize:l,multipart:l||!!e.FileReader||!!e.FormData,canSendBinary:o,cantSendBlobInFormData:!!(n.ua.gecko&&e.FormData&&e.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:a,chunks:d,multi_selection:!(n.ua.safari&&n.ua.windows),triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(i,r){var o,u;function f(e){var t,r,s=[],o,l={};for(r=0;r<e.length;r++){t=e[r];if(l[t.name]){continue}l[t.name]=true;o=n.guid();a[o]=t;s.push(new n.File(o,t.fileName||t.name,t.fileSize||t.size))}if(s.length){i.trigger("FilesAdded",s,e)}}o=this.getFeatures();if(!o.html5){r({success:false});return}i.bind("Init",function(e){var r,a,s=[],o,l,d=e.settings.filters,u,g,c=t.body,h;r=t.createElement("div");r.id=e.id+"_html5_container";n.extend(r.style,{position:"absolute",background:i.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:i.settings.shim_bgcolor?"":0});r.className="plupload html5";if(i.settings.container){c=t.getElementById(i.settings.container);if(n.getStyle(c,"position")==="static"){c.style.position="relative"}}c.appendChild(r);e:for(o=0;o<d.length;o++){u=d[o].extensions.split(/,/);for(l=0;l<u.length;l++){if(u[l]==="*"){s=[];break e}g=n.mimeTypes[u[l]];if(g&&n.inArray(g,s)===-1){s.push(g)}}}r.innerHTML='<input id="'+i.id+'_html5" '+' style="font-size:999px"'+' type="file" accept="'+s.join(",")+'" '+(i.settings.multi_selection&&i.features.multi_selection?'multiple="multiple"':"")+" />";r.scrollTop=100;h=t.getElementById(i.id+"_html5");if(e.features.triggerDialog){n.extend(h.style,{position:"absolute",width:"100%",height:"100%"})}else{n.extend(h.style,{cssFloat:"right",styleFloat:"right"})}h.onchange=function(){f(this.files);this.value=""};a=t.getElementById(e.settings.browse_button);if(a){var p=e.settings.browse_button_hover,m=e.settings.browse_button_active,y=e.features.triggerDialog?a:r;if(p){n.addEvent(y,"mouseover",function(){n.addClass(a,p)},e.id);n.addEvent(y,"mouseout",function(){n.removeClass(a,p)},e.id)}if(m){n.addEvent(y,"mousedown",function(){n.addClass(a,m)},e.id);n.addEvent(t.body,"mouseup",function(){n.removeClass(a,m)},e.id)}if(e.features.triggerDialog){n.addEvent(a,"click",function(i){var n=t.getElementById(e.id+"_html5");if(n&&!n.disabled){n.click()}i.preventDefault()},e.id)}}});i.bind("PostInit",function(){var e=t.getElementById(i.settings.drop_element);if(e){if(s){n.addEvent(e,"dragenter",function(r){var a,s,o;a=t.getElementById(i.id+"_drop");if(!a){a=t.createElement("input");a.setAttribute("type","file");a.setAttribute("id",i.id+"_drop");a.setAttribute("multiple","multiple");n.addEvent(a,"change",function(){f(this.files);n.removeEvent(a,"change",i.id);a.parentNode.removeChild(a)},i.id);e.appendChild(a)}s=n.getPos(e,t.getElementById(i.settings.container));o=n.getSize(e);if(n.getStyle(e,"position")==="static"){n.extend(e.style,{position:"relative"})}n.extend(a.style,{position:"absolute",display:"block",top:0,left:0,width:o.w+"px",height:o.h+"px",opacity:0})},i.id);return}n.addEvent(e,"dragover",function(e){e.preventDefault()},i.id);n.addEvent(e,"drop",function(e){var t=e.dataTransfer;if(t&&t.files){f(t.files)}e.preventDefault()},i.id)}});i.bind("Refresh",function(e){var r,a,s,o,l;r=t.getElementById(i.settings.browse_button);if(r){a=n.getPos(r,t.getElementById(e.settings.container));s=n.getSize(r);o=t.getElementById(i.id+"_html5_container");n.extend(o.style,{top:a.y+"px",left:a.x+"px",width:s.w+"px",height:s.h+"px"});if(i.features.triggerDialog){if(n.getStyle(r,"position")==="static"){n.extend(r.style,{position:"relative"})}l=parseInt(n.getStyle(r,"z-index"),10);if(isNaN(l)){l=0}n.extend(r.style,{zIndex:l});n.extend(o.style,{zIndex:l-1})}}});i.bind("DisableBrowse",function(e,i){var n=t.getElementById(e.id+"_html5");if(n){n.disabled=i}});i.bind("CancelUpload",function(){if(u&&u.abort){u.abort()}});i.bind("UploadFile",function(t,i){var r=t.settings,s,f;function g(e,t,i){var n;if(File.prototype.slice){try{e.slice();return e.slice(t,i)}catch(r){return e.slice(t,i-t)}}else if(n=File.prototype.webkitSlice||File.prototype.mozSlice){return n.call(e,t,i)}else{return null}}function c(a){var s=0,l=0,d="FileReader"in e?new FileReader:null;function f(){var c,h,p,m,y,S,v,b=t.settings.url;function E(r){var a=0,d="----pluploadboundary"+n.guid(),g,h="--",E="\r\n",F="";u=new XMLHttpRequest;if(u.upload){u.upload.onprogress=function(e){i.loaded=Math.min(i.size,l+e.loaded-a);t.trigger("UploadProgress",i)}}u.onreadystatechange=function(){var e,a;if(u.readyState==4&&t.state!==n.STOPPED){try{e=u.status}catch(o){e=0}if(e>=400){t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:i,status:e})}else{if(p){a={chunk:s,chunks:p,response:u.responseText,status:e};t.trigger("ChunkUploaded",i,a);l+=S;if(a.cancelled){i.status=n.FAILED;return}i.loaded=Math.min(i.size,(s+1)*y)}else{i.loaded=i.size}t.trigger("UploadProgress",i);r=c=g=F=null;if(!p||++s>=p){i.status=n.DONE;t.trigger("FileUploaded",i,{response:u.responseText,status:e})}else{f()}}}};if(t.settings.multipart&&o.multipart){m.name=i.target_name||i.name;u.open("post",b,true);n.each(t.settings.headers,function(e,t){u.setRequestHeader(t,e)});if(typeof r!=="string"&&!!e.FormData){g=new FormData;n.each(n.extend(m,t.settings.multipart_params),function(e,t){g.append(t,e)});g.append(t.settings.file_data_name,r);u.send(g);return}if(typeof r==="string"){u.setRequestHeader("Content-Type","multipart/form-data; boundary="+d);n.each(n.extend(m,t.settings.multipart_params),function(e,t){F+=h+d+E+'Content-Disposition: form-data; name="'+t+'"'+E+E;F+=unescape(encodeURIComponent(e))+E});v=n.mimeTypes[i.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";F+=h+d+E+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(i.name))+'"'+E+"Content-Type: "+v+E+E+r+E+h+d+h+E;a=F.length-r.length;r=F;if(u.sendAsBinary){u.sendAsBinary(r)}else if(o.canSendBinary){var x=new Uint8Array(r.length);for(var D=0;D<r.length;D++){x[D]=r.charCodeAt(D)&255}u.send(x.buffer)}return}}b=n.buildUrl(t.settings.url,n.extend(m,t.settings.multipart_params));u.open("post",b,true);u.setRequestHeader("Content-Type","application/octet-stream");n.each(t.settings.headers,function(e,t){u.setRequestHeader(t,e)});u.send(r)}if(i.status==n.DONE||i.status==n.FAILED||t.state==n.STOPPED){return}m={name:i.target_name||i.name};if(r.chunk_size&&i.size>r.chunk_size&&(o.chunks||typeof a=="string")){y=r.chunk_size;p=Math.ceil(i.size/y);S=Math.min(y,i.size-s*y);if(typeof a=="string"){c=a.substring(s*y,s*y+S)}else{c=g(a,s*y,s*y+S)}m.chunk=s;m.chunks=p}else{S=i.size;c=a}if(t.settings.multipart&&o.multipart&&typeof c!=="string"&&d&&o.cantSendBlobInFormData&&o.chunks&&t.settings.chunk_size){d.onload=function(){E(d.result)};d.readAsBinaryString(c)}else{E(c)}}f()}s=a[i.id];if(o.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(i.name)){d.call(t,i,t.settings.resize,/\.png$/i.test(i.name)?"image/png":"image/jpeg",function(e){if(e.success){i.size=e.data.length;c(e.data)}else if(o.chunks){c(s)}else{l(s,c)}})}else if(!o.chunks&&o.jpgresize){l(s,c)}else{c(s)}});i.bind("Destroy",function(e){var i,r,a=t.body,s={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(i in s){r=t.getElementById(s[i]);if(r){n.removeAllEvents(r,e.id)}}n.removeAllEvents(t.body,e.id);if(e.settings.container){a=t.getElementById(e.settings.container)}a.removeChild(t.getElementById(s.inputContainer))});r({success:true})}});function u(){var e=false,t;function i(i,n){var r=e?0:-8*(n-1),a=0,s;for(s=0;s<n;s++){a|=t.charCodeAt(i+s)<<Math.abs(r+s*8)}return a}function n(e,i,n){var n=arguments.length===3?n:t.length-i-1;t=t.substr(0,i)+e+t.substr(n+i)}function a(t,i,r){var a="",s=e?0:-8*(r-1),o;for(o=0;o<r;o++){a+=String.fromCharCode(i>>Math.abs(s+o*8)&255)}n(a,t,r)}return{II:function(t){if(t===r){return e}else{e=t}},init:function(i){e=false;t=i},SEGMENT:function(e,i,r){switch(arguments.length){case 1:return t.substr(e,t.length-e-1);case 2:return t.substr(e,i);case 3:n(r,e,i);break;default:return t}},BYTE:function(e){return i(e,1)},SHORT:function(e){return i(e,2)},LONG:function(e,t){if(t===r){return i(e,4)}else{a(e,t,4)}},SLONG:function(e){var t=i(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var n="";for(t+=e;e<t;e++){n+=String.fromCharCode(i(e,1))}return n}}}function f(e){var t={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},i=[],n,a,s=r,o=0,l;n=new u;n.init(e);if(n.SHORT(0)!==65496){return}a=2;l=Math.min(1048576,e.length);while(a<=l){s=n.SHORT(a);if(s>=65488&&s<=65495){a+=2;continue}if(s===65498||s===65497){break}o=n.SHORT(a+2)+2;if(t[s]&&n.STRING(a+4,t[s].signature.length)===t[s].signature){i.push({hex:s,app:t[s].app.toUpperCase(),name:t[s].name.toUpperCase(),start:a,length:o,segment:n.SEGMENT(a,o)})}a+=o}n.init(null);return{headers:i,restore:function(e){n.init(e);var t=new f(e);if(!t["headers"]){return false}for(var r=t["headers"].length;r>0;r--){var s=t["headers"][r-1];n.SEGMENT(s.start,s.length,"")}t.purge();a=n.SHORT(2)==65504?4+n.SHORT(4):2;for(var r=0,o=i.length;r<o;r++){n.SEGMENT(a,0,i[r].segment);a+=i[r].length}return n.SEGMENT()},get:function(e){var t=[];for(var n=0,r=i.length;n<r;n++){if(i[n].app===e.toUpperCase()){t.push(i[n].segment)}}return t},set:function(e,t){var n=[];if(typeof t==="string"){n.push(t)}else{n=t}for(var r=ii=0,a=i.length;r<a;r++){if(i[r].app===e.toUpperCase()){i[r].segment=n[ii];i[r].length=n[ii].length;ii++}if(ii>=n.length)break}},purge:function(){i=[];n.init(null)}}}function g(){var e,t,a={},s;e=new u;t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};s={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};function o(t,i){var n=e.SHORT(t),o,l,d,u,f,g,c,h,p=[],m={};for(o=0;o<n;o++){c=g=t+12*o+2;d=i[e.SHORT(c)];if(d===r){continue}u=e.SHORT(c+=2);f=e.LONG(c+=2);c+=4;p=[];switch(u){case 1:case 7:if(f>4){c=e.LONG(c)+a.tiffHeader}for(l=0;l<f;l++){p[l]=e.BYTE(c+l)}break;case 2:if(f>4){c=e.LONG(c)+a.tiffHeader}m[d]=e.STRING(c,f-1);continue;case 3:if(f>2){c=e.LONG(c)+a.tiffHeader}for(l=0;l<f;l++){p[l]=e.SHORT(c+l*2)}break;case 4:if(f>1){c=e.LONG(c)+a.tiffHeader}for(l=0;l<f;l++){p[l]=e.LONG(c+l*4)}break;case 5:c=e.LONG(c)+a.tiffHeader;for(l=0;l<f;l++){p[l]=e.LONG(c+l*4)/e.LONG(c+l*4+4)}break;case 9:c=e.LONG(c)+a.tiffHeader;for(l=0;l<f;l++){p[l]=e.SLONG(c+l*4)}break;case 10:c=e.LONG(c)+a.tiffHeader;for(l=0;l<f;l++){p[l]=e.SLONG(c+l*4)/e.SLONG(c+l*4+4)}break;default:continue}h=f==1?p[0]:p;if(s.hasOwnProperty(d)&&typeof h!="object"){m[d]=s[d][h]}else{m[d]=h}}return m}function l(){var i=r,n=a.tiffHeader;e.II(e.SHORT(n)==18761);if(e.SHORT(n+=2)!==42){return false}a["IFD0"]=a.tiffHeader+e.LONG(n+=2);i=o(a["IFD0"],t.tiff);a["exifIFD"]="ExifIFDPointer"in i?a.tiffHeader+i.ExifIFDPointer:r;a["gpsIFD"]="GPSInfoIFDPointer"in i?a.tiffHeader+i.GPSInfoIFDPointer:r;return true}function d(n,r,s){var o,l,d,u=0;if(typeof r==="string"){var f=t[n.toLowerCase()];for(hex in f){if(f[hex]===r){r=hex;break}}}o=a[n.toLowerCase()+"IFD"];l=e.SHORT(o);for(i=0;i<l;i++){d=o+12*i+2;if(e.SHORT(d)==r){u=d+8;break}}if(!u)return false;e.LONG(u,s);return true}return{init:function(t){a={tiffHeader:10};if(t===r||!t.length){return false}e.init(t);if(e.SHORT(0)===65505&&e.STRING(4,5).toUpperCase()==="EXIF\0"){return l()}return false},EXIF:function(){var e;e=o(a.exifIFD,t.exif);if(e.ExifVersion&&n.typeOf(e.ExifVersion)==="array"){for(var i=0,r="";i<e.ExifVersion.length;i++){r+=String.fromCharCode(e.ExifVersion[i])}e.ExifVersion=r}return e},GPS:function(){var e;e=o(a.gpsIFD,t.gps);if(e.GPSVersionID){e.GPSVersionID=e.GPSVersionID.join(".")}return e},setExif:function(e,t){if(e!=="PixelXDimension"&&e!=="PixelYDimension")return false;return d("exif",e,t)},getBinary:function(){return e.SEGMENT()}}}}(window,document,plupload);
!function(e,t,i,n){var r={},l={};function s(e){var t,i=typeof e,r,l,a;if(e===n||e===null){return"null"}if(i==="string"){t="\bb	t\nn\ff\rr\"\"''\\\\";return'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,i){var n=t.indexOf(i);if(n+1){return"\\"+t.charAt(n+1)}e=i.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+'"'}if(i=="object"){r=e.length!==n;t="";if(r){for(l=0;l<e.length;l++){if(t){t+=","}t+=s(e[l])}t="["+t+"]"}else{for(a in e){if(e.hasOwnProperty(a)){if(t){t+=","}t+=s(a)+":"+s(e[a])}}t="{"+t+"}"}return t}return""+e}function a(e){var t=false,i=null,n=null,r,l,s,a,o,u=0;try{try{n=new ActiveXObject("AgControl.AgControl");if(n.IsVersionSupported(e)){t=true}n=null}catch(d){var g=navigator.plugins["Silverlight Plug-In"];if(g){r=g.description;if(r==="1.0.30226.2"){r="2.0.30226.2"}l=r.split(".");while(l.length>3){l.pop()}while(l.length<4){l.push(0)}s=e.split(".");while(s.length>4){s.pop()}do{a=parseInt(s[u],10);o=parseInt(l[u],10);u++}while(u<s.length&&a===o);if(a<=o&&!isNaN(a)){t=true}}}}catch(c){t=false}return t}i.silverlight={trigger:function(e,t){var n=r[e],l,s;if(n){s=i.toArray(arguments).slice(1);s[0]="Silverlight:"+t;setTimeout(function(){n.trigger.apply(n,s)},0)}}};i.runtimes.Silverlight=i.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:true,pngresize:true,chunks:true,progress:true,multipart:true,multi_selection:true}},init:function(n,o){var u,d="",g=n.settings.filters,c,p=t.body;if(!a("2.0.31005.0")||e.opera&&e.opera.buildNumber){o({success:false});return}l[n.id]=false;r[n.id]=n;u=t.createElement("div");u.id=n.id+"_silverlight_container";i.extend(u.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:n.settings.shim_bgcolor||t.documentMode>8?"":.01});u.className="plupload silverlight";if(n.settings.container){p=t.getElementById(n.settings.container);if(i.getStyle(p,"position")==="static"){p.style.position="relative"}}p.appendChild(u);for(c=0;c<g.length;c++){d+=(d!=""?"|":"")+g[c].title+" | *."+g[c].extensions.replace(/,/g,";*.")}u.innerHTML='<object id="'+n.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024">'+'<param name="source" value="'+n.settings.silverlight_xap_url+'"/>'+'<param name="background" value="Transparent"/>'+'<param name="windowless" value="true"/>'+'<param name="enablehtmlaccess" value="true"/>'+'<param name="initParams" value="id='+n.id+",filter="+d+",multiselect="+n.settings.multi_selection+'"/>'+"</object>";function h(){return t.getElementById(n.id+"_silverlight").content.Upload}n.bind("Silverlight:Init",function(){var e,a={};if(l[n.id]){return}l[n.id]=true;n.bind("Silverlight:StartSelectFiles",function(t){e=[]});n.bind("Silverlight:SelectFile",function(t,n,r,l){var s;s=i.guid();a[s]=n;a[n]=s;e.push(new i.File(s,r,l))});n.bind("Silverlight:SelectSuccessful",function(){if(e.length){n.trigger("FilesAdded",e)}});n.bind("Silverlight:UploadChunkError",function(e,t,r,l,s){n.trigger("Error",{code:i.IO_ERROR,message:"IO Error.",details:s,file:e.getFile(a[t])})});n.bind("Silverlight:UploadFileProgress",function(e,t,n,r){var l=e.getFile(a[t]);if(l.status!=i.FAILED){l.size=r;l.loaded=n;e.trigger("UploadProgress",l)}});n.bind("Refresh",function(e){var n,r,l;n=t.getElementById(e.settings.browse_button);if(n){r=i.getPos(n,t.getElementById(e.settings.container));l=i.getSize(n);i.extend(t.getElementById(e.id+"_silverlight_container").style,{top:r.y+"px",left:r.x+"px",width:l.w+"px",height:l.h+"px"})}});n.bind("Silverlight:UploadChunkSuccessful",function(e,t,n,r,l){var s,o=e.getFile(a[t]);s={chunk:n,chunks:r,response:l};e.trigger("ChunkUploaded",o,s);if(o.status!=i.FAILED&&e.state!==i.STOPPED){h().UploadNextChunk()}if(n==r-1){o.status=i.DONE;e.trigger("FileUploaded",o,{response:l})}});n.bind("Silverlight:UploadSuccessful",function(e,t,n){var r=e.getFile(a[t]);r.status=i.DONE;e.trigger("FileUploaded",r,{response:n})});n.bind("FilesRemoved",function(e,t){var i;for(i=0;i<t.length;i++){h().RemoveFile(a[t[i].id])}});n.bind("UploadFile",function(e,t){var n=e.settings,r=n.resize||{};h().UploadFile(a[t.id],e.settings.url,s({name:t.target_name||t.name,mime:i.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:n.chunk_size,image_width:r.width,image_height:r.height,image_quality:r.quality||90,multipart:!!n.multipart,multipart_params:n.multipart_params||{},file_data_name:n.file_data_name,headers:n.headers}))});n.bind("CancelUpload",function(){h().CancelUpload()});n.bind("Silverlight:MouseEnter",function(e){var r,l;r=t.getElementById(n.settings.browse_button);l=e.settings.browse_button_hover;if(r&&l){i.addClass(r,l)}});n.bind("Silverlight:MouseLeave",function(e){var r,l;r=t.getElementById(n.settings.browse_button);l=e.settings.browse_button_hover;if(r&&l){i.removeClass(r,l)}});n.bind("Silverlight:MouseLeftButtonDown",function(e){var r,l;r=t.getElementById(n.settings.browse_button);l=e.settings.browse_button_active;if(r&&l){i.addClass(r,l);i.addEvent(t.body,"mouseup",function(){i.removeClass(r,l)})}});n.bind("Sliverlight:StartSelectFiles",function(e){var r,l;r=t.getElementById(n.settings.browse_button);l=e.settings.browse_button_active;if(r&&l){i.removeClass(r,l)}});n.bind("DisableBrowse",function(e,t){h().DisableBrowse(t)});n.bind("Destroy",function(e){var n;i.removeAllEvents(t.body,e.id);delete l[e.id];delete r[e.id];n=t.getElementById(e.id+"_silverlight_container");if(n){p.removeChild(n)}});o({success:true})})}})}(window,document,plupload);
var AudioPlayer=function(){var e=[];var n;var o="";var t={};var r=-1;var i="9";function a(e){if(document.all&&!window[e]){for(var n=0;n<document.forms.length;n++){if(document.forms[n][e]){return document.forms[n][e];break}}}return document.all?window[e]:document[e]}function f(e,n,o){a(e).addListener(n,o)}return{setup:function(e,n){o=e;t=n;if(swfobject.hasFlashPlayerVersion(i)){swfobject.switchOffAutoHideShow();swfobject.createCSS("p.audioplayer_container span","visibility:hidden;height:24px;overflow:hidden;padding:0;border:none;")}},getPlayer:function(e){return a(e)},addListener:function(e,n,o){f(e,n,o)},embed:function(n,r){var a={};var f;var u={};var c={};var d={};for(f in t){a[f]=t[f]}for(f in r){a[f]=r[f]}if(a.transparentpagebg=="yes"){u.bgcolor="#FFFFFF";u.wmode="transparent"}else{if(a.pagebg){u.bgcolor="#"+a.pagebg}u.wmode="opaque"}u.menu="false";for(f in a){if(f=="pagebg"||f=="width"||f=="transparentpagebg"){continue}c[f]=a[f]}d.name=n;d.style="outline: none";c.playerID=n;swfobject.embedSWF(o,n,a.width.toString(),"24",i,false,c,u,d);e.push(n)},syncVolumes:function(n,o){r=o;for(var t=0;t<e.length;t++){if(e[t]!=n){a(e[t]).setVolume(r)}}},activate:function(e,o){if(n&&n!=e){a(n).close()}n=e},load:function(e,n,o,t){a(e).load(n,o,t)},close:function(e){a(e).close();if(e==n){n=null}},open:function(e,n){if(n==undefined){n=1}a(e).open(n==undefined?0:n-1)},getVolume:function(e){return r}}}();
!function(t){var e,n,i=[],r=window;t.fn.tinymce=function(e){var c=this,s,u,f,l,o,p="",y="";if(!c.length){return c}if(!e){return tinyMCE.get(c[0].id)}c.css("visibility","hidden");function m(){var n=[],i=0;if(a){a();a=null}c.each(function(t,r){var a,s=r.id,u=e.oninit;if(!s){r.id=s=tinymce.DOM.uniqueId()}a=new tinymce.Editor(s,e);n.push(a);a.onInit.add(function(){var t,e=u;c.css("visibility","");if(u){if(++i==n.length){if(tinymce.is(e,"string")){t=e.indexOf(".")===-1?null:tinymce.resolve(e.replace(/\.\w+$/,""));e=tinymce.resolve(e)}e.apply(t||tinymce,n)}}})});t.each(n,function(t,e){e.render()})}if(!r.tinymce&&!n&&(s=e.script_url)){n=1;f=s.substring(0,s.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(s)){y="_src"}l=s.lastIndexOf("?");if(l!=-1){p=s.substring(l+1)}r.tinyMCEPreInit=r.tinyMCEPreInit||{base:f,suffix:y,query:p};if(s.indexOf("gzip")!=-1){o=e.language||"en";s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(y)+"&themes="+escape(e.theme)+"&plugins="+escape(e.plugins)+"&languages="+o;if(!r.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=y;function n(t){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(t))}n("langs/"+o+".js");n("themes/"+e.theme+"/editor_template"+y+".js");n("themes/"+e.theme+"/langs/"+o+".js");t.each(e.plugins.split(","),function(t,e){if(e){n("plugins/"+e+"/editor_plugin"+y+".js");n("plugins/"+e+"/langs/"+o+".js")}})},end:function(){}}}}t.ajax({type:"GET",url:s,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;n=2;if(e.script_loaded){e.script_loaded()}m();t.each(i,function(t,e){e()})}})}else{if(n===1){i.push(m)}else{m()}}return c};t.extend(t.expr[":"],{tinymce:function(t){return!!(t.id&&tinyMCE.get(t.id))}});function a(){function n(t){if(t==="remove"){this.each(function(t,e){var n=a(e);if(n){n.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(t,e){var n=tinyMCE.get(e.id.replace(/_parent$/,""));if(n){n.remove()}})}function i(t){var i=this,r;if(t!==e){n.call(i);i.each(function(e,n){var i;if(i=tinyMCE.get(n.id)){i.setContent(t)}})}else{if(i.length>0){if(r=tinyMCE.get(i[0].id)){return r.getContent()}}}}function a(t){var e=null;t&&t.id&&r.tinymce&&(e=tinyMCE.get(t.id));return e}function c(t){return!!(t&&t.length&&r.tinymce&&t.is(":tinymce"))}var s={};t.each(["text","html","val"],function(n,r){var u=s[r]=t.fn[r],f=r==="text";t.fn[r]=function(n){var r=this;if(!c(r)){return u.apply(r,arguments)}if(n!==e){i.call(r.filter(":tinymce"),n);u.apply(r.not(":tinymce"),arguments);return r}else{var s="";var l=arguments;(f?r:r.eq(0)).each(function(e,n){var i=a(n);s+=i?f?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent():u.apply(t(n),l)});return s}}});t.each(["append","prepend"],function(n,i){var r=s[i]=t.fn[i],u=i==="prepend";t.fn[i]=function(t){var n=this;if(!c(n)){return r.apply(n,arguments)}if(t!==e){n.filter(":tinymce").each(function(e,n){var i=a(n);i&&i.setContent(u?t+i.getContent():i.getContent()+t)});r.apply(n.not(":tinymce"),arguments);return n}}});t.each(["remove","replaceWith","replaceAll","empty"],function(e,i){var r=s[i]=t.fn[i];t.fn[i]=function(){n.call(this,i);return r.apply(this,arguments)}});s.attr=t.fn.attr;t.fn.attr=function(n,r){var u=this;if(!n||n!=="value"||!c(u)){if(r!==e){return s.attr.call(u,n,r)}else{return s.attr.call(u,n)}}if(r!==e){i.call(u.filter(":tinymce"),r);s.attr.call(u.not(":tinymce"),n,r);return u}else{var f=u[0],l=a(f);return l?l.getContent():s.attr.call(t(f),n,r)}}}}(jQuery);
function saveAndCloseImageManager(){imageManagerSaveChanges();$h24.image_manager.close();reloadColumns()}function loadImageManagerTabs(e,a,r,i,o){loadImageManagerTab1(e,r,i,o);loadImageManagerTab2(a);loadImageManagerTab3()}function loadImageManagerTab1(e,a,r,i){var o=Math.random()*9999;if(typeof a=="undefined")var a=0;if(typeof r=="undefined")var r=0;if(typeof i=="undefined")var i="";$("#image_manager_1").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$.get($h24.publicdir+"../Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/load_im1/anticache/"+o,{parameter1:e,blockid:a,select_create_cat:r,default_cat_name:i},function(e){if(e=="statuscode/0"){showReloginDialog();return}$("#image_manager_1").html(e)})}function pictureOrder(e){var a="";for(var r=0;r<e.length;r++){var i=$("#"+e[r]+" input[name=pictureid]").val();if(r>0)a+="/";a+=i}$("#image_manager_2 input[name=pictureorder]").val(a)}function loadImageManagerTab2(e){imageManagerChangeCategory(e)}function loadImageManagerTab3(){var e=Math.random()*9999;$("#image_manager_3").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$.get($h24.publicdir+"../Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/load_im3/anticache/"+e,function(e){if(e=="statuscode/0"){showReloginDialog();return}$("#image_manager_3").html(e)})}function imageManagerChangeCategory(e){if(e==-1){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Image-Manager","Enter new category name"),okCallback:function(a){imageManagerChangeCategory_post_prompt(a,e)},applyColon:true})}else{var a=Math.random()*9999;$("#image_manager_2").html('<div class="im_loading_gif"><img src="'+$h24.publicdir+'images/loading.gif" border="0" class="im_loading_gif" /></div>');$.get($h24.publicdir+"../Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/load_im2/anticache/"+a,{parameter1:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}$("#image_manager_2").html(e);reload_ImageManagerThumbsHover()})}}function imageManagerChangeCategory_post_prompt(e,a){var r=Math.random()*9999;$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/newcategory",{parameter1:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}var r=e.split("/");a=r[1];loadImageManagerTabs(a,a)})}function imageManagerCreateAndSetCategory(e,a){$h24.utils.promptDialog({description:$h24.phrase.GUIPhrase("Image-Manager","Enter new category name"),okCallback:function(r){imageManagerCreateAndSetCategory_post_prompt(r,e,a)},applyColon:true})}function imageManagerCreateAndSetCategory_post_prompt(e,a,r){var i=Math.random()*9999;$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/newcategory",{parameter1:e},function(e){var i=e.split("/");commoncatid=i[1];$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/updatepicturecategory",{parameter1:a,parameter2:commoncatid},function(e){if(e=="statuscode/0"){showReloginDialog();return}if(r==0)loadImageManagerTabs(0,0);else loadImageManagerTabs(commoncatid,commoncatid)})})}function categoryManagerSaveChanges(){$("#image_manager_category_messages .hidden").hide();var e=$("#image_manager_category_count").val();if(typeof e!="undefined"){var a=false;var r=new Array;for(var i=0;i<e;i++){name=$("#image_manager_category_"+i+" .inline_parameter2").val().replace(/\//g,"&#47;");for(var o=0;o<r.length;o++){if(r[o]==name)a=true}r[i]=name}if(a){$("#image_manager_category_msg2").show()}else{var n="";for(var i=0;i<e;i++){if(i>0)n+="/";n+=$("#image_manager_category_"+i+" .inline_parameter0").val().replace(/\//g,"&#47;");n+="/";n+=$("#image_manager_category_"+i+" .inline_parameter1").val().replace(/\//g,"&#47;");n+="/";n+=$("#image_manager_category_"+i+" .inline_parameter2").val().replace(/\//g,"&#47;")}$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/categorymanagersave",{parameter1:e,parameter2:n},function(e){if(e=="statuscode/0"){showReloginDialog();return}reloadColumns();loadImageManagerTabs(0,0)})}}}function imageManagerSaveChanges(e,a,r){var i=$("#image_item_count").val();var o=$("#image_manager_2 input[name=pictureorder]").val();var n=$("#image_manager_2 input[name=current_category]").val();var m="";if(typeof i!="undefined"){var t="";for(var g=0;g<i;g++){if(g>0)t+="/";var l=$("#image_item_"+g);t+=$(l).find(".inline_parameter0").val().replace(/\//g,"&#47;");t+="/";t+=$(l).find(".inline_parameter1").val().replace(/\//g,"&#47;");t+="/";t+=$(l).find(".inline_parameter2").val().replace(/\//g,"&#47;");t+="/";m=$(l).find(".inline_parameter3").val().replace(/\//g,"&#47;");if(m==$h24.phrase.GUIPhrase("Image-Manager","Give this image a title"))m="";t+=m}show_loading_overlay();$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/imagemanagersave",{parameter1:i,parameter2:t,parameter3:o,parameter4:n},function(r){reload_HideLoadingMessage();if(r=="statuscode/0"){showReloginDialog();return}if(a=="hide_image"){$(e).hide();$("div#im_images").sortable("refresh")}})}}function saveCommonPictureUpload(e){var a=$("#common_picture_upload_id .inline_parameter2").val();var r=$("#common_picture_upload_id .inline_parameter0").val();var i=$("#common_picture_upload_id .inline_parameter1").val();var o=$("#common_picture_upload_id .inline_parameter4").val();var n=$("#common_picture_upload_filename_checkbox")[0].checked;if(typeof e=="undefined")var e=0;if(a!=-1){$("#common_picture_upload_messages .common_picture_upload_message").hide();$("#h24_common_picture_upload_new_cat_error_message").hide();$h24.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/upload",{parameter1:a,parameter2:r,parameter3:i,parameter4:o,keepfilenames:n,blockid:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}if(e=="statuscode/2"){$("#h24_common_picture_upload_new_cat_error_message").show()}else{reloadCommonPictureDialogs();reloadColumns();$h24.image_manager.close()}})}else{reloadColumns();$h24.image_manager.close()}}function reloadCommonPictureDialogs(){var e=Math.random()*9999;$("#common_picture_change_div").load($h24.publicdir+"../Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/reloadchange/anticache/"+e,function(e){});$("#common_picture_upload_div").load($h24.publicdir+"../Page/Inline-Load/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/reloadupload/anticache/"+e,function(e){})}function commonPictureDelete(e,a){var r=confirm($h24.phrase.GUIPhrase("Image-Manager","Do you want to delete the image permanently?"));if(r){$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/delpic",{parameter1:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}$(a).hide();$("div#im_images").sortable("refresh");var r=document.getElementById("im_current_category").options[document.getElementById("im_current_category").selectedIndex].value})}}function commonCategoryDelete(e,a){var r=confirm($h24.phrase.GUIPhrase("Image-Manager","Do you want to delete the category and it's %count% images permanently?",{count:a}));if(r){$.post($h24.publicdir+"../Page/Inline-Save/homepageid/"+$h24.homepageid+"/model/CommonPictureModel/parameter0/delcategory",{parameter1:e},function(e){if(e=="statuscode/0"){showReloginDialog();return}reloadColumns();loadImageManagerTabs(0,0)})}}function reload_ImageManagerThumbsHover(){$("#im_images div.image_item").unbind().each(function(){var e=$(this);e.unbind().hover(function(){$("#im_images div.hover").hide();e.children("div.hover").show()},function(e){if(!$(e.target).is("option")&&!$(e.target).is("select")&&!$(e.target).is("div.form_box")&&!$(e.target).is("form")){return}})})}
function showReloginDialog(){if(typeof window.already_logging_out=="undefined")window.already_logging_out=true;else return;hide_loading_overlay();alert(translatedString("logged_out"));var o=window.location.href.split("/");var i=o[2].split(".");i[0]="";var n="http://www"+i.join(".");window.location.href=n}
function showTermsAndConditionsDialog(){$.get($h24.slashwebroot+"Homepage/Terms",function(e){$h24.coreDialog.create("h24_terms",e,{width:600})})}function add_slow_connection_msg_to_loader(e){if(e)$("#h24_connection_problem").fadeIn();else if(!e)$("#h24_connection_problem").hide()}function reload_ClearDialogBoxStorage(){$("#h24_preloaded_dialog_box_storage div.settings_block").remove();$("#h24_preloaded_dialog_box div.settings_block").remove()}function show_loading_overlay(){var e=$(window).width();var a=$(document).height();$("#loading_overlay").width(e);$("#loading_overlay").height(a);$("#loading_overlay").show();$("#loading_message").show()}function reload_HideLoadingMessage(){hide_loading_overlay()}function hide_loading_overlay(){$("#loading_overlay").hide();$("#loading_message").hide();add_slow_connection_msg_to_loader(false);$("#h24_still_working").hide()}function clearText(e){if(e.defaultValue==e.value)e.value=""}function refreshBrowser(){show_loading_overlay();window.location.reload(true)}function translatedString(e){switch(e){case"change_lang":return"För att ändra språk måste ändrade sidordningar och/eller sidnamn sparas. Vill du spara ändringarna?";case"save_before_lang":return"För att ändra språkinställningarna måste ändrade sidordningar och/eller sidnamn sparas. Vill du spara ändringarna?";case"del_page2":return"Är du säker på att du vill ta bort sidan och allt dess innehåll?";case"page_prop":return"För att kunna ändra alternativ för en sida måste även ändrade sidordningar och/eller sidnamn sparas. Vill du spara ändringarna och gå till 'Alternativ'?";case"reverse_publish":return"Är du säker på att du vill utföra en bakvänd publicering?";case"reverse_publish2":return"Ett fel uppstod, kontakta kundtjänst för hjälp.";case"depublish":return"Är du säker på att du vill utföra en avpublicering.";case"depublish2":return"Din hemsida är nu avpublicerad.";case"del_post":return"Är du säker på att du vill ta bort hela inlägget och allt dess innehåll?";case"logged_out":return"Du har blivit utloggad på grund av inaktivitet. Klicka på OK för att gå till framsidan för inloggning.";case"del_gall":return"Vill du ta bort detta galleri? (Alla andra gallerier finns kvar och inga bilder raderas)";case"end_monthly":return"Är du säker på att du vill avbryta ditt månadsabonnemang?";case"end_extra_service":return"Är du säker på att du vill avbryta förlängingen av denna tjänst?";case"end_monthly_base1y":return"När beställningen är utförd kommer ditt månadsabonnemang att ersättas av ett helårsabonnemang. Du förlorar inga dagar som du redan betalat för. Vill du detta?";case"you_must_accept_terms_msg":return"Du måste godkänna köpvillkoren för att kunna beställa.";case"tinymce_word_alert":return"OBS! Du verkar ha klistrat in text från Microsoft Word utan att använda knappen 'Klistra in från Word'.\nDetta kan leda till att vissa webbläsare får problem att visa sidan korrekt.";case"loading_page":return"Laddar sida...";case"set_std_lang":return"Är du säker på att du vill ändra standardspråk?";case"del_lang":return"OBS! Detta kommer att ta bort alla sidor och dess innehåll associerade med detta språket. Är du säker på att du vill fortsätta?";case"flag_list_reset":return"Flaggmenyn är nu i sin utgångsposition.";case"transaction_error":return"Transaktionen kunde inte genomföras.";case"Previous":return"Bakåt";case"Next":return"Nästa";case"language_trial":return"Språkstöd aktiveras nu för dig gratis i 30 dagar.";case"empty_cart":return"Är du säker på att du vill tömma din varukorg?";case"colliding_publish":return"Din hemsida håller redan på att publiceras, var vänlig försök igen om en liten stund.";case"qty_not_available_single":return"Angiven kvantitet finns ej i lager just nu.";case"qty_not_available_multiple":return"En eller flera av produkterna finns ej i lager i angivna kvantiteter.\nKvantiteterna har automatiskt justerats.\n\nSe över ändringarna och klicka på 'Gå till kassan' igen för att gå vidare.";case"del_prod_version":return"Är du säker på att du vill ta bort produktvarianten?";case"del_last_prod_version":return"Ta bort hela köpknappen?";case"idn_domain_warning":return"OBS! Domännamn med specialtecken (åäö) fungerar ej med e-post!";case"change_theme_conf":return"OBS! Följande kommer att nollställas: Sidhuvudsbild, typsnitt.\nInställningar gjorda under anpassa design kommer finnas kvar men inaktiveras.";case"change_design_conf":return"OBS! Följande kommer att nollställas:\nSidhuvudsbild, typsnitt, sidlayouter, inställningar gjorda under anpassa design.";case"vid_dim_ret_failed":return"Det gick tyvärr inte att fastställa dimensionerna automatiskt.";case"tinymce_a_select":return"Markera en text innan du skapar en länk.";case"text_editor":return"Text";case"html_editor":return"HTML";case"All my files":return"Alla mina filer";case"files selected":return"filer valda";case"All my categories":return"Alla mina kategorier";case"categories selected":return"kategorier valda";case"settings":return"Inställningar";case"Image settings":return"Bildinställningar";case"You have attempted to queue too many files":return"Du har köat för många filer";case"You have reached the upload limit":return"Du har nått uppladdningsgränsen för en fil";case"You may select":return"Du får max välja";case"up to":return"upp till";case"files":return"filer";case"one file":return"en fil";case"File is too big":return"Filen är för stor";case"Cannot upload zero byte files":return"Kan ej ladda upp 0-byte-filer";case"Invalid file type":return"Otillåten filtyp";case"Unexpected error":return"Oväntat fel";case"Enter new category name":return"Skriv in önskat kategorinamn";case"Enter new blog name":return"Skriv in nytt bloggnamn";case"Enter new news source name":return"Skriv in nytt namn för nyhetskälla";case"Form":return"Formulär";case"Couldn't import the file":return"Kunde inte importera filen";case"try uploading it manually instead":return"försök ladda upp den manuellt istället";case"Specified file bigger than":return"Angiven fil är större än";case"Are you sure you want to delete this object?":return"Är du säker på att du vill radera objektet?";case"Preview":return"Förhandsgranska";case"Drag me":return"Flytta mig";case"Close":return"Stäng";case"Save and close":return"Spara och stäng";case"Design Manager":return"Designhanteraren";case"Customize Design":return"Anpassa design";case"Reset font to default values":return"Ändra tillbaka till standardinställningarna";case"Fonts":return"Typsnitt";break;case"Reset font to default values":return"Ändra tillbaka till standardinställningarna";case"Reset tweak to default values?":return"Återställ anpassning till standard";case"Are you sure":return"Är du säker";case"Language settings":return"Språkinställningar";case"Help":return"Hjälp";case"Domain manager":return"Domänhanterare";default:return e}}
function closeDialogBox(e){var a=300;if(e==true){$("#h24_preloaded_sub_dialog_box").fadeOut(a);$("#jqmOverlay").css("z-index","2999")}else{$("#h24_preloaded_dialog_box").fadeOut(a);$("#h24_preloaded_sub_dialog_box").fadeOut(a);$("#jqmOverlay").fadeOut(a)}}function createDialog(e,a,i,o,s,l,d,t,_,r,h){var g=$(window).scrollTop();if($(e).hasClass("h24_dialog")){}else $(e).addClass("h24_dialog");if(_==true){var c="#h24_preloaded_sub_dialog_box"}else{var c="#h24_preloaded_dialog_box";$("#h24_preloaded_sub_dialog_box").hide()}$(c+" div.h24_dialog").appendTo(c+"_storage");if(_==true)$(c).html('<div class="h24_dialogBoxFlaps"> <div class="h24_dialogBoxFlaps_left"> <div class="h24_dialogTopFlap h24_flapWithNoIcon"> <strong>'+o+'</strong> </div> </div> <div class="h24_dialogBoxFlaps_right"><a id="h24_sub_dialog_box_div_close_button" href="javascript: closeDialogBox(true)" class="h24_dialogTopFlap"> <strong>'+$h24.phrase.GUIPhrase("Dialogs","Close")+'</strong> <span data-icon="&#50043;" aria-hidden="true" class="h24_icon_left_space"></span> </a> </div> </div>  <!-- End of header flaps -->  <div class="cc_tr_uiDialogBox"><div class="cc_tl_uiDialogBox"></div></div><div class="cc_mr_uiDialogBox"><div class="cc_ml_uiDialogBox"><div class="cc_content_uiDialogBox"><div class="cc_content_bg_uiDialogBox">   <div class="replaceMe">tmp</div>     <div class="clearer"></div></div><div class="clearer"></div></div></div></div>');else $(c).html('<div class="h24_dialogBoxFlaps"> <div class="h24_dialogBoxFlaps_left"> <div class="h24_dialogTopFlap h24_flapWithNoIcon"> <strong>'+o+'</strong> </div> </div> <div class="h24_dialogBoxFlaps_right"><a href="#" class="h24_dialogTopFlap h24_dialog_videohelp_link" style="display:none;"><strong>'+$h24.phrase.GUIPhrase("Dialogs","Video")+'</strong><div><!-- Icon --></div></a><a href="#" target="_blank" class="h24_dialogTopFlap h24_dialog_help_link" style="display:none;"><strong>'+$h24.phrase.GUIPhrase("Dialogs","Help")+'</strong><div class="h24_dialogHelpIcon"><!-- Icon --></div></a><a id="h24_dialog_box_div_close_button" href="javascript: closeDialogBox()" class="h24_dialogTopFlap"> <strong>'+$h24.phrase.GUIPhrase("Dialogs","Close")+'</strong> <span data-icon="&#50043;" aria-hidden="true" class="h24_icon_left_space"></span> </a> </div> </div>  <!-- End of header flaps -->  <div class="cc_mr_uiDialogBox"><div class="cc_ml_uiDialogBox"><div class="cc_content_uiDialogBox"><div class="cc_content_bg_uiDialogBox">   <div class="replaceMe">tmp</div>     <div class="clearer"></div></div><div class="clearer"></div></div></div></div>');$(c+" div.replaceMe").replaceWith($(e));$(e).removeClass("hidden");$(c).css("z-index","3000").css("width","auto").css("min-height","0").css("padding","40px 4px 4px 4px").css("top","15%");$("#jqmOverlay").css("opacity","0");if(r==true){$(c).css("padding-bottom","0px")}if(h==true){$(c).removeClass("h24_flapsToTheLeft");$(c).removeClass("h24_flapsToTheRight");$(c+" .h24_dialogBoxFlaps_left").hide();if(_==true)$("#h24_sub_dialog_box_div_close_button").hide();else $("#h24_dialog_box_div_close_button").hide()}else{if(!$(c).hasClass("h24_flapsToTheLeft"))$(c).addClass("h24_flapsToTheLeft");if(!$(c).hasClass("h24_flapsToTheRight"))$(c).addClass("h24_flapsToTheRight");$(c+" .h24_dialogBoxFlaps_left").show();if(_==true)$("#h24_sub_dialog_box_div_close_button").show();else $("#h24_dialog_box_div_close_button").show()}if(l=="modal"){$("#jqmOverlay").css("opacity","0.8")}if(s=="center"){$(c).css("top",g+50+"px")}if(s=="top"){$(c).css("top",g+30+"px")}if(s=="supertop"){$(c).css("top",g+10+"px")}a=parseInt(a);if(a>0){$(c).css("width",a);$(c).css("margin-left",-(a/2))}if(i>0){$(c).css("min-height",i);$(c).css("padding-bottom","0")}if(d>=0){$(e+"_tabs").tabs("option","active",d)}$(c).show();if(l=="modal"){$("#jqmOverlay").show()}if($(c+" input").hasClass("h24_focus_me"))$(c+" input.h24_focus_me").focus();else $(c+" :input[type='text']:first").focus();if(_==true){$("#jqmOverlay").css("z-index","3005");$("div#h24_preloaded_sub_dialog_box").css("z-index","3010");if(e=="#generic_linking_dialog")$("div#h24_preloaded_sub_dialog_box").css("padding-bottom","0px");else if(typeof r=="undefined")$("div#h24_preloaded_sub_dialog_box").css("padding-bottom","")}if(e.length>16&&e.substring(0,16)=="#settings_block_"){var n=e.substring(16);if(typeof $h24.blocks[n]!="undefined"){var p=$h24.blocks[n].innerblocktype;if(typeof $h24.data!="undefined"&&typeof $h24.data.help[$h24.fullLanguage].blocks[p]!="undefined"){var u=$h24.data.help[$h24.fullLanguage].blocks[p];if(typeof u.video!="undefined"){$(c+" a.h24_dialog_videohelp_link").show().unbind().click(function(){$h24.utils.loadVideo(u.video.src,{videoWidth:u.video.width,videoHeight:u.video.height});return false})}if(typeof u.url!="undefined"){$(c+" a.h24_dialog_help_link").show().attr("href",u.url)}}}}else if(typeof $h24.data!="undefined"&&typeof $h24.data.help[$h24.fullLanguage].dialogs[e.substring(1)]!="undefined"){var u=$h24.data.help[$h24.fullLanguage].dialogs[e.substring(1)];if(typeof d!="undefined"&&d!=0){if(typeof u["tab_"+d]!="undefined")u=u["tab_"+d]}if(typeof u.video!="undefined"){$(c+" a.h24_dialog_videohelp_link").show().unbind().click(function(){$h24.utils.loadVideo(u.video.src,{videoWidth:u.video.width,videoHeight:u.video.height});return false})}if(typeof u.url!="undefined"){$(c+" a.h24_dialog_help_link").show().attr("href",u.url)}}}function load_video(e,a,i,o){$h24.utils.loadVideo(e,{videoWidth:a,videoHeight:i,onClose:o})}function showDialog(e,a,i){switch(e){case"#generic_bgpic_uploader":createDialog("#generic_bgpic_uploader",550,0,$h24.phrase.GUIPhrase("Dialogs","Change Image"),"center","modal");break;case"#title_edit_text_div":createDialog("#title_edit_text_div",450,0,$h24.phrase.GUIPhrase("Dialogs","Edit Text"),"center","modal");break;case"#title_upload_pic_div":createDialog("#title_upload_pic_div",460,0,$h24.phrase.GUIPhrase("Dialogs","Change Image"),"center","modal");break;case"#design_chooser_panel":createDialog("#design_chooser_panel",920,560,$h24.phrase.GUIPhrase("Dialogs","Design manager"),"supertop","modal",a);break;case"#style_manager":createDialog("#style_manager",1005,0,$h24.phrase.GUIPhrase("Dialogs","Style Manager"),"supertop","modal",a);break;case"#style_manager_font_selector":createDialog("#style_manager_font_selector",800,560,$h24.phrase.GUIPhrase("Dialogs","Choose Font"),"supertop","modal",a,null,true);break;case"#style_manager_size_selector":createDialog("#style_manager_size_selector",660,560,$h24.phrase.GUIPhrase("Dialogs","Choose Size"),"supertop","modal",a,null,true);break;case"#style_manager_pattern_selector":createDialog("#style_manager_pattern_selector",980,560,$h24.phrase.GUIPhrase("Dialogs","Choose Pattern"),"supertop","modal",a,null,true);break;case"#image_cropping_dialog":if($("#h24_preloaded_dialog_box").is(":hidden"))createDialog("#image_cropping_dialog",i,0,$h24.phrase.GUIPhrase("Dialogs","Image Cropper"),"top","modal",0);else createDialog("#image_cropping_dialog",i,0,$h24.phrase.GUIPhrase("Dialogs","Image Cropper"),"supertop","modal",0,null,true);break;case"#image_manager":createDialog("#image_manager",780,552,$h24.phrase.GUIPhrase("Dialogs","Image Manager"),"supertop","modal",a);break;case"#homepage_settings_dialogbox":createDialog("#homepage_settings_dialogbox",875,0,$h24.phrase.GUIPhrase("Dialogs","Account & Settings"),"top","modal",a);break}}
function reloadColumns(o,l){if(typeof l=="undefined"){var l=false}var i=Math.random()*9999;$h24.post($h24.slashwebroot+"Page/Collections/pageid/"+$h24.pageid+"/anticache/"+i,{__skip_loading_overlay:l},function(l){$("<div>"+l+"</div>").find(".h24_tmp_collection").each(function(){var o=$(this),l=o.data("collection");$("#ulcollection"+l+" .block_container").each(function(){var o=$(this).data("blockid");if(!!o&&!!$h24.blocks[o]&&typeof $h24.blocks[o].destroy=="function"){$h24.blocks[o].destroy()}});$("#ulcollection"+l).html(o.html())});$h24.block.initCollections();if(typeof o=="function")o.call(this)})}function reloadColumn(o,l,i){if(typeof i=="undefined"){var i=false}var t=Math.random()*9999;$h24.post($h24.slashwebroot+"Page/Collection/pageid/"+$h24.pageid+"/collection/"+o+"/anticache/"+t,{__skip_loading_overlay:i},function(i){$("#ulcollection"+o+" .block_container").each(function(){var o=$(this).data("blockid");if(!!o&&!!$h24.blocks[o]&&typeof $h24.blocks[o].destroy=="function"){$h24.blocks[o].destroy()}});$("#ulcollection"+o).html(i);$h24.block.initCollection(o);if(typeof l=="function")l.call(this)})}
!function(s){s.fn.superfish=function(a){var i=s.fn.superfish,e=i.c,n=s(['<span class="',e.arrowClass,'"> &#187;</span>'].join("")),o=function(){var a=s(this),i=l(a);clearTimeout(i.sfTimer);a.showSuperfishUl().siblings().hideSuperfishUl()},t=function(){var a=s(this),e=l(a),n=i.op;clearTimeout(e.sfTimer);e.sfTimer=setTimeout(function(){n.retainPath=s.inArray(a[0],n.$path)>-1;a.hideSuperfishUl();if(n.$path.length&&a.parents(["li.",n.hoverClass].join("")).length<1){o.call(n.$path)}},n.delay)},l=function(s){var a=s.parents(["ul.",e.menuClass,":first"].join(""))[0];i.op=i.o[a.serial];return a},r=function(s){s.addClass(e.anchorClass).append(n.clone())};return this.each(function(){var n=this.serial=i.o.length;var l=s.extend({},i.defaults,a);l.$path=s("li."+l.pathClass,this).slice(0,l.pathLevels).each(function(){s(this).addClass([l.hoverClass,e.bcClass].join(" ")).filter("li:has(ul)").removeClass(l.pathClass)});i.o[n]=i.op=l;s("li:has(ul)",this)[s.fn.hoverIntent&&!l.disableHI?"hoverIntent":"hover"](o,t).each(function(){if(l.autoArrows)r(s(">a:first-child",this))}).not("."+e.bcClass).hideSuperfishUl();var h=s("a",this);h.each(function(s){var a=h.eq(s).parents("li");h.eq(s).focus(function(){o.call(a)}).blur(function(){t.call(a)})});l.onInit.call(this)}).each(function(){var a=[e.menuClass];if(i.op.dropShadows&&!(s.browser.msie&&s.browser.version<7))a.push(e.shadowClass);s(this).addClass(a.join(" "))})};var a=s.fn.superfish;a.o=[];a.op={};a.IE7fix=function(){var i=a.op;if(s.browser.msie&&s.browser.version>6&&i.dropShadows&&i.animation.opacity!=undefined)this.toggleClass(a.c.shadowClass+"-off")};a.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};a.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"fast",autoArrows:true,dropShadows:false,disableHI:true,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};s.fn.extend({hideSuperfishUl:function(){var i=a.op,e=i.retainPath===true?i.$path:"";i.retainPath=false;var n=s(["li.",i.hoverClass].join(""),this).add(this).not(e).removeClass(i.hoverClass).find(">ul").hide().css("visibility","hidden");i.onHide.call(n);return this},showSuperfishUl:function(){var s=a.op,i=a.c.shadowClass+"-off",e=this.addClass(s.hoverClass).find(">ul:hidden").css("visibility","visible");a.IE7fix.call(e);s.onBeforeShow.call(e);e.animate(s.animation,s.speed,function(){a.IE7fix.call(e);s.onShow.call(e)});return this}})}(jQuery);
!function(t){t.fn.supersubs=function(e){var i=t.extend({},t.fn.supersubs.defaults,e);return this.each(function(){var e=t(this);var s=t.meta?t.extend({},i,e.data()):i;var a=t('<li id="menu-fontsize">&#8212;</li>').css({padding:0,position:"absolute",top:"-999em",width:"auto"}).appendTo(e).width();t("#menu-fontsize").remove();$ULs=e.find("ul");$ULs.each(function(e){var i=$ULs.eq(e);var n=i.children();var d=n.children("a");var h=n.css("white-space","nowrap").css("float");var r=i.add(n).add(d).css({"float":"none",width:"auto"}).end().end()[0].clientWidth/a;r+=s.extraWidth;if(r>s.maxWidth){r=s.maxWidth}else if(r<s.minWidth){r=s.minWidth}r+="em";i.css("width",r);n.css({"float":h,width:"100%","white-space":"normal"}).each(function(){var e=t(">ul",this);var i=e.css("left")!==undefined?"left":"right";e.css(i,r)})})})};t.fn.supersubs.defaults={minWidth:9,maxWidth:25,extraWidth:0}}(jQuery);
var dust={};function getGlobal(){return function(){return this.dust}.call(null)}!function(dust){dust.helpers={};dust.cache={};dust.register=function(l,e){if(!l)return;dust.cache[l]=e};dust.render=function(l,e,n){var t=new Stub(n).head;dust.load(l,t,Context.wrap(e,l)).end()};dust.stream=function(l,e){var n=new Stream;dust.nextTick(function(){dust.load(l,n.head,Context.wrap(e,l)).end()});return n};dust.renderSource=function(l,e,n){return dust.compileFn(l)(e,n)};dust.compileFn=function(l,e){var n=dust.loadSource(dust.compile(l,e));return function(l,t){var u=t?new Stub(t):new Stream;dust.nextTick(function(){n(u.head,Context.wrap(l,e)).end()});return u}};dust.load=function(l,e,n){var t=dust.cache[l];if(t){return t(e,n)}else{if(dust.onLoad){return e.map(function(e){dust.onLoad(l,function(t,u){if(t)return e.setError(t);if(!dust.cache[l])dust.loadSource(dust.compile(u,l));dust.cache[l](e,n).end()})})}return e.setError(new Error("Template Not Found: "+l))}};dust.loadSource=function(source,path){return eval(source)};if(Array.isArray){dust.isArray=Array.isArray}else{dust.isArray=function(l){return Object.prototype.toString.call(l)=="[object Array]"}}dust.nextTick=function(){if(typeof process!=="undefined"){return process.nextTick}else{return function(l){setTimeout(l,0)}}}();dust.isEmpty=function(l){if(dust.isArray(l)&&!l.length)return true;if(l===0)return false;return!l};dust.filter=function(l,e,n){if(n){for(var t=0,u=n.length;t<u;t++){var i=n[t];if(i==="s"){e=null}else if(typeof dust.filters[i]==="function"){l=dust.filters[i](l)}}}if(e){l=dust.filters[e](l)}return l};dust.filters={h:function(l){return dust.escapeHtml(l)},j:function(l){return dust.escapeJs(l)},u:encodeURI,uc:encodeURIComponent,js:function(l){if(!JSON){return l}return JSON.stringify(l)},jp:function(l){if(!JSON){return l}return JSON.parse(l)}};function Context(l,e,n){this.stack=l;this.global=e;this.blocks=n}dust.makeBase=function(l){return new Context(new Stack,l)};Context.wrap=function(l,e){if(l instanceof Context){return l}var n={};n.__templates__=[];n.__templates__.push(e);return new Context(new Stack(l),n)};Context.prototype.get=function(l){var e=this.stack,n;while(e){if(e.isObject){n=e.head[l];if(!(n===undefined)){return n}}e=e.tail}return this.global?this.global[l]:undefined};Context.prototype.getPath=function(l,e){var n=this.stack,t,u=e.length,i=l?undefined:this.stack.tail;if(l&&u===0)return n.head;n=n.head;var f=0;while(n&&f<u){t=n;n=n[e[f]];f++;while(!n&&!l){if(f>1)return undefined;if(i){n=i.head;i=i.tail;f=0}else if(!l){n=this.global;l=true;f=0}}}if(typeof n=="function"){return function(){return n.apply(t,arguments)}}else{return n}};Context.prototype.push=function(l,e,n){return new Context(new Stack(l,this.stack,e,n),this.global,this.blocks)};Context.prototype.rebase=function(l){return new Context(new Stack(l),this.global,this.blocks)};Context.prototype.current=function(){return this.stack.head};Context.prototype.getBlock=function(l,e,n){if(typeof l==="function"){l=l(e,n).data.join("");e.data=[]}var t=this.blocks;if(!t)return;var u=t.length,i;while(u--){i=t[u][l];if(i)return i}};Context.prototype.shiftBlocks=function(l){var e=this.blocks,n;if(l){if(!e){n=[l]}else{n=e.concat([l])}return new Context(this.stack,this.global,n)}return this};function Stack(l,e,n,t){this.tail=e;this.isObject=!dust.isArray(l)&&l&&typeof l==="object";this.head=l;this.index=n;this.of=t}function Stub(l){this.head=new Chunk(this);this.callback=l;this.out=""}Stub.prototype.flush=function(){var l=this.head;while(l){if(l.flushable){this.out+=l.data.join("")}else if(l.error){this.callback(l.error);this.flush=function(){};return}else{return}l=l.next;this.head=l}this.callback(null,this.out)};function Stream(){this.head=new Chunk(this)}Stream.prototype.flush=function(){var l=this.head;while(l){if(l.flushable){this.emit("data",l.data.join(""))}else if(l.error){this.emit("error",l.error);this.flush=function(){};return}else{return}l=l.next;this.head=l}this.emit("end")};Stream.prototype.emit=function(l,e){if(!this.events)return false;var n=this.events[l];if(!n)return false;if(typeof n=="function"){n(e)}else{var t=n.slice(0);for(var u=0,i=t.length;u<i;u++){t[u](e)}}};Stream.prototype.on=function(l,e){if(!this.events){this.events={}}if(!this.events[l]){this.events[l]=e}else if(typeof this.events[l]==="function"){this.events[l]=[this.events[l],e]}else{this.events[l].push(e)}return this};Stream.prototype.pipe=function(l){this.on("data",function(e){l.write(e,"utf8")}).on("end",function(){l.end()}).on("error",function(e){l.error(e)});return this};function Chunk(l,e,n){this.root=l;this.next=e;this.data=[];this.flushable=false;this.taps=n}Chunk.prototype.write=function(l){var e=this.taps;if(e){l=e.go(l)}this.data.push(l);return this};Chunk.prototype.end=function(l){if(l){this.write(l)}this.flushable=true;this.root.flush();return this};Chunk.prototype.map=function(l){var e=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,e,this.taps);this.next=n;this.flushable=true;l(n);return e};Chunk.prototype.tap=function(l){var e=this.taps;if(e){this.taps=e.push(l)}else{this.taps=new Tap(l)}return this};Chunk.prototype.untap=function(){this.taps=this.taps.tail;return this};Chunk.prototype.render=function(l,e){return l(this,e)};Chunk.prototype.reference=function(l,e,n,t){if(typeof l==="function"){l.isFunction=true;l=l.apply(e.current(),[this,e,null,{auto:n,filters:t}]);if(l instanceof Chunk){return l}}if(!dust.isEmpty(l)){return this.write(dust.filter(l,n,t))}else{return this}};Chunk.prototype.section=function(l,e,n,t){if(typeof l==="function"){l=l.apply(e.current(),[this,e,n,t]);if(l instanceof Chunk){return l}}var u=n.block,i=n["else"];if(t){e=e.push(t)}if(dust.isArray(l)){if(u){var f=l.length,r=this;if(f>0){if(e.stack.head){e.stack.head["$len"]=f}for(var s=0;s<f;s++){if(e.stack.head){e.stack.head["$idx"]=s}r=u(r,e.push(l[s],s,f))}if(e.stack.head){e.stack.head["$idx"]=undefined;e.stack.head["$len"]=undefined}return r}else if(i){return i(this,e)}}}else if(l===true){if(u){return u(this,e)}}else if(l||l===0){if(u)return u(this,e.push(l))}else if(i){return i(this,e)}return this};Chunk.prototype.exists=function(l,e,n){var t=n.block,u=n["else"];if(!dust.isEmpty(l)){if(t)return t(this,e)}else if(u){return u(this,e)}return this};Chunk.prototype.notexists=function(l,e,n){var t=n.block,u=n["else"];if(dust.isEmpty(l)){if(t)return t(this,e)}else if(u){return u(this,e)}return this};Chunk.prototype.block=function(l,e,n){var t=n.block;if(l){t=l}if(t){return t(this,e)}return this};Chunk.prototype.partial=function(l,e,n){var t;if(e.global&&e.global.__templates__){e.global.__templates__.push(l)}if(n){t=dust.makeBase(e.global);t.blocks=e.blocks;if(e.stack&&e.stack.tail){t.stack=e.stack.tail}t=t.push(n);t=t.push(e.stack.head)}else{t=e}var u;if(typeof l==="function"){u=this.capture(l,t,function(l,e){dust.load(l,e,t).end()})}else{u=dust.load(l,this,t)}if(e.global&&e.global.__templates__){e.global.__templates__.pop()}return u};Chunk.prototype.helper=function(l,e,n,t){if(dust.helpers[l]){return dust.helpers[l](this,e,n,t)}else{return this}};Chunk.prototype.capture=function(l,e,n){return this.map(function(t){var u=new Stub(function(l,e){if(l){t.setError(l)}else{n(e,t)}});l(u.head,e).end()})};Chunk.prototype.setError=function(l){this.error=l;this.root.flush();return this};function Tap(l,e){this.head=l;this.tail=e}Tap.prototype.push=function(l){return new Tap(l,this)};Tap.prototype.go=function(l){var e=this;while(e){l=e.head(l);e=e.tail}return l};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(l){if(typeof l==="string"){if(!HCHARS.test(l)){return l}return l.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;")}return l};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(l){if(typeof l==="string"){return l.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t")}return l}}(dust);if(typeof exports!=="undefined"){if(typeof process!=="undefined"){require("./server")(dust)}module.exports=dust}var dustCompiler=function(l){l.compile=function(n,t){try{var u=e(l.parse(n));return s(u,t)}catch(i){if(!i.line||!i.column)throw i;throw new SyntaxError(i.message+" At line : "+i.line+", column : "+i.column)}};function e(e){var n={};return l.filterNode(n,e)}l.filterNode=function(e,n){return l.optimizers[n[0]](e,n)};l.optimizers={body:t,buffer:f,special:i,format:r,reference:n,"#":n,"?":n,"^":n,"<":n,"+":n,"@":n,"%":n,partial:n,context:n,params:n,bodies:n,param:n,filters:f,key:f,path:f,literal:f,comment:r};l.pragmas={esc:function(l,e,n,t){var u=l.auto;if(!e)e="h";l.auto=e==="s"?"":e;var i=c(l,n.block);l.auto=u;return i}};function n(e,n){var t=[n[0]];for(var u=1,i=n.length;u<i;u++){var f=l.filterNode(e,n[u]);if(f)t.push(f)}return t}function t(e,n){var t=[n[0]],u;for(var i=1,f=n.length;i<f;i++){var r=l.filterNode(e,n[i]);if(r){if(r[0]==="buffer"){if(u){u[1]+=r[1]}else{u=r;t.push(r)}}else{u=null;t.push(r)}}}return t}var u={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};function i(l,e){return["buffer",u[e[1]]]}function f(l,e){return e}function r(){}function s(e,n){var t={name:n,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(n?'"'+n+'"':"null")+","+l.compileNode(t,e)+");"+o(t)+a(t)+"return body_0;"+"})();"}function o(l){var e=[],n=l.blocks;for(var t in n){e.push("'"+t+"':"+n[t])}if(e.length){l.blocks="ctx=ctx.shiftBlocks(blocks);";return"var blocks={"+e.join(",")+"};"}return l.blocks=""}function a(l){var e=[],n=l.bodies,t=l.blocks;for(var u=0,i=n.length;u<i;u++){e[u]="function body_"+u+"(chk,ctx){"+t+"return chk"+n[u]+";}"}return e.join("")}function c(e,n){var t="";for(var u=1,i=n.length;u<i;u++){t+=l.compileNode(e,n[u])}return t}l.compileNode=function(e,n){return l.nodes[n[0]](e,n)};l.nodes={body:function(l,e){var n=l.index++,t="body_"+n;l.bodies[n]=c(l,e);return t},buffer:function(l,e){return".write("+p(e[1])+")"},format:function(l,e){return".write("+p(e[1]+e[2])+")"},reference:function(e,n){return".reference("+l.compileNode(e,n[1])+",ctx,"+l.compileNode(e,n[2])+")"},"#":function(l,e){return h(l,e,"section")},"?":function(l,e){return h(l,e,"exists")},"^":function(l,e){return h(l,e,"notexists")},"<":function(e,n){var t=n[4];for(var u=1,i=t.length;u<i;u++){var f=t[u],r=f[1][1];if(r==="block"){e.blocks[n[1].text]=l.compileNode(e,f[2]);return""}}return""},"+":function(e,n){if(typeof n[1].text==="undefined"&&typeof n[4]==="undefined"){return".block(ctx.getBlock("+l.compileNode(e,n[1])+",chk, ctx),"+l.compileNode(e,n[2])+", {},"+l.compileNode(e,n[3])+")"}else{return".block(ctx.getBlock("+p(n[1].text)+"),"+l.compileNode(e,n[2])+","+l.compileNode(e,n[4])+","+l.compileNode(e,n[3])+")"}},"@":function(e,n){return".helper("+p(n[1].text)+","+l.compileNode(e,n[2])+","+l.compileNode(e,n[4])+","+l.compileNode(e,n[3])+")"},"%":function(e,n){var t=n[1][1];if(!l.pragmas[t])return"";var u=n[4];var i={};for(var f=1,r=u.length;f<r;f++){var s=u[f];i[s[1][1]]=s[2]}var o=n[3];var a={};for(var f=1,r=o.length;f<r;f++){var c=o[f];a[c[1][1]]=c[2][1]}var h=n[2][1]?n[2][1].text:null;return l.pragmas[t](e,h,i,a)},partial:function(e,n){return".partial("+l.compileNode(e,n[1])+","+l.compileNode(e,n[2])+","+l.compileNode(e,n[3])+")"},context:function(e,n){if(n[1]){return"ctx.rebase("+l.compileNode(e,n[1])+")"}return"ctx"},params:function(e,n){var t=[];for(var u=1,i=n.length;u<i;u++){t.push(l.compileNode(e,n[u]))}if(t.length){return"{"+t.join(",")+"}"}return"null"},bodies:function(e,n){var t=[];for(var u=1,i=n.length;u<i;u++){t.push(l.compileNode(e,n[u]))}return"{"+t.join(",")+"}"},param:function(e,n){return l.compileNode(e,n[1])+":"+l.compileNode(e,n[2])},filters:function(l,e){var n=[];for(var t=1,u=e.length;t<u;t++){var i=e[t];n.push('"'+i+'"')}return'"'+l.auto+'"'+(n.length?",["+n.join(",")+"]":"")},key:function(l,e){return'ctx.get("'+e[1]+'")'},path:function(e,n){var t=n[1],u=n[2],i=[];for(var f=0,r=u.length;f<r;f++){if(l.isArray(u[f]))i.push(l.compileNode(e,u[f]));else i.push('"'+u[f]+'"')}return"ctx.getPath("+t+",["+i.join(",")+"])"},literal:function(l,e){return p(e[1])}};function h(e,n,t){return"."+t+"("+l.compileNode(e,n[1])+","+l.compileNode(e,n[2])+","+l.compileNode(e,n[4])+","+l.compileNode(e,n[3])+")"}var p=typeof JSON==="undefined"?function(e){return'"'+l.escapeJs(e)+'"'}:JSON.stringify;return l};if(typeof exports!=="undefined"){module.exports=dustCompiler}else{dustCompiler(getGlobal())}!function(l){var e=function(){function l(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,t){var u={body:d,part:v,section:m,sec_tag_start:g,end_tag:b,context:y,params:k,bodies:x,reference:A,partial:C,filters:w,special:S,identifier:N,number:_,frac:j,integer:E,path:T,key:F,array:B,array_part:O,inline:R,inline_part:L,buffer:$,literal:J,esc:z,comment:Q,tag:U,ld:H,rd:P,lb:Z,rb:G,eol:I,ws:M};if(t!==undefined){if(u[t]===undefined){throw new Error("Invalid rule name: "+l(t)+".")}}else{t="body"}var i={offset:0,line:1,column:1,seenCR:false};var f=0;var r={offset:0,line:1,column:1,seenCR:false};var s=[];function o(l,e,n){var t=l;var u=n-l.length;for(var i=0;i<u;i++){t=e+t}return t}function a(l){var e=l.charCodeAt(0);var n;var t;if(e<=255){n="x";t=2}else{n="u";t=4}return"\\"+n+o(e.toString(16).toUpperCase(),"0",t)}function c(l){var e={};for(var n in l){e[n]=l[n]}return e}function h(l,e){var t=l.offset+e;for(var u=l.offset;u<t;u++){var i=n.charAt(u);if(i==="\n"){if(!l.seenCR){l.line++}l.column=1;l.seenCR=false}else if(i==="\r"||i==="\u2028"||i==="\u2029"){l.line++;l.column=1;l.seenCR=true}else{l.column++;l.seenCR=false}}l.offset+=e}function p(l){if(i.offset<r.offset){return}if(i.offset>r.offset){r=c(i);s=[]}s.push(l)}function d(){var l,e;var n;n=c(i);l=[];e=v();while(e!==null){l.push(e);e=v()}if(l!==null){l=function(l,e,n,t){return["body"].concat(t)}(n.offset,n.line,n.column,l)}if(l===null){i=c(n)}return l}function v(){var l;l=Q();if(l===null){l=m();if(l===null){l=C();if(l===null){l=S();if(l===null){l=A();if(l===null){l=$()}}}}}return l}function m(){var l,e,t,u,r,s,o;var a,v;f++;a=c(i);v=c(i);l=g();if(l!==null){e=[];t=M();while(t!==null){e.push(t);t=M()}if(e!==null){t=P();if(t!==null){u=d();if(u!==null){r=x();if(r!==null){s=b();s=s!==null?s:"";if(s!==null){o=function(l,e,n,t,u,i,f){if(!f||t[1].text!==f.text){throw new Error("Expected end tag for "+t[1].text+" but it was not found. At line : "+e+", column : "+n)}return true}(i.offset,i.line,i.column,l,u,r,s)?"":null;if(o!==null){l=[l,e,t,u,r,s,o]}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}if(l!==null){l=function(l,e,n,t,u,i,f){i.push(["param",["literal","block"],u]);t.push(i);return t}(a.offset,a.line,a.column,l[0],l[3],l[4],l[5])}if(l===null){i=c(a)}if(l===null){a=c(i);v=c(i);l=g();if(l!==null){e=[];t=M();while(t!==null){e.push(t);t=M()}if(e!==null){if(n.charCodeAt(i.offset)===47){t="/";h(i,1)}else{t=null;if(f===0){p('"/"')}}if(t!==null){u=P();if(u!==null){l=[l,e,t,u]}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}}else{l=null;i=c(v)}if(l!==null){l=function(l,e,n,t){t.push(["bodies"]);return t}(a.offset,a.line,a.column,l[0])}if(l===null){i=c(a)}}f--;if(f===0&&l===null){p("section")}return l}function g(){var l,e,t,u,r,s;var o,a;o=c(i);a=c(i);l=H();if(l!==null){if(/^[#?^<+@%]/.test(n.charAt(i.offset))){e=n.charAt(i.offset);h(i,1)}else{e=null;if(f===0){p("[#?^<+@%]")}}if(e!==null){t=[];u=M();while(u!==null){t.push(u);u=M()}if(t!==null){u=N();if(u!==null){r=y();if(r!==null){s=k();if(s!==null){l=[l,e,t,u,r,s]}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}if(l!==null){l=function(l,e,n,t,u,i,f){return[t,u,i,f]}(o.offset,o.line,o.column,l[1],l[3],l[4],l[5])}if(l===null){i=c(o)}return l}function b(){var l,e,t,u,r,s;var o,a;f++;o=c(i);a=c(i);l=H();if(l!==null){if(n.charCodeAt(i.offset)===47){e="/";h(i,1)}else{e=null;if(f===0){p('"/"')}}if(e!==null){t=[];u=M();while(u!==null){t.push(u);u=M()}if(t!==null){u=N();if(u!==null){r=[];s=M();while(s!==null){r.push(s);s=M()}if(r!==null){s=P();if(s!==null){l=[l,e,t,u,r,s]}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}}else{l=null;i=c(a)}if(l!==null){l=function(l,e,n,t){return t}(o.offset,o.line,o.column,l[3])}if(l===null){i=c(o)}f--;if(f===0&&l===null){p("end tag")}return l}function y(){var l,e;var t,u,r;t=c(i);u=c(i);r=c(i);if(n.charCodeAt(i.offset)===58){l=":";h(i,1)}else{l=null;if(f===0){p('":"')}}if(l!==null){e=N();if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t){return t}(u.offset,u.line,u.column,l[1])}if(l===null){i=c(u)}l=l!==null?l:"";if(l!==null){l=function(l,e,n,t){return t?["context",t]:["context"]}(t.offset,t.line,t.column,l)}if(l===null){i=c(t)}return l}function k(){var l,e,t,u,r;var s,o,a;f++;s=c(i);l=[];o=c(i);a=c(i);t=M();if(t!==null){e=[];while(t!==null){e.push(t);t=M()}}else{e=null}if(e!==null){t=F();if(t!==null){if(n.charCodeAt(i.offset)===61){u="=";h(i,1)}else{u=null;if(f===0){p('"="')}}if(u!==null){r=_();if(r===null){r=N();if(r===null){r=R()}}if(r!==null){e=[e,t,u,r]}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}if(e!==null){e=function(l,e,n,t,u){return["param",["literal",t],u]}(o.offset,o.line,o.column,e[1],e[3])}if(e===null){i=c(o)}while(e!==null){l.push(e);o=c(i);a=c(i);t=M();if(t!==null){e=[];while(t!==null){e.push(t);t=M()}}else{e=null}if(e!==null){t=F();if(t!==null){if(n.charCodeAt(i.offset)===61){u="=";h(i,1)}else{u=null;if(f===0){p('"="')}}if(u!==null){r=_();if(r===null){r=N();if(r===null){r=R()}}if(r!==null){e=[e,t,u,r]}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}if(e!==null){e=function(l,e,n,t,u){return["param",["literal",t],u]}(o.offset,o.line,o.column,e[1],e[3])}if(e===null){i=c(o)}}if(l!==null){l=function(l,e,n,t){return["params"].concat(t)}(s.offset,s.line,s.column,l)}if(l===null){i=c(s)}f--;if(f===0&&l===null){p("params")}return l}function x(){var l,e,t,u,r,s;var o,a,v;f++;o=c(i);l=[];a=c(i);v=c(i);e=H();if(e!==null){if(n.charCodeAt(i.offset)===58){t=":";h(i,1)}else{t=null;if(f===0){p('":"')}}if(t!==null){u=F();if(u!==null){r=P();if(r!==null){s=d();if(s!==null){e=[e,t,u,r,s]}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}if(e!==null){e=function(l,e,n,t,u){return["param",["literal",t],u]}(a.offset,a.line,a.column,e[2],e[4])}if(e===null){i=c(a)}while(e!==null){l.push(e);a=c(i);v=c(i);e=H();if(e!==null){if(n.charCodeAt(i.offset)===58){t=":";h(i,1)}else{t=null;if(f===0){p('":"')}}if(t!==null){u=F();if(u!==null){r=P();if(r!==null){s=d();if(s!==null){e=[e,t,u,r,s]}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}}else{e=null;i=c(v)}if(e!==null){e=function(l,e,n,t,u){return["param",["literal",t],u]}(a.offset,a.line,a.column,e[2],e[4])}if(e===null){i=c(a)}}if(l!==null){l=function(l,e,n,t){return["bodies"].concat(t)}(o.offset,o.line,o.column,l)}if(l===null){i=c(o)}f--;if(f===0&&l===null){p("bodies")}return l}function A(){var l,e,n,t;var u,r;f++;u=c(i);r=c(i);l=H();if(l!==null){e=N();if(e!==null){n=w();if(n!==null){t=P();if(t!==null){l=[l,e,n,t]}else{l=null;i=c(r)}}else{l=null;i=c(r)}}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t,u){return["reference",t,u]}(u.offset,u.line,u.column,l[1],l[2])}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("reference")}return l}function C(){var l,e,t,u,r,s,o,a,d;var v,m,g;f++;v=c(i);m=c(i);l=H();if(l!==null){if(n.charCodeAt(i.offset)===62){e=">";h(i,1)}else{e=null;if(f===0){p('">"')}}if(e===null){if(n.charCodeAt(i.offset)===43){e="+";h(i,1)}else{e=null;if(f===0){p('"+"')}}}if(e!==null){t=[];u=M();while(u!==null){t.push(u);u=M()}if(t!==null){g=c(i);u=F();if(u!==null){u=function(l,e,n,t){return["literal",t]}(g.offset,g.line,g.column,u)}if(u===null){i=c(g)}if(u===null){u=R()}if(u!==null){r=y();if(r!==null){s=k();if(s!==null){o=[];a=M();while(a!==null){o.push(a);a=M()}if(o!==null){if(n.charCodeAt(i.offset)===47){a="/";h(i,1)}else{a=null;if(f===0){p('"/"')}}if(a!==null){d=P();if(d!==null){l=[l,e,t,u,r,s,o,a,d]}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}}else{l=null;i=c(m)}if(l!==null){l=function(l,e,n,t,u,i,f){var r=t===">"?"partial":t;return[r,u,i,f]}(v.offset,v.line,v.column,l[1],l[3],l[4],l[5])}if(l===null){i=c(v)}f--;if(f===0&&l===null){p("partial")}return l}function w(){var l,e,t;var u,r,s;f++;u=c(i);l=[];r=c(i);s=c(i);if(n.charCodeAt(i.offset)===124){e="|";h(i,1)}else{e=null;if(f===0){p('"|"')}}if(e!==null){t=F();if(t!==null){e=[e,t]}else{e=null;i=c(s)}}else{e=null;i=c(s)}if(e!==null){e=function(l,e,n,t){return t}(r.offset,r.line,r.column,e[1])}if(e===null){i=c(r)}while(e!==null){l.push(e);r=c(i);s=c(i);if(n.charCodeAt(i.offset)===124){e="|";h(i,1)}else{e=null;if(f===0){p('"|"')}}if(e!==null){t=F();if(t!==null){e=[e,t]}else{e=null;i=c(s)}}else{e=null;i=c(s)}if(e!==null){e=function(l,e,n,t){return t}(r.offset,r.line,r.column,e[1])}if(e===null){i=c(r)}}if(l!==null){l=function(l,e,n,t){return["filters"].concat(t)}(u.offset,u.line,u.column,l)}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("filters")}return l}function S(){var l,e,t,u;var r,s;f++;r=c(i);s=c(i);l=H();if(l!==null){if(n.charCodeAt(i.offset)===126){e="~";h(i,1)}else{e=null;if(f===0){p('"~"')}}if(e!==null){t=F();if(t!==null){u=P();if(u!==null){l=[l,e,t,u]}else{l=null;i=c(s)}}else{l=null;i=c(s)}}else{l=null;i=c(s)}}else{l=null;i=c(s)}if(l!==null){l=function(l,e,n,t){return["special",t]}(r.offset,r.line,r.column,l[2])}if(l===null){i=c(r)}f--;if(f===0&&l===null){p("special")}return l}function N(){var l;var e;f++;e=c(i);l=T();if(l!==null){l=function(l,e,n,t){var u=["path"].concat(t);u.text=t[1].join(".");return u}(e.offset,e.line,e.column,l)}if(l===null){i=c(e)}if(l===null){e=c(i);l=F();if(l!==null){l=function(l,e,n,t){var u=["key",t];u.text=t;return u}(e.offset,e.line,e.column,l)}if(l===null){i=c(e)}}f--;if(f===0&&l===null){p("identifier")}return l}function _(){var l;var e;f++;e=c(i);l=j();if(l===null){l=E()}if(l!==null){l=function(l,e,n,t){return["literal",t]}(e.offset,e.line,e.column,l)}if(l===null){i=c(e)}f--;if(f===0&&l===null){p("number")}return l}function j(){var l,e,t,u;var r,s;f++;r=c(i);s=c(i);l=E();if(l!==null){if(n.charCodeAt(i.offset)===46){e=".";h(i,1)}else{e=null;if(f===0){p('"."')}}if(e!==null){u=E();if(u!==null){t=[];while(u!==null){t.push(u);u=E()}}else{t=null}if(t!==null){l=[l,e,t]}else{l=null;i=c(s)}}else{l=null;i=c(s)}}else{l=null;i=c(s)}if(l!==null){l=function(l,e,n,t,u){return parseFloat(t+"."+u.join(""))}(r.offset,r.line,r.column,l[0],l[2])}if(l===null){i=c(r)}f--;if(f===0&&l===null){p("frac")}return l}function E(){var l,e;var t;f++;t=c(i);if(/^[0-9]/.test(n.charAt(i.offset))){e=n.charAt(i.offset);h(i,1)}else{e=null;if(f===0){p("[0-9]")}}if(e!==null){l=[];while(e!==null){l.push(e);if(/^[0-9]/.test(n.charAt(i.offset))){e=n.charAt(i.offset);h(i,1)}else{e=null;if(f===0){p("[0-9]")}}}}else{l=null}if(l!==null){l=function(l,e,n,t){return parseInt(t.join(""),10)}(t.offset,t.line,t.column,l)}if(l===null){i=c(t)}f--;if(f===0&&l===null){p("integer")}return l}function T(){var l,e,t;var u,r;f++;u=c(i);r=c(i);l=F();l=l!==null?l:"";if(l!==null){t=O();if(t===null){t=B()}if(t!==null){e=[];while(t!==null){e.push(t);t=O();if(t===null){t=B()}}}else{e=null}if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t,u){u=u[0];if(t&&u){u.unshift(t);return[false,u]}return[true,u]}(u.offset,u.line,u.column,l[0],l[1])}if(l===null){i=c(u)}if(l===null){u=c(i);r=c(i);if(n.charCodeAt(i.offset)===46){l=".";h(i,1)}else{l=null;if(f===0){p('"."')}}if(l!==null){e=[];t=O();if(t===null){t=B()}while(t!==null){e.push(t);t=O();if(t===null){t=B()}}if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t){if(t.length>0){return[true,t[0]]}return[true,[]]}(u.offset,u.line,u.column,l[1])}if(l===null){i=c(u)}}f--;if(f===0&&l===null){p("path")}return l}function F(){var l,e,t;var u,r;f++;u=c(i);r=c(i);if(/^[a-zA-Z_$]/.test(n.charAt(i.offset))){l=n.charAt(i.offset);h(i,1)}else{l=null;if(f===0){p("[a-zA-Z_$]")}}if(l!==null){e=[];if(/^[0-9a-zA-Z_$\-]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p("[0-9a-zA-Z_$\\-]")}}while(t!==null){e.push(t);if(/^[0-9a-zA-Z_$\-]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p("[0-9a-zA-Z_$\\-]")}}}if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t,u){return t+u.join("")}(u.offset,u.line,u.column,l[0],l[1])}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("key")}return l}function B(){var l,e,t;var u,r,s,o,a;f++;u=c(i);r=c(i);s=c(i);o=c(i);l=Z();if(l!==null){a=c(i);if(/^[0-9]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p("[0-9]")}}if(t!==null){e=[];while(t!==null){e.push(t);if(/^[0-9]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p("[0-9]")}}}}else{e=null}if(e!==null){e=function(l,e,n,t){return t.join("")}(a.offset,a.line,a.column,e)}if(e===null){i=c(a)}if(e===null){e=N()}if(e!==null){t=G();if(t!==null){l=[l,e,t]}else{l=null;i=c(o)}}else{l=null;i=c(o)}}else{l=null;i=c(o)}if(l!==null){l=function(l,e,n,t){return t}(s.offset,s.line,s.column,l[1])}if(l===null){i=c(s)}if(l!==null){e=O();e=e!==null?e:"";if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t,u){if(u){u.unshift(t)}else{u=[t]}return u}(u.offset,u.line,u.column,l[0],l[1])}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("array")}return l}function O(){var l,e,t;var u,r,s,o;f++;u=c(i);r=c(i);s=c(i);o=c(i);if(n.charCodeAt(i.offset)===46){e=".";h(i,1)}else{e=null;if(f===0){p('"."')}}if(e!==null){t=F();if(t!==null){e=[e,t]}else{e=null;i=c(o)}}else{e=null;i=c(o)}if(e!==null){e=function(l,e,n,t){return t}(s.offset,s.line,s.column,e[1])}if(e===null){i=c(s)}if(e!==null){l=[];while(e!==null){l.push(e);s=c(i);o=c(i);if(n.charCodeAt(i.offset)===46){e=".";h(i,1)}else{e=null;if(f===0){p('"."')}}if(e!==null){t=F();if(t!==null){e=[e,t]}else{e=null;i=c(o)}}else{e=null;i=c(o)}if(e!==null){e=function(l,e,n,t){return t}(s.offset,s.line,s.column,e[1])}if(e===null){i=c(s)}}}else{l=null}if(l!==null){e=B();e=e!==null?e:"";if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t,u){if(u){return t.concat(u)}else{return t}}(u.offset,u.line,u.column,l[0],l[1])}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("array_part")}return l}function R(){var l,e,t;var u,r;f++;u=c(i);r=c(i);if(n.charCodeAt(i.offset)===34){l='"';h(i,1)}else{l=null;if(f===0){p('"\\""')}}if(l!==null){if(n.charCodeAt(i.offset)===34){e='"';h(i,1)}else{e=null;if(f===0){p('"\\""')}}if(e!==null){l=[l,e]}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n){return["literal",""]}(u.offset,u.line,u.column)}if(l===null){i=c(u)}if(l===null){u=c(i);r=c(i);if(n.charCodeAt(i.offset)===34){l='"';h(i,1)}else{l=null;if(f===0){p('"\\""')}}if(l!==null){e=J();if(e!==null){if(n.charCodeAt(i.offset)===34){t='"';h(i,1)}else{t=null;if(f===0){p('"\\""')}}if(t!==null){l=[l,e,t]}else{l=null;i=c(r)}}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t){return["literal",t]}(u.offset,u.line,u.column,l[1])}if(l===null){i=c(u)}if(l===null){u=c(i);r=c(i);if(n.charCodeAt(i.offset)===34){l='"';h(i,1)}else{l=null;if(f===0){p('"\\""')}}if(l!==null){t=L();if(t!==null){e=[];while(t!==null){e.push(t);t=L()}}else{e=null}if(e!==null){if(n.charCodeAt(i.offset)===34){t='"';h(i,1)}else{t=null;if(f===0){p('"\\""')}}if(t!==null){l=[l,e,t]}else{l=null;i=c(r)}}else{l=null;i=c(r)}}else{l=null;i=c(r)}if(l!==null){l=function(l,e,n,t){return["body"].concat(t)}(u.offset,u.line,u.column,l[1])}if(l===null){i=c(u)}}}f--;if(f===0&&l===null){p("inline")}return l}function L(){var l;var e;l=S();if(l===null){l=A();if(l===null){e=c(i);l=J();if(l!==null){l=function(l,e,n,t){return["buffer",t]}(e.offset,e.line,e.column,l)}if(l===null){i=c(e)}}}return l}function $(){var l,e,t,u,r;var s,o,a,d;f++;s=c(i);o=c(i);l=I();if(l!==null){e=[];t=M();while(t!==null){e.push(t);t=M()}if(e!==null){l=[l,e]}else{l=null;i=c(o)}}else{l=null;i=c(o)}if(l!==null){l=function(l,e,n,t,u){return["format",t,u.join("")]}(s.offset,s.line,s.column,l[0],l[1])}if(l===null){i=c(s)}if(l===null){s=c(i);o=c(i);a=c(i);d=c(i);f++;e=U();f--;if(e===null){e=""}else{e=null;i=c(d)}if(e!==null){d=c(i);f++;t=Q();f--;if(t===null){t=""}else{t=null;i=c(d)}if(t!==null){d=c(i);f++;u=I();f--;if(u===null){u=""}else{u=null;i=c(d)}if(u!==null){if(n.length>i.offset){r=n.charAt(i.offset);h(i,1)}else{r=null;if(f===0){p("any character")}}if(r!==null){e=[e,t,u,r]}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}if(e!==null){e=function(l,e,n,t){return t}(o.offset,o.line,o.column,e[3])}if(e===null){i=c(o)}if(e!==null){l=[];while(e!==null){l.push(e);o=c(i);a=c(i);d=c(i);f++;e=U();f--;if(e===null){e=""}else{e=null;i=c(d)}if(e!==null){d=c(i);f++;t=Q();f--;if(t===null){t=""}else{t=null;i=c(d)}if(t!==null){d=c(i);f++;u=I();f--;if(u===null){u=""}else{u=null;i=c(d)}if(u!==null){if(n.length>i.offset){r=n.charAt(i.offset);h(i,1)}else{r=null;if(f===0){p("any character")}}if(r!==null){e=[e,t,u,r]}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}}else{e=null;i=c(a)}if(e!==null){e=function(l,e,n,t){return t}(o.offset,o.line,o.column,e[3])}if(e===null){i=c(o)}}}else{l=null}if(l!==null){l=function(l,e,n,t){return["buffer",t.join("")]}(s.offset,s.line,s.column,l)}if(l===null){i=c(s)}}f--;if(f===0&&l===null){p("buffer")}return l}function J(){var l,e,t;var u,r,s,o;f++;u=c(i);r=c(i);s=c(i);o=c(i);f++;e=U();f--;if(e===null){e=""}else{e=null;i=c(o)}if(e!==null){t=z();if(t===null){if(/^[^"]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p('[^"]')}}}if(t!==null){e=[e,t]}else{e=null;i=c(s)}}else{e=null;i=c(s)}if(e!==null){e=function(l,e,n,t){return t}(r.offset,r.line,r.column,e[1])}if(e===null){i=c(r)}if(e!==null){l=[];while(e!==null){l.push(e);r=c(i);s=c(i);o=c(i);f++;e=U();f--;if(e===null){e=""}else{e=null;i=c(o)}if(e!==null){t=z();if(t===null){if(/^[^"]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p('[^"]')}}}if(t!==null){e=[e,t]}else{e=null;i=c(s)}}else{e=null;i=c(s)}if(e!==null){e=function(l,e,n,t){return t}(r.offset,r.line,r.column,e[1])}if(e===null){i=c(r)}}}else{l=null}if(l!==null){l=function(l,e,n,t){return t.join("")}(u.offset,u.line,u.column,l)}if(l===null){i=c(u)}f--;if(f===0&&l===null){p("literal")}return l}function z(){var l;var e;e=c(i);if(n.substr(i.offset,2)==='\\"'){l='\\"';h(i,2)}else{l=null;if(f===0){p('"\\\\\\""')}}if(l!==null){l=function(l,e,n){return'"'}(e.offset,e.line,e.column)}if(l===null){i=c(e)}return l}function Q(){var l,e,t,u;var r,s,o,a,d;f++;r=c(i);s=c(i);if(n.substr(i.offset,2)==="{!"){l="{!";h(i,2)}else{l=null;if(f===0){p('"{!"')}}if(l!==null){e=[];o=c(i);a=c(i);d=c(i);f++;if(n.substr(i.offset,2)==="!}"){t="!}";h(i,2)}else{t=null;if(f===0){p('"!}"')}}f--;if(t===null){t=""}else{t=null;i=c(d)}if(t!==null){if(n.length>i.offset){u=n.charAt(i.offset);h(i,1)}else{u=null;if(f===0){p("any character")}}if(u!==null){t=[t,u]}else{t=null;i=c(a)}}else{t=null;i=c(a)}if(t!==null){t=function(l,e,n,t){return t}(o.offset,o.line,o.column,t[1])}if(t===null){i=c(o)}while(t!==null){e.push(t);o=c(i);a=c(i);d=c(i);f++;if(n.substr(i.offset,2)==="!}"){t="!}";h(i,2)}else{t=null;if(f===0){p('"!}"')}}f--;if(t===null){t=""}else{t=null;i=c(d)}if(t!==null){if(n.length>i.offset){u=n.charAt(i.offset);h(i,1)}else{u=null;
if(f===0){p("any character")}}if(u!==null){t=[t,u]}else{t=null;i=c(a)}}else{t=null;i=c(a)}if(t!==null){t=function(l,e,n,t){return t}(o.offset,o.line,o.column,t[1])}if(t===null){i=c(o)}}if(e!==null){if(n.substr(i.offset,2)==="!}"){t="!}";h(i,2)}else{t=null;if(f===0){p('"!}"')}}if(t!==null){l=[l,e,t]}else{l=null;i=c(s)}}else{l=null;i=c(s)}}else{l=null;i=c(s)}if(l!==null){l=function(l,e,n,t){return["comment",t.join("")]}(r.offset,r.line,r.column,l[1])}if(l===null){i=c(r)}f--;if(f===0&&l===null){p("comment")}return l}function U(){var l,e,t,u,r,s,o,a;var d,v,m;d=c(i);l=H();if(l!==null){e=[];t=M();while(t!==null){e.push(t);t=M()}if(e!==null){if(/^[#?^><+%:@\/~%]/.test(n.charAt(i.offset))){t=n.charAt(i.offset);h(i,1)}else{t=null;if(f===0){p("[#?^><+%:@\\/~%]")}}if(t!==null){u=[];r=M();while(r!==null){u.push(r);r=M()}if(u!==null){v=c(i);m=c(i);f++;s=P();f--;if(s===null){s=""}else{s=null;i=c(m)}if(s!==null){m=c(i);f++;o=I();f--;if(o===null){o=""}else{o=null;i=c(m)}if(o!==null){if(n.length>i.offset){a=n.charAt(i.offset);h(i,1)}else{a=null;if(f===0){p("any character")}}if(a!==null){s=[s,o,a]}else{s=null;i=c(v)}}else{s=null;i=c(v)}}else{s=null;i=c(v)}if(s!==null){r=[];while(s!==null){r.push(s);v=c(i);m=c(i);f++;s=P();f--;if(s===null){s=""}else{s=null;i=c(m)}if(s!==null){m=c(i);f++;o=I();f--;if(o===null){o=""}else{o=null;i=c(m)}if(o!==null){if(n.length>i.offset){a=n.charAt(i.offset);h(i,1)}else{a=null;if(f===0){p("any character")}}if(a!==null){s=[s,o,a]}else{s=null;i=c(v)}}else{s=null;i=c(v)}}else{s=null;i=c(v)}}}else{r=null}if(r!==null){s=[];o=M();while(o!==null){s.push(o);o=M()}if(s!==null){o=P();if(o!==null){l=[l,e,t,u,r,s,o]}else{l=null;i=c(d)}}else{l=null;i=c(d)}}else{l=null;i=c(d)}}else{l=null;i=c(d)}}else{l=null;i=c(d)}}else{l=null;i=c(d)}}else{l=null;i=c(d)}if(l===null){l=A()}return l}function H(){var l;if(n.charCodeAt(i.offset)===123){l="{";h(i,1)}else{l=null;if(f===0){p('"{"')}}return l}function P(){var l;if(n.charCodeAt(i.offset)===125){l="}";h(i,1)}else{l=null;if(f===0){p('"}"')}}return l}function Z(){var l;if(n.charCodeAt(i.offset)===91){l="[";h(i,1)}else{l=null;if(f===0){p('"["')}}return l}function G(){var l;if(n.charCodeAt(i.offset)===93){l="]";h(i,1)}else{l=null;if(f===0){p('"]"')}}return l}function I(){var l;if(n.charCodeAt(i.offset)===10){l="\n";h(i,1)}else{l=null;if(f===0){p('"\\n"')}}if(l===null){if(n.substr(i.offset,2)==="\r\n"){l="\r\n";h(i,2)}else{l=null;if(f===0){p('"\\r\\n"')}}if(l===null){if(n.charCodeAt(i.offset)===13){l="\r";h(i,1)}else{l=null;if(f===0){p('"\\r"')}}if(l===null){if(n.charCodeAt(i.offset)===8232){l="\u2028";h(i,1)}else{l=null;if(f===0){p('"\\u2028"')}}if(l===null){if(n.charCodeAt(i.offset)===8233){l="\u2029";h(i,1)}else{l=null;if(f===0){p('"\\u2029"')}}}}}}return l}function M(){var l;if(/^[\t\x0B\f \xA0\uFEFF]/.test(n.charAt(i.offset))){l=n.charAt(i.offset);h(i,1)}else{l=null;if(f===0){p("[\\t\\x0B\\f \\xA0\\uFEFF]")}}if(l===null){l=I()}return l}function q(l){l.sort();var e=null;var n=[];for(var t=0;t<l.length;t++){if(l[t]!==e){n.push(l[t]);e=l[t]}}return n}var D=u[t]();if(D===null||i.offset!==n.length){var K=Math.max(i.offset,r.offset);var V=K<n.length?n.charAt(K):null;var W=i.offset>r.offset?i:r;throw new e.SyntaxError(q(s),V,K,W.line,W.column)}return D},toSource:function(){return this._source}};n.SyntaxError=function(e,n,t,u,i){function f(e,n){var t,u;switch(e.length){case 0:t="end of input";break;case 1:t=e[0];break;default:t=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}u=n?l(n):"end of input";return"Expected "+t+" but "+u+" found."}this.name="SyntaxError";this.expected=e;this.found=n;this.message=f(e,n);this.offset=t;this.line=u;this.column=i};n.SyntaxError.prototype=Error.prototype;return n}();l.parse=e.parse}(typeof exports!=="undefined"?exports:getGlobal());
!function(dust){var _console=typeof console!=="undefined"?console:{log:function(){}};function isSelect(e){var t=e.current();return typeof t==="object"&&t.isSelect===true}function jsonFilter(e,t){if(typeof t==="function"){return t.toString()}return t}function filter(e,t,r,n,o){n=n||{};var i=r.block,s,l,u=n.filterOpType||"";if(typeof n.key!=="undefined"){s=dust.helpers.tap(n.key,e,t)}else if(isSelect(t)){s=t.current().selectKey;if(t.current().isResolved){o=function(){return false}}}else{_console.log("No key specified for filter in:"+u+" helper ");return e}l=dust.helpers.tap(n.value,e,t);if(o(coerce(l,n.type,t),coerce(s,n.type,t))){if(isSelect(t)){t.current().isResolved=true}if(i){return e.render(i,t)}else{_console.log("Missing body block in the "+u+" helper ");return e}}else if(r["else"]){return e.render(r["else"],t)}return e}function coerce(e,t,r){if(e){switch(t||typeof e){case"number":return+e;case"string":return String(e);case"boolean":{e=e==="false"?false:e;return Boolean(e)}case"date":return new Date(e);case"context":return r.get(e)}}return e}var helpers={tap:function(e,t,r){var n=e;if(typeof e==="function"){if(e.isFunction===true){n=e()}else{n="";t.tap(function(e){n+=e;return""}).render(e,r).untap();if(n===""){n=false}}}return n},sep:function(e,t,r){var n=r.block;if(t.stack.index===t.stack.of-1){return e}if(n){return r.block(e,t)}else{return e}},idx:function(e,t,r){var n=r.block;if(n){return r.block(e,t.push(t.stack.index))}else{return e}},contextDump:function(e,t,r,n){var o=n||{},i=o.to||"output",s=o.key||"current",l;i=dust.helpers.tap(i,e,t),s=dust.helpers.tap(s,e,t);if(s==="full"){l=JSON.stringify(t.stack,jsonFilter,2)}else{l=JSON.stringify(t.stack.head,jsonFilter,2)}if(i==="console"){_console.log(l);return e}else{return e.write(l)}},"if":function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"];if(params&&params.cond){var cond=params.cond;cond=dust.helpers.tap(cond,chunk,context);if(eval(cond)){if(body){return chunk.render(bodies.block,context)}else{_console.log("Missing body block in the if helper!");return chunk}}if(skip){return chunk.render(bodies["else"],context)}}else{_console.log("No condition given in the if helper!")}return chunk},math:function(e,t,r,n){if(n&&typeof n.key!=="undefined"&&n.method){var o=n.key,i=n.method,s=n.operand,l=n.round,u=null,a=function(){_console.log("operand is required for this math method");return null};o=dust.helpers.tap(o,e,t);s=dust.helpers.tap(s,e,t);switch(i){case"mod":if(s===0||s===-0){_console.log("operand for divide operation is 0/-0: expect Nan!")}u=parseFloat(o)%parseFloat(s);break;case"add":u=parseFloat(o)+parseFloat(s);break;case"subtract":u=parseFloat(o)-parseFloat(s);break;case"multiply":u=parseFloat(o)*parseFloat(s);break;case"divide":if(s===0||s===-0){_console.log("operand for divide operation is 0/-0: expect Nan/Infinity!")}u=parseFloat(o)/parseFloat(s);break;case"ceil":u=Math.ceil(parseFloat(o));break;case"floor":u=Math.floor(parseFloat(o));break;case"round":u=Math.round(parseFloat(o));break;case"abs":u=Math.abs(parseFloat(o));break;default:_console.log("method passed is not supported")}if(u!==null){if(l){u=Math.round(u)}if(r&&r.block){return e.render(r.block,t.push({isSelect:true,isResolved:false,selectKey:u}))}else{return e.write(u)}}else{return e}}else{_console.log("Key is a required parameter for math helper along with method/operand!")}return e},select:function(e,t,r,n){var o=r.block;if(n&&typeof n.key!=="undefined"){var i=dust.helpers.tap(n.key,e,t);if(o){return e.render(r.block,t.push({isSelect:true,isResolved:false,selectKey:i}))}else{_console.log("Missing body block in the select helper ");return e}}else{_console.log("No key given in the select helper!")}return e},eq:function(e,t,r,n){if(n){n.filterOpType="eq"}return filter(e,t,r,n,function(e,t){return t===e})},ne:function(e,t,r,n){if(n){n.filterOpType="ne";return filter(e,t,r,n,function(e,t){return t!==e})}return e},lt:function(e,t,r,n){if(n){n.filterOpType="lt";return filter(e,t,r,n,function(e,t){return t<e})}},lte:function(e,t,r,n){if(n){n.filterOpType="lte";return filter(e,t,r,n,function(e,t){return t<=e})}return e},gt:function(e,t,r,n){if(n){n.filterOpType="gt";return filter(e,t,r,n,function(e,t){return t>e})}return e},gte:function(e,t,r,n){if(n){n.filterOpType="gte";return filter(e,t,r,n,function(e,t){return t>=e})}return e},"default":function(e,t,r,n){if(n){n.filterOpType="default"}return filter(e,t,r,n,function(e,t){return true})},size:function(e,t,r,n){var o,i=0,s,l;n=n||{};o=n.key;if(!o||o===true){i=0}else if(dust.isArray(o)){i=o.length}else if(!isNaN(parseFloat(o))&&isFinite(o)){i=o}else if(typeof o==="object"){s=0;for(l in o){if(Object.hasOwnProperty.call(o,l)){s++}}i=s}else{i=(o+"").length}return e.write(i)}};dust.helpers=helpers}(typeof exports!=="undefined"?module.exports=require("dustjs-linkedin"):dust);
h24core.prototype.socialBox=function(){var a,e,i;var t,o,n,s,c,d;var l=function(){if(!$(".sitepreview").length)return;e=$('[data-section="socialBoxContainer"], [data-section="socialBoxSidebar"]');e.off(".h24");i=$('#header [data-section="socialBoxContainer"]');if(i.data("active")===false){i.find('[data-section="icons"]').data("action","");i.find('[data-section="defaulticons"]').data("action","")}else{i.find('[data-section="icons"]').data("action","openSettings");i.find('[data-section="defaulticons"]').data("action","openSettings")}if(i.data("active")===false&&i.data("linked")=="no"){i.hide()}e.on("click.h24","[data-action]",function(a){var e=$(this);switch(e.data("action")){case"openSettings":b();a.preventDefault();break}});p();u()};var r=function(){e=$('[data-section="socialBoxSidebar"]');e.off(".h24");e.on("click.h24","[data-action]",function(a){var t=$(this);switch(t.data("action")){case"closeSettings":k();_();a.preventDefault();break;case"toggleVisibility":var o=t.parent().find("[data-toggle=visibility]");o.toggleClass("hide");if(t.data("state")=="show"){$('[data-section="socialBoxSidebar"] [data-section="links"] li').each(function(a){if($(this).data("state")=="invisible"){$(this).removeClass("hide");$(this).data("state","visible")}});t.data("state","hide")}else if(t.data("state")=="hide"){$('[data-section="socialBoxSidebar"] [data-section="links"] li').each(function(a){if($(this).data("state")=="visible"&&$(this).data("defaulticon")=="no"&&!$(this).find("span").hasClass("h24-socialBox-sidePanel-icon__enable")){$(this).addClass("hide");$(this).data("state","invisible")}});t.data("state","show")}break;case"changeStyle":e.find('[data-type="square"]').removeClass("h24-socialBox-sidePanel-iconstyle__marked");e.find('[data-type="circle"]').removeClass("h24-socialBox-sidePanel-iconstyle__marked");t.addClass("h24-socialBox-sidePanel-iconstyle__marked");e.find('input[name="style"]').val(t.data("type"));g();a.preventDefault();break;case"changeColor":e.find('[data-type="dark"]').removeClass("h24-socialBox-sidePanel-iconcolor__marked");e.find('[data-type="light"]').removeClass("h24-socialBox-sidePanel-iconcolor__marked");t.addClass("h24-socialBox-sidePanel-iconcolor__marked");e.find('input[name="color"]').val(t.data("type"));g();a.preventDefault();break;case"advanced":if(i.data("linked")!="yes"){var n=$('[data-section="socialBoxSidebar"] [data-section="links"] li').first();n.addClass("h24-SocialLinks-sortableHandle__warning");n.removeClass("h24-SocialLinks-sortableHandle__warning",1e3);return false}break}});f();h();g()};var f=function(){e.find("li input").on("input",function(){$this=$(this);if($this.val().length>0){$(this).closest("li").find("span").addClass("h24-socialBox-sidePanel-icon__enable")}else{$(this).closest("li").find("span").removeClass("h24-socialBox-sidePanel-icon__enable")}g()})};var h=function(){$("#h24-SocialLinks-sortableList").sortable({cursor:"move",axis:"y",update:function(){g()}})};var v=function(){var a=e.find('[data-toggletip="tooltip"]');var i=B();if(i["icon"].length==0){a.popover({placement:"left",container:'[data-section="links"]',trigger:"manual"});a.popover("show")}};var u=function(){var a=false;i.on("mouseenter mouseleave",function(e){if(i.data("active")===true){if(e.type==="mouseleave"&&a===false){i.find('[data-section="defaulticons"]').removeClass("h24-socialBox-container-icons__marked");i.find('[data-section="icons"]').removeClass("h24-socialBox-container-icons__marked");$('[data-action="dragSocialBox"]').hide()}else{i.find('[data-section="defaulticons"]').addClass("h24-socialBox-container-icons__marked");i.find('[data-section="icons"]').addClass("h24-socialBox-container-icons__marked");$('[data-action="dragSocialBox"]').show()}}else{i.find('[data-section="icons"]').removeClass("h24-socialBox-container-icons");i.find('[data-section="icons"]').addClass("h24-socialBox-transparentBorder")}}).on("mousedown mouseup",function(e){if(i.data("active")===true){if(e.type==="mousedown"){a=true}else{a=false}}});$(document).mouseup(function(){if(a){i.find('[data-section="defaulticons"]').removeClass("h24-socialBox-container-icons__marked");i.find('[data-section="icons"]').removeClass("h24-socialBox-container-icons__marked");$('[data-action="dragSocialBox"]').hide();a=false}})};var p=function(){var a=$(this);if(i.data("active")===true){i.draggable({scroll:false,containment:"#header",handle:'[data-action="dragSocialBox"]',start:function(a,e){t=$("#header").width();o=$("#header").height();n=$('[data-section="socialBoxContainer"]').width();s=$('[data-section="socialBoxContainer"]').height()},stop:function(a,e){m()}})}else{i.draggable({disabled:true})}};var m=function(){if(parseInt(i.css("left"))>=t){c=t-n;$('[data-section="socialBoxContainer"]').css("left",c)}else if(parseInt(i.css("left"))<0){c=0;$('[data-section="socialBoxContainer"]').css("left",c)}else{c=parseInt(i.css("left"))}if(parseInt(i.css("top"))>=o-30){d=o-s;$('[data-section="socialBoxContainer"]').css("top",d)}else if(parseInt(i.css("top"))<0){d=0;$('[data-section="socialBoxContainer"]').css("top",d)}else{d=parseInt(i.css("top"))}$h24.post($h24.slashwebroot+"Page/Communicator",{model:"SocialBox",modelaction:"savePosition",homepageid:$h24.homepageid,offset_x:c,offset_y:d,__skip_loading_overlay:true},function(a){})};var g=function(){var a=i.find('[data-section="icons"]');var t=i.find('[data-section="defaulticons"]');var o=B();var n=x();a.empty();if(o["icon"].length>0){for(var s=0;s<o["icon"].length;s++){var c={color:o["color"],icon:o["icon"][s]};dust.render("SocialBox",c,function(e,i){a.append(i)})}t.hide();a.show();i.data("linked","yes");if(e.find('[data-section="links"]').find("div.popover:visible").length){e.find('[data-section="links"]').popover("destroy")}}else{t.show();a.hide();i.data("linked","no");if(!e.find('[data-section="links"]').find("div.popover:visible").length){e.find('[data-section="links"]').popover({placement:"left",container:'[data-section="links"]',trigger:"manual"});e.find('[data-section="links"]').popover("show")}}var d=parseInt(i.css("left"));var l=i.width();var r=$("#header").width();if(d+l>r){var f=r-l;$('[data-section="socialBoxContainer"]').css("left",f)}var h=new Array;var v=0;$('[data-section="socialBoxSidebar"] [data-section="links"] li').each(function(a){if($(this).data("state")=="invisible"){h.push("invisible")}v++});var u=false;for(s=0;s<h.length;s++){if(h[s]==="invisible"){u=true}}if(u){$('[data-section="more"]').show()}else{$('[data-section="more"]').hide()}};var x=function(){var a=$('[data-section="socialBoxSidebar"]');var e=i.find('[data-section="icons"]');var t=i.find('[data-section="defaulticons"]');var o=a.find('[data-section="style"] input[name="style"]');var n=a.find('[data-section="color"] input[name="color"]');var s=new Array;$('[data-section="socialBoxSidebar"] [data-section="links"] li').each(function(a){var e=$(this).find("input").val();s.push({defaulticon:$(this).data("defaulticon"),url:e,type:$(this).data("type"),style:o.val(),color:n.val(),square:$(this).data("square"),circle:$(this).data("circle"),defaulturl:$(this).data("defaulturl")})});return s};var B=function(){var a=$('[data-section="socialBoxSidebar"]');var e=a.find('[data-section="style"] input[name="style"]');var i=a.find('[data-section="color"] input[name="color"]');var t=new Array;$('[data-section="socialBoxSidebar"] [data-section="links"] li').each(function(a){var o=$(this).data("defaulticon");var n=$(this).find("input").val();var s=$(this).data("type");var c=e.val();var d=i.val();var l=$(this).data("square");var r=$(this).data("circle");var f=$(this).data("defaulturl");if(n.length>0){t.push({defaulticon:o,url:n,type:s,style:c,color:d,square:l,circle:r,defaulturl:f})}});var o=new Array;o["color"]=i.val();o["icon"]=t;return o};var _=function(){$h24.GUI.destroy("socialBoxSettings");$h24.GUI.destroy("socialBoxSettingsOverlay");$h24.adminPanel.togglePanel(false);i.data("appearance","sidebar_closed");i.find('[data-section="defaulticons"]').removeClass("h24-socialBox-container-icons__marked");i.find('[data-section="icons"]').removeClass("h24-socialBox-container-icons__marked");if(i.data("linked")=="no"){i.hide()}m()};var k=function(){var a=$('[data-section="socialBoxSidebar"]').find('[data-section="color"] input[name="color"]');var e=B();var i=x();if(e["icon"].length==0){$h24.post($h24.slashwebroot+"Page/Communicator",{model:"SocialBox",modelaction:"clearLinks",homepageid:$h24.homepageid,__skip_loading_overlay:true},function(a){})}else{$h24.post($h24.slashwebroot+"Page/Communicator",{model:"SocialBox",modelaction:"saveLinks",homepageid:$h24.homepageid,color:a.val(),icons:i,__skip_loading_overlay:true},function(a){})}};var b=function(){i.data("appearance","sidebar_open");$h24.adminPanel.togglePanel(true);$('[data-action="dragSocialBox"]').hide();$h24.GUI.create("Overlay","socialBoxSettingsOverlay",{opacity:1,zIndex:3997,backgroundColor:"rgba(0, 0, 0, 0)"});a=$h24.GUI.create("SidePanel","socialBoxSettings",{side:"right",slideDelay:500,zIndex:3998});$h24.post($h24.slashwebroot+"Page/Communicator",{model:"SocialBox",modelaction:"renderSettingsMarkup",homepageid:$h24.homepageid},function(e){$(a.content).html(e);r()})};return{init:l,openSettings:b}}();
!function(i,e){"use strict";var s="0.7.3",o="",r="?",n="function",a="undefined",t="object",w="major",l="model",d="name",c="type",p="vendor",m="version",u="architecture",f="console",g="mobile",h="tablet",b="smarttv",v="wearable",x="embedded";var k={extend:function(i,e){for(var s in e){if("browser cpu device engine os".indexOf(s)!==-1&&e[s].length%2===0){i[s]=e[s].concat(i[s])}}return i},has:function(i,e){if(typeof i==="string"){return e.toLowerCase().indexOf(i.toLowerCase())!==-1}},lowerize:function(i){return i.toLowerCase()}};var y={rgx:function(){var i,s=0,o,r,w,l,d,c,p=arguments;while(s<p.length&&!d){var m=p[s],u=p[s+1];if(typeof i===a){i={};for(w in u){l=u[w];if(typeof l===t){i[l[0]]=e}else{i[l]=e}}}o=r=0;while(o<m.length&&!d){d=m[o++].exec(this.getUA());if(!!d){for(w=0;w<u.length;w++){c=d[++r];l=u[w];if(typeof l===t&&l.length>0){if(l.length==2){if(typeof l[1]==n){i[l[0]]=l[1].call(this,c)}else{i[l[0]]=l[1]}}else if(l.length==3){if(typeof l[1]===n&&!(l[1].exec&&l[1].test)){i[l[0]]=c?l[1].call(this,c,l[2]):e}else{i[l[0]]=c?c.replace(l[1],l[2]):e}}else if(l.length==4){i[l[0]]=c?l[3].call(this,c.replace(l[1],l[2])):e}}else{i[l]=c?c:e}}}}s+=2}return i},str:function(i,s){for(var o in s){if(typeof s[o]===t&&s[o].length>0){for(var n=0;n<s[o].length;n++){if(k.has(s[o][n],i)){return o===r?e:o}}}else if(k.has(s[o],i)){return o===r?e:o}}return i}};var A={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:"NT 6.4",RT:"ARM"}}}};var E={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[d,m,w],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[d,"Opera"],m,w],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[d,m,w],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[d,"IE"],m,w],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[d,"Yandex"],m,w],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[d,/_/g," "],m,w],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],[d,m,w],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[d,"Dolphin"],m,w],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[d,"Chrome"],m,w],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[m,w,[d,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[m,w,d],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[d,[w,y.str,A.browser.oldsafari.major],[m,y.str,A.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[d,m,w],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[d,"Netscape"],m,w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[d,m,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[u,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[u,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,p,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[p,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,l,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[p,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,y.str,A.device.amazon.model],[p,"Amazon"],[c,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,p,[c,g]],[/\((ip[honed|\s\w*]+);/i],[l,[p,"Apple"],[c,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,l,[c,g]],[/\(bb10;\s(\w+)/i],[l,[p,"BlackBerry"],[c,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[l,[p,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])/i],[p,l,[c,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,l,[c,f]],[/android.+;\s(shield)\sbuild/i],[l,[p,"Nvidia"],[c,f]],[/(playstation\s[3portablevi]+)/i],[l,[p,"Sony"],[c,f]],[/(sprint\s(\w+))/i],[[p,y.str,A.device.sprint.vendor],[l,y.str,A.device.sprint.model],[c,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,l,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[l,/_/g," "],[c,g]],[/(nexus\s9)/i],[l,[p,"HTC"],[c,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[p,"Microsoft"],[c,f]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,"Microsoft"],[c,g]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[p,"Motorola"],l,[c,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[p,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],l,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],l,[c,g]],[/(samsung);smarttv/i],[p,l,[c,b]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[c,b]],[/sie-(\w+)*/i],[l,[p,"Siemens"],[c,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],l,[c,g]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],[l,[p,"Acer"],[c,h]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],l,[c,h]],[/(lg) netcast\.tv/i],[p,l,[c,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[p,"LG"],[c,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[p,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[p,l,[c,g]],[/((pebble))app\/[\d\.]+\s/i],[p,l,[c,v]],[/android.+;\s(glass)\s\d/i],[l,[p,"Google"],[c,v]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,k.lowerize],p,l]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,m],[/rv\:([\w\.]+).*(gecko)/i],[m,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[m,y.str,A.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[m,y.str,A.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[d,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[d,"Symbian"],m],[/\((series40);/i],[d],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[d,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[d,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[d,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[d,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[d,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[d,m]]};var S=function(e,s){if(!(this instanceof S)){return new S(e,s).getResult()}var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o);var n=s?k.extend(E,s):E;this.getBrowser=function(){return y.rgx.apply(this,n.browser)};this.getCPU=function(){return y.rgx.apply(this,n.cpu)};this.getDevice=function(){return y.rgx.apply(this,n.device)};this.getEngine=function(){return y.rgx.apply(this,n.engine)};this.getOS=function(){return y.rgx.apply(this,n.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return r};this.setUA=function(i){r=i;return this};this.setUA(r)};S.VERSION=s;S.BROWSER={NAME:d,MAJOR:w,VERSION:m};S.CPU={ARCHITECTURE:u};S.DEVICE={MODEL:l,VENDOR:p,TYPE:c,CONSOLE:f,MOBILE:g,SMARTTV:b,TABLET:h,WEARABLE:v,EMBEDDED:x};S.ENGINE={NAME:d,VERSION:m};S.OS={NAME:d,VERSION:m};if(typeof exports!==a){if(typeof module!==a&&module.exports){exports=module.exports=S}exports.UAParser=S}else{if(typeof define===n&&define.amd){define(function(){return S})}else{i.UAParser=S}}var N=i.jQuery||i.Zepto;if(typeof N!==a){var T=new S;N.ua=T.getResult();N.ua.get=function(){return T.getUA()};N.ua.set=function(i){T.setUA(i);var e=T.getResult();for(var s in e){N.ua[s]=e[s]}}}}(this);
h24core.prototype.redirect_manager=function(){function e(e,a){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"RedirectManager",modelaction:"getEditorDialog"},function(i){if(typeof i["statuscode"]!="undefined"){var t=parseInt(i["statuscode"]);i["statuscode"]=t;if(t===0){if(typeof a==="function"){a(i)}else{if(typeof e==="function"){e(i)}}}else{if(typeof e==="function"){e(i)}}}})}function a(){$("#h24_redirect_manager").find("[data-error-message-container], [data-error-message]").addClass("hidden");$("#h24_redirect_manager").find('[data-function="redirect-from"]').removeClass("h24-InputField__danger");$("#h24_redirect_manager").find('[data-function="generic_link"]').removeClass("btn-danger").addClass("btn-default")}function i(){t("error-add-invalid-route")}function t(e){var a=$("#h24_redirect_manager");a.find('[data-error-message-container], [data-error-message][data-function="'+e+'"]').removeClass("hidden");switch(e){case"error-validation-empty-from-address":case"error-add-route-already-exists":case"error-add-invalid-route":a.find('[data-function="redirect-from"]').addClass("h24-InputField__danger");break;case"error-validation-empty-generic-link":a.find('[data-function="generic_link"]').removeClass("btn-default").addClass("btn-danger");break}}function n(){a();var e=$("#h24_redirect_manager");var n=e.find('[data-function="redirect-from"]');var r=n.val();var d=o();var l=false;if(typeof r==="undefined"||r===""){l=true;t("error-validation-empty-from-address")}var f=c(r);if(!f){l=true;i()}if(typeof d.link==="undefined"||d.link===""){l=true;t("error-validation-empty-generic-link")}if(l){return false}return{from_address:r,link:d.link,link_type:d.link_type,link_metadata:d.link_metadata}}function r(e){$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"RedirectManager",modelaction:"removeRedirect",redirect_id:e},function(e){if(e.successful){_()}})}function d(e){var a=e.from_address;var i=e.link;var n=e.link_type;var r=e.link_metadata;$h24.post($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"RedirectManager",modelaction:"addRedirect",route:a,link:i,link_type:n,link_metadata:r},function(e){if(e.successful){_()}else{switch(e.statuscode){case 10:t("error-add-invalid-route");case 11:t("error-add-route-already-exists");break}}})}function o(){var e=$('#h24_redirect_manager [data-function="generic_link"]');var a=e.data("link");var i=e.data("link_type");var t=e.data("link_metadata");return{$genericLink:e,link:a,link_type:i,link_metadata:t}}function l(e){var a=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);return a&&{protocol:a[1],host:a[2],hostname:a[3],port:a[4],pathname:a[5],search:a[6],hash:a[7]}}function c(e){if(e.length<=1){return null}if(e.match(new RegExp("^/[^/].*"))){return e}else{var a=l(e);if(!!a&&!!a.pathname){var i=a.pathname;if(i.length<=1){return null}if(i.match(new RegExp("^/[^/].*"))){return i}}else{var t=e.indexOf("/");if(t===-1){return null}else{var i=e.substring(t);return i}}}return null}function f(){a();$('#h24_redirect_manager [data-function="redirect-from"]').on("blur",function(e){var t=$(this);var n=t.val();if(!!n){var r=c(n);if(!!r){t.val(r);a()}else{i()}}});$('#h24_redirect_manager [data-action="open-page-link-dialog"]').on("click.h24",function(e){e.preventDefault();s()});$('#h24_redirect_manager [data-action="add-redirect"]').on("click.h24",function(e){e.preventDefault();g($(this))});$('#h24_redirect_manager [data-action="remove-route"]').on("click.h24",function(e){e.preventDefault();k($(this))})}function s(){var e=o();if(e.link!=""){var i={link:e.link,link_type:e.link_type,link_metadata:e.link_metadata,hide_target:1,hide_file:1,hide_mailto:1,hide_video:1}}else{var i={hide_target:1,hide_file:1,hide_mailto:1,hide_video:1}}var t=function(i,t){var n=$('#h24_redirect_manager [data-function="selected-page-name"]');if(i=="save"){a();e.$genericLink.data("link",t.link);e.$genericLink.data("link_type",t.link_type);e.$genericLink.data("link_metadata",t.link_metadata);if(t.link_type!=""&&t.link!=""){$h24.post($h24.slashwebroot+"Page/Inline-load/",{model:"DialogManager",modelaction:"get_link_title",link:t.link,link_type:t.link_type,link_metadata:t.link_metadata,homepageid:$h24.homepageid},function(e){if(e!=""){n.text(e)}})}}else if(i=="remove"){e.$genericLink.data("link","");e.$genericLink.data("link_type","");e.$genericLink.data("link_metadata","");n.text("")}$h24.dialogs.h24_generic_linking_dialog.close()};$h24.link.h24coreDialog("redirect",null,"",i,t,{overlayZIndex:6010})}function u(){e(function(e){if(e["statuscode"]===1){$h24.dialog.create("h24_redirect_manager_dialog",e["markup"],{title:$h24.phrase.GUIPhrase("Redirect-Manager","Redirect Manager"),width:860,overlayZIndex:6e3})}f()})}function h(){if($h24.dialogs.h24_redirect_manager_dialog){$h24.dialogs.h24_redirect_manager_dialog.close()}}function m(){h();u()}function _(){e(function(e){if(e["statuscode"]===1){$('#h24_redirect_manager[data-function="RedirectManagerDialog"]').replaceWith(e["markup"]);f()}})}function g(e){var a=n();if(a){d(a)}}function k(e){var a=e.data("params");if(typeof a==="object"){if(!!a.id){var i=parseInt(a.id);if(i>0){r(i)}}}}return{initialize:f,openEditor:u,closeEditor:h,closeOpenEditor:m,refreshEditor:_,openPageLinkDialog:s}}();
h24core.prototype.chat_settings=function(){function t(){}function e(){$h24.get($h24.slashwebroot+"Page/Communicator/",{homepageid:$h24.homepageid,model:"ChatSettings",modelaction:"getDialogMarkup"},function(e){if(e["success"]){var o="h24_chat_settings_dialog";var a={title:"Chat settings",width:860,overlayZIndex:5011};var i=e["markup"];$h24.dialog.create(o,i,a);t()}})}function o(){if($h24.dialogs.h24_chat_settings_dialog){$h24.dialogs.h24_chat_settings_dialog.close()}}function a(){o();e()}function i(){var t=$("#homepage_chatsettings_htmlcode").val();$("#homepage_chatsettings_msg .hidden").hide();$h24.post($h24.publicdir+"../Page/Communicator",{homepageid:$h24.homepageid,model:"ChatSettings",modelaction:"save_chat_settings",chat_code:t},function(t){$("#homepage_chatsettings_msg"+t["statuscode"]).show()})}return{initialize:t,openDialog:e,closeDialog:o,closeOpenDialog:a,save:i}}();
(function(){dust.register("PageBackgroundManager-userImage",body_0);function body_0(chk,ctx){return chk.write("<figure data-function=\"previewItem\" data-action=\"choosePreviewItem\" data-type=\"user-image\" data-pictureid=\"").reference(ctx.get("pictureid"),ctx,"h").write("\" data-full-url=\"").reference(ctx.get("fullUrl"),ctx,"h").write("\" data-disabled-preview=\"").exists(ctx.get("disabledPreview"),ctx,{"else":body_1,"block":body_2},null).write("\" data-is-revert-background=\"").exists(ctx.get("isRevertBackground"),ctx,{"else":body_3,"block":body_4},null).write("\" class=\"h24-PageBackgroundManager-previewItem ").exists(ctx.get("isCurrent"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("isChosen"),ctx,{"block":body_6},null).write("\" ><img src=\"").reference(ctx.get("fullUrl"),ctx,"h").write("\" class=\"h24-PageBackgroundManager-previewItemImage\" /></figure>");}function body_1(chk,ctx){return chk.write("false");}function body_2(chk,ctx){return chk.write("true");}function body_3(chk,ctx){return chk.write("false");}function body_4(chk,ctx){return chk.write("true");}function body_5(chk,ctx){return chk.write("h24-PageBackgroundManager-previewItem__current");}function body_6(chk,ctx){return chk.write("h24-PageBackgroundManager-previewItem__chosen");}return body_0;})();
(function(){dust.register("PageBackgroundManager-userFile",body_0);function body_0(chk,ctx){return chk.write("<figure data-function=\"previewItem\" data-action=\"choosePreviewItem\" data-type=\"user-file\" data-user-file-id=\"").reference(ctx.get("userFileId"),ctx,"h").write("\" data-full-url=\"").reference(ctx.get("fullUrl"),ctx,"h").write("\" data-disabled-preview=\"").exists(ctx.get("disabledPreview"),ctx,{"else":body_1,"block":body_2},null).write("\" data-is-revert-background=\"").exists(ctx.get("isRevertBackground"),ctx,{"else":body_3,"block":body_4},null).write("\" class=\"h24-PageBackgroundManager-previewItem ").exists(ctx.get("isCurrent"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("isChosen"),ctx,{"block":body_6},null).write("\" ><img src=\"").reference(ctx.get("fullUrl"),ctx,"h").write("\" class=\"h24-PageBackgroundManager-previewItemImage\" /><figcaption class=\"h24-PageBackgroundManager-previewItemDescription\">").reference(ctx.get("name"),ctx,"h").write("</figcaption></figure>");}function body_1(chk,ctx){return chk.write("false");}function body_2(chk,ctx){return chk.write("true");}function body_3(chk,ctx){return chk.write("false");}function body_4(chk,ctx){return chk.write("true");}function body_5(chk,ctx){return chk.write("h24-PageBackgroundManager-previewItem__current");}function body_6(chk,ctx){return chk.write("h24-PageBackgroundManager-previewItem__chosen");}return body_0;})();
(function(){dust.register("SidePanel",body_0);function body_0(chk,ctx){return chk.write("<div class=\"h24-SidePanel ").helper("select",ctx,{"block":body_1},{"key":ctx.get("side")}).write(" \">").exists(ctx.get("controls"),ctx,{"else":body_6,"block":body_7},null).write("</div>");}function body_1(chk,ctx){return chk.helper("eq",ctx,{"block":body_2},{"value":"left"}).helper("eq",ctx,{"block":body_4},{"value":"right"});}function body_2(chk,ctx){return chk.write("h24-SidePanel-left ").exists(ctx.get("startVisible"),ctx,{"block":body_3},null);}function body_3(chk,ctx){return chk.write("h24-SidePanel-left__visible");}function body_4(chk,ctx){return chk.write("h24-SidePanel-right").exists(ctx.get("startVisible"),ctx,{"block":body_5},null);}function body_5(chk,ctx){return chk.write("h24-SidePanel-right__visible");}function body_6(chk,ctx){return chk.reference(ctx.get("content"),ctx,"h",["s"]);}function body_7(chk,ctx){return chk.write("<div class=\"h24-SidePanel-container\"><div class=\"h24-SidePanel-scrollable\">").reference(ctx.get("content"),ctx,"h",["s"]).write("</div></div><div class=\"h24-SidePanel-controls\">").section(ctx.get("controls"),ctx,{"block":body_8},null).write("</div>").exists(ctx.get("handle"),ctx,{"block":body_9},null);}function body_8(chk,ctx){return chk.reference(ctx.getPath(true,[]),ctx,"h",["s"]);}function body_9(chk,ctx){return chk.write("<div class=\"h24-SidePanel-handle\"></div>");}return body_0;})();
(function(){dust.register("FullPanel",body_0);function body_0(chk,ctx){return chk.write("<div class=\"h24-FullPanel ").helper("select",ctx,{"block":body_1},{"key":ctx.get("side")}).write(" \">").reference(ctx.get("content"),ctx,"h",["s"]).write("</div>");}function body_1(chk,ctx){return chk.helper("eq",ctx,{"block":body_2},{"value":"left"}).helper("eq",ctx,{"block":body_4},{"value":"right"});}function body_2(chk,ctx){return chk.write("h24-FullPanel-left ").exists(ctx.get("startVisible"),ctx,{"block":body_3},null);}function body_3(chk,ctx){return chk.write("h24-FullPanel-left__visible");}function body_4(chk,ctx){return chk.write("h24-FullPanel-right").exists(ctx.get("startVisible"),ctx,{"block":body_5},null);}function body_5(chk,ctx){return chk.write("h24-FullPanel-right__visible");}return body_0;})();
(function(){dust.register("Overlay",body_0);function body_0(chk,ctx){return chk.write("<div class=\"h24-Overlay\"></div>");}return body_0;})();
(function(){dust.register("Button-container",body_0);function body_0(chk,ctx){return chk.write("<div class=\"h24-Button-container h24-Button-container__").block(ctx.getBlock("align"),ctx,{"block":body_1},null).write("Alignment\">").block(ctx.getBlock("buttons"),ctx,{"block":body_2},null).write("</div>");}function body_1(chk,ctx){return chk.write("left");}function body_2(chk,ctx){return chk;}return body_0;})();
(function(){dust.register("Button",body_0);function body_0(chk,ctx){return chk.write("<button ").exists(ctx.get("action"),ctx,{"block":body_1},null).write(" ").exists(ctx.get("function"),ctx,{"block":body_2},null).write(" class=\"btn").exists(ctx.get("type"),ctx,{"block":body_3},null).exists(ctx.get("size"),ctx,{"block":body_14},null).write("\"").exists(ctx.get("disabled"),ctx,{"block":body_19},null).write(">").exists(ctx.get("icon"),ctx,{"block":body_20},null).reference(ctx.get("text"),ctx,"h").write("</button>");}function body_1(chk,ctx){return chk.write("data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_2(chk,ctx){return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_3(chk,ctx){return chk.helper("select",ctx,{"block":body_4},{"key":ctx.get("type")});}function body_4(chk,ctx){return chk.helper("eq",ctx,{"block":body_5},{"value":"neutral"}).helper("eq",ctx,{"block":body_6},{"value":"primary"}).helper("eq",ctx,{"block":body_7},{"value":"info"}).helper("eq",ctx,{"block":body_8},{"value":"inverse"}).helper("eq",ctx,{"block":body_9},{"value":"warning"}).helper("eq",ctx,{"block":body_10},{"value":"danger"}).helper("eq",ctx,{"block":body_11},{"value":"success"}).helper("eq",ctx,{"block":body_12},{"value":"settingsPrimary"}).helper("eq",ctx,{"block":body_13},{"value":"link"});}function body_5(chk,ctx){return chk.write(" btn-neutral");}function body_6(chk,ctx){return chk.write(" btn-primary");}function body_7(chk,ctx){return chk.write(" btn-info");}function body_8(chk,ctx){return chk.write(" btn-inverse");}function body_9(chk,ctx){return chk.write(" btn-warning");}function body_10(chk,ctx){return chk.write(" btn-danger");}function body_11(chk,ctx){return chk.write(" btn-success");}function body_12(chk,ctx){return chk.write(" btn-settingsPrimary");}function body_13(chk,ctx){return chk.write(" btn-link");}function body_14(chk,ctx){return chk.helper("select",ctx,{"block":body_15},{"key":ctx.get("size")});}function body_15(chk,ctx){return chk.helper("eq",ctx,{"block":body_16},{"value":"small"}).helper("eq",ctx,{"block":body_17},{"value":"mini"}).helper("eq",ctx,{"block":body_18},{"value":"large"});}function body_16(chk,ctx){return chk.write(" btn-small");}function body_17(chk,ctx){return chk.write(" btn-mini");}function body_18(chk,ctx){return chk.write(" btn-large");}function body_19(chk,ctx){return chk.write(" disabled");}function body_20(chk,ctx){return chk.write("<span data-icon=\"&#x").reference(ctx.get("icon"),ctx,"h").write(";\" aria-hidden=\"true\" class=\"h24_icon_right_space\"></span>");}return body_0;})();
(function(){dust.register("SettingList",body_0);function body_0(chk,ctx){return chk.write("<dl class=\"h24-SettingList h24-SettingList__").block(ctx.getBlock("presentationModifier"),ctx,{"block":body_1},null).write("\">").block(ctx.getBlock("settings"),ctx,{"block":body_2},null).write("</dl>");}function body_1(chk,ctx){return chk.write("halfWidth");}function body_2(chk,ctx){return chk;}return body_0;})();
(function(){dust.register("SettingList-setting",body_0);function body_0(chk,ctx){return chk.write("<dt class=\"h24-SettingsList-title\">").block(ctx.getBlock("title"),ctx,{"block":body_1},null).write("</dt><!----><dd class=\"h24-SettingsList-setting\">").block(ctx.getBlock("setting"),ctx,{"block":body_2},null).write("</dd>");}function body_1(chk,ctx){return chk.write("title");}function body_2(chk,ctx){return chk.write("setting");}return body_0;})();
(function(){dust.register("SettingList-username",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label for=\"").reference(ctx.get("labelId"),ctx,"h").write("\">").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<input ").exists(ctx.get("function"),ctx,{"block":body_3},null).write(" ").exists(ctx.get("action"),ctx,{"block":body_4},null).write(" data-holder type=\"text\" value=\"").reference(ctx.get("value"),ctx,"h").write("\" placeholder=\"").reference(ctx.get("placeholder"),ctx,"h").write("\" class=\"h24-InputField\" ").exists(ctx.get("labelId"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("disabled"),ctx,{"block":body_6},null).write(" />");}function body_3(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_4(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_5(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("id=\"").reference(ctx.get("labelId"),ctx,"h").write("\"");}function body_6(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("disabled");}return body_0;})();
(function(){dust.register("SettingList-text",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label for=\"").reference(ctx.get("labelId"),ctx,"h").write("\">").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<input ").exists(ctx.get("function"),ctx,{"block":body_3},null).write(" ").exists(ctx.get("action"),ctx,{"block":body_4},null).write(" data-holder type=\"text\" value=\"").reference(ctx.get("value"),ctx,"h").write("\" placeholder=\"").reference(ctx.get("placeholder"),ctx,"h").write("\" class=\"h24-InputField\" ").exists(ctx.get("labelId"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("disabled"),ctx,{"block":body_6},null).write(" />");}function body_3(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_4(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_5(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("id=\"").reference(ctx.get("labelId"),ctx,"h").write("\"");}function body_6(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("disabled");}return body_0;})();
(function(){dust.register("SettingList-email",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label for=\"").reference(ctx.get("labelId"),ctx,"h").write("\">").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<input ").exists(ctx.get("function"),ctx,{"block":body_3},null).write(" ").exists(ctx.get("action"),ctx,{"block":body_4},null).write(" data-holder type=\"email\" value=\"").reference(ctx.get("value"),ctx,"h").write("\" placeholder=\"").reference(ctx.get("placeholder"),ctx,"h").write("\" class=\"h24-InputField\" ").exists(ctx.get("labelId"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("disabled"),ctx,{"block":body_6},null).write(" />");}function body_3(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_4(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_5(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("id=\"").reference(ctx.get("labelId"),ctx,"h").write("\"");}function body_6(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("disabled");}return body_0;})();
(function(){dust.register("SettingList-readOnlyWithButton",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label>").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<div style=\"display:flex;\"><input ").exists(ctx.get("function"),ctx,{"block":body_3},null).write(" type=\"text\" value=\"").reference(ctx.get("readOnlyText"),ctx,"h").write("\" class=\"form-control h24-InputField\" disabled style=\"flex:1;\" /><button class=\"btn btn-mini\" ").exists(ctx.get("action"),ctx,{"block":body_4},null).write(">").reference(ctx.get("buttonText"),ctx,"h").write("</button></div>");}function body_3(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_4(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write(" data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}return body_0;})();
(function(){dust.register("SettingList-password",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label for=\"").reference(ctx.get("labelId"),ctx,"h").write("\">").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<input ").exists(ctx.get("function"),ctx,{"block":body_3},null).write(" ").exists(ctx.get("action"),ctx,{"block":body_4},null).write(" data-holder type=\"password\" value=\"").reference(ctx.get("value"),ctx,"h").write("\" placeholder=\"").reference(ctx.get("placeholder"),ctx,"h").write("\" class=\"h24-InputField\" ").exists(ctx.get("labelId"),ctx,{"block":body_5},null).write(" ").exists(ctx.get("disabled"),ctx,{"block":body_6},null).write(" />");}function body_3(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_4(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_5(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("id=\"").reference(ctx.get("labelId"),ctx,"h").write("\"");}function body_6(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("disabled");}return body_0;})();
(function(){dust.register("SettingList-switch",body_0);var blocks={'title':body_1,'setting':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-setting",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("<label for=\"").reference(ctx.get("labelId"),ctx,"h").write("\">").reference(ctx.get("title"),ctx,"h").write("</label>");}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SwitchControl",ctx,{"id":ctx.get("labelId"),"checked":ctx.get("value")});}return body_0;})();
(function(){dust.register("SwitchControl",body_0);function body_0(chk,ctx){return chk.write("<div class=\"h24-SwitchControl\" data-holder data-custom-data-holder=\"SwitchControl\" ").exists(ctx.get("function"),ctx,{"block":body_1},null).write("><input type=\"checkbox\"").exists(ctx.get("checked"),ctx,{"block":body_2},null).exists(ctx.get("id"),ctx,{"block":body_3},null).exists(ctx.get("action"),ctx,{"block":body_4},null).write(" class=\"h24-SwitchControl-state\"><div class=\"h24-SwitchControl-slider\"><span class=\"h24-SwitchControl-labelOn\">").reference(ctx.get("onText"),ctx,"h").write("</span><span class=\"h24-SwitchControl-handle\"><span class=\"h24-SwitchControl-indicator\"></span></span><span class=\"h24-SwitchControl-labelOff\">").reference(ctx.get("offText"),ctx,"h").write("</span></div></div>").exists(ctx.get("label"),ctx,{"block":body_5},null);}function body_1(chk,ctx){return chk.write("data-function=\"").reference(ctx.get("function"),ctx,"h").write("\"");}function body_2(chk,ctx){return chk.write(" checked");}function body_3(chk,ctx){return chk.write(" id=\"").reference(ctx.get("id"),ctx,"h").write("\"");}function body_4(chk,ctx){return chk.write(" data-action=\"").reference(ctx.get("action"),ctx,"h").write("\"");}function body_5(chk,ctx){return chk.write("<label class=\"h24-SwitchControl-description\"").exists(ctx.get("id"),ctx,{"block":body_6},null).write(">").reference(ctx.get("label"),ctx,"h").write("</label>");}function body_6(chk,ctx){return chk.write(" for=\"").reference(ctx.get("id"),ctx,"h").write("\"");}return body_0;})();
(function(){dust.register("Composite-CloseAccountDialog",body_0);function body_0(chk,ctx){return chk.write("<p>").reference(ctx.get("information"),ctx,"h",["s"]).write("</p>").partial("Settings-table",ctx,{"items":ctx.get("parameters")}).section(ctx.get("statusMessages"),ctx,{"block":body_1},null).partial("Button-container",ctx,null);}function body_1(chk,ctx){return chk.partial("StatusMessage",ctx,null);}return body_0;})();
(function(){dust.register("SocialBox",body_0);function body_0(chk,ctx){return chk.exists(ctx.getPath(false,["icon","url"]),ctx,{"block":body_1},null);}function body_1(chk,ctx){return chk.write("<span class=\"h24-socialBox-headerPanel-icon ").helper("eq",ctx,{"else":body_2,"block":body_3},{"key":ctx.get("color"),"value":"dark"}).write("\" ").helper("select",ctx,{"block":body_4},{"key":ctx.getPath(false,["icon","style"])}).write(" aria-hidden=\"true\"></span>");}function body_2(chk,ctx){return chk.write(" h24-socialBox-headerPanel-icon__light");}function body_3(chk,ctx){return chk.write(" h24-socialBox-headerPanel-icon__dark ");}function body_4(chk,ctx){return chk.helper("eq",ctx,{"block":body_5},{"value":"square"}).helper("eq",ctx,{"block":body_6},{"value":"circle"});}function body_5(chk,ctx){return chk.write("data-icon=\"").reference(ctx.getPath(false,["icon","square"]),ctx,"h",["s"]).write("\"");}function body_6(chk,ctx){return chk.write("data-icon=\"").reference(ctx.getPath(false,["icon","circle"]),ctx,"h",["s"]).write("\"");}return body_0;})();
(function(){dust.register("Composite-AccountSettings",body_0);function body_0(chk,ctx){return chk.write("<h2>").reference(ctx.get("diskSpaceHeading"),ctx,"h").write("</h2><div data-function=\"diskSpaceVisualisation\" class=\"h24-Progress ").exists(ctx.get("progressBarLoading"),ctx,{"block":body_1},null).write("\"><div data-function=\"usedSpace\" class=\"h24-Progress-bar h24-Progress-bar__warning\" style=\"width:").reference(ctx.get("usedSpacePercentage"),ctx,"h").write("%\"></div><div data-function=\"freeSpace\" class=\"h24-Progress-bar h24-Progress-bar__success\" style=\"width:").reference(ctx.get("freeSpacePercentage"),ctx,"h").write("%\"></div></div><p data-function=\"diskSpaceText\">").reference(ctx.get("diskSpaceText"),ctx,"h").write("</p>").partial("Settings-table",ctx,{"items":ctx.get("accountItems")}).partial("Settings-table",ctx,{"items":ctx.get("confirmItems")}).section(ctx.get("statusMessages"),ctx,{"block":body_2},null).partial("Button-container",ctx,null);}function body_1(chk,ctx){return chk.write("h24-Progress__striped h24-Progress__active");}function body_2(chk,ctx){return chk.partial("StatusMessage",ctx,null);}return body_0;})();
(function(){dust.register("AccountSettings",body_0);function body_0(chk,ctx){return chk.write("<h2 class=\"h24-SettingList-heading\">").reference(ctx.get("diskSpaceHeading"),ctx,"h").write("</h2><dd><div data-function=\"diskSpaceVisualisation\" class=\"h24-Progress ").exists(ctx.get("progressBarLoading"),ctx,{"block":body_1},null).write("\"><div data-function=\"usedSpace\" class=\"h24-Progress-bar h24-Progress-bar__warning\" style=\"width:").reference(ctx.get("usedSpacePercentage"),ctx,"h").write("%\"></div><div data-function=\"freeSpace\" class=\"h24-Progress-bar h24-Progress-bar__success\" style=\"width:").reference(ctx.get("freeSpacePercentage"),ctx,"h").write("%\"></div></div><p data-function=\"diskSpaceText\" style=\"text-align:center;\">").reference(ctx.get("diskSpaceText"),ctx,"h").write("</p></dd><h2 class=\"h24-SettingList-heading\">").reference(ctx.get("accountSettingsHeading"),ctx,"h").write("</h2>").partial("AccountSettings-account",ctx,null).write("<h2 class=\"h24-SettingList-heading\">").reference(ctx.get("confirmChangesHeading"),ctx,"h").write("</h2>").partial("AccountSettings-confirmChanges",ctx,null).partial("AccountSettings-buttons",ctx,null);}function body_1(chk,ctx){return chk.write("h24-Progress__striped h24-Progress__active");}return body_0;})();
(function(){dust.register("AccountSettings-account",body_0);var blocks={'settings':body_1,'presentationModifier':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-username",ctx.rebase(ctx.getPath(false,["settings","username"])),null).partial("SettingList-email",ctx.rebase(ctx.getPath(false,["settings","email"])),null).partial("SettingList-readOnlyWithButton",ctx.rebase(ctx.getPath(false,["settings","altEmail"])),null).partial("SettingList-password",ctx.rebase(ctx.getPath(false,["settings","newPassword"])),null).partial("SettingList-password",ctx.rebase(ctx.getPath(false,["settings","repeatedNewPassword"])),null);}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("fullWidth");}return body_0;})();
(function(){dust.register("AccountSettings-buttons",body_0);var blocks={'buttons':body_1,'align':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("Button-container",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("Button",ctx.rebase(ctx.getPath(false,["buttons","secondaryButton"])),{"type":"inverse"}).partial("Button",ctx.rebase(ctx.getPath(false,["buttons","primaryButton"])),{"type":"primary"});}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("right");}return body_0;})();
(function(){dust.register("AccountSettings-confirmChanges",body_0);var blocks={'settings':body_1,'presentationModifier':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-password",ctx.rebase(ctx.getPath(false,["settings","confirmChangesPassword"])),null);}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("fullWidth");}return body_0;})();
(function(){dust.register("CloseAccount",body_0);function body_0(chk,ctx){return chk.write("<p>").reference(ctx.get("information"),ctx,"h",["s"]).write("</p>").partial("CloseAccount-controls",ctx,null).partial("CloseAccount-buttons",ctx,null);}return body_0;})();
(function(){dust.register("CloseAccount-controls",body_0);var blocks={'settings':body_1,'presentationModifier':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("SettingList-password",ctx.rebase(ctx.get("password")),null).partial("SettingList-switch",ctx.rebase(ctx.get("confirmation")),null);}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("halfWidth");}return body_0;})();
(function(){dust.register("CloseAccount-buttons",body_0);var blocks={'buttons':body_1,'align':body_2};function body_0(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("Button-container",ctx,null);}function body_1(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.partial("Button",ctx.rebase(ctx.getPath(false,["buttons","secondaryButton"])),{"type":"inverse"}).partial("Button",ctx.rebase(ctx.getPath(false,["buttons","primaryButton"])),{"type":"primary"});}function body_2(chk,ctx){ctx=ctx.shiftBlocks(blocks);return chk.write("right");}return body_0;})();
